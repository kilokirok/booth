function Ly(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const a in i)if(a!=="default"&&!(a in t)){const l=Object.getOwnPropertyDescriptor(i,a);l&&Object.defineProperty(t,a,l.get?l:{enumerable:!0,get:()=>i[a]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const h of l.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function n(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(a){if(a.ep)return;a.ep=!0;const l=n(a);fetch(a.href,l)}})();var Eo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ky(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wp={exports:{}},Nc={},yp={exports:{}},Ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var va=Symbol.for("react.element"),Py=Symbol.for("react.portal"),By=Symbol.for("react.fragment"),Fy=Symbol.for("react.strict_mode"),Uy=Symbol.for("react.profiler"),zy=Symbol.for("react.provider"),jy=Symbol.for("react.context"),Hy=Symbol.for("react.forward_ref"),Vy=Symbol.for("react.suspense"),Wy=Symbol.for("react.memo"),Gy=Symbol.for("react.lazy"),U1=Symbol.iterator;function Yy(t){return t===null||typeof t!="object"?null:(t=U1&&t[U1]||t["@@iterator"],typeof t=="function"?t:null)}var Cp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ep=Object.assign,_p={};function no(t,e,n){this.props=t,this.context=e,this.refs=_p,this.updater=n||Cp}no.prototype.isReactComponent={};no.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};no.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ap(){}Ap.prototype=no.prototype;function kh(t,e,n){this.props=t,this.context=e,this.refs=_p,this.updater=n||Cp}var Ph=kh.prototype=new Ap;Ph.constructor=kh;Ep(Ph,no.prototype);Ph.isPureReactComponent=!0;var z1=Array.isArray,Ip=Object.prototype.hasOwnProperty,Bh={current:null},vp={key:!0,ref:!0,__self:!0,__source:!0};function Sp(t,e,n){var i,a={},l=null,h=null;if(e!=null)for(i in e.ref!==void 0&&(h=e.ref),e.key!==void 0&&(l=""+e.key),e)Ip.call(e,i)&&!vp.hasOwnProperty(i)&&(a[i]=e[i]);var x=arguments.length-2;if(x===1)a.children=n;else if(1<x){for(var m=Array(x),g=0;g<x;g++)m[g]=arguments[g+2];a.children=m}if(t&&t.defaultProps)for(i in x=t.defaultProps,x)a[i]===void 0&&(a[i]=x[i]);return{$$typeof:va,type:t,key:l,ref:h,props:a,_owner:Bh.current}}function Xy(t,e){return{$$typeof:va,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fh(t){return typeof t=="object"&&t!==null&&t.$$typeof===va}function Qy(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var j1=/\/+/g;function Mu(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Qy(""+t.key):e.toString(36)}function wl(t,e,n,i,a){var l=typeof t;(l==="undefined"||l==="boolean")&&(t=null);var h=!1;if(t===null)h=!0;else switch(l){case"string":case"number":h=!0;break;case"object":switch(t.$$typeof){case va:case Py:h=!0}}if(h)return h=t,a=a(h),t=i===""?"."+Mu(h,0):i,z1(a)?(n="",t!=null&&(n=t.replace(j1,"$&/")+"/"),wl(a,e,n,"",function(g){return g})):a!=null&&(Fh(a)&&(a=Xy(a,n+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(j1,"$&/")+"/")+t)),e.push(a)),1;if(h=0,i=i===""?".":i+":",z1(t))for(var x=0;x<t.length;x++){l=t[x];var m=i+Mu(l,x);h+=wl(l,e,n,m,a)}else if(m=Yy(t),typeof m=="function")for(t=m.call(t),x=0;!(l=t.next()).done;)l=l.value,m=i+Mu(l,x++),h+=wl(l,e,n,m,a);else if(l==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return h}function $a(t,e,n){if(t==null)return t;var i=[],a=0;return wl(t,i,"","",function(l){return e.call(n,l,a++)}),i}function Ky(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var on={current:null},yl={transition:null},Zy={ReactCurrentDispatcher:on,ReactCurrentBatchConfig:yl,ReactCurrentOwner:Bh};function Tp(){throw Error("act(...) is not supported in production builds of React.")}Ne.Children={map:$a,forEach:function(t,e,n){$a(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return $a(t,function(){e++}),e},toArray:function(t){return $a(t,function(e){return e})||[]},only:function(t){if(!Fh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Ne.Component=no;Ne.Fragment=By;Ne.Profiler=Uy;Ne.PureComponent=kh;Ne.StrictMode=Fy;Ne.Suspense=Vy;Ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zy;Ne.act=Tp;Ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Ep({},t.props),a=t.key,l=t.ref,h=t._owner;if(e!=null){if(e.ref!==void 0&&(l=e.ref,h=Bh.current),e.key!==void 0&&(a=""+e.key),t.type&&t.type.defaultProps)var x=t.type.defaultProps;for(m in e)Ip.call(e,m)&&!vp.hasOwnProperty(m)&&(i[m]=e[m]===void 0&&x!==void 0?x[m]:e[m])}var m=arguments.length-2;if(m===1)i.children=n;else if(1<m){x=Array(m);for(var g=0;g<m;g++)x[g]=arguments[g+2];i.children=x}return{$$typeof:va,type:t.type,key:a,ref:l,props:i,_owner:h}};Ne.createContext=function(t){return t={$$typeof:jy,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zy,_context:t},t.Consumer=t};Ne.createElement=Sp;Ne.createFactory=function(t){var e=Sp.bind(null,t);return e.type=t,e};Ne.createRef=function(){return{current:null}};Ne.forwardRef=function(t){return{$$typeof:Hy,render:t}};Ne.isValidElement=Fh;Ne.lazy=function(t){return{$$typeof:Gy,_payload:{_status:-1,_result:t},_init:Ky}};Ne.memo=function(t,e){return{$$typeof:Wy,type:t,compare:e===void 0?null:e}};Ne.startTransition=function(t){var e=yl.transition;yl.transition={};try{t()}finally{yl.transition=e}};Ne.unstable_act=Tp;Ne.useCallback=function(t,e){return on.current.useCallback(t,e)};Ne.useContext=function(t){return on.current.useContext(t)};Ne.useDebugValue=function(){};Ne.useDeferredValue=function(t){return on.current.useDeferredValue(t)};Ne.useEffect=function(t,e){return on.current.useEffect(t,e)};Ne.useId=function(){return on.current.useId()};Ne.useImperativeHandle=function(t,e,n){return on.current.useImperativeHandle(t,e,n)};Ne.useInsertionEffect=function(t,e){return on.current.useInsertionEffect(t,e)};Ne.useLayoutEffect=function(t,e){return on.current.useLayoutEffect(t,e)};Ne.useMemo=function(t,e){return on.current.useMemo(t,e)};Ne.useReducer=function(t,e,n){return on.current.useReducer(t,e,n)};Ne.useRef=function(t){return on.current.useRef(t)};Ne.useState=function(t){return on.current.useState(t)};Ne.useSyncExternalStore=function(t,e,n){return on.current.useSyncExternalStore(t,e,n)};Ne.useTransition=function(){return on.current.useTransition()};Ne.version="18.3.1";yp.exports=Ne;var ce=yp.exports;const Et=ky(ce),qy=Ly({__proto__:null,default:Et},[ce]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jy=ce,$y=Symbol.for("react.element"),eC=Symbol.for("react.fragment"),tC=Object.prototype.hasOwnProperty,nC=Jy.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rC={key:!0,ref:!0,__self:!0,__source:!0};function Np(t,e,n){var i,a={},l=null,h=null;n!==void 0&&(l=""+n),e.key!==void 0&&(l=""+e.key),e.ref!==void 0&&(h=e.ref);for(i in e)tC.call(e,i)&&!rC.hasOwnProperty(i)&&(a[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)a[i]===void 0&&(a[i]=e[i]);return{$$typeof:$y,type:t,key:l,ref:h,props:a,_owner:nC.current}}Nc.Fragment=eC;Nc.jsx=Np;Nc.jsxs=Np;wp.exports=Nc;var se=wp.exports,xf={},Rp={exports:{}},Ln={},Mp={exports:{}},bp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(te,fe){var pe=te.length;te.push(fe);e:for(;0<pe;){var Qe=pe-1>>>1,Re=te[Qe];if(0<a(Re,fe))te[Qe]=fe,te[pe]=Re,pe=Qe;else break e}}function n(te){return te.length===0?null:te[0]}function i(te){if(te.length===0)return null;var fe=te[0],pe=te.pop();if(pe!==fe){te[0]=pe;e:for(var Qe=0,Re=te.length,ln=Re>>>1;Qe<ln;){var tt=2*(Qe+1)-1,Ti=te[tt],ae=tt+1,Hr=te[ae];if(0>a(Ti,pe))ae<Re&&0>a(Hr,Ti)?(te[Qe]=Hr,te[ae]=pe,Qe=ae):(te[Qe]=Ti,te[tt]=pe,Qe=tt);else if(ae<Re&&0>a(Hr,pe))te[Qe]=Hr,te[ae]=pe,Qe=ae;else break e}}return fe}function a(te,fe){var pe=te.sortIndex-fe.sortIndex;return pe!==0?pe:te.id-fe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var h=Date,x=h.now();t.unstable_now=function(){return h.now()-x}}var m=[],g=[],y=1,C=null,I=3,R=!1,b=!1,L=!1,F=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function M(te){for(var fe=n(g);fe!==null;){if(fe.callback===null)i(g);else if(fe.startTime<=te)i(g),fe.sortIndex=fe.expirationTime,e(m,fe);else break;fe=n(g)}}function U(te){if(L=!1,M(te),!b)if(n(m)!==null)b=!0,et(q);else{var fe=n(g);fe!==null&&ge(U,fe.startTime-te)}}function q(te,fe){b=!1,L&&(L=!1,O(J),J=-1),R=!0;var pe=I;try{for(M(fe),C=n(m);C!==null&&(!(C.expirationTime>fe)||te&&!_e());){var Qe=C.callback;if(typeof Qe=="function"){C.callback=null,I=C.priorityLevel;var Re=Qe(C.expirationTime<=fe);fe=t.unstable_now(),typeof Re=="function"?C.callback=Re:C===n(m)&&i(m),M(fe)}else i(m);C=n(m)}if(C!==null)var ln=!0;else{var tt=n(g);tt!==null&&ge(U,tt.startTime-fe),ln=!1}return ln}finally{C=null,I=pe,R=!1}}var K=!1,j=null,J=-1,W=5,we=-1;function _e(){return!(t.unstable_now()-we<W)}function ue(){if(j!==null){var te=t.unstable_now();we=te;var fe=!0;try{fe=j(!0,te)}finally{fe?ve():(K=!1,j=null)}}else K=!1}var ve;if(typeof N=="function")ve=function(){N(ue)};else if(typeof MessageChannel<"u"){var ze=new MessageChannel,V=ze.port2;ze.port1.onmessage=ue,ve=function(){V.postMessage(null)}}else ve=function(){F(ue,0)};function et(te){j=te,K||(K=!0,ve())}function ge(te,fe){J=F(function(){te(t.unstable_now())},fe)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(te){te.callback=null},t.unstable_continueExecution=function(){b||R||(b=!0,et(q))},t.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<te?Math.floor(1e3/te):5},t.unstable_getCurrentPriorityLevel=function(){return I},t.unstable_getFirstCallbackNode=function(){return n(m)},t.unstable_next=function(te){switch(I){case 1:case 2:case 3:var fe=3;break;default:fe=I}var pe=I;I=fe;try{return te()}finally{I=pe}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(te,fe){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var pe=I;I=te;try{return fe()}finally{I=pe}},t.unstable_scheduleCallback=function(te,fe,pe){var Qe=t.unstable_now();switch(typeof pe=="object"&&pe!==null?(pe=pe.delay,pe=typeof pe=="number"&&0<pe?Qe+pe:Qe):pe=Qe,te){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=pe+Re,te={id:y++,callback:fe,priorityLevel:te,startTime:pe,expirationTime:Re,sortIndex:-1},pe>Qe?(te.sortIndex=pe,e(g,te),n(m)===null&&te===n(g)&&(L?(O(J),J=-1):L=!0,ge(U,pe-Qe))):(te.sortIndex=Re,e(m,te),b||R||(b=!0,et(q))),te},t.unstable_shouldYield=_e,t.unstable_wrapCallback=function(te){var fe=I;return function(){var pe=I;I=fe;try{return te.apply(this,arguments)}finally{I=pe}}}})(bp);Mp.exports=bp;var iC=Mp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sC=ce,Dn=iC;function X(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Op=new Set,$o={};function is(t,e){Gs(t,e),Gs(t+"Capture",e)}function Gs(t,e){for($o[t]=e,t=0;t<e.length;t++)Op.add(e[t])}var Dr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),wf=Object.prototype.hasOwnProperty,oC=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,H1={},V1={};function aC(t){return wf.call(V1,t)?!0:wf.call(H1,t)?!1:oC.test(t)?V1[t]=!0:(H1[t]=!0,!1)}function lC(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cC(t,e,n,i){if(e===null||typeof e>"u"||lC(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function an(t,e,n,i,a,l,h){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=l,this.removeEmptyString=h}var Yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Yt[t]=new an(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Yt[e]=new an(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Yt[t]=new an(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Yt[t]=new an(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Yt[t]=new an(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Yt[t]=new an(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Yt[t]=new an(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Yt[t]=new an(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Yt[t]=new an(t,5,!1,t.toLowerCase(),null,!1,!1)});var Uh=/[\-:]([a-z])/g;function zh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Uh,zh);Yt[e]=new an(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Uh,zh);Yt[e]=new an(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Uh,zh);Yt[e]=new an(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Yt[t]=new an(t,1,!1,t.toLowerCase(),null,!1,!1)});Yt.xlinkHref=new an("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Yt[t]=new an(t,1,!1,t.toLowerCase(),null,!0,!0)});function jh(t,e,n,i){var a=Yt.hasOwnProperty(e)?Yt[e]:null;(a!==null?a.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cC(e,n,a,i)&&(n=null),i||a===null?aC(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):a.mustUseProperty?t[a.propertyName]=n===null?a.type===3?!1:"":n:(e=a.attributeName,i=a.attributeNamespace,n===null?t.removeAttribute(e):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var zr=sC.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,el=Symbol.for("react.element"),Es=Symbol.for("react.portal"),_s=Symbol.for("react.fragment"),Hh=Symbol.for("react.strict_mode"),yf=Symbol.for("react.profiler"),Dp=Symbol.for("react.provider"),Lp=Symbol.for("react.context"),Vh=Symbol.for("react.forward_ref"),Cf=Symbol.for("react.suspense"),Ef=Symbol.for("react.suspense_list"),Wh=Symbol.for("react.memo"),Jr=Symbol.for("react.lazy"),kp=Symbol.for("react.offscreen"),W1=Symbol.iterator;function _o(t){return t===null||typeof t!="object"?null:(t=W1&&t[W1]||t["@@iterator"],typeof t=="function"?t:null)}var dt=Object.assign,bu;function Lo(t){if(bu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bu=e&&e[1]||""}return`
`+bu+t}var Ou=!1;function Du(t,e){if(!t||Ou)return"";Ou=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var i=g}Reflect.construct(t,[],e)}else{try{e.call()}catch(g){i=g}t.call(e.prototype)}else{try{throw Error()}catch(g){i=g}t()}}catch(g){if(g&&i&&typeof g.stack=="string"){for(var a=g.stack.split(`
`),l=i.stack.split(`
`),h=a.length-1,x=l.length-1;1<=h&&0<=x&&a[h]!==l[x];)x--;for(;1<=h&&0<=x;h--,x--)if(a[h]!==l[x]){if(h!==1||x!==1)do if(h--,x--,0>x||a[h]!==l[x]){var m=`
`+a[h].replace(" at new "," at ");return t.displayName&&m.includes("<anonymous>")&&(m=m.replace("<anonymous>",t.displayName)),m}while(1<=h&&0<=x);break}}}finally{Ou=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Lo(t):""}function uC(t){switch(t.tag){case 5:return Lo(t.type);case 16:return Lo("Lazy");case 13:return Lo("Suspense");case 19:return Lo("SuspenseList");case 0:case 2:case 15:return t=Du(t.type,!1),t;case 11:return t=Du(t.type.render,!1),t;case 1:return t=Du(t.type,!0),t;default:return""}}function _f(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case _s:return"Fragment";case Es:return"Portal";case yf:return"Profiler";case Hh:return"StrictMode";case Cf:return"Suspense";case Ef:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Lp:return(t.displayName||"Context")+".Consumer";case Dp:return(t._context.displayName||"Context")+".Provider";case Vh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wh:return e=t.displayName||null,e!==null?e:_f(t.type)||"Memo";case Jr:e=t._payload,t=t._init;try{return _f(t(e))}catch{}}return null}function fC(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return _f(e);case 8:return e===Hh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function xi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Pp(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function hC(t){var e=Pp(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,l=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return a.call(this)},set:function(h){i=""+h,l.call(this,h)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(h){i=""+h},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tl(t){t._valueTracker||(t._valueTracker=hC(t))}function Bp(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=Pp(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function Ol(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Af(t,e){var n=e.checked;return dt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function G1(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=xi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fp(t,e){e=e.checked,e!=null&&jh(t,"checked",e,!1)}function If(t,e){Fp(t,e);var n=xi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?vf(t,e.type,n):e.hasOwnProperty("defaultValue")&&vf(t,e.type,xi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Y1(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function vf(t,e,n){(e!=="number"||Ol(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ko=Array.isArray;function Ps(t,e,n,i){if(t=t.options,e){e={};for(var a=0;a<n.length;a++)e["$"+n[a]]=!0;for(n=0;n<t.length;n++)a=e.hasOwnProperty("$"+t[n].value),t[n].selected!==a&&(t[n].selected=a),a&&i&&(t[n].defaultSelected=!0)}else{for(n=""+xi(n),e=null,a=0;a<t.length;a++){if(t[a].value===n){t[a].selected=!0,i&&(t[a].defaultSelected=!0);return}e!==null||t[a].disabled||(e=t[a])}e!==null&&(e.selected=!0)}}function Sf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(X(91));return dt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function X1(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(X(92));if(ko(n)){if(1<n.length)throw Error(X(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:xi(n)}}function Up(t,e){var n=xi(e.value),i=xi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function Q1(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zp(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Tf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zp(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nl,jp=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,a){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,a)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nl=nl||document.createElement("div"),nl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ea(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dC=["Webkit","ms","Moz","O"];Object.keys(Fo).forEach(function(t){dC.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fo[e]=Fo[t]})});function Hp(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fo.hasOwnProperty(t)&&Fo[t]?(""+e).trim():e+"px"}function Vp(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,a=Hp(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,a):t[n]=a}}var gC=dt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nf(t,e){if(e){if(gC[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(X(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(X(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(X(61))}if(e.style!=null&&typeof e.style!="object")throw Error(X(62))}}function Rf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mf=null;function Gh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var bf=null,Bs=null,Fs=null;function K1(t){if(t=Na(t)){if(typeof bf!="function")throw Error(X(280));var e=t.stateNode;e&&(e=Dc(e),bf(t.stateNode,t.type,e))}}function Wp(t){Bs?Fs?Fs.push(t):Fs=[t]:Bs=t}function Gp(){if(Bs){var t=Bs,e=Fs;if(Fs=Bs=null,K1(t),e)for(t=0;t<e.length;t++)K1(e[t])}}function Yp(t,e){return t(e)}function Xp(){}var Lu=!1;function Qp(t,e,n){if(Lu)return t(e,n);Lu=!0;try{return Yp(t,e,n)}finally{Lu=!1,(Bs!==null||Fs!==null)&&(Xp(),Gp())}}function ta(t,e){var n=t.stateNode;if(n===null)return null;var i=Dc(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(X(231,e,typeof n));return n}var Of=!1;if(Dr)try{var Ao={};Object.defineProperty(Ao,"passive",{get:function(){Of=!0}}),window.addEventListener("test",Ao,Ao),window.removeEventListener("test",Ao,Ao)}catch{Of=!1}function pC(t,e,n,i,a,l,h,x,m){var g=Array.prototype.slice.call(arguments,3);try{e.apply(n,g)}catch(y){this.onError(y)}}var Uo=!1,Dl=null,Ll=!1,Df=null,mC={onError:function(t){Uo=!0,Dl=t}};function xC(t,e,n,i,a,l,h,x,m){Uo=!1,Dl=null,pC.apply(mC,arguments)}function wC(t,e,n,i,a,l,h,x,m){if(xC.apply(this,arguments),Uo){if(Uo){var g=Dl;Uo=!1,Dl=null}else throw Error(X(198));Ll||(Ll=!0,Df=g)}}function ss(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Kp(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Z1(t){if(ss(t)!==t)throw Error(X(188))}function yC(t){var e=t.alternate;if(!e){if(e=ss(t),e===null)throw Error(X(188));return e!==t?null:t}for(var n=t,i=e;;){var a=n.return;if(a===null)break;var l=a.alternate;if(l===null){if(i=a.return,i!==null){n=i;continue}break}if(a.child===l.child){for(l=a.child;l;){if(l===n)return Z1(a),t;if(l===i)return Z1(a),e;l=l.sibling}throw Error(X(188))}if(n.return!==i.return)n=a,i=l;else{for(var h=!1,x=a.child;x;){if(x===n){h=!0,n=a,i=l;break}if(x===i){h=!0,i=a,n=l;break}x=x.sibling}if(!h){for(x=l.child;x;){if(x===n){h=!0,n=l,i=a;break}if(x===i){h=!0,i=l,n=a;break}x=x.sibling}if(!h)throw Error(X(189))}}if(n.alternate!==i)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?t:e}function Zp(t){return t=yC(t),t!==null?qp(t):null}function qp(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=qp(t);if(e!==null)return e;t=t.sibling}return null}var Jp=Dn.unstable_scheduleCallback,q1=Dn.unstable_cancelCallback,CC=Dn.unstable_shouldYield,EC=Dn.unstable_requestPaint,_t=Dn.unstable_now,_C=Dn.unstable_getCurrentPriorityLevel,Yh=Dn.unstable_ImmediatePriority,$p=Dn.unstable_UserBlockingPriority,kl=Dn.unstable_NormalPriority,AC=Dn.unstable_LowPriority,em=Dn.unstable_IdlePriority,Rc=null,Cr=null;function IC(t){if(Cr&&typeof Cr.onCommitFiberRoot=="function")try{Cr.onCommitFiberRoot(Rc,t,void 0,(t.current.flags&128)===128)}catch{}}var rr=Math.clz32?Math.clz32:TC,vC=Math.log,SC=Math.LN2;function TC(t){return t>>>=0,t===0?32:31-(vC(t)/SC|0)|0}var rl=64,il=4194304;function Po(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Pl(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,a=t.suspendedLanes,l=t.pingedLanes,h=n&268435455;if(h!==0){var x=h&~a;x!==0?i=Po(x):(l&=h,l!==0&&(i=Po(l)))}else h=n&~a,h!==0?i=Po(h):l!==0&&(i=Po(l));if(i===0)return 0;if(e!==0&&e!==i&&!(e&a)&&(a=i&-i,l=e&-e,a>=l||a===16&&(l&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-rr(e),a=1<<n,i|=t[n],e&=~a;return i}function NC(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function RC(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,a=t.expirationTimes,l=t.pendingLanes;0<l;){var h=31-rr(l),x=1<<h,m=a[h];m===-1?(!(x&n)||x&i)&&(a[h]=NC(x,e)):m<=e&&(t.expiredLanes|=x),l&=~x}}function Lf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function tm(){var t=rl;return rl<<=1,!(rl&4194240)&&(rl=64),t}function ku(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Sa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-rr(e),t[e]=n}function MC(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var a=31-rr(n),l=1<<a;e[a]=0,i[a]=-1,t[a]=-1,n&=~l}}function Xh(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-rr(n),a=1<<i;a&e|t[i]&e&&(t[i]|=e),n&=~a}}var He=0;function nm(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var rm,Qh,im,sm,om,kf=!1,sl=[],si=null,oi=null,ai=null,na=new Map,ra=new Map,ei=[],bC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function J1(t,e){switch(t){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":na.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ra.delete(e.pointerId)}}function Io(t,e,n,i,a,l){return t===null||t.nativeEvent!==l?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:l,targetContainers:[a]},e!==null&&(e=Na(e),e!==null&&Qh(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),t)}function OC(t,e,n,i,a){switch(e){case"focusin":return si=Io(si,t,e,n,i,a),!0;case"dragenter":return oi=Io(oi,t,e,n,i,a),!0;case"mouseover":return ai=Io(ai,t,e,n,i,a),!0;case"pointerover":var l=a.pointerId;return na.set(l,Io(na.get(l)||null,t,e,n,i,a)),!0;case"gotpointercapture":return l=a.pointerId,ra.set(l,Io(ra.get(l)||null,t,e,n,i,a)),!0}return!1}function am(t){var e=Fi(t.target);if(e!==null){var n=ss(e);if(n!==null){if(e=n.tag,e===13){if(e=Kp(n),e!==null){t.blockedOn=e,om(t.priority,function(){im(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Cl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Pf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);Mf=i,n.target.dispatchEvent(i),Mf=null}else return e=Na(n),e!==null&&Qh(e),t.blockedOn=n,!1;e.shift()}return!0}function $1(t,e,n){Cl(t)&&n.delete(e)}function DC(){kf=!1,si!==null&&Cl(si)&&(si=null),oi!==null&&Cl(oi)&&(oi=null),ai!==null&&Cl(ai)&&(ai=null),na.forEach($1),ra.forEach($1)}function vo(t,e){t.blockedOn===e&&(t.blockedOn=null,kf||(kf=!0,Dn.unstable_scheduleCallback(Dn.unstable_NormalPriority,DC)))}function ia(t){function e(a){return vo(a,t)}if(0<sl.length){vo(sl[0],t);for(var n=1;n<sl.length;n++){var i=sl[n];i.blockedOn===t&&(i.blockedOn=null)}}for(si!==null&&vo(si,t),oi!==null&&vo(oi,t),ai!==null&&vo(ai,t),na.forEach(e),ra.forEach(e),n=0;n<ei.length;n++)i=ei[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ei.length&&(n=ei[0],n.blockedOn===null);)am(n),n.blockedOn===null&&ei.shift()}var Us=zr.ReactCurrentBatchConfig,Bl=!0;function LC(t,e,n,i){var a=He,l=Us.transition;Us.transition=null;try{He=1,Kh(t,e,n,i)}finally{He=a,Us.transition=l}}function kC(t,e,n,i){var a=He,l=Us.transition;Us.transition=null;try{He=4,Kh(t,e,n,i)}finally{He=a,Us.transition=l}}function Kh(t,e,n,i){if(Bl){var a=Pf(t,e,n,i);if(a===null)Gu(t,e,i,Fl,n),J1(t,i);else if(OC(a,t,e,n,i))i.stopPropagation();else if(J1(t,i),e&4&&-1<bC.indexOf(t)){for(;a!==null;){var l=Na(a);if(l!==null&&rm(l),l=Pf(t,e,n,i),l===null&&Gu(t,e,i,Fl,n),l===a)break;a=l}a!==null&&i.stopPropagation()}else Gu(t,e,i,null,n)}}var Fl=null;function Pf(t,e,n,i){if(Fl=null,t=Gh(i),t=Fi(t),t!==null)if(e=ss(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Kp(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Fl=t,null}function lm(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_C()){case Yh:return 1;case $p:return 4;case kl:case AC:return 16;case em:return 536870912;default:return 16}default:return 16}}var ni=null,Zh=null,El=null;function cm(){if(El)return El;var t,e=Zh,n=e.length,i,a="value"in ni?ni.value:ni.textContent,l=a.length;for(t=0;t<n&&e[t]===a[t];t++);var h=n-t;for(i=1;i<=h&&e[n-i]===a[l-i];i++);return El=a.slice(t,1<i?1-i:void 0)}function _l(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ol(){return!0}function e0(){return!1}function kn(t){function e(n,i,a,l,h){this._reactName=n,this._targetInst=a,this.type=i,this.nativeEvent=l,this.target=h,this.currentTarget=null;for(var x in t)t.hasOwnProperty(x)&&(n=t[x],this[x]=n?n(l):l[x]);return this.isDefaultPrevented=(l.defaultPrevented!=null?l.defaultPrevented:l.returnValue===!1)?ol:e0,this.isPropagationStopped=e0,this}return dt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ol)},persist:function(){},isPersistent:ol}),e}var ro={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qh=kn(ro),Ta=dt({},ro,{view:0,detail:0}),PC=kn(Ta),Pu,Bu,So,Mc=dt({},Ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==So&&(So&&t.type==="mousemove"?(Pu=t.screenX-So.screenX,Bu=t.screenY-So.screenY):Bu=Pu=0,So=t),Pu)},movementY:function(t){return"movementY"in t?t.movementY:Bu}}),t0=kn(Mc),BC=dt({},Mc,{dataTransfer:0}),FC=kn(BC),UC=dt({},Ta,{relatedTarget:0}),Fu=kn(UC),zC=dt({},ro,{animationName:0,elapsedTime:0,pseudoElement:0}),jC=kn(zC),HC=dt({},ro,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),VC=kn(HC),WC=dt({},ro,{data:0}),n0=kn(WC),GC={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},YC={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XC={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function QC(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XC[t])?!!e[t]:!1}function Jh(){return QC}var KC=dt({},Ta,{key:function(t){if(t.key){var e=GC[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=_l(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?YC[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jh,charCode:function(t){return t.type==="keypress"?_l(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?_l(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZC=kn(KC),qC=dt({},Mc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r0=kn(qC),JC=dt({},Ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jh}),$C=kn(JC),eE=dt({},ro,{propertyName:0,elapsedTime:0,pseudoElement:0}),tE=kn(eE),nE=dt({},Mc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rE=kn(nE),iE=[9,13,27,32],$h=Dr&&"CompositionEvent"in window,zo=null;Dr&&"documentMode"in document&&(zo=document.documentMode);var sE=Dr&&"TextEvent"in window&&!zo,um=Dr&&(!$h||zo&&8<zo&&11>=zo),i0=" ",s0=!1;function fm(t,e){switch(t){case"keyup":return iE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hm(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var As=!1;function oE(t,e){switch(t){case"compositionend":return hm(e);case"keypress":return e.which!==32?null:(s0=!0,i0);case"textInput":return t=e.data,t===i0&&s0?null:t;default:return null}}function aE(t,e){if(As)return t==="compositionend"||!$h&&fm(t,e)?(t=cm(),El=Zh=ni=null,As=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return um&&e.locale!=="ko"?null:e.data;default:return null}}var lE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function o0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lE[t.type]:e==="textarea"}function dm(t,e,n,i){Wp(i),e=Ul(e,"onChange"),0<e.length&&(n=new qh("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var jo=null,sa=null;function cE(t){Im(t,0)}function bc(t){var e=Ss(t);if(Bp(e))return t}function uE(t,e){if(t==="change")return e}var gm=!1;if(Dr){var Uu;if(Dr){var zu="oninput"in document;if(!zu){var a0=document.createElement("div");a0.setAttribute("oninput","return;"),zu=typeof a0.oninput=="function"}Uu=zu}else Uu=!1;gm=Uu&&(!document.documentMode||9<document.documentMode)}function l0(){jo&&(jo.detachEvent("onpropertychange",pm),sa=jo=null)}function pm(t){if(t.propertyName==="value"&&bc(sa)){var e=[];dm(e,sa,t,Gh(t)),Qp(cE,e)}}function fE(t,e,n){t==="focusin"?(l0(),jo=e,sa=n,jo.attachEvent("onpropertychange",pm)):t==="focusout"&&l0()}function hE(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return bc(sa)}function dE(t,e){if(t==="click")return bc(e)}function gE(t,e){if(t==="input"||t==="change")return bc(e)}function pE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var or=typeof Object.is=="function"?Object.is:pE;function oa(t,e){if(or(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var a=n[i];if(!wf.call(e,a)||!or(t[a],e[a]))return!1}return!0}function c0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function u0(t,e){var n=c0(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=c0(n)}}function mm(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?mm(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function xm(){for(var t=window,e=Ol();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ol(t.document)}return e}function ed(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mE(t){var e=xm(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&mm(n.ownerDocument.documentElement,n)){if(i!==null&&ed(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var a=n.textContent.length,l=Math.min(i.start,a);i=i.end===void 0?l:Math.min(i.end,a),!t.extend&&l>i&&(a=i,i=l,l=a),a=u0(n,l);var h=u0(n,i);a&&h&&(t.rangeCount!==1||t.anchorNode!==a.node||t.anchorOffset!==a.offset||t.focusNode!==h.node||t.focusOffset!==h.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),t.removeAllRanges(),l>i?(t.addRange(e),t.extend(h.node,h.offset)):(e.setEnd(h.node,h.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var xE=Dr&&"documentMode"in document&&11>=document.documentMode,Is=null,Bf=null,Ho=null,Ff=!1;function f0(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Ff||Is==null||Is!==Ol(i)||(i=Is,"selectionStart"in i&&ed(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Ho&&oa(Ho,i)||(Ho=i,i=Ul(Bf,"onSelect"),0<i.length&&(e=new qh("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Is)))}function al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var vs={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionend:al("Transition","TransitionEnd")},ju={},wm={};Dr&&(wm=document.createElement("div").style,"AnimationEvent"in window||(delete vs.animationend.animation,delete vs.animationiteration.animation,delete vs.animationstart.animation),"TransitionEvent"in window||delete vs.transitionend.transition);function Oc(t){if(ju[t])return ju[t];if(!vs[t])return t;var e=vs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in wm)return ju[t]=e[n];return t}var ym=Oc("animationend"),Cm=Oc("animationiteration"),Em=Oc("animationstart"),_m=Oc("transitionend"),Am=new Map,h0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ii(t,e){Am.set(t,e),is(e,[t])}for(var Hu=0;Hu<h0.length;Hu++){var Vu=h0[Hu],wE=Vu.toLowerCase(),yE=Vu[0].toUpperCase()+Vu.slice(1);Ii(wE,"on"+yE)}Ii(ym,"onAnimationEnd");Ii(Cm,"onAnimationIteration");Ii(Em,"onAnimationStart");Ii("dblclick","onDoubleClick");Ii("focusin","onFocus");Ii("focusout","onBlur");Ii(_m,"onTransitionEnd");Gs("onMouseEnter",["mouseout","mouseover"]);Gs("onMouseLeave",["mouseout","mouseover"]);Gs("onPointerEnter",["pointerout","pointerover"]);Gs("onPointerLeave",["pointerout","pointerover"]);is("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));is("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));is("onBeforeInput",["compositionend","keypress","textInput","paste"]);is("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));is("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));is("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),CE=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bo));function d0(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,wC(i,e,void 0,t),t.currentTarget=null}function Im(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],a=i.event;i=i.listeners;e:{var l=void 0;if(e)for(var h=i.length-1;0<=h;h--){var x=i[h],m=x.instance,g=x.currentTarget;if(x=x.listener,m!==l&&a.isPropagationStopped())break e;d0(a,x,g),l=m}else for(h=0;h<i.length;h++){if(x=i[h],m=x.instance,g=x.currentTarget,x=x.listener,m!==l&&a.isPropagationStopped())break e;d0(a,x,g),l=m}}}if(Ll)throw t=Df,Ll=!1,Df=null,t}function rt(t,e){var n=e[Vf];n===void 0&&(n=e[Vf]=new Set);var i=t+"__bubble";n.has(i)||(vm(e,t,2,!1),n.add(i))}function Wu(t,e,n){var i=0;e&&(i|=4),vm(n,t,i,e)}var ll="_reactListening"+Math.random().toString(36).slice(2);function aa(t){if(!t[ll]){t[ll]=!0,Op.forEach(function(n){n!=="selectionchange"&&(CE.has(n)||Wu(n,!1,t),Wu(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ll]||(e[ll]=!0,Wu("selectionchange",!1,e))}}function vm(t,e,n,i){switch(lm(e)){case 1:var a=LC;break;case 4:a=kC;break;default:a=Kh}n=a.bind(null,e,n,t),a=void 0,!Of||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),i?a!==void 0?t.addEventListener(e,n,{capture:!0,passive:a}):t.addEventListener(e,n,!0):a!==void 0?t.addEventListener(e,n,{passive:a}):t.addEventListener(e,n,!1)}function Gu(t,e,n,i,a){var l=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var h=i.tag;if(h===3||h===4){var x=i.stateNode.containerInfo;if(x===a||x.nodeType===8&&x.parentNode===a)break;if(h===4)for(h=i.return;h!==null;){var m=h.tag;if((m===3||m===4)&&(m=h.stateNode.containerInfo,m===a||m.nodeType===8&&m.parentNode===a))return;h=h.return}for(;x!==null;){if(h=Fi(x),h===null)return;if(m=h.tag,m===5||m===6){i=l=h;continue e}x=x.parentNode}}i=i.return}Qp(function(){var g=l,y=Gh(n),C=[];e:{var I=Am.get(t);if(I!==void 0){var R=qh,b=t;switch(t){case"keypress":if(_l(n)===0)break e;case"keydown":case"keyup":R=ZC;break;case"focusin":b="focus",R=Fu;break;case"focusout":b="blur",R=Fu;break;case"beforeblur":case"afterblur":R=Fu;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":R=t0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":R=FC;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":R=$C;break;case ym:case Cm:case Em:R=jC;break;case _m:R=tE;break;case"scroll":R=PC;break;case"wheel":R=rE;break;case"copy":case"cut":case"paste":R=VC;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":R=r0}var L=(e&4)!==0,F=!L&&t==="scroll",O=L?I!==null?I+"Capture":null:I;L=[];for(var N=g,M;N!==null;){M=N;var U=M.stateNode;if(M.tag===5&&U!==null&&(M=U,O!==null&&(U=ta(N,O),U!=null&&L.push(la(N,U,M)))),F)break;N=N.return}0<L.length&&(I=new R(I,b,null,n,y),C.push({event:I,listeners:L}))}}if(!(e&7)){e:{if(I=t==="mouseover"||t==="pointerover",R=t==="mouseout"||t==="pointerout",I&&n!==Mf&&(b=n.relatedTarget||n.fromElement)&&(Fi(b)||b[Lr]))break e;if((R||I)&&(I=y.window===y?y:(I=y.ownerDocument)?I.defaultView||I.parentWindow:window,R?(b=n.relatedTarget||n.toElement,R=g,b=b?Fi(b):null,b!==null&&(F=ss(b),b!==F||b.tag!==5&&b.tag!==6)&&(b=null)):(R=null,b=g),R!==b)){if(L=t0,U="onMouseLeave",O="onMouseEnter",N="mouse",(t==="pointerout"||t==="pointerover")&&(L=r0,U="onPointerLeave",O="onPointerEnter",N="pointer"),F=R==null?I:Ss(R),M=b==null?I:Ss(b),I=new L(U,N+"leave",R,n,y),I.target=F,I.relatedTarget=M,U=null,Fi(y)===g&&(L=new L(O,N+"enter",b,n,y),L.target=M,L.relatedTarget=F,U=L),F=U,R&&b)t:{for(L=R,O=b,N=0,M=L;M;M=ys(M))N++;for(M=0,U=O;U;U=ys(U))M++;for(;0<N-M;)L=ys(L),N--;for(;0<M-N;)O=ys(O),M--;for(;N--;){if(L===O||O!==null&&L===O.alternate)break t;L=ys(L),O=ys(O)}L=null}else L=null;R!==null&&g0(C,I,R,L,!1),b!==null&&F!==null&&g0(C,F,b,L,!0)}}e:{if(I=g?Ss(g):window,R=I.nodeName&&I.nodeName.toLowerCase(),R==="select"||R==="input"&&I.type==="file")var q=uE;else if(o0(I))if(gm)q=gE;else{q=hE;var K=fE}else(R=I.nodeName)&&R.toLowerCase()==="input"&&(I.type==="checkbox"||I.type==="radio")&&(q=dE);if(q&&(q=q(t,g))){dm(C,q,n,y);break e}K&&K(t,I,g),t==="focusout"&&(K=I._wrapperState)&&K.controlled&&I.type==="number"&&vf(I,"number",I.value)}switch(K=g?Ss(g):window,t){case"focusin":(o0(K)||K.contentEditable==="true")&&(Is=K,Bf=g,Ho=null);break;case"focusout":Ho=Bf=Is=null;break;case"mousedown":Ff=!0;break;case"contextmenu":case"mouseup":case"dragend":Ff=!1,f0(C,n,y);break;case"selectionchange":if(xE)break;case"keydown":case"keyup":f0(C,n,y)}var j;if($h)e:{switch(t){case"compositionstart":var J="onCompositionStart";break e;case"compositionend":J="onCompositionEnd";break e;case"compositionupdate":J="onCompositionUpdate";break e}J=void 0}else As?fm(t,n)&&(J="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(J="onCompositionStart");J&&(um&&n.locale!=="ko"&&(As||J!=="onCompositionStart"?J==="onCompositionEnd"&&As&&(j=cm()):(ni=y,Zh="value"in ni?ni.value:ni.textContent,As=!0)),K=Ul(g,J),0<K.length&&(J=new n0(J,t,null,n,y),C.push({event:J,listeners:K}),j?J.data=j:(j=hm(n),j!==null&&(J.data=j)))),(j=sE?oE(t,n):aE(t,n))&&(g=Ul(g,"onBeforeInput"),0<g.length&&(y=new n0("onBeforeInput","beforeinput",null,n,y),C.push({event:y,listeners:g}),y.data=j))}Im(C,e)})}function la(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ul(t,e){for(var n=e+"Capture",i=[];t!==null;){var a=t,l=a.stateNode;a.tag===5&&l!==null&&(a=l,l=ta(t,n),l!=null&&i.unshift(la(t,l,a)),l=ta(t,e),l!=null&&i.push(la(t,l,a))),t=t.return}return i}function ys(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function g0(t,e,n,i,a){for(var l=e._reactName,h=[];n!==null&&n!==i;){var x=n,m=x.alternate,g=x.stateNode;if(m!==null&&m===i)break;x.tag===5&&g!==null&&(x=g,a?(m=ta(n,l),m!=null&&h.unshift(la(n,m,x))):a||(m=ta(n,l),m!=null&&h.push(la(n,m,x)))),n=n.return}h.length!==0&&t.push({event:e,listeners:h})}var EE=/\r\n?/g,_E=/\u0000|\uFFFD/g;function p0(t){return(typeof t=="string"?t:""+t).replace(EE,`
`).replace(_E,"")}function cl(t,e,n){if(e=p0(e),p0(t)!==e&&n)throw Error(X(425))}function zl(){}var Uf=null,zf=null;function jf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hf=typeof setTimeout=="function"?setTimeout:void 0,AE=typeof clearTimeout=="function"?clearTimeout:void 0,m0=typeof Promise=="function"?Promise:void 0,IE=typeof queueMicrotask=="function"?queueMicrotask:typeof m0<"u"?function(t){return m0.resolve(null).then(t).catch(vE)}:Hf;function vE(t){setTimeout(function(){throw t})}function Yu(t,e){var n=e,i=0;do{var a=n.nextSibling;if(t.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(i===0){t.removeChild(a),ia(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=a}while(n);ia(e)}function li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function x0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var io=Math.random().toString(36).slice(2),yr="__reactFiber$"+io,ca="__reactProps$"+io,Lr="__reactContainer$"+io,Vf="__reactEvents$"+io,SE="__reactListeners$"+io,TE="__reactHandles$"+io;function Fi(t){var e=t[yr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lr]||n[yr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=x0(t);t!==null;){if(n=t[yr])return n;t=x0(t)}return e}t=n,n=t.parentNode}return null}function Na(t){return t=t[yr]||t[Lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ss(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(X(33))}function Dc(t){return t[ca]||null}var Wf=[],Ts=-1;function vi(t){return{current:t}}function st(t){0>Ts||(t.current=Wf[Ts],Wf[Ts]=null,Ts--)}function $e(t,e){Ts++,Wf[Ts]=t.current,t.current=e}var wi={},$t=vi(wi),wn=vi(!1),Yi=wi;function Ys(t,e){var n=t.type.contextTypes;if(!n)return wi;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var a={},l;for(l in n)a[l]=e[l];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=a),a}function yn(t){return t=t.childContextTypes,t!=null}function jl(){st(wn),st($t)}function w0(t,e,n){if($t.current!==wi)throw Error(X(168));$e($t,e),$e(wn,n)}function Sm(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var a in i)if(!(a in e))throw Error(X(108,fC(t)||"Unknown",a));return dt({},n,i)}function Hl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wi,Yi=$t.current,$e($t,t),$e(wn,wn.current),!0}function y0(t,e,n){var i=t.stateNode;if(!i)throw Error(X(169));n?(t=Sm(t,e,Yi),i.__reactInternalMemoizedMergedChildContext=t,st(wn),st($t),$e($t,t)):st(wn),$e(wn,n)}var Sr=null,Lc=!1,Xu=!1;function Tm(t){Sr===null?Sr=[t]:Sr.push(t)}function NE(t){Lc=!0,Tm(t)}function Si(){if(!Xu&&Sr!==null){Xu=!0;var t=0,e=He;try{var n=Sr;for(He=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Sr=null,Lc=!1}catch(a){throw Sr!==null&&(Sr=Sr.slice(t+1)),Jp(Yh,Si),a}finally{He=e,Xu=!1}}return null}var Ns=[],Rs=0,Vl=null,Wl=0,zn=[],jn=0,Xi=null,Tr=1,Nr="";function Li(t,e){Ns[Rs++]=Wl,Ns[Rs++]=Vl,Vl=t,Wl=e}function Nm(t,e,n){zn[jn++]=Tr,zn[jn++]=Nr,zn[jn++]=Xi,Xi=t;var i=Tr;t=Nr;var a=32-rr(i)-1;i&=~(1<<a),n+=1;var l=32-rr(e)+a;if(30<l){var h=a-a%5;l=(i&(1<<h)-1).toString(32),i>>=h,a-=h,Tr=1<<32-rr(e)+a|n<<a|i,Nr=l+t}else Tr=1<<l|n<<a|i,Nr=t}function td(t){t.return!==null&&(Li(t,1),Nm(t,1,0))}function nd(t){for(;t===Vl;)Vl=Ns[--Rs],Ns[Rs]=null,Wl=Ns[--Rs],Ns[Rs]=null;for(;t===Xi;)Xi=zn[--jn],zn[jn]=null,Nr=zn[--jn],zn[jn]=null,Tr=zn[--jn],zn[jn]=null}var bn=null,Mn=null,at=!1,$n=null;function Rm(t,e){var n=Hn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function C0(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,bn=t,Mn=li(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,bn=t,Mn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Xi!==null?{id:Tr,overflow:Nr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Hn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,bn=t,Mn=null,!0):!1;default:return!1}}function Gf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yf(t){if(at){var e=Mn;if(e){var n=e;if(!C0(t,e)){if(Gf(t))throw Error(X(418));e=li(n.nextSibling);var i=bn;e&&C0(t,e)?Rm(i,n):(t.flags=t.flags&-4097|2,at=!1,bn=t)}}else{if(Gf(t))throw Error(X(418));t.flags=t.flags&-4097|2,at=!1,bn=t}}}function E0(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;bn=t}function ul(t){if(t!==bn)return!1;if(!at)return E0(t),at=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!jf(t.type,t.memoizedProps)),e&&(e=Mn)){if(Gf(t))throw Mm(),Error(X(418));for(;e;)Rm(t,e),e=li(e.nextSibling)}if(E0(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(X(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Mn=li(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Mn=null}}else Mn=bn?li(t.stateNode.nextSibling):null;return!0}function Mm(){for(var t=Mn;t;)t=li(t.nextSibling)}function Xs(){Mn=bn=null,at=!1}function rd(t){$n===null?$n=[t]:$n.push(t)}var RE=zr.ReactCurrentBatchConfig;function To(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var i=n.stateNode}if(!i)throw Error(X(147,t));var a=i,l=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===l?e.ref:(e=function(h){var x=a.refs;h===null?delete x[l]:x[l]=h},e._stringRef=l,e)}if(typeof t!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,t))}return t}function fl(t,e){throw t=Object.prototype.toString.call(e),Error(X(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function _0(t){var e=t._init;return e(t._payload)}function bm(t){function e(O,N){if(t){var M=O.deletions;M===null?(O.deletions=[N],O.flags|=16):M.push(N)}}function n(O,N){if(!t)return null;for(;N!==null;)e(O,N),N=N.sibling;return null}function i(O,N){for(O=new Map;N!==null;)N.key!==null?O.set(N.key,N):O.set(N.index,N),N=N.sibling;return O}function a(O,N){return O=hi(O,N),O.index=0,O.sibling=null,O}function l(O,N,M){return O.index=M,t?(M=O.alternate,M!==null?(M=M.index,M<N?(O.flags|=2,N):M):(O.flags|=2,N)):(O.flags|=1048576,N)}function h(O){return t&&O.alternate===null&&(O.flags|=2),O}function x(O,N,M,U){return N===null||N.tag!==6?(N=ef(M,O.mode,U),N.return=O,N):(N=a(N,M),N.return=O,N)}function m(O,N,M,U){var q=M.type;return q===_s?y(O,N,M.props.children,U,M.key):N!==null&&(N.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Jr&&_0(q)===N.type)?(U=a(N,M.props),U.ref=To(O,N,M),U.return=O,U):(U=Rl(M.type,M.key,M.props,null,O.mode,U),U.ref=To(O,N,M),U.return=O,U)}function g(O,N,M,U){return N===null||N.tag!==4||N.stateNode.containerInfo!==M.containerInfo||N.stateNode.implementation!==M.implementation?(N=tf(M,O.mode,U),N.return=O,N):(N=a(N,M.children||[]),N.return=O,N)}function y(O,N,M,U,q){return N===null||N.tag!==7?(N=Gi(M,O.mode,U,q),N.return=O,N):(N=a(N,M),N.return=O,N)}function C(O,N,M){if(typeof N=="string"&&N!==""||typeof N=="number")return N=ef(""+N,O.mode,M),N.return=O,N;if(typeof N=="object"&&N!==null){switch(N.$$typeof){case el:return M=Rl(N.type,N.key,N.props,null,O.mode,M),M.ref=To(O,null,N),M.return=O,M;case Es:return N=tf(N,O.mode,M),N.return=O,N;case Jr:var U=N._init;return C(O,U(N._payload),M)}if(ko(N)||_o(N))return N=Gi(N,O.mode,M,null),N.return=O,N;fl(O,N)}return null}function I(O,N,M,U){var q=N!==null?N.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return q!==null?null:x(O,N,""+M,U);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case el:return M.key===q?m(O,N,M,U):null;case Es:return M.key===q?g(O,N,M,U):null;case Jr:return q=M._init,I(O,N,q(M._payload),U)}if(ko(M)||_o(M))return q!==null?null:y(O,N,M,U,null);fl(O,M)}return null}function R(O,N,M,U,q){if(typeof U=="string"&&U!==""||typeof U=="number")return O=O.get(M)||null,x(N,O,""+U,q);if(typeof U=="object"&&U!==null){switch(U.$$typeof){case el:return O=O.get(U.key===null?M:U.key)||null,m(N,O,U,q);case Es:return O=O.get(U.key===null?M:U.key)||null,g(N,O,U,q);case Jr:var K=U._init;return R(O,N,M,K(U._payload),q)}if(ko(U)||_o(U))return O=O.get(M)||null,y(N,O,U,q,null);fl(N,U)}return null}function b(O,N,M,U){for(var q=null,K=null,j=N,J=N=0,W=null;j!==null&&J<M.length;J++){j.index>J?(W=j,j=null):W=j.sibling;var we=I(O,j,M[J],U);if(we===null){j===null&&(j=W);break}t&&j&&we.alternate===null&&e(O,j),N=l(we,N,J),K===null?q=we:K.sibling=we,K=we,j=W}if(J===M.length)return n(O,j),at&&Li(O,J),q;if(j===null){for(;J<M.length;J++)j=C(O,M[J],U),j!==null&&(N=l(j,N,J),K===null?q=j:K.sibling=j,K=j);return at&&Li(O,J),q}for(j=i(O,j);J<M.length;J++)W=R(j,O,J,M[J],U),W!==null&&(t&&W.alternate!==null&&j.delete(W.key===null?J:W.key),N=l(W,N,J),K===null?q=W:K.sibling=W,K=W);return t&&j.forEach(function(_e){return e(O,_e)}),at&&Li(O,J),q}function L(O,N,M,U){var q=_o(M);if(typeof q!="function")throw Error(X(150));if(M=q.call(M),M==null)throw Error(X(151));for(var K=q=null,j=N,J=N=0,W=null,we=M.next();j!==null&&!we.done;J++,we=M.next()){j.index>J?(W=j,j=null):W=j.sibling;var _e=I(O,j,we.value,U);if(_e===null){j===null&&(j=W);break}t&&j&&_e.alternate===null&&e(O,j),N=l(_e,N,J),K===null?q=_e:K.sibling=_e,K=_e,j=W}if(we.done)return n(O,j),at&&Li(O,J),q;if(j===null){for(;!we.done;J++,we=M.next())we=C(O,we.value,U),we!==null&&(N=l(we,N,J),K===null?q=we:K.sibling=we,K=we);return at&&Li(O,J),q}for(j=i(O,j);!we.done;J++,we=M.next())we=R(j,O,J,we.value,U),we!==null&&(t&&we.alternate!==null&&j.delete(we.key===null?J:we.key),N=l(we,N,J),K===null?q=we:K.sibling=we,K=we);return t&&j.forEach(function(ue){return e(O,ue)}),at&&Li(O,J),q}function F(O,N,M,U){if(typeof M=="object"&&M!==null&&M.type===_s&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case el:e:{for(var q=M.key,K=N;K!==null;){if(K.key===q){if(q=M.type,q===_s){if(K.tag===7){n(O,K.sibling),N=a(K,M.props.children),N.return=O,O=N;break e}}else if(K.elementType===q||typeof q=="object"&&q!==null&&q.$$typeof===Jr&&_0(q)===K.type){n(O,K.sibling),N=a(K,M.props),N.ref=To(O,K,M),N.return=O,O=N;break e}n(O,K);break}else e(O,K);K=K.sibling}M.type===_s?(N=Gi(M.props.children,O.mode,U,M.key),N.return=O,O=N):(U=Rl(M.type,M.key,M.props,null,O.mode,U),U.ref=To(O,N,M),U.return=O,O=U)}return h(O);case Es:e:{for(K=M.key;N!==null;){if(N.key===K)if(N.tag===4&&N.stateNode.containerInfo===M.containerInfo&&N.stateNode.implementation===M.implementation){n(O,N.sibling),N=a(N,M.children||[]),N.return=O,O=N;break e}else{n(O,N);break}else e(O,N);N=N.sibling}N=tf(M,O.mode,U),N.return=O,O=N}return h(O);case Jr:return K=M._init,F(O,N,K(M._payload),U)}if(ko(M))return b(O,N,M,U);if(_o(M))return L(O,N,M,U);fl(O,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,N!==null&&N.tag===6?(n(O,N.sibling),N=a(N,M),N.return=O,O=N):(n(O,N),N=ef(M,O.mode,U),N.return=O,O=N),h(O)):n(O,N)}return F}var Qs=bm(!0),Om=bm(!1),Gl=vi(null),Yl=null,Ms=null,id=null;function sd(){id=Ms=Yl=null}function od(t){var e=Gl.current;st(Gl),t._currentValue=e}function Xf(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function zs(t,e){Yl=t,id=Ms=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mn=!0),t.firstContext=null)}function Wn(t){var e=t._currentValue;if(id!==t)if(t={context:t,memoizedValue:e,next:null},Ms===null){if(Yl===null)throw Error(X(308));Ms=t,Yl.dependencies={lanes:0,firstContext:t}}else Ms=Ms.next=t;return e}var Ui=null;function ad(t){Ui===null?Ui=[t]:Ui.push(t)}function Dm(t,e,n,i){var a=e.interleaved;return a===null?(n.next=n,ad(e)):(n.next=a.next,a.next=n),e.interleaved=n,kr(t,i)}function kr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $r=!1;function ld(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Lm(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function br(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ci(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Le&2){var a=i.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),i.pending=e,kr(t,n)}return a=i.interleaved,a===null?(e.next=e,ad(i)):(e.next=a.next,a.next=e),i.interleaved=e,kr(t,n)}function Al(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Xh(t,n)}}function A0(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var a=null,l=null;if(n=n.firstBaseUpdate,n!==null){do{var h={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};l===null?a=l=h:l=l.next=h,n=n.next}while(n!==null);l===null?a=l=e:l=l.next=e}else a=l=e;n={baseState:i.baseState,firstBaseUpdate:a,lastBaseUpdate:l,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xl(t,e,n,i){var a=t.updateQueue;$r=!1;var l=a.firstBaseUpdate,h=a.lastBaseUpdate,x=a.shared.pending;if(x!==null){a.shared.pending=null;var m=x,g=m.next;m.next=null,h===null?l=g:h.next=g,h=m;var y=t.alternate;y!==null&&(y=y.updateQueue,x=y.lastBaseUpdate,x!==h&&(x===null?y.firstBaseUpdate=g:x.next=g,y.lastBaseUpdate=m))}if(l!==null){var C=a.baseState;h=0,y=g=m=null,x=l;do{var I=x.lane,R=x.eventTime;if((i&I)===I){y!==null&&(y=y.next={eventTime:R,lane:0,tag:x.tag,payload:x.payload,callback:x.callback,next:null});e:{var b=t,L=x;switch(I=e,R=n,L.tag){case 1:if(b=L.payload,typeof b=="function"){C=b.call(R,C,I);break e}C=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=L.payload,I=typeof b=="function"?b.call(R,C,I):b,I==null)break e;C=dt({},C,I);break e;case 2:$r=!0}}x.callback!==null&&x.lane!==0&&(t.flags|=64,I=a.effects,I===null?a.effects=[x]:I.push(x))}else R={eventTime:R,lane:I,tag:x.tag,payload:x.payload,callback:x.callback,next:null},y===null?(g=y=R,m=C):y=y.next=R,h|=I;if(x=x.next,x===null){if(x=a.shared.pending,x===null)break;I=x,x=I.next,I.next=null,a.lastBaseUpdate=I,a.shared.pending=null}}while(!0);if(y===null&&(m=C),a.baseState=m,a.firstBaseUpdate=g,a.lastBaseUpdate=y,e=a.shared.interleaved,e!==null){a=e;do h|=a.lane,a=a.next;while(a!==e)}else l===null&&(a.shared.lanes=0);Ki|=h,t.lanes=h,t.memoizedState=C}}function I0(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],a=i.callback;if(a!==null){if(i.callback=null,i=n,typeof a!="function")throw Error(X(191,a));a.call(i)}}}var Ra={},Er=vi(Ra),ua=vi(Ra),fa=vi(Ra);function zi(t){if(t===Ra)throw Error(X(174));return t}function cd(t,e){switch($e(fa,e),$e(ua,t),$e(Er,Ra),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Tf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Tf(e,t)}st(Er),$e(Er,e)}function Ks(){st(Er),st(ua),st(fa)}function km(t){zi(fa.current);var e=zi(Er.current),n=Tf(e,t.type);e!==n&&($e(ua,t),$e(Er,n))}function ud(t){ua.current===t&&(st(Er),st(ua))}var ut=vi(0);function Ql(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qu=[];function fd(){for(var t=0;t<Qu.length;t++)Qu[t]._workInProgressVersionPrimary=null;Qu.length=0}var Il=zr.ReactCurrentDispatcher,Ku=zr.ReactCurrentBatchConfig,Qi=0,ht=null,Nt=null,Bt=null,Kl=!1,Vo=!1,ha=0,ME=0;function Kt(){throw Error(X(321))}function hd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!or(t[n],e[n]))return!1;return!0}function dd(t,e,n,i,a,l){if(Qi=l,ht=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Il.current=t===null||t.memoizedState===null?LE:kE,t=n(i,a),Vo){l=0;do{if(Vo=!1,ha=0,25<=l)throw Error(X(301));l+=1,Bt=Nt=null,e.updateQueue=null,Il.current=PE,t=n(i,a)}while(Vo)}if(Il.current=Zl,e=Nt!==null&&Nt.next!==null,Qi=0,Bt=Nt=ht=null,Kl=!1,e)throw Error(X(300));return t}function gd(){var t=ha!==0;return ha=0,t}function xr(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Bt===null?ht.memoizedState=Bt=t:Bt=Bt.next=t,Bt}function Gn(){if(Nt===null){var t=ht.alternate;t=t!==null?t.memoizedState:null}else t=Nt.next;var e=Bt===null?ht.memoizedState:Bt.next;if(e!==null)Bt=e,Nt=t;else{if(t===null)throw Error(X(310));Nt=t,t={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},Bt===null?ht.memoizedState=Bt=t:Bt=Bt.next=t}return Bt}function da(t,e){return typeof e=="function"?e(t):e}function Zu(t){var e=Gn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=Nt,a=i.baseQueue,l=n.pending;if(l!==null){if(a!==null){var h=a.next;a.next=l.next,l.next=h}i.baseQueue=a=l,n.pending=null}if(a!==null){l=a.next,i=i.baseState;var x=h=null,m=null,g=l;do{var y=g.lane;if((Qi&y)===y)m!==null&&(m=m.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),i=g.hasEagerState?g.eagerState:t(i,g.action);else{var C={lane:y,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};m===null?(x=m=C,h=i):m=m.next=C,ht.lanes|=y,Ki|=y}g=g.next}while(g!==null&&g!==l);m===null?h=i:m.next=x,or(i,e.memoizedState)||(mn=!0),e.memoizedState=i,e.baseState=h,e.baseQueue=m,n.lastRenderedState=i}if(t=n.interleaved,t!==null){a=t;do l=a.lane,ht.lanes|=l,Ki|=l,a=a.next;while(a!==t)}else a===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qu(t){var e=Gn(),n=e.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=t;var i=n.dispatch,a=n.pending,l=e.memoizedState;if(a!==null){n.pending=null;var h=a=a.next;do l=t(l,h.action),h=h.next;while(h!==a);or(l,e.memoizedState)||(mn=!0),e.memoizedState=l,e.baseQueue===null&&(e.baseState=l),n.lastRenderedState=l}return[l,i]}function Pm(){}function Bm(t,e){var n=ht,i=Gn(),a=e(),l=!or(i.memoizedState,a);if(l&&(i.memoizedState=a,mn=!0),i=i.queue,pd(zm.bind(null,n,i,t),[t]),i.getSnapshot!==e||l||Bt!==null&&Bt.memoizedState.tag&1){if(n.flags|=2048,ga(9,Um.bind(null,n,i,a,e),void 0,null),Ut===null)throw Error(X(349));Qi&30||Fm(n,e,a)}return a}function Fm(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Um(t,e,n,i){e.value=n,e.getSnapshot=i,jm(e)&&Hm(t)}function zm(t,e,n){return n(function(){jm(e)&&Hm(t)})}function jm(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!or(t,n)}catch{return!0}}function Hm(t){var e=kr(t,1);e!==null&&ir(e,t,1,-1)}function v0(t){var e=xr();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:da,lastRenderedState:t},e.queue=t,t=t.dispatch=DE.bind(null,ht,t),[e.memoizedState,t]}function ga(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=ht.updateQueue,e===null?(e={lastEffect:null,stores:null},ht.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function Vm(){return Gn().memoizedState}function vl(t,e,n,i){var a=xr();ht.flags|=t,a.memoizedState=ga(1|e,n,void 0,i===void 0?null:i)}function kc(t,e,n,i){var a=Gn();i=i===void 0?null:i;var l=void 0;if(Nt!==null){var h=Nt.memoizedState;if(l=h.destroy,i!==null&&hd(i,h.deps)){a.memoizedState=ga(e,n,l,i);return}}ht.flags|=t,a.memoizedState=ga(1|e,n,l,i)}function S0(t,e){return vl(8390656,8,t,e)}function pd(t,e){return kc(2048,8,t,e)}function Wm(t,e){return kc(4,2,t,e)}function Gm(t,e){return kc(4,4,t,e)}function Ym(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Xm(t,e,n){return n=n!=null?n.concat([t]):null,kc(4,4,Ym.bind(null,e,t),n)}function md(){}function Qm(t,e){var n=Gn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&hd(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Km(t,e){var n=Gn();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&hd(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Zm(t,e,n){return Qi&21?(or(n,e)||(n=tm(),ht.lanes|=n,Ki|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mn=!0),t.memoizedState=n)}function bE(t,e){var n=He;He=n!==0&&4>n?n:4,t(!0);var i=Ku.transition;Ku.transition={};try{t(!1),e()}finally{He=n,Ku.transition=i}}function qm(){return Gn().memoizedState}function OE(t,e,n){var i=fi(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Jm(t))$m(e,n);else if(n=Dm(t,e,n,i),n!==null){var a=sn();ir(n,t,i,a),e2(n,e,i)}}function DE(t,e,n){var i=fi(t),a={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Jm(t))$m(e,a);else{var l=t.alternate;if(t.lanes===0&&(l===null||l.lanes===0)&&(l=e.lastRenderedReducer,l!==null))try{var h=e.lastRenderedState,x=l(h,n);if(a.hasEagerState=!0,a.eagerState=x,or(x,h)){var m=e.interleaved;m===null?(a.next=a,ad(e)):(a.next=m.next,m.next=a),e.interleaved=a;return}}catch{}finally{}n=Dm(t,e,a,i),n!==null&&(a=sn(),ir(n,t,i,a),e2(n,e,i))}}function Jm(t){var e=t.alternate;return t===ht||e!==null&&e===ht}function $m(t,e){Vo=Kl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function e2(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Xh(t,n)}}var Zl={readContext:Wn,useCallback:Kt,useContext:Kt,useEffect:Kt,useImperativeHandle:Kt,useInsertionEffect:Kt,useLayoutEffect:Kt,useMemo:Kt,useReducer:Kt,useRef:Kt,useState:Kt,useDebugValue:Kt,useDeferredValue:Kt,useTransition:Kt,useMutableSource:Kt,useSyncExternalStore:Kt,useId:Kt,unstable_isNewReconciler:!1},LE={readContext:Wn,useCallback:function(t,e){return xr().memoizedState=[t,e===void 0?null:e],t},useContext:Wn,useEffect:S0,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,vl(4194308,4,Ym.bind(null,e,t),n)},useLayoutEffect:function(t,e){return vl(4194308,4,t,e)},useInsertionEffect:function(t,e){return vl(4,2,t,e)},useMemo:function(t,e){var n=xr();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=xr();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=OE.bind(null,ht,t),[i.memoizedState,t]},useRef:function(t){var e=xr();return t={current:t},e.memoizedState=t},useState:v0,useDebugValue:md,useDeferredValue:function(t){return xr().memoizedState=t},useTransition:function(){var t=v0(!1),e=t[0];return t=bE.bind(null,t[1]),xr().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=ht,a=xr();if(at){if(n===void 0)throw Error(X(407));n=n()}else{if(n=e(),Ut===null)throw Error(X(349));Qi&30||Fm(i,e,n)}a.memoizedState=n;var l={value:n,getSnapshot:e};return a.queue=l,S0(zm.bind(null,i,l,t),[t]),i.flags|=2048,ga(9,Um.bind(null,i,l,n,e),void 0,null),n},useId:function(){var t=xr(),e=Ut.identifierPrefix;if(at){var n=Nr,i=Tr;n=(i&~(1<<32-rr(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ha++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=ME++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},kE={readContext:Wn,useCallback:Qm,useContext:Wn,useEffect:pd,useImperativeHandle:Xm,useInsertionEffect:Wm,useLayoutEffect:Gm,useMemo:Km,useReducer:Zu,useRef:Vm,useState:function(){return Zu(da)},useDebugValue:md,useDeferredValue:function(t){var e=Gn();return Zm(e,Nt.memoizedState,t)},useTransition:function(){var t=Zu(da)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:Pm,useSyncExternalStore:Bm,useId:qm,unstable_isNewReconciler:!1},PE={readContext:Wn,useCallback:Qm,useContext:Wn,useEffect:pd,useImperativeHandle:Xm,useInsertionEffect:Wm,useLayoutEffect:Gm,useMemo:Km,useReducer:qu,useRef:Vm,useState:function(){return qu(da)},useDebugValue:md,useDeferredValue:function(t){var e=Gn();return Nt===null?e.memoizedState=t:Zm(e,Nt.memoizedState,t)},useTransition:function(){var t=qu(da)[0],e=Gn().memoizedState;return[t,e]},useMutableSource:Pm,useSyncExternalStore:Bm,useId:qm,unstable_isNewReconciler:!1};function Zn(t,e){if(t&&t.defaultProps){e=dt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qf(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:dt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pc={isMounted:function(t){return(t=t._reactInternals)?ss(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=sn(),a=fi(t),l=br(i,a);l.payload=e,n!=null&&(l.callback=n),e=ci(t,l,a),e!==null&&(ir(e,t,a,i),Al(e,t,a))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=sn(),a=fi(t),l=br(i,a);l.tag=1,l.payload=e,n!=null&&(l.callback=n),e=ci(t,l,a),e!==null&&(ir(e,t,a,i),Al(e,t,a))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=sn(),i=fi(t),a=br(n,i);a.tag=2,e!=null&&(a.callback=e),e=ci(t,a,i),e!==null&&(ir(e,t,i,n),Al(e,t,i))}};function T0(t,e,n,i,a,l,h){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,l,h):e.prototype&&e.prototype.isPureReactComponent?!oa(n,i)||!oa(a,l):!0}function t2(t,e,n){var i=!1,a=wi,l=e.contextType;return typeof l=="object"&&l!==null?l=Wn(l):(a=yn(e)?Yi:$t.current,i=e.contextTypes,l=(i=i!=null)?Ys(t,a):wi),e=new e(n,l),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pc,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=a,t.__reactInternalMemoizedMaskedChildContext=l),e}function N0(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Pc.enqueueReplaceState(e,e.state,null)}function Kf(t,e,n,i){var a=t.stateNode;a.props=n,a.state=t.memoizedState,a.refs={},ld(t);var l=e.contextType;typeof l=="object"&&l!==null?a.context=Wn(l):(l=yn(e)?Yi:$t.current,a.context=Ys(t,l)),a.state=t.memoizedState,l=e.getDerivedStateFromProps,typeof l=="function"&&(Qf(t,e,l,n),a.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&Pc.enqueueReplaceState(a,a.state,null),Xl(t,n,a,i),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308)}function Zs(t,e){try{var n="",i=e;do n+=uC(i),i=i.return;while(i);var a=n}catch(l){a=`
Error generating stack: `+l.message+`
`+l.stack}return{value:t,source:e,stack:a,digest:null}}function Ju(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var BE=typeof WeakMap=="function"?WeakMap:Map;function n2(t,e,n){n=br(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){Jl||(Jl=!0,oh=i),Zf(t,e)},n}function r2(t,e,n){n=br(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var a=e.value;n.payload=function(){return i(a)},n.callback=function(){Zf(t,e)}}var l=t.stateNode;return l!==null&&typeof l.componentDidCatch=="function"&&(n.callback=function(){Zf(t,e),typeof i!="function"&&(ui===null?ui=new Set([this]):ui.add(this));var h=e.stack;this.componentDidCatch(e.value,{componentStack:h!==null?h:""})}),n}function R0(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new BE;var a=new Set;i.set(e,a)}else a=i.get(e),a===void 0&&(a=new Set,i.set(e,a));a.has(n)||(a.add(n),t=qE.bind(null,t,e,n),e.then(t,t))}function M0(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function b0(t,e,n,i,a){return t.mode&1?(t.flags|=65536,t.lanes=a,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=br(-1,1),e.tag=2,ci(n,e,1))),n.lanes|=1),t)}var FE=zr.ReactCurrentOwner,mn=!1;function nn(t,e,n,i){e.child=t===null?Om(e,null,n,i):Qs(e,t.child,n,i)}function O0(t,e,n,i,a){n=n.render;var l=e.ref;return zs(e,a),i=dd(t,e,n,i,l,a),n=gd(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Pr(t,e,a)):(at&&n&&td(e),e.flags|=1,nn(t,e,i,a),e.child)}function D0(t,e,n,i,a){if(t===null){var l=n.type;return typeof l=="function"&&!Id(l)&&l.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=l,i2(t,e,l,i,a)):(t=Rl(n.type,null,i,e,e.mode,a),t.ref=e.ref,t.return=e,e.child=t)}if(l=t.child,!(t.lanes&a)){var h=l.memoizedProps;if(n=n.compare,n=n!==null?n:oa,n(h,i)&&t.ref===e.ref)return Pr(t,e,a)}return e.flags|=1,t=hi(l,i),t.ref=e.ref,t.return=e,e.child=t}function i2(t,e,n,i,a){if(t!==null){var l=t.memoizedProps;if(oa(l,i)&&t.ref===e.ref)if(mn=!1,e.pendingProps=i=l,(t.lanes&a)!==0)t.flags&131072&&(mn=!0);else return e.lanes=t.lanes,Pr(t,e,a)}return qf(t,e,n,i,a)}function s2(t,e,n){var i=e.pendingProps,a=i.children,l=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Os,Nn),Nn|=n;else{if(!(n&1073741824))return t=l!==null?l.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Os,Nn),Nn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=l!==null?l.baseLanes:n,$e(Os,Nn),Nn|=i}else l!==null?(i=l.baseLanes|n,e.memoizedState=null):i=n,$e(Os,Nn),Nn|=i;return nn(t,e,a,n),e.child}function o2(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function qf(t,e,n,i,a){var l=yn(n)?Yi:$t.current;return l=Ys(e,l),zs(e,a),n=dd(t,e,n,i,l,a),i=gd(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~a,Pr(t,e,a)):(at&&i&&td(e),e.flags|=1,nn(t,e,n,a),e.child)}function L0(t,e,n,i,a){if(yn(n)){var l=!0;Hl(e)}else l=!1;if(zs(e,a),e.stateNode===null)Sl(t,e),t2(e,n,i),Kf(e,n,i,a),i=!0;else if(t===null){var h=e.stateNode,x=e.memoizedProps;h.props=x;var m=h.context,g=n.contextType;typeof g=="object"&&g!==null?g=Wn(g):(g=yn(n)?Yi:$t.current,g=Ys(e,g));var y=n.getDerivedStateFromProps,C=typeof y=="function"||typeof h.getSnapshotBeforeUpdate=="function";C||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(x!==i||m!==g)&&N0(e,h,i,g),$r=!1;var I=e.memoizedState;h.state=I,Xl(e,i,h,a),m=e.memoizedState,x!==i||I!==m||wn.current||$r?(typeof y=="function"&&(Qf(e,n,y,i),m=e.memoizedState),(x=$r||T0(e,n,x,i,I,m,g))?(C||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(e.flags|=4194308)):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=m),h.props=i,h.state=m,h.context=g,i=x):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{h=e.stateNode,Lm(t,e),x=e.memoizedProps,g=e.type===e.elementType?x:Zn(e.type,x),h.props=g,C=e.pendingProps,I=h.context,m=n.contextType,typeof m=="object"&&m!==null?m=Wn(m):(m=yn(n)?Yi:$t.current,m=Ys(e,m));var R=n.getDerivedStateFromProps;(y=typeof R=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(x!==C||I!==m)&&N0(e,h,i,m),$r=!1,I=e.memoizedState,h.state=I,Xl(e,i,h,a);var b=e.memoizedState;x!==C||I!==b||wn.current||$r?(typeof R=="function"&&(Qf(e,n,R,i),b=e.memoizedState),(g=$r||T0(e,n,g,i,I,b,m)||!1)?(y||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(i,b,m),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(i,b,m)),typeof h.componentDidUpdate=="function"&&(e.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof h.componentDidUpdate!="function"||x===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=b),h.props=i,h.state=b,h.context=m,i=g):(typeof h.componentDidUpdate!="function"||x===t.memoizedProps&&I===t.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||x===t.memoizedProps&&I===t.memoizedState||(e.flags|=1024),i=!1)}return Jf(t,e,n,i,l,a)}function Jf(t,e,n,i,a,l){o2(t,e);var h=(e.flags&128)!==0;if(!i&&!h)return a&&y0(e,n,!1),Pr(t,e,l);i=e.stateNode,FE.current=e;var x=h&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&h?(e.child=Qs(e,t.child,null,l),e.child=Qs(e,null,x,l)):nn(t,e,x,l),e.memoizedState=i.state,a&&y0(e,n,!0),e.child}function a2(t){var e=t.stateNode;e.pendingContext?w0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&w0(t,e.context,!1),cd(t,e.containerInfo)}function k0(t,e,n,i,a){return Xs(),rd(a),e.flags|=256,nn(t,e,n,i),e.child}var $f={dehydrated:null,treeContext:null,retryLane:0};function eh(t){return{baseLanes:t,cachePool:null,transitions:null}}function l2(t,e,n){var i=e.pendingProps,a=ut.current,l=!1,h=(e.flags&128)!==0,x;if((x=h)||(x=t!==null&&t.memoizedState===null?!1:(a&2)!==0),x?(l=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(a|=1),$e(ut,a&1),t===null)return Yf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(h=i.children,t=i.fallback,l?(i=e.mode,l=e.child,h={mode:"hidden",children:h},!(i&1)&&l!==null?(l.childLanes=0,l.pendingProps=h):l=Uc(h,i,0,null),t=Gi(t,i,n,null),l.return=e,t.return=e,l.sibling=t,e.child=l,e.child.memoizedState=eh(n),e.memoizedState=$f,t):xd(e,h));if(a=t.memoizedState,a!==null&&(x=a.dehydrated,x!==null))return UE(t,e,h,i,x,a,n);if(l){l=i.fallback,h=e.mode,a=t.child,x=a.sibling;var m={mode:"hidden",children:i.children};return!(h&1)&&e.child!==a?(i=e.child,i.childLanes=0,i.pendingProps=m,e.deletions=null):(i=hi(a,m),i.subtreeFlags=a.subtreeFlags&14680064),x!==null?l=hi(x,l):(l=Gi(l,h,n,null),l.flags|=2),l.return=e,i.return=e,i.sibling=l,e.child=i,i=l,l=e.child,h=t.child.memoizedState,h=h===null?eh(n):{baseLanes:h.baseLanes|n,cachePool:null,transitions:h.transitions},l.memoizedState=h,l.childLanes=t.childLanes&~n,e.memoizedState=$f,i}return l=t.child,t=l.sibling,i=hi(l,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function xd(t,e){return e=Uc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hl(t,e,n,i){return i!==null&&rd(i),Qs(e,t.child,null,n),t=xd(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function UE(t,e,n,i,a,l,h){if(n)return e.flags&256?(e.flags&=-257,i=Ju(Error(X(422))),hl(t,e,h,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(l=i.fallback,a=e.mode,i=Uc({mode:"visible",children:i.children},a,0,null),l=Gi(l,a,h,null),l.flags|=2,i.return=e,l.return=e,i.sibling=l,e.child=i,e.mode&1&&Qs(e,t.child,null,h),e.child.memoizedState=eh(h),e.memoizedState=$f,l);if(!(e.mode&1))return hl(t,e,h,null);if(a.data==="$!"){if(i=a.nextSibling&&a.nextSibling.dataset,i)var x=i.dgst;return i=x,l=Error(X(419)),i=Ju(l,i,void 0),hl(t,e,h,i)}if(x=(h&t.childLanes)!==0,mn||x){if(i=Ut,i!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(i.suspendedLanes|h)?0:a,a!==0&&a!==l.retryLane&&(l.retryLane=a,kr(t,a),ir(i,t,a,-1))}return Ad(),i=Ju(Error(X(421))),hl(t,e,h,i)}return a.data==="$?"?(e.flags|=128,e.child=t.child,e=JE.bind(null,t),a._reactRetry=e,null):(t=l.treeContext,Mn=li(a.nextSibling),bn=e,at=!0,$n=null,t!==null&&(zn[jn++]=Tr,zn[jn++]=Nr,zn[jn++]=Xi,Tr=t.id,Nr=t.overflow,Xi=e),e=xd(e,i.children),e.flags|=4096,e)}function P0(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Xf(t.return,e,n)}function $u(t,e,n,i,a){var l=t.memoizedState;l===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:a}:(l.isBackwards=e,l.rendering=null,l.renderingStartTime=0,l.last=i,l.tail=n,l.tailMode=a)}function c2(t,e,n){var i=e.pendingProps,a=i.revealOrder,l=i.tail;if(nn(t,e,i.children,n),i=ut.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&P0(t,n,e);else if(t.tag===19)P0(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if($e(ut,i),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(n=e.child,a=null;n!==null;)t=n.alternate,t!==null&&Ql(t)===null&&(a=n),n=n.sibling;n=a,n===null?(a=e.child,e.child=null):(a=n.sibling,n.sibling=null),$u(e,!1,a,n,l);break;case"backwards":for(n=null,a=e.child,e.child=null;a!==null;){if(t=a.alternate,t!==null&&Ql(t)===null){e.child=a;break}t=a.sibling,a.sibling=n,n=a,a=t}$u(e,!0,n,null,l);break;case"together":$u(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ki|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(X(153));if(e.child!==null){for(t=e.child,n=hi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=hi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zE(t,e,n){switch(e.tag){case 3:a2(e),Xs();break;case 5:km(e);break;case 1:yn(e.type)&&Hl(e);break;case 4:cd(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,a=e.memoizedProps.value;$e(Gl,i._currentValue),i._currentValue=a;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?($e(ut,ut.current&1),e.flags|=128,null):n&e.child.childLanes?l2(t,e,n):($e(ut,ut.current&1),t=Pr(t,e,n),t!==null?t.sibling:null);$e(ut,ut.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return c2(t,e,n);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),$e(ut,ut.current),i)break;return null;case 22:case 23:return e.lanes=0,s2(t,e,n)}return Pr(t,e,n)}var u2,th,f2,h2;u2=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};th=function(){};f2=function(t,e,n,i){var a=t.memoizedProps;if(a!==i){t=e.stateNode,zi(Er.current);var l=null;switch(n){case"input":a=Af(t,a),i=Af(t,i),l=[];break;case"select":a=dt({},a,{value:void 0}),i=dt({},i,{value:void 0}),l=[];break;case"textarea":a=Sf(t,a),i=Sf(t,i),l=[];break;default:typeof a.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=zl)}Nf(n,i);var h;n=null;for(g in a)if(!i.hasOwnProperty(g)&&a.hasOwnProperty(g)&&a[g]!=null)if(g==="style"){var x=a[g];for(h in x)x.hasOwnProperty(h)&&(n||(n={}),n[h]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&($o.hasOwnProperty(g)?l||(l=[]):(l=l||[]).push(g,null));for(g in i){var m=i[g];if(x=a!=null?a[g]:void 0,i.hasOwnProperty(g)&&m!==x&&(m!=null||x!=null))if(g==="style")if(x){for(h in x)!x.hasOwnProperty(h)||m&&m.hasOwnProperty(h)||(n||(n={}),n[h]="");for(h in m)m.hasOwnProperty(h)&&x[h]!==m[h]&&(n||(n={}),n[h]=m[h])}else n||(l||(l=[]),l.push(g,n)),n=m;else g==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,x=x?x.__html:void 0,m!=null&&x!==m&&(l=l||[]).push(g,m)):g==="children"?typeof m!="string"&&typeof m!="number"||(l=l||[]).push(g,""+m):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&($o.hasOwnProperty(g)?(m!=null&&g==="onScroll"&&rt("scroll",t),l||x===m||(l=[])):(l=l||[]).push(g,m))}n&&(l=l||[]).push("style",n);var g=l;(e.updateQueue=g)&&(e.flags|=4)}};h2=function(t,e,n,i){n!==i&&(e.flags|=4)};function No(t,e){if(!at)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function Zt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags&14680064,i|=a.flags&14680064,a.return=t,a=a.sibling;else for(a=t.child;a!==null;)n|=a.lanes|a.childLanes,i|=a.subtreeFlags,i|=a.flags,a.return=t,a=a.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function jE(t,e,n){var i=e.pendingProps;switch(nd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zt(e),null;case 1:return yn(e.type)&&jl(),Zt(e),null;case 3:return i=e.stateNode,Ks(),st(wn),st($t),fd(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(ul(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,$n!==null&&(ch($n),$n=null))),th(t,e),Zt(e),null;case 5:ud(e);var a=zi(fa.current);if(n=e.type,t!==null&&e.stateNode!=null)f2(t,e,n,i,a),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(X(166));return Zt(e),null}if(t=zi(Er.current),ul(e)){i=e.stateNode,n=e.type;var l=e.memoizedProps;switch(i[yr]=e,i[ca]=l,t=(e.mode&1)!==0,n){case"dialog":rt("cancel",i),rt("close",i);break;case"iframe":case"object":case"embed":rt("load",i);break;case"video":case"audio":for(a=0;a<Bo.length;a++)rt(Bo[a],i);break;case"source":rt("error",i);break;case"img":case"image":case"link":rt("error",i),rt("load",i);break;case"details":rt("toggle",i);break;case"input":G1(i,l),rt("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!l.multiple},rt("invalid",i);break;case"textarea":X1(i,l),rt("invalid",i)}Nf(n,l),a=null;for(var h in l)if(l.hasOwnProperty(h)){var x=l[h];h==="children"?typeof x=="string"?i.textContent!==x&&(l.suppressHydrationWarning!==!0&&cl(i.textContent,x,t),a=["children",x]):typeof x=="number"&&i.textContent!==""+x&&(l.suppressHydrationWarning!==!0&&cl(i.textContent,x,t),a=["children",""+x]):$o.hasOwnProperty(h)&&x!=null&&h==="onScroll"&&rt("scroll",i)}switch(n){case"input":tl(i),Y1(i,l,!0);break;case"textarea":tl(i),Q1(i);break;case"select":case"option":break;default:typeof l.onClick=="function"&&(i.onclick=zl)}i=a,e.updateQueue=i,i!==null&&(e.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zp(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=h.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=h.createElement(n,{is:i.is}):(t=h.createElement(n),n==="select"&&(h=t,i.multiple?h.multiple=!0:i.size&&(h.size=i.size))):t=h.createElementNS(t,n),t[yr]=e,t[ca]=i,u2(t,e,!1,!1),e.stateNode=t;e:{switch(h=Rf(n,i),n){case"dialog":rt("cancel",t),rt("close",t),a=i;break;case"iframe":case"object":case"embed":rt("load",t),a=i;break;case"video":case"audio":for(a=0;a<Bo.length;a++)rt(Bo[a],t);a=i;break;case"source":rt("error",t),a=i;break;case"img":case"image":case"link":rt("error",t),rt("load",t),a=i;break;case"details":rt("toggle",t),a=i;break;case"input":G1(t,i),a=Af(t,i),rt("invalid",t);break;case"option":a=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},a=dt({},i,{value:void 0}),rt("invalid",t);break;case"textarea":X1(t,i),a=Sf(t,i),rt("invalid",t);break;default:a=i}Nf(n,a),x=a;for(l in x)if(x.hasOwnProperty(l)){var m=x[l];l==="style"?Vp(t,m):l==="dangerouslySetInnerHTML"?(m=m?m.__html:void 0,m!=null&&jp(t,m)):l==="children"?typeof m=="string"?(n!=="textarea"||m!=="")&&ea(t,m):typeof m=="number"&&ea(t,""+m):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&($o.hasOwnProperty(l)?m!=null&&l==="onScroll"&&rt("scroll",t):m!=null&&jh(t,l,m,h))}switch(n){case"input":tl(t),Y1(t,i,!1);break;case"textarea":tl(t),Q1(t);break;case"option":i.value!=null&&t.setAttribute("value",""+xi(i.value));break;case"select":t.multiple=!!i.multiple,l=i.value,l!=null?Ps(t,!!i.multiple,l,!1):i.defaultValue!=null&&Ps(t,!!i.multiple,i.defaultValue,!0);break;default:typeof a.onClick=="function"&&(t.onclick=zl)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zt(e),null;case 6:if(t&&e.stateNode!=null)h2(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(X(166));if(n=zi(fa.current),zi(Er.current),ul(e)){if(i=e.stateNode,n=e.memoizedProps,i[yr]=e,(l=i.nodeValue!==n)&&(t=bn,t!==null))switch(t.tag){case 3:cl(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cl(i.nodeValue,n,(t.mode&1)!==0)}l&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[yr]=e,e.stateNode=i}return Zt(e),null;case 13:if(st(ut),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(at&&Mn!==null&&e.mode&1&&!(e.flags&128))Mm(),Xs(),e.flags|=98560,l=!1;else if(l=ul(e),i!==null&&i.dehydrated!==null){if(t===null){if(!l)throw Error(X(318));if(l=e.memoizedState,l=l!==null?l.dehydrated:null,!l)throw Error(X(317));l[yr]=e}else Xs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zt(e),l=!1}else $n!==null&&(ch($n),$n=null),l=!0;if(!l)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||ut.current&1?Ot===0&&(Ot=3):Ad())),e.updateQueue!==null&&(e.flags|=4),Zt(e),null);case 4:return Ks(),th(t,e),t===null&&aa(e.stateNode.containerInfo),Zt(e),null;case 10:return od(e.type._context),Zt(e),null;case 17:return yn(e.type)&&jl(),Zt(e),null;case 19:if(st(ut),l=e.memoizedState,l===null)return Zt(e),null;if(i=(e.flags&128)!==0,h=l.rendering,h===null)if(i)No(l,!1);else{if(Ot!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(h=Ql(t),h!==null){for(e.flags|=128,No(l,!1),i=h.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)l=n,t=i,l.flags&=14680066,h=l.alternate,h===null?(l.childLanes=0,l.lanes=t,l.child=null,l.subtreeFlags=0,l.memoizedProps=null,l.memoizedState=null,l.updateQueue=null,l.dependencies=null,l.stateNode=null):(l.childLanes=h.childLanes,l.lanes=h.lanes,l.child=h.child,l.subtreeFlags=0,l.deletions=null,l.memoizedProps=h.memoizedProps,l.memoizedState=h.memoizedState,l.updateQueue=h.updateQueue,l.type=h.type,t=h.dependencies,l.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(ut,ut.current&1|2),e.child}t=t.sibling}l.tail!==null&&_t()>qs&&(e.flags|=128,i=!0,No(l,!1),e.lanes=4194304)}else{if(!i)if(t=Ql(h),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),No(l,!0),l.tail===null&&l.tailMode==="hidden"&&!h.alternate&&!at)return Zt(e),null}else 2*_t()-l.renderingStartTime>qs&&n!==1073741824&&(e.flags|=128,i=!0,No(l,!1),e.lanes=4194304);l.isBackwards?(h.sibling=e.child,e.child=h):(n=l.last,n!==null?n.sibling=h:e.child=h,l.last=h)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=_t(),e.sibling=null,n=ut.current,$e(ut,i?n&1|2:n&1),e):(Zt(e),null);case 22:case 23:return _d(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Nn&1073741824&&(Zt(e),e.subtreeFlags&6&&(e.flags|=8192)):Zt(e),null;case 24:return null;case 25:return null}throw Error(X(156,e.tag))}function HE(t,e){switch(nd(e),e.tag){case 1:return yn(e.type)&&jl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ks(),st(wn),st($t),fd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return ud(e),null;case 13:if(st(ut),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(X(340));Xs()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return st(ut),null;case 4:return Ks(),null;case 10:return od(e.type._context),null;case 22:case 23:return _d(),null;case 24:return null;default:return null}}var dl=!1,qt=!1,VE=typeof WeakSet=="function"?WeakSet:Set,ie=null;function bs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){yt(t,e,i)}else n.current=null}function nh(t,e,n){try{n()}catch(i){yt(t,e,i)}}var B0=!1;function WE(t,e){if(Uf=Bl,t=xm(),ed(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var a=i.anchorOffset,l=i.focusNode;i=i.focusOffset;try{n.nodeType,l.nodeType}catch{n=null;break e}var h=0,x=-1,m=-1,g=0,y=0,C=t,I=null;t:for(;;){for(var R;C!==n||a!==0&&C.nodeType!==3||(x=h+a),C!==l||i!==0&&C.nodeType!==3||(m=h+i),C.nodeType===3&&(h+=C.nodeValue.length),(R=C.firstChild)!==null;)I=C,C=R;for(;;){if(C===t)break t;if(I===n&&++g===a&&(x=h),I===l&&++y===i&&(m=h),(R=C.nextSibling)!==null)break;C=I,I=C.parentNode}C=R}n=x===-1||m===-1?null:{start:x,end:m}}else n=null}n=n||{start:0,end:0}}else n=null;for(zf={focusedElem:t,selectionRange:n},Bl=!1,ie=e;ie!==null;)if(e=ie,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ie=t;else for(;ie!==null;){e=ie;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var L=b.memoizedProps,F=b.memoizedState,O=e.stateNode,N=O.getSnapshotBeforeUpdate(e.elementType===e.type?L:Zn(e.type,L),F);O.__reactInternalSnapshotBeforeUpdate=N}break;case 3:var M=e.stateNode.containerInfo;M.nodeType===1?M.textContent="":M.nodeType===9&&M.documentElement&&M.removeChild(M.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(U){yt(e,e.return,U)}if(t=e.sibling,t!==null){t.return=e.return,ie=t;break}ie=e.return}return b=B0,B0=!1,b}function Wo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&t)===t){var l=a.destroy;a.destroy=void 0,l!==void 0&&nh(e,n,l)}a=a.next}while(a!==i)}}function Bc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function rh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function d2(t){var e=t.alternate;e!==null&&(t.alternate=null,d2(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yr],delete e[ca],delete e[Vf],delete e[SE],delete e[TE])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function g2(t){return t.tag===5||t.tag===3||t.tag===4}function F0(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||g2(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ih(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zl));else if(i!==4&&(t=t.child,t!==null))for(ih(t,e,n),t=t.sibling;t!==null;)ih(t,e,n),t=t.sibling}function sh(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(sh(t,e,n),t=t.sibling;t!==null;)sh(t,e,n),t=t.sibling}var Wt=null,qn=!1;function Zr(t,e,n){for(n=n.child;n!==null;)p2(t,e,n),n=n.sibling}function p2(t,e,n){if(Cr&&typeof Cr.onCommitFiberUnmount=="function")try{Cr.onCommitFiberUnmount(Rc,n)}catch{}switch(n.tag){case 5:qt||bs(n,e);case 6:var i=Wt,a=qn;Wt=null,Zr(t,e,n),Wt=i,qn=a,Wt!==null&&(qn?(t=Wt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Wt.removeChild(n.stateNode));break;case 18:Wt!==null&&(qn?(t=Wt,n=n.stateNode,t.nodeType===8?Yu(t.parentNode,n):t.nodeType===1&&Yu(t,n),ia(t)):Yu(Wt,n.stateNode));break;case 4:i=Wt,a=qn,Wt=n.stateNode.containerInfo,qn=!0,Zr(t,e,n),Wt=i,qn=a;break;case 0:case 11:case 14:case 15:if(!qt&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){a=i=i.next;do{var l=a,h=l.destroy;l=l.tag,h!==void 0&&(l&2||l&4)&&nh(n,e,h),a=a.next}while(a!==i)}Zr(t,e,n);break;case 1:if(!qt&&(bs(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(x){yt(n,e,x)}Zr(t,e,n);break;case 21:Zr(t,e,n);break;case 22:n.mode&1?(qt=(i=qt)||n.memoizedState!==null,Zr(t,e,n),qt=i):Zr(t,e,n);break;default:Zr(t,e,n)}}function U0(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new VE),e.forEach(function(i){var a=$E.bind(null,t,i);n.has(i)||(n.add(i),i.then(a,a))})}}function Kn(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var a=n[i];try{var l=t,h=e,x=h;e:for(;x!==null;){switch(x.tag){case 5:Wt=x.stateNode,qn=!1;break e;case 3:Wt=x.stateNode.containerInfo,qn=!0;break e;case 4:Wt=x.stateNode.containerInfo,qn=!0;break e}x=x.return}if(Wt===null)throw Error(X(160));p2(l,h,a),Wt=null,qn=!1;var m=a.alternate;m!==null&&(m.return=null),a.return=null}catch(g){yt(a,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)m2(e,t),e=e.sibling}function m2(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Kn(e,t),mr(t),i&4){try{Wo(3,t,t.return),Bc(3,t)}catch(L){yt(t,t.return,L)}try{Wo(5,t,t.return)}catch(L){yt(t,t.return,L)}}break;case 1:Kn(e,t),mr(t),i&512&&n!==null&&bs(n,n.return);break;case 5:if(Kn(e,t),mr(t),i&512&&n!==null&&bs(n,n.return),t.flags&32){var a=t.stateNode;try{ea(a,"")}catch(L){yt(t,t.return,L)}}if(i&4&&(a=t.stateNode,a!=null)){var l=t.memoizedProps,h=n!==null?n.memoizedProps:l,x=t.type,m=t.updateQueue;if(t.updateQueue=null,m!==null)try{x==="input"&&l.type==="radio"&&l.name!=null&&Fp(a,l),Rf(x,h);var g=Rf(x,l);for(h=0;h<m.length;h+=2){var y=m[h],C=m[h+1];y==="style"?Vp(a,C):y==="dangerouslySetInnerHTML"?jp(a,C):y==="children"?ea(a,C):jh(a,y,C,g)}switch(x){case"input":If(a,l);break;case"textarea":Up(a,l);break;case"select":var I=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!l.multiple;var R=l.value;R!=null?Ps(a,!!l.multiple,R,!1):I!==!!l.multiple&&(l.defaultValue!=null?Ps(a,!!l.multiple,l.defaultValue,!0):Ps(a,!!l.multiple,l.multiple?[]:"",!1))}a[ca]=l}catch(L){yt(t,t.return,L)}}break;case 6:if(Kn(e,t),mr(t),i&4){if(t.stateNode===null)throw Error(X(162));a=t.stateNode,l=t.memoizedProps;try{a.nodeValue=l}catch(L){yt(t,t.return,L)}}break;case 3:if(Kn(e,t),mr(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{ia(e.containerInfo)}catch(L){yt(t,t.return,L)}break;case 4:Kn(e,t),mr(t);break;case 13:Kn(e,t),mr(t),a=t.child,a.flags&8192&&(l=a.memoizedState!==null,a.stateNode.isHidden=l,!l||a.alternate!==null&&a.alternate.memoizedState!==null||(Cd=_t())),i&4&&U0(t);break;case 22:if(y=n!==null&&n.memoizedState!==null,t.mode&1?(qt=(g=qt)||y,Kn(e,t),qt=g):Kn(e,t),mr(t),i&8192){if(g=t.memoizedState!==null,(t.stateNode.isHidden=g)&&!y&&t.mode&1)for(ie=t,y=t.child;y!==null;){for(C=ie=y;ie!==null;){switch(I=ie,R=I.child,I.tag){case 0:case 11:case 14:case 15:Wo(4,I,I.return);break;case 1:bs(I,I.return);var b=I.stateNode;if(typeof b.componentWillUnmount=="function"){i=I,n=I.return;try{e=i,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(L){yt(i,n,L)}}break;case 5:bs(I,I.return);break;case 22:if(I.memoizedState!==null){j0(C);continue}}R!==null?(R.return=I,ie=R):j0(C)}y=y.sibling}e:for(y=null,C=t;;){if(C.tag===5){if(y===null){y=C;try{a=C.stateNode,g?(l=a.style,typeof l.setProperty=="function"?l.setProperty("display","none","important"):l.display="none"):(x=C.stateNode,m=C.memoizedProps.style,h=m!=null&&m.hasOwnProperty("display")?m.display:null,x.style.display=Hp("display",h))}catch(L){yt(t,t.return,L)}}}else if(C.tag===6){if(y===null)try{C.stateNode.nodeValue=g?"":C.memoizedProps}catch(L){yt(t,t.return,L)}}else if((C.tag!==22&&C.tag!==23||C.memoizedState===null||C===t)&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===t)break e;for(;C.sibling===null;){if(C.return===null||C.return===t)break e;y===C&&(y=null),C=C.return}y===C&&(y=null),C.sibling.return=C.return,C=C.sibling}}break;case 19:Kn(e,t),mr(t),i&4&&U0(t);break;case 21:break;default:Kn(e,t),mr(t)}}function mr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(g2(n)){var i=n;break e}n=n.return}throw Error(X(160))}switch(i.tag){case 5:var a=i.stateNode;i.flags&32&&(ea(a,""),i.flags&=-33);var l=F0(t);sh(t,l,a);break;case 3:case 4:var h=i.stateNode.containerInfo,x=F0(t);ih(t,x,h);break;default:throw Error(X(161))}}catch(m){yt(t,t.return,m)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GE(t,e,n){ie=t,x2(t)}function x2(t,e,n){for(var i=(t.mode&1)!==0;ie!==null;){var a=ie,l=a.child;if(a.tag===22&&i){var h=a.memoizedState!==null||dl;if(!h){var x=a.alternate,m=x!==null&&x.memoizedState!==null||qt;x=dl;var g=qt;if(dl=h,(qt=m)&&!g)for(ie=a;ie!==null;)h=ie,m=h.child,h.tag===22&&h.memoizedState!==null?H0(a):m!==null?(m.return=h,ie=m):H0(a);for(;l!==null;)ie=l,x2(l),l=l.sibling;ie=a,dl=x,qt=g}z0(t)}else a.subtreeFlags&8772&&l!==null?(l.return=a,ie=l):z0(t)}}function z0(t){for(;ie!==null;){var e=ie;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:qt||Bc(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!qt)if(n===null)i.componentDidMount();else{var a=e.elementType===e.type?n.memoizedProps:Zn(e.type,n.memoizedProps);i.componentDidUpdate(a,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var l=e.updateQueue;l!==null&&I0(e,l,i);break;case 3:var h=e.updateQueue;if(h!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}I0(e,h,n)}break;case 5:var x=e.stateNode;if(n===null&&e.flags&4){n=x;var m=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":m.autoFocus&&n.focus();break;case"img":m.src&&(n.src=m.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var y=g.memoizedState;if(y!==null){var C=y.dehydrated;C!==null&&ia(C)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}qt||e.flags&512&&rh(e)}catch(I){yt(e,e.return,I)}}if(e===t){ie=null;break}if(n=e.sibling,n!==null){n.return=e.return,ie=n;break}ie=e.return}}function j0(t){for(;ie!==null;){var e=ie;if(e===t){ie=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ie=n;break}ie=e.return}}function H0(t){for(;ie!==null;){var e=ie;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Bc(4,e)}catch(m){yt(e,n,m)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var a=e.return;try{i.componentDidMount()}catch(m){yt(e,a,m)}}var l=e.return;try{rh(e)}catch(m){yt(e,l,m)}break;case 5:var h=e.return;try{rh(e)}catch(m){yt(e,h,m)}}}catch(m){yt(e,e.return,m)}if(e===t){ie=null;break}var x=e.sibling;if(x!==null){x.return=e.return,ie=x;break}ie=e.return}}var YE=Math.ceil,ql=zr.ReactCurrentDispatcher,wd=zr.ReactCurrentOwner,Vn=zr.ReactCurrentBatchConfig,Le=0,Ut=null,It=null,Gt=0,Nn=0,Os=vi(0),Ot=0,pa=null,Ki=0,Fc=0,yd=0,Go=null,pn=null,Cd=0,qs=1/0,vr=null,Jl=!1,oh=null,ui=null,gl=!1,ri=null,$l=0,Yo=0,ah=null,Tl=-1,Nl=0;function sn(){return Le&6?_t():Tl!==-1?Tl:Tl=_t()}function fi(t){return t.mode&1?Le&2&&Gt!==0?Gt&-Gt:RE.transition!==null?(Nl===0&&(Nl=tm()),Nl):(t=He,t!==0||(t=window.event,t=t===void 0?16:lm(t.type)),t):1}function ir(t,e,n,i){if(50<Yo)throw Yo=0,ah=null,Error(X(185));Sa(t,n,i),(!(Le&2)||t!==Ut)&&(t===Ut&&(!(Le&2)&&(Fc|=n),Ot===4&&ti(t,Gt)),Cn(t,i),n===1&&Le===0&&!(e.mode&1)&&(qs=_t()+500,Lc&&Si()))}function Cn(t,e){var n=t.callbackNode;RC(t,e);var i=Pl(t,t===Ut?Gt:0);if(i===0)n!==null&&q1(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&q1(n),e===1)t.tag===0?NE(V0.bind(null,t)):Tm(V0.bind(null,t)),IE(function(){!(Le&6)&&Si()}),n=null;else{switch(nm(i)){case 1:n=Yh;break;case 4:n=$p;break;case 16:n=kl;break;case 536870912:n=em;break;default:n=kl}n=v2(n,w2.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function w2(t,e){if(Tl=-1,Nl=0,Le&6)throw Error(X(327));var n=t.callbackNode;if(js()&&t.callbackNode!==n)return null;var i=Pl(t,t===Ut?Gt:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=ec(t,i);else{e=i;var a=Le;Le|=2;var l=C2();(Ut!==t||Gt!==e)&&(vr=null,qs=_t()+500,Wi(t,e));do try{KE();break}catch(x){y2(t,x)}while(!0);sd(),ql.current=l,Le=a,It!==null?e=0:(Ut=null,Gt=0,e=Ot)}if(e!==0){if(e===2&&(a=Lf(t),a!==0&&(i=a,e=lh(t,a))),e===1)throw n=pa,Wi(t,0),ti(t,i),Cn(t,_t()),n;if(e===6)ti(t,i);else{if(a=t.current.alternate,!(i&30)&&!XE(a)&&(e=ec(t,i),e===2&&(l=Lf(t),l!==0&&(i=l,e=lh(t,l))),e===1))throw n=pa,Wi(t,0),ti(t,i),Cn(t,_t()),n;switch(t.finishedWork=a,t.finishedLanes=i,e){case 0:case 1:throw Error(X(345));case 2:ki(t,pn,vr);break;case 3:if(ti(t,i),(i&130023424)===i&&(e=Cd+500-_t(),10<e)){if(Pl(t,0)!==0)break;if(a=t.suspendedLanes,(a&i)!==i){sn(),t.pingedLanes|=t.suspendedLanes&a;break}t.timeoutHandle=Hf(ki.bind(null,t,pn,vr),e);break}ki(t,pn,vr);break;case 4:if(ti(t,i),(i&4194240)===i)break;for(e=t.eventTimes,a=-1;0<i;){var h=31-rr(i);l=1<<h,h=e[h],h>a&&(a=h),i&=~l}if(i=a,i=_t()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*YE(i/1960))-i,10<i){t.timeoutHandle=Hf(ki.bind(null,t,pn,vr),i);break}ki(t,pn,vr);break;case 5:ki(t,pn,vr);break;default:throw Error(X(329))}}}return Cn(t,_t()),t.callbackNode===n?w2.bind(null,t):null}function lh(t,e){var n=Go;return t.current.memoizedState.isDehydrated&&(Wi(t,e).flags|=256),t=ec(t,e),t!==2&&(e=pn,pn=n,e!==null&&ch(e)),t}function ch(t){pn===null?pn=t:pn.push.apply(pn,t)}function XE(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var a=n[i],l=a.getSnapshot;a=a.value;try{if(!or(l(),a))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ti(t,e){for(e&=~yd,e&=~Fc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-rr(e),i=1<<n;t[n]=-1,e&=~i}}function V0(t){if(Le&6)throw Error(X(327));js();var e=Pl(t,0);if(!(e&1))return Cn(t,_t()),null;var n=ec(t,e);if(t.tag!==0&&n===2){var i=Lf(t);i!==0&&(e=i,n=lh(t,i))}if(n===1)throw n=pa,Wi(t,0),ti(t,e),Cn(t,_t()),n;if(n===6)throw Error(X(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ki(t,pn,vr),Cn(t,_t()),null}function Ed(t,e){var n=Le;Le|=1;try{return t(e)}finally{Le=n,Le===0&&(qs=_t()+500,Lc&&Si())}}function Zi(t){ri!==null&&ri.tag===0&&!(Le&6)&&js();var e=Le;Le|=1;var n=Vn.transition,i=He;try{if(Vn.transition=null,He=1,t)return t()}finally{He=i,Vn.transition=n,Le=e,!(Le&6)&&Si()}}function _d(){Nn=Os.current,st(Os)}function Wi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AE(n)),It!==null)for(n=It.return;n!==null;){var i=n;switch(nd(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&jl();break;case 3:Ks(),st(wn),st($t),fd();break;case 5:ud(i);break;case 4:Ks();break;case 13:st(ut);break;case 19:st(ut);break;case 10:od(i.type._context);break;case 22:case 23:_d()}n=n.return}if(Ut=t,It=t=hi(t.current,null),Gt=Nn=e,Ot=0,pa=null,yd=Fc=Ki=0,pn=Go=null,Ui!==null){for(e=0;e<Ui.length;e++)if(n=Ui[e],i=n.interleaved,i!==null){n.interleaved=null;var a=i.next,l=n.pending;if(l!==null){var h=l.next;l.next=a,i.next=h}n.pending=i}Ui=null}return t}function y2(t,e){do{var n=It;try{if(sd(),Il.current=Zl,Kl){for(var i=ht.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}Kl=!1}if(Qi=0,Bt=Nt=ht=null,Vo=!1,ha=0,wd.current=null,n===null||n.return===null){Ot=1,pa=e,It=null;break}e:{var l=t,h=n.return,x=n,m=e;if(e=Gt,x.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){var g=m,y=x,C=y.tag;if(!(y.mode&1)&&(C===0||C===11||C===15)){var I=y.alternate;I?(y.updateQueue=I.updateQueue,y.memoizedState=I.memoizedState,y.lanes=I.lanes):(y.updateQueue=null,y.memoizedState=null)}var R=M0(h);if(R!==null){R.flags&=-257,b0(R,h,x,l,e),R.mode&1&&R0(l,g,e),e=R,m=g;var b=e.updateQueue;if(b===null){var L=new Set;L.add(m),e.updateQueue=L}else b.add(m);break e}else{if(!(e&1)){R0(l,g,e),Ad();break e}m=Error(X(426))}}else if(at&&x.mode&1){var F=M0(h);if(F!==null){!(F.flags&65536)&&(F.flags|=256),b0(F,h,x,l,e),rd(Zs(m,x));break e}}l=m=Zs(m,x),Ot!==4&&(Ot=2),Go===null?Go=[l]:Go.push(l),l=h;do{switch(l.tag){case 3:l.flags|=65536,e&=-e,l.lanes|=e;var O=n2(l,m,e);A0(l,O);break e;case 1:x=m;var N=l.type,M=l.stateNode;if(!(l.flags&128)&&(typeof N.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(ui===null||!ui.has(M)))){l.flags|=65536,e&=-e,l.lanes|=e;var U=r2(l,x,e);A0(l,U);break e}}l=l.return}while(l!==null)}_2(n)}catch(q){e=q,It===n&&n!==null&&(It=n=n.return);continue}break}while(!0)}function C2(){var t=ql.current;return ql.current=Zl,t===null?Zl:t}function Ad(){(Ot===0||Ot===3||Ot===2)&&(Ot=4),Ut===null||!(Ki&268435455)&&!(Fc&268435455)||ti(Ut,Gt)}function ec(t,e){var n=Le;Le|=2;var i=C2();(Ut!==t||Gt!==e)&&(vr=null,Wi(t,e));do try{QE();break}catch(a){y2(t,a)}while(!0);if(sd(),Le=n,ql.current=i,It!==null)throw Error(X(261));return Ut=null,Gt=0,Ot}function QE(){for(;It!==null;)E2(It)}function KE(){for(;It!==null&&!CC();)E2(It)}function E2(t){var e=I2(t.alternate,t,Nn);t.memoizedProps=t.pendingProps,e===null?_2(t):It=e,wd.current=null}function _2(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HE(n,e),n!==null){n.flags&=32767,It=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ot=6,It=null;return}}else if(n=jE(n,e,Nn),n!==null){It=n;return}if(e=e.sibling,e!==null){It=e;return}It=e=t}while(e!==null);Ot===0&&(Ot=5)}function ki(t,e,n){var i=He,a=Vn.transition;try{Vn.transition=null,He=1,ZE(t,e,n,i)}finally{Vn.transition=a,He=i}return null}function ZE(t,e,n,i){do js();while(ri!==null);if(Le&6)throw Error(X(327));n=t.finishedWork;var a=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(X(177));t.callbackNode=null,t.callbackPriority=0;var l=n.lanes|n.childLanes;if(MC(t,l),t===Ut&&(It=Ut=null,Gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gl||(gl=!0,v2(kl,function(){return js(),null})),l=(n.flags&15990)!==0,n.subtreeFlags&15990||l){l=Vn.transition,Vn.transition=null;var h=He;He=1;var x=Le;Le|=4,wd.current=null,WE(t,n),m2(n,t),mE(zf),Bl=!!Uf,zf=Uf=null,t.current=n,GE(n),EC(),Le=x,He=h,Vn.transition=l}else t.current=n;if(gl&&(gl=!1,ri=t,$l=a),l=t.pendingLanes,l===0&&(ui=null),IC(n.stateNode),Cn(t,_t()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)a=e[n],i(a.value,{componentStack:a.stack,digest:a.digest});if(Jl)throw Jl=!1,t=oh,oh=null,t;return $l&1&&t.tag!==0&&js(),l=t.pendingLanes,l&1?t===ah?Yo++:(Yo=0,ah=t):Yo=0,Si(),null}function js(){if(ri!==null){var t=nm($l),e=Vn.transition,n=He;try{if(Vn.transition=null,He=16>t?16:t,ri===null)var i=!1;else{if(t=ri,ri=null,$l=0,Le&6)throw Error(X(331));var a=Le;for(Le|=4,ie=t.current;ie!==null;){var l=ie,h=l.child;if(ie.flags&16){var x=l.deletions;if(x!==null){for(var m=0;m<x.length;m++){var g=x[m];for(ie=g;ie!==null;){var y=ie;switch(y.tag){case 0:case 11:case 15:Wo(8,y,l)}var C=y.child;if(C!==null)C.return=y,ie=C;else for(;ie!==null;){y=ie;var I=y.sibling,R=y.return;if(d2(y),y===g){ie=null;break}if(I!==null){I.return=R,ie=I;break}ie=R}}}var b=l.alternate;if(b!==null){var L=b.child;if(L!==null){b.child=null;do{var F=L.sibling;L.sibling=null,L=F}while(L!==null)}}ie=l}}if(l.subtreeFlags&2064&&h!==null)h.return=l,ie=h;else e:for(;ie!==null;){if(l=ie,l.flags&2048)switch(l.tag){case 0:case 11:case 15:Wo(9,l,l.return)}var O=l.sibling;if(O!==null){O.return=l.return,ie=O;break e}ie=l.return}}var N=t.current;for(ie=N;ie!==null;){h=ie;var M=h.child;if(h.subtreeFlags&2064&&M!==null)M.return=h,ie=M;else e:for(h=N;ie!==null;){if(x=ie,x.flags&2048)try{switch(x.tag){case 0:case 11:case 15:Bc(9,x)}}catch(q){yt(x,x.return,q)}if(x===h){ie=null;break e}var U=x.sibling;if(U!==null){U.return=x.return,ie=U;break e}ie=x.return}}if(Le=a,Si(),Cr&&typeof Cr.onPostCommitFiberRoot=="function")try{Cr.onPostCommitFiberRoot(Rc,t)}catch{}i=!0}return i}finally{He=n,Vn.transition=e}}return!1}function W0(t,e,n){e=Zs(n,e),e=n2(t,e,1),t=ci(t,e,1),e=sn(),t!==null&&(Sa(t,1,e),Cn(t,e))}function yt(t,e,n){if(t.tag===3)W0(t,t,n);else for(;e!==null;){if(e.tag===3){W0(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(ui===null||!ui.has(i))){t=Zs(n,t),t=r2(e,t,1),e=ci(e,t,1),t=sn(),e!==null&&(Sa(e,1,t),Cn(e,t));break}}e=e.return}}function qE(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=sn(),t.pingedLanes|=t.suspendedLanes&n,Ut===t&&(Gt&n)===n&&(Ot===4||Ot===3&&(Gt&130023424)===Gt&&500>_t()-Cd?Wi(t,0):yd|=n),Cn(t,e)}function A2(t,e){e===0&&(t.mode&1?(e=il,il<<=1,!(il&130023424)&&(il=4194304)):e=1);var n=sn();t=kr(t,e),t!==null&&(Sa(t,e,n),Cn(t,n))}function JE(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),A2(t,n)}function $E(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,a=t.memoizedState;a!==null&&(n=a.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(X(314))}i!==null&&i.delete(e),A2(t,n)}var I2;I2=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wn.current)mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mn=!1,zE(t,e,n);mn=!!(t.flags&131072)}else mn=!1,at&&e.flags&1048576&&Nm(e,Wl,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Sl(t,e),t=e.pendingProps;var a=Ys(e,$t.current);zs(e,n),a=dd(null,e,i,t,a,n);var l=gd();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yn(i)?(l=!0,Hl(e)):l=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,ld(e),a.updater=Pc,e.stateNode=a,a._reactInternals=e,Kf(e,i,t,n),e=Jf(null,e,i,!0,l,n)):(e.tag=0,at&&l&&td(e),nn(null,e,a,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Sl(t,e),t=e.pendingProps,a=i._init,i=a(i._payload),e.type=i,a=e.tag=t_(i),t=Zn(i,t),a){case 0:e=qf(null,e,i,t,n);break e;case 1:e=L0(null,e,i,t,n);break e;case 11:e=O0(null,e,i,t,n);break e;case 14:e=D0(null,e,i,Zn(i.type,t),n);break e}throw Error(X(306,i,""))}return e;case 0:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Zn(i,a),qf(t,e,i,a,n);case 1:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Zn(i,a),L0(t,e,i,a,n);case 3:e:{if(a2(e),t===null)throw Error(X(387));i=e.pendingProps,l=e.memoizedState,a=l.element,Lm(t,e),Xl(e,i,null,n);var h=e.memoizedState;if(i=h.element,l.isDehydrated)if(l={element:i,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},e.updateQueue.baseState=l,e.memoizedState=l,e.flags&256){a=Zs(Error(X(423)),e),e=k0(t,e,i,n,a);break e}else if(i!==a){a=Zs(Error(X(424)),e),e=k0(t,e,i,n,a);break e}else for(Mn=li(e.stateNode.containerInfo.firstChild),bn=e,at=!0,$n=null,n=Om(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xs(),i===a){e=Pr(t,e,n);break e}nn(t,e,i,n)}e=e.child}return e;case 5:return km(e),t===null&&Yf(e),i=e.type,a=e.pendingProps,l=t!==null?t.memoizedProps:null,h=a.children,jf(i,a)?h=null:l!==null&&jf(i,l)&&(e.flags|=32),o2(t,e),nn(t,e,h,n),e.child;case 6:return t===null&&Yf(e),null;case 13:return l2(t,e,n);case 4:return cd(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Qs(e,null,i,n):nn(t,e,i,n),e.child;case 11:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Zn(i,a),O0(t,e,i,a,n);case 7:return nn(t,e,e.pendingProps,n),e.child;case 8:return nn(t,e,e.pendingProps.children,n),e.child;case 12:return nn(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,a=e.pendingProps,l=e.memoizedProps,h=a.value,$e(Gl,i._currentValue),i._currentValue=h,l!==null)if(or(l.value,h)){if(l.children===a.children&&!wn.current){e=Pr(t,e,n);break e}}else for(l=e.child,l!==null&&(l.return=e);l!==null;){var x=l.dependencies;if(x!==null){h=l.child;for(var m=x.firstContext;m!==null;){if(m.context===i){if(l.tag===1){m=br(-1,n&-n),m.tag=2;var g=l.updateQueue;if(g!==null){g=g.shared;var y=g.pending;y===null?m.next=m:(m.next=y.next,y.next=m),g.pending=m}}l.lanes|=n,m=l.alternate,m!==null&&(m.lanes|=n),Xf(l.return,n,e),x.lanes|=n;break}m=m.next}}else if(l.tag===10)h=l.type===e.type?null:l.child;else if(l.tag===18){if(h=l.return,h===null)throw Error(X(341));h.lanes|=n,x=h.alternate,x!==null&&(x.lanes|=n),Xf(h,n,e),h=l.sibling}else h=l.child;if(h!==null)h.return=l;else for(h=l;h!==null;){if(h===e){h=null;break}if(l=h.sibling,l!==null){l.return=h.return,h=l;break}h=h.return}l=h}nn(t,e,a.children,n),e=e.child}return e;case 9:return a=e.type,i=e.pendingProps.children,zs(e,n),a=Wn(a),i=i(a),e.flags|=1,nn(t,e,i,n),e.child;case 14:return i=e.type,a=Zn(i,e.pendingProps),a=Zn(i.type,a),D0(t,e,i,a,n);case 15:return i2(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,a=e.pendingProps,a=e.elementType===i?a:Zn(i,a),Sl(t,e),e.tag=1,yn(i)?(t=!0,Hl(e)):t=!1,zs(e,n),t2(e,i,a),Kf(e,i,a,n),Jf(null,e,i,!0,t,n);case 19:return c2(t,e,n);case 22:return s2(t,e,n)}throw Error(X(156,e.tag))};function v2(t,e){return Jp(t,e)}function e_(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hn(t,e,n,i){return new e_(t,e,n,i)}function Id(t){return t=t.prototype,!(!t||!t.isReactComponent)}function t_(t){if(typeof t=="function")return Id(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Vh)return 11;if(t===Wh)return 14}return 2}function hi(t,e){var n=t.alternate;return n===null?(n=Hn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rl(t,e,n,i,a,l){var h=2;if(i=t,typeof t=="function")Id(t)&&(h=1);else if(typeof t=="string")h=5;else e:switch(t){case _s:return Gi(n.children,a,l,e);case Hh:h=8,a|=8;break;case yf:return t=Hn(12,n,e,a|2),t.elementType=yf,t.lanes=l,t;case Cf:return t=Hn(13,n,e,a),t.elementType=Cf,t.lanes=l,t;case Ef:return t=Hn(19,n,e,a),t.elementType=Ef,t.lanes=l,t;case kp:return Uc(n,a,l,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Dp:h=10;break e;case Lp:h=9;break e;case Vh:h=11;break e;case Wh:h=14;break e;case Jr:h=16,i=null;break e}throw Error(X(130,t==null?t:typeof t,""))}return e=Hn(h,n,e,a),e.elementType=t,e.type=i,e.lanes=l,e}function Gi(t,e,n,i){return t=Hn(7,t,i,e),t.lanes=n,t}function Uc(t,e,n,i){return t=Hn(22,t,i,e),t.elementType=kp,t.lanes=n,t.stateNode={isHidden:!1},t}function ef(t,e,n){return t=Hn(6,t,null,e),t.lanes=n,t}function tf(t,e,n){return e=Hn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function n_(t,e,n,i,a){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ku(0),this.expirationTimes=ku(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ku(0),this.identifierPrefix=i,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function vd(t,e,n,i,a,l,h,x,m){return t=new n_(t,e,n,x,m),e===1?(e=1,l===!0&&(e|=8)):e=0,l=Hn(3,null,null,e),t.current=l,l.stateNode=t,l.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ld(l),t}function r_(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Es,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function S2(t){if(!t)return wi;t=t._reactInternals;e:{if(ss(t)!==t||t.tag!==1)throw Error(X(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(X(171))}if(t.tag===1){var n=t.type;if(yn(n))return Sm(t,n,e)}return e}function T2(t,e,n,i,a,l,h,x,m){return t=vd(n,i,!0,t,a,l,h,x,m),t.context=S2(null),n=t.current,i=sn(),a=fi(n),l=br(i,a),l.callback=e??null,ci(n,l,a),t.current.lanes=a,Sa(t,a,i),Cn(t,i),t}function zc(t,e,n,i){var a=e.current,l=sn(),h=fi(a);return n=S2(n),e.context===null?e.context=n:e.pendingContext=n,e=br(l,h),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=ci(a,e,h),t!==null&&(ir(t,a,h,l),Al(t,a,h)),h}function tc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function G0(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Sd(t,e){G0(t,e),(t=t.alternate)&&G0(t,e)}function i_(){return null}var N2=typeof reportError=="function"?reportError:function(t){console.error(t)};function Td(t){this._internalRoot=t}jc.prototype.render=Td.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(X(409));zc(t,e,null,null)};jc.prototype.unmount=Td.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zi(function(){zc(null,t,null,null)}),e[Lr]=null}};function jc(t){this._internalRoot=t}jc.prototype.unstable_scheduleHydration=function(t){if(t){var e=sm();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ei.length&&e!==0&&e<ei[n].priority;n++);ei.splice(n,0,t),n===0&&am(t)}};function Nd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Hc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Y0(){}function s_(t,e,n,i,a){if(a){if(typeof i=="function"){var l=i;i=function(){var g=tc(h);l.call(g)}}var h=T2(e,i,t,0,null,!1,!1,"",Y0);return t._reactRootContainer=h,t[Lr]=h.current,aa(t.nodeType===8?t.parentNode:t),Zi(),h}for(;a=t.lastChild;)t.removeChild(a);if(typeof i=="function"){var x=i;i=function(){var g=tc(m);x.call(g)}}var m=vd(t,0,!1,null,null,!1,!1,"",Y0);return t._reactRootContainer=m,t[Lr]=m.current,aa(t.nodeType===8?t.parentNode:t),Zi(function(){zc(e,m,n,i)}),m}function Vc(t,e,n,i,a){var l=n._reactRootContainer;if(l){var h=l;if(typeof a=="function"){var x=a;a=function(){var m=tc(h);x.call(m)}}zc(e,h,t,a)}else h=s_(n,e,t,a,i);return tc(h)}rm=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Po(e.pendingLanes);n!==0&&(Xh(e,n|1),Cn(e,_t()),!(Le&6)&&(qs=_t()+500,Si()))}break;case 13:Zi(function(){var i=kr(t,1);if(i!==null){var a=sn();ir(i,t,1,a)}}),Sd(t,1)}};Qh=function(t){if(t.tag===13){var e=kr(t,134217728);if(e!==null){var n=sn();ir(e,t,134217728,n)}Sd(t,134217728)}};im=function(t){if(t.tag===13){var e=fi(t),n=kr(t,e);if(n!==null){var i=sn();ir(n,t,e,i)}Sd(t,e)}};sm=function(){return He};om=function(t,e){var n=He;try{return He=t,e()}finally{He=n}};bf=function(t,e,n){switch(e){case"input":if(If(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var a=Dc(i);if(!a)throw Error(X(90));Bp(i),If(i,a)}}}break;case"textarea":Up(t,n);break;case"select":e=n.value,e!=null&&Ps(t,!!n.multiple,e,!1)}};Yp=Ed;Xp=Zi;var o_={usingClientEntryPoint:!1,Events:[Na,Ss,Dc,Wp,Gp,Ed]},Ro={findFiberByHostInstance:Fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},a_={bundleType:Ro.bundleType,version:Ro.version,rendererPackageName:Ro.rendererPackageName,rendererConfig:Ro.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:zr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Zp(t),t===null?null:t.stateNode},findFiberByHostInstance:Ro.findFiberByHostInstance||i_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pl.isDisabled&&pl.supportsFiber)try{Rc=pl.inject(a_),Cr=pl}catch{}}Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=o_;Ln.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nd(e))throw Error(X(200));return r_(t,e,null,n)};Ln.createRoot=function(t,e){if(!Nd(t))throw Error(X(299));var n=!1,i="",a=N2;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=vd(t,1,!1,null,null,n,!1,i,a),t[Lr]=e.current,aa(t.nodeType===8?t.parentNode:t),new Td(e)};Ln.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(X(188)):(t=Object.keys(t).join(","),Error(X(268,t)));return t=Zp(e),t=t===null?null:t.stateNode,t};Ln.flushSync=function(t){return Zi(t)};Ln.hydrate=function(t,e,n){if(!Hc(e))throw Error(X(200));return Vc(null,t,e,!0,n)};Ln.hydrateRoot=function(t,e,n){if(!Nd(t))throw Error(X(405));var i=n!=null&&n.hydratedSources||null,a=!1,l="",h=N2;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(l=n.identifierPrefix),n.onRecoverableError!==void 0&&(h=n.onRecoverableError)),e=T2(e,null,t,1,n??null,a,!1,l,h),t[Lr]=e.current,aa(t),i)for(t=0;t<i.length;t++)n=i[t],a=n._getVersion,a=a(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,a]:e.mutableSourceEagerHydrationData.push(n,a);return new jc(e)};Ln.render=function(t,e,n){if(!Hc(e))throw Error(X(200));return Vc(null,t,e,!1,n)};Ln.unmountComponentAtNode=function(t){if(!Hc(t))throw Error(X(40));return t._reactRootContainer?(Zi(function(){Vc(null,null,t,!1,function(){t._reactRootContainer=null,t[Lr]=null})}),!0):!1};Ln.unstable_batchedUpdates=Ed;Ln.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Hc(n))throw Error(X(200));if(t==null||t._reactInternals===void 0)throw Error(X(38));return Vc(t,e,n,!1,i)};Ln.version="18.3.1-next-f1338f8080-20240426";function R2(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R2)}catch(t){console.error(t)}}R2(),Rp.exports=Ln;var l_=Rp.exports,X0=l_;xf.createRoot=X0.createRoot,xf.hydrateRoot=X0.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function nc(){return nc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},nc.apply(this,arguments)}var ii;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ii||(ii={}));const Q0="popstate";function c_(t){t===void 0&&(t={});function e(a,l){let{pathname:h="/",search:x="",hash:m=""}=Ma(a.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),uh("",{pathname:h,search:x,hash:m},l.state&&l.state.usr||null,l.state&&l.state.key||"default")}function n(a,l){let h=a.document.querySelector("base"),x="";if(h&&h.getAttribute("href")){let m=a.location.href,g=m.indexOf("#");x=g===-1?m:m.slice(0,g)}return x+"#"+(typeof l=="string"?l:M2(l))}function i(a,l){Rd(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(l)+")")}return f_(e,n,i,t)}function An(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Rd(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function u_(){return Math.random().toString(36).substr(2,8)}function K0(t,e){return{usr:t.state,key:t.key,idx:e}}function uh(t,e,n,i){return n===void 0&&(n=null),nc({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ma(e):e,{state:n,key:e&&e.key||i||u_()})}function M2(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ma(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function f_(t,e,n,i){i===void 0&&(i={});let{window:a=document.defaultView,v5Compat:l=!1}=i,h=a.history,x=ii.Pop,m=null,g=y();g==null&&(g=0,h.replaceState(nc({},h.state,{idx:g}),""));function y(){return(h.state||{idx:null}).idx}function C(){x=ii.Pop;let F=y(),O=F==null?null:F-g;g=F,m&&m({action:x,location:L.location,delta:O})}function I(F,O){x=ii.Push;let N=uh(L.location,F,O);n&&n(N,F),g=y()+1;let M=K0(N,g),U=L.createHref(N);try{h.pushState(M,"",U)}catch(q){if(q instanceof DOMException&&q.name==="DataCloneError")throw q;a.location.assign(U)}l&&m&&m({action:x,location:L.location,delta:1})}function R(F,O){x=ii.Replace;let N=uh(L.location,F,O);n&&n(N,F),g=y();let M=K0(N,g),U=L.createHref(N);h.replaceState(M,"",U),l&&m&&m({action:x,location:L.location,delta:0})}function b(F){let O=a.location.origin!=="null"?a.location.origin:a.location.href,N=typeof F=="string"?F:M2(F);return N=N.replace(/ $/,"%20"),An(O,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,O)}let L={get action(){return x},get location(){return t(a,h)},listen(F){if(m)throw new Error("A history only accepts one active listener");return a.addEventListener(Q0,C),m=F,()=>{a.removeEventListener(Q0,C),m=null}},createHref(F){return e(a,F)},createURL:b,encodeLocation(F){let O=b(F);return{pathname:O.pathname,search:O.search,hash:O.hash}},push:I,replace:R,go(F){return h.go(F)}};return L}var Z0;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Z0||(Z0={}));function h_(t,e,n){return n===void 0&&(n="/"),d_(t,e,n)}function d_(t,e,n,i){let a=typeof e=="string"?Ma(e):e,l=D2(a.pathname||"/",n);if(l==null)return null;let h=b2(t);g_(h);let x=null;for(let m=0;x==null&&m<h.length;++m){let g=S_(l);x=A_(h[m],g)}return x}function b2(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let a=(l,h,x)=>{let m={relativePath:x===void 0?l.path||"":x,caseSensitive:l.caseSensitive===!0,childrenIndex:h,route:l};m.relativePath.startsWith("/")&&(An(m.relativePath.startsWith(i),'Absolute route path "'+m.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),m.relativePath=m.relativePath.slice(i.length));let g=Hs([i,m.relativePath]),y=n.concat(m);l.children&&l.children.length>0&&(An(l.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),b2(l.children,e,y,g)),!(l.path==null&&!l.index)&&e.push({path:g,score:E_(g,l.index),routesMeta:y})};return t.forEach((l,h)=>{var x;if(l.path===""||!((x=l.path)!=null&&x.includes("?")))a(l,h);else for(let m of O2(l.path))a(l,h,m)}),e}function O2(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,a=n.endsWith("?"),l=n.replace(/\?$/,"");if(i.length===0)return a?[l,""]:[l];let h=O2(i.join("/")),x=[];return x.push(...h.map(m=>m===""?l:[l,m].join("/"))),a&&x.push(...h),x.map(m=>t.startsWith("/")&&m===""?"/":m)}function g_(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:__(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const p_=/^:[\w-]+$/,m_=3,x_=2,w_=1,y_=10,C_=-2,q0=t=>t==="*";function E_(t,e){let n=t.split("/"),i=n.length;return n.some(q0)&&(i+=C_),e&&(i+=x_),n.filter(a=>!q0(a)).reduce((a,l)=>a+(p_.test(l)?m_:l===""?w_:y_),i)}function __(t,e){return t.length===e.length&&t.slice(0,-1).every((i,a)=>i===e[a])?t[t.length-1]-e[e.length-1]:0}function A_(t,e,n){let{routesMeta:i}=t,a={},l="/",h=[];for(let x=0;x<i.length;++x){let m=i[x],g=x===i.length-1,y=l==="/"?e:e.slice(l.length)||"/",C=I_({path:m.relativePath,caseSensitive:m.caseSensitive,end:g},y),I=m.route;if(!C)return null;Object.assign(a,C.params),h.push({params:a,pathname:Hs([l,C.pathname]),pathnameBase:T_(Hs([l,C.pathnameBase])),route:I}),C.pathnameBase!=="/"&&(l=Hs([l,C.pathnameBase]))}return h}function I_(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=v_(t.path,t.caseSensitive,t.end),a=e.match(n);if(!a)return null;let l=a[0],h=l.replace(/(.)\/+$/,"$1"),x=a.slice(1);return{params:i.reduce((g,y,C)=>{let{paramName:I,isOptional:R}=y;if(I==="*"){let L=x[C]||"";h=l.slice(0,l.length-L.length).replace(/(.)\/+$/,"$1")}const b=x[C];return R&&!b?g[I]=void 0:g[I]=(b||"").replace(/%2F/g,"/"),g},{}),pathname:l,pathnameBase:h,pattern:t}}function v_(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Rd(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],a="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,x,m)=>(i.push({paramName:x,isOptional:m!=null}),m?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),a+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":t!==""&&t!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),i]}function S_(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Rd(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function D2(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}const Hs=t=>t.join("/").replace(/\/\/+/g,"/"),T_=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/");function N_(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const L2=["post","put","patch","delete"];new Set(L2);const R_=["get",...L2];new Set(R_);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function rc(){return rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},rc.apply(this,arguments)}const M_=ce.createContext(null),b_=ce.createContext(null),k2=ce.createContext(null),Wc=ce.createContext(null),Gc=ce.createContext({outlet:null,matches:[],isDataRoute:!1}),P2=ce.createContext(null);function Md(){return ce.useContext(Wc)!=null}function O_(){return Md()||An(!1),ce.useContext(Wc).location}function D_(t,e){return L_(t,e)}function L_(t,e,n,i){Md()||An(!1);let{navigator:a}=ce.useContext(k2),{matches:l}=ce.useContext(Gc),h=l[l.length-1],x=h?h.params:{};h&&h.pathname;let m=h?h.pathnameBase:"/";h&&h.route;let g=O_(),y;if(e){var C;let F=typeof e=="string"?Ma(e):e;m==="/"||(C=F.pathname)!=null&&C.startsWith(m)||An(!1),y=F}else y=g;let I=y.pathname||"/",R=I;if(m!=="/"){let F=m.replace(/^\//,"").split("/");R="/"+I.replace(/^\//,"").split("/").slice(F.length).join("/")}let b=h_(t,{pathname:R}),L=U_(b&&b.map(F=>Object.assign({},F,{params:Object.assign({},x,F.params),pathname:Hs([m,a.encodeLocation?a.encodeLocation(F.pathname).pathname:F.pathname]),pathnameBase:F.pathnameBase==="/"?m:Hs([m,a.encodeLocation?a.encodeLocation(F.pathnameBase).pathname:F.pathnameBase])})),l,n,i);return e&&L?ce.createElement(Wc.Provider,{value:{location:rc({pathname:"/",search:"",hash:"",state:null,key:"default"},y),navigationType:ii.Pop}},L):L}function k_(){let t=V_(),e=N_(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ce.createElement(ce.Fragment,null,ce.createElement("h2",null,"Unexpected Application Error!"),ce.createElement("h3",{style:{fontStyle:"italic"}},e),n?ce.createElement("pre",{style:a},n):null,null)}const P_=ce.createElement(k_,null);class B_ extends ce.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?ce.createElement(Gc.Provider,{value:this.props.routeContext},ce.createElement(P2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function F_(t){let{routeContext:e,match:n,children:i}=t,a=ce.useContext(M_);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),ce.createElement(Gc.Provider,{value:e},i)}function U_(t,e,n,i){var a;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var l;if(!n)return null;if(n.errors)t=n.matches;else if((l=i)!=null&&l.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let h=t,x=(a=n)==null?void 0:a.errors;if(x!=null){let y=h.findIndex(C=>C.route.id&&(x==null?void 0:x[C.route.id])!==void 0);y>=0||An(!1),h=h.slice(0,Math.min(h.length,y+1))}let m=!1,g=-1;if(n&&i&&i.v7_partialHydration)for(let y=0;y<h.length;y++){let C=h[y];if((C.route.HydrateFallback||C.route.hydrateFallbackElement)&&(g=y),C.route.id){let{loaderData:I,errors:R}=n,b=C.route.loader&&I[C.route.id]===void 0&&(!R||R[C.route.id]===void 0);if(C.route.lazy||b){m=!0,g>=0?h=h.slice(0,g+1):h=[h[0]];break}}}return h.reduceRight((y,C,I)=>{let R,b=!1,L=null,F=null;n&&(R=x&&C.route.id?x[C.route.id]:void 0,L=C.route.errorElement||P_,m&&(g<0&&I===0?(W_("route-fallback"),b=!0,F=null):g===I&&(b=!0,F=C.route.hydrateFallbackElement||null)));let O=e.concat(h.slice(0,I+1)),N=()=>{let M;return R?M=L:b?M=F:C.route.Component?M=ce.createElement(C.route.Component,null):C.route.element?M=C.route.element:M=y,ce.createElement(F_,{match:C,routeContext:{outlet:y,matches:O,isDataRoute:n!=null},children:M})};return n&&(C.route.ErrorBoundary||C.route.errorElement||I===0)?ce.createElement(B_,{location:n.location,revalidation:n.revalidation,component:L,error:R,children:N(),routeContext:{outlet:null,matches:O,isDataRoute:!0}}):N()},null)}var B2=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(B2||{});function z_(t){let e=ce.useContext(b_);return e||An(!1),e}function j_(t){let e=ce.useContext(Gc);return e||An(!1),e}function H_(t){let e=j_(),n=e.matches[e.matches.length-1];return n.route.id||An(!1),n.route.id}function V_(){var t;let e=ce.useContext(P2),n=z_(B2.UseRouteError),i=H_();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}const J0={};function W_(t,e,n){J0[t]||(J0[t]=!0)}function G_(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ml(t){An(!1)}function Y_(t){let{basename:e="/",children:n=null,location:i,navigationType:a=ii.Pop,navigator:l,static:h=!1,future:x}=t;Md()&&An(!1);let m=e.replace(/^\/*/,"/"),g=ce.useMemo(()=>({basename:m,navigator:l,static:h,future:rc({v7_relativeSplatPath:!1},x)}),[m,x,l,h]);typeof i=="string"&&(i=Ma(i));let{pathname:y="/",search:C="",hash:I="",state:R=null,key:b="default"}=i,L=ce.useMemo(()=>{let F=D2(y,m);return F==null?null:{location:{pathname:F,search:C,hash:I,state:R,key:b},navigationType:a}},[m,y,C,I,R,b,a]);return L==null?null:ce.createElement(k2.Provider,{value:g},ce.createElement(Wc.Provider,{children:n,value:L}))}function X_(t){let{children:e,location:n}=t;return D_(fh(e),n)}new Promise(()=>{});function fh(t,e){e===void 0&&(e=[]);let n=[];return ce.Children.forEach(t,(i,a)=>{if(!ce.isValidElement(i))return;let l=[...e,a];if(i.type===ce.Fragment){n.push.apply(n,fh(i.props.children,l));return}i.type!==Ml&&An(!1),!i.props.index||!i.props.children||An(!1);let h={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(h.children=fh(i.props.children,l)),n.push(h)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const Q_="6";try{window.__reactRouterVersion=Q_}catch{}const K_="startTransition",$0=qy[K_];function Z_(t){let{basename:e,children:n,future:i,window:a}=t,l=ce.useRef();l.current==null&&(l.current=c_({window:a,v5Compat:!0}));let h=l.current,[x,m]=ce.useState({action:h.action,location:h.location}),{v7_startTransition:g}=i||{},y=ce.useCallback(C=>{g&&$0?$0(()=>m(C)):m(C)},[m,g]);return ce.useLayoutEffect(()=>h.listen(y),[h,y]),ce.useEffect(()=>G_(i),[i]),ce.createElement(Y_,{basename:e,children:n,location:x.location,navigationType:x.action,navigator:h,future:i})}var eg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(eg||(eg={}));var tg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tg||(tg={}));var ng={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $=function(t,e){if(!t)throw so(e)},so=function(t){return new Error("Firebase Database ("+F2.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):(a&64512)===55296&&i+1<t.length&&(t.charCodeAt(i+1)&64512)===56320?(a=65536+((a&1023)<<10)+(t.charCodeAt(++i)&1023),e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},q_=function(t){const e=[];let n=0,i=0;for(;n<t.length;){const a=t[n++];if(a<128)e[i++]=String.fromCharCode(a);else if(a>191&&a<224){const l=t[n++];e[i++]=String.fromCharCode((a&31)<<6|l&63)}else if(a>239&&a<365){const l=t[n++],h=t[n++],x=t[n++],m=((a&7)<<18|(l&63)<<12|(h&63)<<6|x&63)-65536;e[i++]=String.fromCharCode(55296+(m>>10)),e[i++]=String.fromCharCode(56320+(m&1023))}else{const l=t[n++],h=t[n++];e[i++]=String.fromCharCode((a&15)<<12|(l&63)<<6|h&63)}}return e.join("")},bd={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let a=0;a<t.length;a+=3){const l=t[a],h=a+1<t.length,x=h?t[a+1]:0,m=a+2<t.length,g=m?t[a+2]:0,y=l>>2,C=(l&3)<<4|x>>4;let I=(x&15)<<2|g>>6,R=g&63;m||(R=64,h||(I=64)),i.push(n[y],n[C],n[I],n[R])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(U2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):q_(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let a=0;a<t.length;){const l=n[t.charAt(a++)],x=a<t.length?n[t.charAt(a)]:0;++a;const g=a<t.length?n[t.charAt(a)]:64;++a;const C=a<t.length?n[t.charAt(a)]:64;if(++a,l==null||x==null||g==null||C==null)throw new J_;const I=l<<2|x>>4;if(i.push(I),g!==64){const R=x<<4&240|g>>2;if(i.push(R),C!==64){const b=g<<6&192|C;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class J_ extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const z2=function(t){const e=U2(t);return bd.encodeByteArray(e,!0)},ic=function(t){return z2(t).replace(/\./g,"")},hh=function(t){try{return bd.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(t){return j2(void 0,t)}function j2(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!e3(n)||(t[n]=j2(t[n],e[n]));return t}function e3(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t3(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n3=()=>t3().__FIREBASE_DEFAULTS__,r3=()=>{if(typeof process>"u"||typeof ng>"u")return;const t=ng.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},i3=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&hh(t[1]);return e&&JSON.parse(e)},H2=()=>{try{return n3()||r3()||i3()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},s3=t=>{var e,n;return(n=(e=H2())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},o3=t=>{const e=s3(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),i]:[e.substring(0,n),i]},V2=()=>{var t;return(t=H2())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,i)=>{n?this.reject(n):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a3(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",a=t.iat||0,l=t.sub||t.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:a,exp:a+3600,auth_time:a,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ic(JSON.stringify(n)),ic(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function W2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l3())}function c3(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function u3(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function f3(){return F2.NODE_ADMIN===!0}function G2(){try{return typeof indexedDB=="object"}catch{return!1}}function Y2(){return new Promise((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(i);a.onsuccess=()=>{a.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},a.onupgradeneeded=()=>{n=!1},a.onerror=()=>{var l;e(((l=a.error)===null||l===void 0?void 0:l.message)||"")}}catch(n){e(n)}})}function h3(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3="FirebaseError";class os extends Error{constructor(e,n,i){super(n),this.code=e,this.customData=i,this.name=d3,Object.setPrototypeOf(this,os.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Yc.prototype.create)}}class Yc{constructor(e,n,i){this.service=e,this.serviceName=n,this.errors=i}create(e,...n){const i=n[0]||{},a=`${this.service}/${e}`,l=this.errors[e],h=l?g3(l,i):"Error",x=`${this.serviceName}: ${h} (${a}).`;return new os(a,x,i)}}function g3(t,e){return t.replace(p3,(n,i)=>{const a=e[i];return a!=null?String(a):`<${i}?>`})}const p3=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t){return JSON.parse(t)}function Mt(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X2=function(t){let e={},n={},i={},a="";try{const l=t.split(".");e=ma(hh(l[0])||""),n=ma(hh(l[1])||""),a=l[2],i=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:i,signature:a}},m3=function(t){const e=X2(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},x3=function(t){const e=X2(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lr(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function qi(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function rg(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function sc(t,e,n){const i={};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(i[a]=e.call(n,t[a],a,t));return i}function oc(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const a of n){if(!i.includes(a))return!1;const l=t[a],h=e[a];if(ig(l)&&ig(h)){if(!oc(l,h))return!1}else if(l!==h)return!1}for(const a of i)if(!n.includes(a))return!1;return!0}function ig(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w3(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach(a=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(a))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y3{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const i=this.W_;if(typeof e=="string")for(let C=0;C<16;C++)i[C]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let C=0;C<16;C++)i[C]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let C=16;C<80;C++){const I=i[C-3]^i[C-8]^i[C-14]^i[C-16];i[C]=(I<<1|I>>>31)&4294967295}let a=this.chain_[0],l=this.chain_[1],h=this.chain_[2],x=this.chain_[3],m=this.chain_[4],g,y;for(let C=0;C<80;C++){C<40?C<20?(g=x^l&(h^x),y=1518500249):(g=l^h^x,y=1859775393):C<60?(g=l&h|x&(l|h),y=2400959708):(g=l^h^x,y=3395469782);const I=(a<<5|a>>>27)+g+m+y+i[C]&4294967295;m=x,x=h,h=(l<<30|l>>>2)&4294967295,l=a,a=I}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+l&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+x&4294967295,this.chain_[4]=this.chain_[4]+m&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const i=n-this.blockSize;let a=0;const l=this.buf_;let h=this.inbuf_;for(;a<n;){if(h===0)for(;a<=i;)this.compress_(e,a),a+=this.blockSize;if(typeof e=="string"){for(;a<n;)if(l[h]=e.charCodeAt(a),++h,++a,h===this.blockSize){this.compress_(l),h=0;break}}else for(;a<n;)if(l[h]=e[a],++h,++a,h===this.blockSize){this.compress_(l),h=0;break}}this.inbuf_=h,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let a=this.blockSize-1;a>=56;a--)this.buf_[a]=n&255,n/=256;this.compress_(this.buf_);let i=0;for(let a=0;a<5;a++)for(let l=24;l>=0;l-=8)e[i]=this.chain_[a]>>l&255,++i;return e}}function Od(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let a=t.charCodeAt(i);if(a>=55296&&a<=56319){const l=a-55296;i++,$(i<t.length,"Surrogate pair missing trail surrogate.");const h=t.charCodeAt(i)-56320;a=65536+(l<<10)+h}a<128?e[n++]=a:a<2048?(e[n++]=a>>6|192,e[n++]=a&63|128):a<65536?(e[n++]=a>>12|224,e[n++]=a>>6&63|128,e[n++]=a&63|128):(e[n++]=a>>18|240,e[n++]=a>>12&63|128,e[n++]=a>>6&63|128,e[n++]=a&63|128)}return e},Xc=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);i<128?e++:i<2048?e+=2:i>=55296&&i<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3=1e3,_3=2,A3=4*60*60*1e3,I3=.5;function sg(t,e=E3,n=_3){const i=e*Math.pow(n,t),a=Math.round(I3*i*(Math.random()-.5)*2);return Math.min(A3,i+a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jr(t){return t&&t._delegate?t._delegate:t}class Br{constructor(e,n,i){this.name=e,this.instanceFactory=n,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v3{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const i=new ba;if(this.instancesDeferred.set(n,i),this.isInitialized(n)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:n});a&&i.resolve(a)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const i=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),a=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(l){if(a)return null;throw l}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(T3(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(const[n,i]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(n);try{const l=this.getOrInitializeService({instanceIdentifier:a});i.resolve(l)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:i,options:n});for(const[l,h]of this.instancesDeferred.entries()){const x=this.normalizeInstanceIdentifier(l);i===x&&h.resolve(a)}return a}onInit(e,n){var i;const a=this.normalizeInstanceIdentifier(n),l=(i=this.onInitCallbacks.get(a))!==null&&i!==void 0?i:new Set;l.add(e),this.onInitCallbacks.set(a,l);const h=this.instances.get(a);return h&&e(h,a),()=>{l.delete(e)}}invokeOnInitCallbacks(e,n){const i=this.onInitCallbacks.get(n);if(i)for(const a of i)try{a(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:S3(e),options:n}),this.instances.set(e,i),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function S3(t){return t===Pi?void 0:t}function T3(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new v3(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var qe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(qe||(qe={}));const R3={debug:qe.DEBUG,verbose:qe.VERBOSE,info:qe.INFO,warn:qe.WARN,error:qe.ERROR,silent:qe.SILENT},M3=qe.INFO,b3={[qe.DEBUG]:"log",[qe.VERBOSE]:"log",[qe.INFO]:"info",[qe.WARN]:"warn",[qe.ERROR]:"error"},O3=(t,e,...n)=>{if(e<t.logLevel)return;const i=new Date().toISOString(),a=b3[e];if(a)console[a](`[${i}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Dd{constructor(e){this.name=e,this._logLevel=M3,this._logHandler=O3,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in qe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?R3[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,qe.DEBUG,...e),this._logHandler(this,qe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,qe.VERBOSE,...e),this._logHandler(this,qe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,qe.INFO,...e),this._logHandler(this,qe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,qe.WARN,...e),this._logHandler(this,qe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,qe.ERROR,...e),this._logHandler(this,qe.ERROR,...e)}}const D3=(t,e)=>e.some(n=>t instanceof n);let og,ag;function L3(){return og||(og=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function k3(){return ag||(ag=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Q2=new WeakMap,dh=new WeakMap,K2=new WeakMap,nf=new WeakMap,Ld=new WeakMap;function P3(t){const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("success",l),t.removeEventListener("error",h)},l=()=>{n(di(t.result)),a()},h=()=>{i(t.error),a()};t.addEventListener("success",l),t.addEventListener("error",h)});return e.then(n=>{n instanceof IDBCursor&&Q2.set(n,t)}).catch(()=>{}),Ld.set(e,t),e}function B3(t){if(dh.has(t))return;const e=new Promise((n,i)=>{const a=()=>{t.removeEventListener("complete",l),t.removeEventListener("error",h),t.removeEventListener("abort",h)},l=()=>{n(),a()},h=()=>{i(t.error||new DOMException("AbortError","AbortError")),a()};t.addEventListener("complete",l),t.addEventListener("error",h),t.addEventListener("abort",h)});dh.set(t,e)}let gh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return dh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||K2.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return di(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function F3(t){gh=t(gh)}function U3(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const i=t.call(rf(this),e,...n);return K2.set(i,e.sort?e.sort():[e]),di(i)}:k3().includes(t)?function(...e){return t.apply(rf(this),e),di(Q2.get(this))}:function(...e){return di(t.apply(rf(this),e))}}function z3(t){return typeof t=="function"?U3(t):(t instanceof IDBTransaction&&B3(t),D3(t,L3())?new Proxy(t,gh):t)}function di(t){if(t instanceof IDBRequest)return P3(t);if(nf.has(t))return nf.get(t);const e=z3(t);return e!==t&&(nf.set(t,e),Ld.set(e,t)),e}const rf=t=>Ld.get(t);function Z2(t,e,{blocked:n,upgrade:i,blocking:a,terminated:l}={}){const h=indexedDB.open(t,e),x=di(h);return i&&h.addEventListener("upgradeneeded",m=>{i(di(h.result),m.oldVersion,m.newVersion,di(h.transaction),m)}),n&&h.addEventListener("blocked",m=>n(m.oldVersion,m.newVersion,m)),x.then(m=>{l&&m.addEventListener("close",()=>l()),a&&m.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),x}const j3=["get","getKey","getAll","getAllKeys","count"],H3=["put","add","delete","clear"],sf=new Map;function lg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(sf.get(e))return sf.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,a=H3.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!(a||j3.includes(n)))return;const l=async function(h,...x){const m=this.transaction(h,a?"readwrite":"readonly");let g=m.store;return i&&(g=g.index(x.shift())),(await Promise.all([g[n](...x),a&&m.done]))[0]};return sf.set(e,l),l}F3(t=>({...t,get:(e,n,i)=>lg(e,n)||t.get(e,n,i),has:(e,n)=>!!lg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(W3(n)){const i=n.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(n=>n).join(" ")}}function W3(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ph="@firebase/app",cg="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fr=new Dd("@firebase/app"),G3="@firebase/app-compat",Y3="@firebase/analytics-compat",X3="@firebase/analytics",Q3="@firebase/app-check-compat",K3="@firebase/app-check",Z3="@firebase/auth",q3="@firebase/auth-compat",J3="@firebase/database",$3="@firebase/data-connect",eA="@firebase/database-compat",tA="@firebase/functions",nA="@firebase/functions-compat",rA="@firebase/installations",iA="@firebase/installations-compat",sA="@firebase/messaging",oA="@firebase/messaging-compat",aA="@firebase/performance",lA="@firebase/performance-compat",cA="@firebase/remote-config",uA="@firebase/remote-config-compat",fA="@firebase/storage",hA="@firebase/storage-compat",dA="@firebase/firestore",gA="@firebase/vertexai-preview",pA="@firebase/firestore-compat",mA="firebase",xA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="[DEFAULT]",wA={[ph]:"fire-core",[G3]:"fire-core-compat",[X3]:"fire-analytics",[Y3]:"fire-analytics-compat",[K3]:"fire-app-check",[Q3]:"fire-app-check-compat",[Z3]:"fire-auth",[q3]:"fire-auth-compat",[J3]:"fire-rtdb",[$3]:"fire-data-connect",[eA]:"fire-rtdb-compat",[tA]:"fire-fn",[nA]:"fire-fn-compat",[rA]:"fire-iid",[iA]:"fire-iid-compat",[sA]:"fire-fcm",[oA]:"fire-fcm-compat",[aA]:"fire-perf",[lA]:"fire-perf-compat",[cA]:"fire-rc",[uA]:"fire-rc-compat",[fA]:"fire-gcs",[hA]:"fire-gcs-compat",[dA]:"fire-fst",[pA]:"fire-fst-compat",[gA]:"fire-vertex","fire-js":"fire-js",[mA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac=new Map,yA=new Map,xh=new Map;function ug(t,e){try{t.container.addComponent(e)}catch(n){Fr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function yi(t){const e=t.name;if(xh.has(e))return Fr.debug(`There were multiple attempts to register component ${e}.`),!1;xh.set(e,t);for(const n of ac.values())ug(n,t);for(const n of yA.values())ug(n,t);return!0}function Oa(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},gi=new Yc("app","Firebase",CA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,n,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Br("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw gi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A=xA;function q2(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const i=Object.assign({name:mh,automaticDataCollectionEnabled:!1},e),a=i.name;if(typeof a!="string"||!a)throw gi.create("bad-app-name",{appName:String(a)});if(n||(n=V2()),!n)throw gi.create("no-options");const l=ac.get(a);if(l){if(oc(n,l.options)&&oc(i,l.config))return l;throw gi.create("duplicate-app",{appName:a})}const h=new N3(a);for(const m of xh.values())h.addComponent(m);const x=new EA(n,i,h);return ac.set(a,x),x}function J2(t=mh){const e=ac.get(t);if(!e&&t===mh&&V2())return q2();if(!e)throw gi.create("no-app",{appName:t});return e}function _r(t,e,n){var i;let a=(i=wA[t])!==null&&i!==void 0?i:t;n&&(a+=`-${n}`);const l=a.match(/\s|\//),h=e.match(/\s|\//);if(l||h){const x=[`Unable to register library "${a}" with version "${e}":`];l&&x.push(`library name "${a}" contains illegal characters (whitespace or "/")`),l&&h&&x.push("and"),h&&x.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Fr.warn(x.join(" "));return}yi(new Br(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AA="firebase-heartbeat-database",IA=1,xa="firebase-heartbeat-store";let of=null;function $2(){return of||(of=Z2(AA,IA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xa)}catch(n){console.warn(n)}}}}).catch(t=>{throw gi.create("idb-open",{originalErrorMessage:t.message})})),of}async function vA(t){try{const n=(await $2()).transaction(xa),i=await n.objectStore(xa).get(ex(t));return await n.done,i}catch(e){if(e instanceof os)Fr.warn(e.message);else{const n=gi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Fr.warn(n.message)}}}async function fg(t,e){try{const i=(await $2()).transaction(xa,"readwrite");await i.objectStore(xa).put(e,ex(t)),await i.done}catch(n){if(n instanceof os)Fr.warn(n.message);else{const i=gi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Fr.warn(i.message)}}}function ex(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SA=1024,TA=30*24*60*60*1e3;class NA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new MA(n),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,n;try{const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=hg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(h=>h.date===l)?void 0:(this._heartbeatsCache.heartbeats.push({date:l,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const x=new Date(h.date).valueOf();return Date.now()-x<=TA}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Fr.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=hg(),{heartbeatsToSend:i,unsentEntries:a}=RA(this._heartbeatsCache.heartbeats),l=ic(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=n,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(n){return Fr.warn(n),""}}}function hg(){return new Date().toISOString().substring(0,10)}function RA(t,e=SA){const n=[];let i=t.slice();for(const a of t){const l=n.find(h=>h.agent===a.agent);if(l){if(l.dates.push(a.date),dg(n)>e){l.dates.pop();break}}else if(n.push({agent:a.agent,dates:[a.date]}),dg(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class MA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return G2()?Y2().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await vA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return fg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const a=await this.read();return fg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function dg(t){return ic(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(t){yi(new Br("platform-logger",e=>new V3(e),"PRIVATE")),yi(new Br("heartbeat",e=>new NA(e),"PRIVATE")),_r(ph,cg,t),_r(ph,cg,"esm2017"),_r("fire-js","")}bA("");var gg={};const pg="@firebase/database",mg="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tx="";function OA(t){tx=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Mt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:ma(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return lr(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new DA(e)}}catch{}return new LA},ji=nx("localStorage"),kA=nx("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=new Dd("@firebase/database"),rx=function(){let t=1;return function(){return t++}}(),ix=function(t){const e=C3(t),n=new y3;n.update(e);const i=n.digest();return bd.encodeByteArray(i)},Da=function(...t){let e="";for(let n=0;n<t.length;n++){const i=t[n];Array.isArray(i)||i&&typeof i=="object"&&typeof i.length=="number"?e+=Da.apply(null,i):typeof i=="object"?e+=Mt(i):e+=i,e+=" "}return e};let Xo=null,xg=!0;const PA=function(t,e){$(!0,"Can't turn on custom loggers persistently."),Vs.logLevel=qe.VERBOSE,Xo=Vs.log.bind(Vs)},Jt=function(...t){if(xg===!0&&(xg=!1,Xo===null&&kA.get("logging_enabled")===!0&&PA()),Xo){const e=Da.apply(null,t);Xo(e)}},La=function(t){return function(...e){Jt(t,...e)}},wh=function(...t){const e="FIREBASE INTERNAL ERROR: "+Da(...t);Vs.error(e)},Ur=function(...t){const e=`FIREBASE FATAL ERROR: ${Da(...t)}`;throw Vs.error(e),new Error(e)},En=function(...t){const e="FIREBASE WARNING: "+Da(...t);Vs.warn(e)},BA=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&En("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},kd=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},FA=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Js="[MIN_NAME]",Ji="[MAX_NAME]",oo=function(t,e){if(t===e)return 0;if(t===Js||e===Ji)return-1;if(e===Js||t===Ji)return 1;{const n=wg(t),i=wg(e);return n!==null?i!==null?n-i===0?t.length-e.length:n-i:-1:i!==null?1:t<e?-1:1}},UA=function(t,e){return t===e?0:t<e?-1:1},Mo=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Mt(e))},Pd=function(t){if(typeof t!="object"||t===null)return Mt(t);const e=[];for(const i in t)e.push(i);e.sort();let n="{";for(let i=0;i<e.length;i++)i!==0&&(n+=","),n+=Mt(e[i]),n+=":",n+=Pd(t[e[i]]);return n+="}",n},sx=function(t,e){const n=t.length;if(n<=e)return[t];const i=[];for(let a=0;a<n;a+=e)a+e>n?i.push(t.substring(a,n)):i.push(t.substring(a,a+e));return i};function In(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const ox=function(t){$(!kd(t),"Invalid JSON number");const e=11,n=52,i=(1<<e-1)-1;let a,l,h,x,m;t===0?(l=0,h=0,a=1/t===-1/0?1:0):(a=t<0,t=Math.abs(t),t>=Math.pow(2,1-i)?(x=Math.min(Math.floor(Math.log(t)/Math.LN2),i),l=x+i,h=Math.round(t*Math.pow(2,n-x)-Math.pow(2,n))):(l=0,h=Math.round(t/Math.pow(2,1-i-n))));const g=[];for(m=n;m;m-=1)g.push(h%2?1:0),h=Math.floor(h/2);for(m=e;m;m-=1)g.push(l%2?1:0),l=Math.floor(l/2);g.push(a?1:0),g.reverse();const y=g.join("");let C="";for(m=0;m<64;m+=8){let I=parseInt(y.substr(m,8),2).toString(16);I.length===1&&(I="0"+I),C=C+I}return C.toLowerCase()},zA=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},jA=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function HA(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const i=new Error(t+" at "+e._path.toString()+": "+n);return i.code=t.toUpperCase(),i}const VA=new RegExp("^-?(0*)\\d{1,10}$"),WA=-2147483648,GA=2147483647,wg=function(t){if(VA.test(t)){const e=Number(t);if(e>=WA&&e<=GA)return e}return null},ao=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw En("Exception was thrown by user callback.",n),e},Math.floor(0))}},YA=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},Qo=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(i=>this.appCheck=i)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,i)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(i=>i.addTokenListener(e))}notifyForInvalidToken(){En(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QA{constructor(e,n,i){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=i,this.auth_=null,this.auth_=i.getImmediate({optional:!0}),this.auth_||i.onInit(a=>this.auth_=a)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Jt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,i)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,i):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',En(e)}}class bl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}bl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="5",ax="v",lx="s",cx="r",ux="f",fx=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hx="ls",dx="p",yh="ac",gx="websocket",px="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mx{constructor(e,n,i,a,l=!1,h="",x=!1,m=!1){this.secure=n,this.namespace=i,this.webSocketOnly=a,this.nodeAdmin=l,this.persistenceKey=h,this.includeNamespaceInQueryParams=x,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ji.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&ji.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function KA(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function xx(t,e,n){$(typeof e=="string","typeof type must == string"),$(typeof n=="object","typeof params must == object");let i;if(e===gx)i=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===px)i=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);KA(t)&&(n.ns=t.namespace);const a=[];return In(n,(l,h)=>{a.push(l+"="+h)}),i+a.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(){this.counters_={}}incrementCounter(e,n=1){lr(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return $_(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af={},lf={};function Fd(t){const e=t.toString();return af[e]||(af[e]=new ZA),af[e]}function qA(t,e){const n=t.toString();return lf[n]||(lf[n]=e()),lf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const i=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let a=0;a<i.length;++a)i[a]&&ao(()=>{this.onMessage_(i[a])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yg="start",$A="close",eI="pLPCommand",tI="pRTLPCB",wx="id",yx="pw",Cx="ser",nI="cb",rI="seg",iI="ts",sI="d",oI="dframe",Ex=1870,_x=30,aI=Ex-_x,lI=25e3,cI=3e4;class Ds{constructor(e,n,i,a,l,h,x){this.connId=e,this.repoInfo=n,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.transportSessionId=h,this.lastSessionId=x,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=La(e),this.stats_=Fd(n),this.urlFn=m=>(this.appCheckToken&&(m[yh]=this.appCheckToken),xx(n,px,m))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new JA(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(cI)),FA(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Ud((...l)=>{const[h,x,m,g,y]=l;if(this.incrementIncomingBytes_(l),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,h===yg)this.id=x,this.password=m;else if(h===$A)x?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(x,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+h)},(...l)=>{const[h,x]=l;this.incrementIncomingBytes_(l),this.myPacketOrderer.handleResponse(h,x)},()=>{this.onClosed_()},this.urlFn);const i={};i[yg]="t",i[Cx]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(i[nI]=this.scriptTagHolder.uniqueCallbackIdentifier),i[ax]=Bd,this.transportSessionId&&(i[lx]=this.transportSessionId),this.lastSessionId&&(i[hx]=this.lastSessionId),this.applicationId&&(i[dx]=this.applicationId),this.appCheckToken&&(i[yh]=this.appCheckToken),typeof location<"u"&&location.hostname&&fx.test(location.hostname)&&(i[cx]=ux);const a=this.urlFn(i);this.log_("Connecting via long-poll to "+a),this.scriptTagHolder.addTag(a,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Ds.forceAllow_=!0}static forceDisallow(){Ds.forceDisallow_=!0}static isAvailable(){return Ds.forceAllow_?!0:!Ds.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!zA()&&!jA()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=z2(n),a=sx(i,aI);for(let l=0;l<a.length;l++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,a.length,a[l]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const i={};i[oI]="t",i[wx]=e,i[yx]=n,this.myDisconnFrame.src=this.urlFn(i),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Mt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Ud{constructor(e,n,i,a){this.onDisconnect=i,this.urlFn=a,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=rx(),window[eI+this.uniqueCallbackIdentifier]=e,window[tI+this.uniqueCallbackIdentifier]=n,this.myIFrame=Ud.createIFrame_();let l="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(l='<script>document.domain="'+document.domain+'";<\/script>');const h="<html><body>"+l+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(h),this.myIFrame.doc.close()}catch(x){Jt("frame writing exception"),x.stack&&Jt(x.stack),Jt(x)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Jt("No IE domain setting required")}catch{const i=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+i+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[wx]=this.myID,e[yx]=this.myPW,e[Cx]=this.currentSerial;let n=this.urlFn(e),i="",a=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+_x+i.length<=Ex;){const h=this.pendingSegs.shift();i=i+"&"+rI+a+"="+h.seg+"&"+iI+a+"="+h.ts+"&"+sI+a+"="+h.d,a++}return n=n+i,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,i){this.pendingSegs.push({seg:e,ts:n,d:i}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const i=()=>{this.outstandingRequests.delete(n),this.newRequest_()},a=setTimeout(i,Math.floor(lI)),l=()=>{clearTimeout(a),i()};this.addTag(e,l)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const i=this.myIFrame.doc.createElement("script");i.type="text/javascript",i.async=!0,i.src=e,i.onload=i.onreadystatechange=function(){const a=i.readyState;(!a||a==="loaded"||a==="complete")&&(i.onload=i.onreadystatechange=null,i.parentNode&&i.parentNode.removeChild(i),n())},i.onerror=()=>{Jt("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(i)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uI=16384,fI=45e3;let lc=null;typeof MozWebSocket<"u"?lc=MozWebSocket:typeof WebSocket<"u"&&(lc=WebSocket);class er{constructor(e,n,i,a,l,h,x){this.connId=e,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=La(this.connId),this.stats_=Fd(n),this.connURL=er.connectionURL_(n,h,x,a,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,i,a,l){const h={};return h[ax]=Bd,typeof location<"u"&&location.hostname&&fx.test(location.hostname)&&(h[cx]=ux),n&&(h[lx]=n),i&&(h[hx]=i),a&&(h[yh]=a),l&&(h[dx]=l),xx(e,gx,h)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ji.set("previous_websocket_failure",!0);try{let i;f3(),this.mySock=new lc(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){er.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,i=navigator.userAgent.match(n);i&&i.length>1&&parseFloat(i[1])<4.4&&(e=!0)}return!e&&lc!==null&&!er.forceDisallow_}static previouslyFailed(){return ji.isInMemoryStorage||ji.get("previous_websocket_failure")===!0}markConnectionHealthy(){ji.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const i=ma(n);this.onMessage(i)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if($(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const i=this.extractFrameCount_(n);i!==null&&this.appendFrame_(i)}}send(e){this.resetKeepAlive();const n=Mt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const i=sx(n,uI);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(fI))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}er.responsesRequiredToBeHealthy=2;er.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[Ds,er]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=er&&er.isAvailable();let i=n&&!er.previouslyFailed();if(e.webSocketOnly&&(n||En("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[er];else{const a=this.transports_=[];for(const l of wa.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);wa.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}wa.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=6e4,dI=5e3,gI=10*1024,pI=100*1024,cf="t",Cg="d",mI="s",Eg="r",xI="e",_g="o",Ag="a",Ig="n",vg="p",wI="h";class yI{constructor(e,n,i,a,l,h,x,m,g,y){this.id=e,this.repoInfo_=n,this.applicationId_=i,this.appCheckToken_=a,this.authToken_=l,this.onMessage_=h,this.onReady_=x,this.onDisconnect_=m,this.onKill_=g,this.lastSessionId=y,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=La("c:"+this.id+":"),this.transportManager_=new wa(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),i=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,i)},Math.floor(0));const a=e.healthyTimeout||0;a>0&&(this.healthyTimeout_=Qo(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>pI?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>gI?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(a)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(cf in e){const n=e[cf];n===Ag?this.upgradeIfSecondaryHealthy_():n===Eg?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===_g&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Mo("t",e),i=Mo("d",e);if(n==="c")this.onSecondaryControl_(i);else if(n==="d")this.pendingDataMessages.push(i);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:vg,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Ag,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Ig,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Mo("t",e),i=Mo("d",e);n==="c"?this.onControl_(i):n==="d"&&this.onDataMessage_(i)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Mo(cf,e);if(Cg in e){const i=e[Cg];if(n===wI){const a=Object.assign({},i);this.repoInfo_.isUsingEmulator&&(a.h=this.repoInfo_.host),this.onHandshake_(a)}else if(n===Ig){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let a=0;a<this.pendingDataMessages.length;++a)this.onDataMessage_(this.pendingDataMessages[a]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===mI?this.onConnectionShutdown_(i):n===Eg?this.onReset_(i):n===xI?wh("Server Error: "+i):n===_g?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wh("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,i=e.v,a=e.h;this.sessionId=e.s,this.repoInfo_.host=a,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Bd!==i&&En("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),i=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,i),Qo(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(hI))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Qo(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(dI))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:vg,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ji.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax{put(e,n,i,a){}merge(e,n,i,a){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,i){}onDisconnectMerge(e,n,i){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e){this.allowedEvents_=e,this.listeners_={},$(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const i=[...this.listeners_[e]];for(let a=0;a<i.length;a++)i[a].callback.apply(i[a].context,n)}}on(e,n,i){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:i});const a=this.getInitialEvent(e);a&&n.apply(i,a)}off(e,n,i){this.validateEventType_(e);const a=this.listeners_[e]||[];for(let l=0;l<a.length;l++)if(a[l].callback===n&&(!i||i===a[l].context)){a.splice(l,1);return}}validateEventType_(e){$(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cc extends Ix{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!W2()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new cc}getInitialEvent(e){return $(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sg=32,Tg=768;class Xe{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let i=0;for(let a=0;a<this.pieces_.length;a++)this.pieces_[a].length>0&&(this.pieces_[i]=this.pieces_[a],i++);this.pieces_.length=i,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function ke(){return new Xe("")}function Ae(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function Ci(t){return t.pieces_.length-t.pieceNum_}function Je(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new Xe(t.pieces_,e)}function vx(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function CI(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Sx(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Tx(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new Xe(e,0)}function bt(t,e){const n=[];for(let i=t.pieceNum_;i<t.pieces_.length;i++)n.push(t.pieces_[i]);if(e instanceof Xe)for(let i=e.pieceNum_;i<e.pieces_.length;i++)n.push(e.pieces_[i]);else{const i=e.split("/");for(let a=0;a<i.length;a++)i[a].length>0&&n.push(i[a])}return new Xe(n,0)}function Te(t){return t.pieceNum_>=t.pieces_.length}function rn(t,e){const n=Ae(t),i=Ae(e);if(n===null)return e;if(n===i)return rn(Je(t),Je(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function zd(t,e){if(Ci(t)!==Ci(e))return!1;for(let n=t.pieceNum_,i=e.pieceNum_;n<=t.pieces_.length;n++,i++)if(t.pieces_[n]!==e.pieces_[i])return!1;return!0}function tr(t,e){let n=t.pieceNum_,i=e.pieceNum_;if(Ci(t)>Ci(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[i])return!1;++n,++i}return!0}class EI{constructor(e,n){this.errorPrefix_=n,this.parts_=Sx(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let i=0;i<this.parts_.length;i++)this.byteLength_+=Xc(this.parts_[i]);Nx(this)}}function _I(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Xc(e),Nx(t)}function AI(t){const e=t.parts_.pop();t.byteLength_-=Xc(e),t.parts_.length>0&&(t.byteLength_-=1)}function Nx(t){if(t.byteLength_>Tg)throw new Error(t.errorPrefix_+"has a key path longer than "+Tg+" bytes ("+t.byteLength_+").");if(t.parts_.length>Sg)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Sg+") or object contains a cycle "+Bi(t))}function Bi(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd extends Ix{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const i=!document[e];i!==this.visible_&&(this.visible_=i,this.trigger("visible",i))},!1)}static getInstance(){return new jd}getInitialEvent(e){return $(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=1e3,II=60*5*1e3,Ng=30*1e3,vI=1.3,SI=3e4,TI="server_kill",Rg=3;class Or extends Ax{constructor(e,n,i,a,l,h,x,m){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=x,this.authOverride_=m,this.id=Or.nextPersistentConnectionId_++,this.log_=La("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=bo,this.maxReconnectDelay_=II,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,m)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");jd.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&cc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,i){const a=++this.requestNumber_,l={r:a,a:e,b:n};this.log_(Mt(l)),$(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(e){this.initConnection_();const n=new ba,a={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:h=>{const x=h.d;h.s==="ok"?n.resolve(x):n.reject(x)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(l),n.promise}listen(e,n,i,a){this.initConnection_();const l=e._queryIdentifier,h=e._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),$(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const x={onComplete:a,hashFn:n,query:e,tag:i};this.listens.get(h).set(l,x),this.connected_&&this.sendListen_(x)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,i=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(i)})}sendListen_(e){const n=e.query,i=n._path.toString(),a=n._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i},h="q";e.tag&&(l.q=n._queryObject,l.t=e.tag),l.h=e.hashFn(),this.sendRequest(h,l,x=>{const m=x.d,g=x.s;Or.warnOnListenWarnings_(m,n),(this.listens.get(i)&&this.listens.get(i).get(a))===e&&(this.log_("listen response",x),g!=="ok"&&this.removeListen_(i,a),e.onComplete&&e.onComplete(g,m))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&lr(e,"w")){const i=qi(e,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+n._queryParams.getIndex().toString()+'"',l=n._path.toString();En(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||x3(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Ng)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=m3(e)?"auth":"gauth",i={cred:e};this.authOverride_===null?i.noauth=!0:typeof this.authOverride_=="object"&&(i.authvar=this.authOverride_),this.sendRequest(n,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===e&&(l==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,i=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,i)})}unlisten(e,n){const i=e._path.toString(),a=e._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),$(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,e._queryObject,n)}sendUnlisten_(e,n,i,a){this.log_("Unlisten on "+e+" for "+n);const l={p:e},h="n";a&&(l.q=i,l.t=a),this.sendRequest(h,l)}onDisconnectPut(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:i})}onDisconnectMerge(e,n,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,i):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:i})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,i,a){const l={p:n,d:i};this.log_("onDisconnect "+e,l),this.sendRequest(e,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(e,n,i,a){this.putInternal("p",e,n,i,a)}merge(e,n,i,a){this.putInternal("m",e,n,i,a)}putInternal(e,n,i,a,l){this.initConnection_();const h={p:n,d:i};l!==void 0&&(h.h=l),this.outstandingPuts_.push({action:e,request:h,onComplete:a}),this.outstandingPutCount_++;const x=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(x):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,i=this.outstandingPuts_[e].request,a=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,i,l=>{this.log_(n+" response",l),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,i=>{if(i.s!=="ok"){const l=i.d;this.log_("reportStats","Error sending stats: "+l)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Mt(e));const n=e.r,i=this.requestCBHash_[n];i&&(delete this.requestCBHash_[n],i(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):wh("Unrecognized action received from server: "+Mt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){$(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=bo,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=bo,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>SI&&(this.reconnectDelay_=bo),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*vI)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),i=this.onRealtimeDisconnect_.bind(this),a=this.id+":"+Or.nextConnectionId_++,l=this.lastSessionId;let h=!1,x=null;const m=function(){x?x.close():(h=!0,i())},g=function(C){$(x,"sendRequest call when we're not connected not allowed."),x.sendRequest(C)};this.realtime_={close:m,sendRequest:g};const y=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[C,I]=await Promise.all([this.authTokenProvider_.getToken(y),this.appCheckTokenProvider_.getToken(y)]);h?Jt("getToken() completed but was canceled"):(Jt("getToken() completed. Creating connection."),this.authToken_=C&&C.accessToken,this.appCheckToken_=I&&I.token,x=new yI(a,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,i,R=>{En(R+" ("+this.repoInfo_.toString()+")"),this.interrupt(TI)},l))}catch(C){this.log_("Failed to get token: "+C),h||(this.repoInfo_.nodeAdmin&&En(C),m())}}}interrupt(e){Jt("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Jt("Resuming connection for reason: "+e),delete this.interruptReasons_[e],rg(this.interruptReasons_)&&(this.reconnectDelay_=bo,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let i;n?i=n.map(l=>Pd(l)).join("$"):i="default";const a=this.removeListen_(e,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(e,n){const i=new Xe(e).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(n),l.delete(n),l.size===0&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(e,n){Jt("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Rg&&(this.reconnectDelay_=Ng,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Jt("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Rg&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+tx.replace(/\./g,"-")]=1,W2()?e["framework.cordova"]=1:u3()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=cc.getInstance().currentlyOnline();return rg(this.interruptReasons_)&&e}}Or.nextPersistentConnectionId_=0;Or.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new Ie(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const i=new Ie(Js,e),a=new Ie(Js,n);return this.compare(i,a)!==0}minPost(){return Ie.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ml;class Rx extends Qc{static get __EMPTY_NODE(){return ml}static set __EMPTY_NODE(e){ml=e}compare(e,n){return oo(e.name,n.name)}isDefinedOn(e){throw so("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return Ie.MIN}maxPost(){return new Ie(Ji,ml)}makePost(e,n){return $(typeof e=="string","KeyIndex indexValue must always be a string."),new Ie(e,ml)}toString(){return".key"}}const Ws=new Rx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl{constructor(e,n,i,a,l=null){this.isReverse_=a,this.resultGenerator_=l,this.nodeStack_=[];let h=1;for(;!e.isEmpty();)if(e=e,h=n?i(e.key,n):1,a&&(h*=-1),h<0)this.isReverse_?e=e.left:e=e.right;else if(h===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class Ft{constructor(e,n,i,a,l){this.key=e,this.value=n,this.color=i??Ft.RED,this.left=a??xn.EMPTY_NODE,this.right=l??xn.EMPTY_NODE}copy(e,n,i,a,l){return new Ft(e??this.key,n??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,i){let a=this;const l=i(e,a.key);return l<0?a=a.copy(null,null,null,a.left.insert(e,n,i),null):l===0?a=a.copy(null,n,null,null,null):a=a.copy(null,null,null,null,a.right.insert(e,n,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return xn.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let i,a;if(i=this,n(e,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),n(e,i.key)===0){if(i.right.isEmpty())return xn.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}Ft.RED=!0;Ft.BLACK=!1;class NI{copy(e,n,i,a,l){return this}insert(e,n,i){return new Ft(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class xn{constructor(e,n=xn.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new xn(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Ft.BLACK,null,null))}remove(e){return new xn(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Ft.BLACK,null,null))}get(e){let n,i=this.root_;for(;!i.isEmpty();){if(n=this.comparator_(e,i.key),n===0)return i.value;n<0?i=i.left:n>0&&(i=i.right)}return null}getPredecessorKey(e){let n,i=this.root_,a=null;for(;!i.isEmpty();)if(n=this.comparator_(e,i.key),n===0){if(i.left.isEmpty())return a?a.key:null;for(i=i.left;!i.right.isEmpty();)i=i.right;return i.key}else n<0?i=i.left:n>0&&(a=i,i=i.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new xl(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new xl(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new xl(this.root_,null,this.comparator_,!0,e)}}xn.EMPTY_NODE=new NI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RI(t,e){return oo(t.name,e.name)}function Hd(t,e){return oo(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ch;function MI(t){Ch=t}const Mx=function(t){return typeof t=="number"?"number:"+ox(t):"string:"+t},bx=function(t){if(t.isLeafNode()){const e=t.val();$(typeof e=="string"||typeof e=="number"||typeof e=="object"&&lr(e,".sv"),"Priority must be a string or number.")}else $(t===Ch||t.isEmpty(),"priority of unexpected type.");$(t===Ch||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mg;class Pt{constructor(e,n=Pt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,$(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),bx(this.priorityNode_)}static set __childrenNodeConstructor(e){Mg=e}static get __childrenNodeConstructor(){return Mg}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Pt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Pt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return Te(e)?this:Ae(e)===".priority"?this.priorityNode_:Pt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Pt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const i=Ae(e);return i===null?n:n.isEmpty()&&i!==".priority"?this:($(i!==".priority"||Ci(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(i,Pt.__childrenNodeConstructor.EMPTY_NODE.updateChild(Je(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Mx(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=ox(this.value_):e+=this.value_,this.lazyHash_=ix(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Pt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Pt.__childrenNodeConstructor?-1:($(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,i=typeof this.value_,a=Pt.VALUE_TYPE_ORDER.indexOf(n),l=Pt.VALUE_TYPE_ORDER.indexOf(i);return $(a>=0,"Unknown leaf type: "+n),$(l>=0,"Unknown leaf type: "+i),a===l?i==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Pt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ox,Dx;function bI(t){Ox=t}function OI(t){Dx=t}class DI extends Qc{compare(e,n){const i=e.node.getPriority(),a=n.node.getPriority(),l=i.compareTo(a);return l===0?oo(e.name,n.name):l}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return Ie.MIN}maxPost(){return new Ie(Ji,new Pt("[PRIORITY-POST]",Dx))}makePost(e,n){const i=Ox(e);return new Ie(n,new Pt("[PRIORITY-POST]",i))}toString(){return".priority"}}const ft=new DI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=Math.log(2);class kI{constructor(e){const n=l=>parseInt(Math.log(l)/LI,10),i=l=>parseInt(Array(l+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const a=i(this.count);this.bits_=e+1&a}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const uc=function(t,e,n,i){t.sort(e);const a=function(m,g){const y=g-m;let C,I;if(y===0)return null;if(y===1)return C=t[m],I=n?n(C):C,new Ft(I,C.node,Ft.BLACK,null,null);{const R=parseInt(y/2,10)+m,b=a(m,R),L=a(R+1,g);return C=t[R],I=n?n(C):C,new Ft(I,C.node,Ft.BLACK,b,L)}},l=function(m){let g=null,y=null,C=t.length;const I=function(b,L){const F=C-b,O=C;C-=b;const N=a(F+1,O),M=t[F],U=n?n(M):M;R(new Ft(U,M.node,L,null,N))},R=function(b){g?(g.left=b,g=b):(y=b,g=b)};for(let b=0;b<m.count;++b){const L=m.nextBitIsOne(),F=Math.pow(2,m.count-(b+1));L?I(F,Ft.BLACK):(I(F,Ft.BLACK),I(F,Ft.RED))}return y},h=new kI(t.length),x=l(h);return new xn(i||e,x)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let uf;const Cs={};class Rr{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return $(Cs&&ft,"ChildrenNode.ts has not been loaded"),uf=uf||new Rr({".priority":Cs},{".priority":ft}),uf}get(e){const n=qi(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof xn?n:null}hasIndex(e){return lr(this.indexSet_,e.toString())}addIndex(e,n){$(e!==Ws,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const i=[];let a=!1;const l=n.getIterator(Ie.Wrap);let h=l.getNext();for(;h;)a=a||e.isDefinedOn(h.node),i.push(h),h=l.getNext();let x;a?x=uc(i,e.getCompare()):x=Cs;const m=e.toString(),g=Object.assign({},this.indexSet_);g[m]=e;const y=Object.assign({},this.indexes_);return y[m]=x,new Rr(y,g)}addToIndexes(e,n){const i=sc(this.indexes_,(a,l)=>{const h=qi(this.indexSet_,l);if($(h,"Missing index implementation for "+l),a===Cs)if(h.isDefinedOn(e.node)){const x=[],m=n.getIterator(Ie.Wrap);let g=m.getNext();for(;g;)g.name!==e.name&&x.push(g),g=m.getNext();return x.push(e),uc(x,h.getCompare())}else return Cs;else{const x=n.get(e.name);let m=a;return x&&(m=m.remove(new Ie(e.name,x))),m.insert(e,e.node)}});return new Rr(i,this.indexSet_)}removeFromIndexes(e,n){const i=sc(this.indexes_,a=>{if(a===Cs)return a;{const l=n.get(e.name);return l?a.remove(new Ie(e.name,l)):a}});return new Rr(i,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo;class me{constructor(e,n,i){this.children_=e,this.priorityNode_=n,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&bx(this.priorityNode_),this.children_.isEmpty()&&$(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Oo||(Oo=new me(new xn(Hd),null,Rr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Oo}updatePriority(e){return this.children_.isEmpty()?this:new me(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Oo:n}}getChild(e){const n=Ae(e);return n===null?this:this.getImmediateChild(n).getChild(Je(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if($(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const i=new Ie(e,n);let a,l;n.isEmpty()?(a=this.children_.remove(e),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(e,n),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?Oo:this.priorityNode_;return new me(a,h,l)}}updateChild(e,n){const i=Ae(e);if(i===null)return n;{$(Ae(e)!==".priority"||Ci(e)===1,".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Je(e),n);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let i=0,a=0,l=!0;if(this.forEachChild(ft,(h,x)=>{n[h]=x.val(e),i++,l&&me.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!e&&l&&a<2*i){const h=[];for(const x in n)h[x]=n[x];return h}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Mx(this.getPriority().val())+":"),this.forEachChild(ft,(n,i)=>{const a=i.hash();a!==""&&(e+=":"+n+":"+a)}),this.lazyHash_=e===""?"":ix(e)}return this.lazyHash_}getPredecessorChildName(e,n,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Ie(e,n));return l?l.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.minKey();return i&&i.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new Ie(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const i=n.maxKey();return i&&i.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new Ie(n,this.children_.get(n)):null}forEachChild(e,n){const i=this.resolveIndex_(e);return i?i.inorderTraversal(a=>n(a.name,a.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getIteratorFrom(e,a=>a);{const a=this.children_.getIteratorFrom(e.name,Ie.Wrap);let l=a.peek();for(;l!=null&&n.compare(l,e)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const i=this.resolveIndex_(n);if(i)return i.getReverseIteratorFrom(e,a=>a);{const a=this.children_.getReverseIteratorFrom(e.name,Ie.Wrap);let l=a.peek();for(;l!=null&&n.compare(l,e)>0;)a.getNext(),l=a.peek();return a}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ka?-1:0}withIndex(e){if(e===Ws||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new me(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ws||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const i=this.getIterator(ft),a=n.getIterator(ft);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return l===null&&h===null}else return!1;else return!1}}resolveIndex_(e){return e===Ws?null:this.indexMap_.get(e.toString())}}me.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class PI extends me{constructor(){super(new xn(Hd),me.EMPTY_NODE,Rr.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return me.EMPTY_NODE}isEmpty(){return!1}}const ka=new PI;Object.defineProperties(Ie,{MIN:{value:new Ie(Js,me.EMPTY_NODE)},MAX:{value:new Ie(Ji,ka)}});Rx.__EMPTY_NODE=me.EMPTY_NODE;Pt.__childrenNodeConstructor=me;MI(ka);OI(ka);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BI=!0;function Rt(t,e=null){if(t===null)return me.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),$(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new Pt(n,Rt(e))}if(!(t instanceof Array)&&BI){const n=[];let i=!1;if(In(t,(h,x)=>{if(h.substring(0,1)!=="."){const m=Rt(x);m.isEmpty()||(i=i||!m.getPriority().isEmpty(),n.push(new Ie(h,m)))}}),n.length===0)return me.EMPTY_NODE;const l=uc(n,RI,h=>h.name,Hd);if(i){const h=uc(n,ft.getCompare());return new me(l,Rt(e),new Rr({".priority":h},{".priority":ft}))}else return new me(l,Rt(e),Rr.Default)}else{let n=me.EMPTY_NODE;return In(t,(i,a)=>{if(lr(t,i)&&i.substring(0,1)!=="."){const l=Rt(a);(l.isLeafNode()||!l.isEmpty())&&(n=n.updateImmediateChild(i,l))}}),n.updatePriority(Rt(e))}}bI(Rt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI extends Qc{constructor(e){super(),this.indexPath_=e,$(!Te(e)&&Ae(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const i=this.extractChild(e.node),a=this.extractChild(n.node),l=i.compareTo(a);return l===0?oo(e.name,n.name):l}makePost(e,n){const i=Rt(e),a=me.EMPTY_NODE.updateChild(this.indexPath_,i);return new Ie(n,a)}maxPost(){const e=me.EMPTY_NODE.updateChild(this.indexPath_,ka);return new Ie(Ji,e)}toString(){return Sx(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI extends Qc{compare(e,n){const i=e.node.compareTo(n.node);return i===0?oo(e.name,n.name):i}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return Ie.MIN}maxPost(){return Ie.MAX}makePost(e,n){const i=Rt(e);return new Ie(n,i)}toString(){return".value"}}const zI=new UI;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(t){return{type:"value",snapshotNode:t}}function $s(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function ya(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Ca(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function jI(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e){this.index_=e}updateChild(e,n,i,a,l,h){$(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const x=e.getImmediateChild(n);return x.getChild(a).equals(i.getChild(a))&&x.isEmpty()===i.isEmpty()||(h!=null&&(i.isEmpty()?e.hasChild(n)?h.trackChildChange(ya(n,x)):$(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):x.isEmpty()?h.trackChildChange($s(n,i)):h.trackChildChange(Ca(n,i,x))),e.isLeafNode()&&i.isEmpty())?e:e.updateImmediateChild(n,i).withIndex(this.index_)}updateFullNode(e,n,i){return i!=null&&(e.isLeafNode()||e.forEachChild(ft,(a,l)=>{n.hasChild(a)||i.trackChildChange(ya(a,l))}),n.isLeafNode()||n.forEachChild(ft,(a,l)=>{if(e.hasChild(a)){const h=e.getImmediateChild(a);h.equals(l)||i.trackChildChange(Ca(a,l,h))}else i.trackChildChange($s(a,l))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?me.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea{constructor(e){this.indexedFilter_=new Vd(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ea.getStartPost_(e),this.endPost_=Ea.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,i=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&i}updateChild(e,n,i,a,l,h){return this.matches(new Ie(n,i))||(i=me.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,i,a,l,h)}updateFullNode(e,n,i){n.isLeafNode()&&(n=me.EMPTY_NODE);let a=n.withIndex(this.index_);a=a.updatePriority(me.EMPTY_NODE);const l=this;return n.forEachChild(ft,(h,x)=>{l.matches(new Ie(h,x))||(a=a.updateImmediateChild(h,me.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,a,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const i=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?i<=0:i<0},this.withinEndPost=n=>{const i=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?i<=0:i<0},this.rangedFilter_=new Ea(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,i,a,l,h){return this.rangedFilter_.matches(new Ie(n,i))||(i=me.EMPTY_NODE),e.getImmediateChild(n).equals(i)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,i,a,l,h):this.fullLimitUpdateChild_(e,n,i,l,h)}updateFullNode(e,n,i){let a;if(n.isLeafNode()||n.isEmpty())a=me.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){a=me.EMPTY_NODE.withIndex(this.index_);let l;this.reverse_?l=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):l=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let h=0;for(;l.hasNext()&&h<this.limit_;){const x=l.getNext();if(this.withinDirectionalStart(x))if(this.withinDirectionalEnd(x))a=a.updateImmediateChild(x.name,x.node),h++;else break;else continue}}else{a=n.withIndex(this.index_),a=a.updatePriority(me.EMPTY_NODE);let l;this.reverse_?l=a.getReverseIterator(this.index_):l=a.getIterator(this.index_);let h=0;for(;l.hasNext();){const x=l.getNext();h<this.limit_&&this.withinDirectionalStart(x)&&this.withinDirectionalEnd(x)?h++:a=a.updateImmediateChild(x.name,me.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,a,i)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,i,a,l){let h;if(this.reverse_){const C=this.index_.getCompare();h=(I,R)=>C(R,I)}else h=this.index_.getCompare();const x=e;$(x.numChildren()===this.limit_,"");const m=new Ie(n,i),g=this.reverse_?x.getFirstChild(this.index_):x.getLastChild(this.index_),y=this.rangedFilter_.matches(m);if(x.hasChild(n)){const C=x.getImmediateChild(n);let I=a.getChildAfterChild(this.index_,g,this.reverse_);for(;I!=null&&(I.name===n||x.hasChild(I.name));)I=a.getChildAfterChild(this.index_,I,this.reverse_);const R=I==null?1:h(I,m);if(y&&!i.isEmpty()&&R>=0)return l!=null&&l.trackChildChange(Ca(n,i,C)),x.updateImmediateChild(n,i);{l!=null&&l.trackChildChange(ya(n,C));const L=x.updateImmediateChild(n,me.EMPTY_NODE);return I!=null&&this.rangedFilter_.matches(I)?(l!=null&&l.trackChildChange($s(I.name,I.node)),L.updateImmediateChild(I.name,I.node)):L}}else return i.isEmpty()?e:y&&h(g,m)>=0?(l!=null&&(l.trackChildChange(ya(g.name,g.node)),l.trackChildChange($s(n,i))),x.updateImmediateChild(n,i).updateImmediateChild(g.name,me.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wd{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ft}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return $(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return $(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Js}hasEnd(){return this.endSet_}getIndexEndValue(){return $(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return $(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ji}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return $(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ft}copy(){const e=new Wd;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function VI(t){return t.loadsAllData()?new Vd(t.getIndex()):t.hasLimit()?new HI(t):new Ea(t)}function bg(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ft?n="$priority":t.index_===zI?n="$value":t.index_===Ws?n="$key":($(t.index_ instanceof FI,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=Mt(n),t.startSet_){const i=t.startAfterSet_?"startAfter":"startAt";e[i]=Mt(t.indexStartValue_),t.startNameSet_&&(e[i]+=","+Mt(t.indexStartName_))}if(t.endSet_){const i=t.endBeforeSet_?"endBefore":"endAt";e[i]=Mt(t.indexEndValue_),t.endNameSet_&&(e[i]+=","+Mt(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Og(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ft&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fc extends Ax{constructor(e,n,i,a){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=i,this.appCheckTokenProvider_=a,this.log_=La("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:($(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,i,a){const l=e._path.toString();this.log_("Listen called for "+l+" "+e._queryIdentifier);const h=fc.getListenId_(e,i),x={};this.listens_[h]=x;const m=bg(e._queryParams);this.restRequest_(l+".json",m,(g,y)=>{let C=y;if(g===404&&(C=null,g=null),g===null&&this.onDataUpdate_(l,C,!1,i),qi(this.listens_,h)===x){let I;g?g===401?I="permission_denied":I="rest_error:"+g:I="ok",a(I,null)}})}unlisten(e,n){const i=fc.getListenId_(e,n);delete this.listens_[i]}get(e){const n=bg(e._queryParams),i=e._path.toString(),a=new ba;return this.restRequest_(i+".json",n,(l,h)=>{let x=h;l===404&&(x=null,l=null),l===null?(this.onDataUpdate_(i,x,!1,null),a.resolve(x)):a.reject(new Error(x))}),a.promise}refreshAuthToken(e){}restRequest_(e,n={},i){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([a,l])=>{a&&a.accessToken&&(n.auth=a.accessToken),l&&l.token&&(n.ac=l.token);const h=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+w3(n);this.log_("Sending REST request for "+h);const x=new XMLHttpRequest;x.onreadystatechange=()=>{if(i&&x.readyState===4){this.log_("REST Response for "+h+" received. status:",x.status,"response:",x.responseText);let m=null;if(x.status>=200&&x.status<300){try{m=ma(x.responseText)}catch{En("Failed to parse JSON response for "+h+": "+x.responseText)}i(null,m)}else x.status!==401&&x.status!==404&&En("Got unsuccessful REST response for "+h+" Status: "+x.status),i(x.status);i=null}},x.open("GET",h,!0),x.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(){this.rootNode_=me.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hc(){return{value:null,children:new Map}}function kx(t,e,n){if(Te(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const i=Ae(e);t.children.has(i)||t.children.set(i,hc());const a=t.children.get(i);e=Je(e),kx(a,e,n)}}function Eh(t,e,n){t.value!==null?n(e,t.value):GI(t,(i,a)=>{const l=new Xe(e.toString()+"/"+i);Eh(a,l,n)})}function GI(t,e){t.children.forEach((n,i)=>{e(i,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&In(this.last_,(i,a)=>{n[i]=n[i]-a}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dg=10*1e3,XI=30*1e3,QI=5*60*1e3;class KI{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new YI(e);const i=Dg+(XI-Dg)*Math.random();Qo(this.reportStats_.bind(this),Math.floor(i))}reportStats_(){const e=this.statsListener_.get(),n={};let i=!1;In(e,(a,l)=>{l>0&&lr(this.statsToReport_,a)&&(n[a]=l,i=!0)}),i&&this.server_.reportStats(n),Qo(this.reportStats_.bind(this),Math.floor(Math.random()*2*QI))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nr;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(nr||(nr={}));function Px(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Gd(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Yd(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n,i){this.path=e,this.affectedTree=n,this.revert=i,this.type=nr.ACK_USER_WRITE,this.source=Px()}operationForChild(e){if(Te(this.path)){if(this.affectedTree.value!=null)return $(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new Xe(e));return new dc(ke(),n,this.revert)}}else return $(Ae(this.path)===e,"operationForChild called for unrelated child."),new dc(Je(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(e,n){this.source=e,this.path=n,this.type=nr.LISTEN_COMPLETE}operationForChild(e){return Te(this.path)?new _a(this.source,ke()):new _a(this.source,Je(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e,n,i){this.source=e,this.path=n,this.snap=i,this.type=nr.OVERWRITE}operationForChild(e){return Te(this.path)?new $i(this.source,ke(),this.snap.getImmediateChild(e)):new $i(this.source,Je(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(e,n,i){this.source=e,this.path=n,this.children=i,this.type=nr.MERGE}operationForChild(e){if(Te(this.path)){const n=this.children.subtree(new Xe(e));return n.isEmpty()?null:n.value?new $i(this.source,ke(),n.value):new Aa(this.source,ke(),n)}else return $(Ae(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Aa(this.source,Je(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei{constructor(e,n,i){this.node_=e,this.fullyInitialized_=n,this.filtered_=i}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(Te(e))return this.isFullyInitialized()&&!this.filtered_;const n=Ae(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZI{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function qI(t,e,n,i){const a=[],l=[];return e.forEach(h=>{h.type==="child_changed"&&t.index_.indexedValueChanged(h.oldSnap,h.snapshotNode)&&l.push(jI(h.childName,h.snapshotNode))}),Do(t,a,"child_removed",e,i,n),Do(t,a,"child_added",e,i,n),Do(t,a,"child_moved",l,i,n),Do(t,a,"child_changed",e,i,n),Do(t,a,"value",e,i,n),a}function Do(t,e,n,i,a,l){const h=i.filter(x=>x.type===n);h.sort((x,m)=>$I(t,x,m)),h.forEach(x=>{const m=JI(t,x,l);a.forEach(g=>{g.respondsTo(x.type)&&e.push(g.createEvent(m,t.query_))})})}function JI(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function $I(t,e,n){if(e.childName==null||n.childName==null)throw so("Should only compare child_ events.");const i=new Ie(e.childName,e.snapshotNode),a=new Ie(n.childName,n.snapshotNode);return t.index_.compare(i,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t,e){return{eventCache:t,serverCache:e}}function Ko(t,e,n,i){return Kc(new Ei(e,n,i),t.serverCache)}function Bx(t,e,n,i){return Kc(t.eventCache,new Ei(e,n,i))}function gc(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function es(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ff;const ev=()=>(ff||(ff=new xn(UA)),ff);class it{constructor(e,n=ev()){this.value=e,this.children=n}static fromObject(e){let n=new it(null);return In(e,(i,a)=>{n=n.set(new Xe(i),a)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:ke(),value:this.value};if(Te(e))return null;{const i=Ae(e),a=this.children.get(i);if(a!==null){const l=a.findRootMostMatchingPathAndValue(Je(e),n);return l!=null?{path:bt(new Xe(i),l.path),value:l.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(Te(e))return this;{const n=Ae(e),i=this.children.get(n);return i!==null?i.subtree(Je(e)):new it(null)}}set(e,n){if(Te(e))return new it(n,this.children);{const i=Ae(e),l=(this.children.get(i)||new it(null)).set(Je(e),n),h=this.children.insert(i,l);return new it(this.value,h)}}remove(e){if(Te(e))return this.children.isEmpty()?new it(null):new it(null,this.children);{const n=Ae(e),i=this.children.get(n);if(i){const a=i.remove(Je(e));let l;return a.isEmpty()?l=this.children.remove(n):l=this.children.insert(n,a),this.value===null&&l.isEmpty()?new it(null):new it(this.value,l)}else return this}}get(e){if(Te(e))return this.value;{const n=Ae(e),i=this.children.get(n);return i?i.get(Je(e)):null}}setTree(e,n){if(Te(e))return n;{const i=Ae(e),l=(this.children.get(i)||new it(null)).setTree(Je(e),n);let h;return l.isEmpty()?h=this.children.remove(i):h=this.children.insert(i,l),new it(this.value,h)}}fold(e){return this.fold_(ke(),e)}fold_(e,n){const i={};return this.children.inorderTraversal((a,l)=>{i[a]=l.fold_(bt(e,a),n)}),n(e,this.value,i)}findOnPath(e,n){return this.findOnPath_(e,ke(),n)}findOnPath_(e,n,i){const a=this.value?i(n,this.value):!1;if(a)return a;if(Te(e))return null;{const l=Ae(e),h=this.children.get(l);return h?h.findOnPath_(Je(e),bt(n,l),i):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,ke(),n)}foreachOnPath_(e,n,i){if(Te(e))return this;{this.value&&i(n,this.value);const a=Ae(e),l=this.children.get(a);return l?l.foreachOnPath_(Je(e),bt(n,a),i):new it(null)}}foreach(e){this.foreach_(ke(),e)}foreach_(e,n){this.children.inorderTraversal((i,a)=>{a.foreach_(bt(e,i),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,i)=>{i.value&&e(n,i.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e){this.writeTree_=e}static empty(){return new sr(new it(null))}}function Zo(t,e,n){if(Te(e))return new sr(new it(n));{const i=t.writeTree_.findRootMostValueAndPath(e);if(i!=null){const a=i.path;let l=i.value;const h=rn(a,e);return l=l.updateChild(h,n),new sr(t.writeTree_.set(a,l))}else{const a=new it(n),l=t.writeTree_.setTree(e,a);return new sr(l)}}}function Lg(t,e,n){let i=t;return In(n,(a,l)=>{i=Zo(i,bt(e,a),l)}),i}function kg(t,e){if(Te(e))return sr.empty();{const n=t.writeTree_.setTree(e,new it(null));return new sr(n)}}function _h(t,e){return as(t,e)!=null}function as(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(rn(n.path,e)):null}function Pg(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ft,(i,a)=>{e.push(new Ie(i,a))}):t.writeTree_.children.inorderTraversal((i,a)=>{a.value!=null&&e.push(new Ie(i,a.value))}),e}function pi(t,e){if(Te(e))return t;{const n=as(t,e);return n!=null?new sr(new it(n)):new sr(t.writeTree_.subtree(e))}}function Ah(t){return t.writeTree_.isEmpty()}function eo(t,e){return Fx(ke(),t.writeTree_,e)}function Fx(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let i=null;return e.children.inorderTraversal((a,l)=>{a===".priority"?($(l.value!==null,"Priority writes must always be leaf nodes"),i=l.value):n=Fx(bt(t,a),l,n)}),!n.getChild(t).isEmpty()&&i!==null&&(n=n.updateChild(bt(t,".priority"),i)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t,e){return Hx(e,t)}function tv(t,e,n,i,a){$(i>t.lastWriteId,"Stacking an older write on top of newer ones"),a===void 0&&(a=!0),t.allWrites.push({path:e,snap:n,writeId:i,visible:a}),a&&(t.visibleWrites=Zo(t.visibleWrites,e,n)),t.lastWriteId=i}function nv(t,e){for(let n=0;n<t.allWrites.length;n++){const i=t.allWrites[n];if(i.writeId===e)return i}return null}function rv(t,e){const n=t.allWrites.findIndex(x=>x.writeId===e);$(n>=0,"removeWrite called with nonexistent writeId.");const i=t.allWrites[n];t.allWrites.splice(n,1);let a=i.visible,l=!1,h=t.allWrites.length-1;for(;a&&h>=0;){const x=t.allWrites[h];x.visible&&(h>=n&&iv(x,i.path)?a=!1:tr(i.path,x.path)&&(l=!0)),h--}if(a){if(l)return sv(t),!0;if(i.snap)t.visibleWrites=kg(t.visibleWrites,i.path);else{const x=i.children;In(x,m=>{t.visibleWrites=kg(t.visibleWrites,bt(i.path,m))})}return!0}else return!1}function iv(t,e){if(t.snap)return tr(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&tr(bt(t.path,n),e))return!0;return!1}function sv(t){t.visibleWrites=Ux(t.allWrites,ov,ke()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function ov(t){return t.visible}function Ux(t,e,n){let i=sr.empty();for(let a=0;a<t.length;++a){const l=t[a];if(e(l)){const h=l.path;let x;if(l.snap)tr(n,h)?(x=rn(n,h),i=Zo(i,x,l.snap)):tr(h,n)&&(x=rn(h,n),i=Zo(i,ke(),l.snap.getChild(x)));else if(l.children){if(tr(n,h))x=rn(n,h),i=Lg(i,x,l.children);else if(tr(h,n))if(x=rn(h,n),Te(x))i=Lg(i,ke(),l.children);else{const m=qi(l.children,Ae(x));if(m){const g=m.getChild(Je(x));i=Zo(i,ke(),g)}}}else throw so("WriteRecord should have .snap or .children")}}return i}function zx(t,e,n,i,a){if(!i&&!a){const l=as(t.visibleWrites,e);if(l!=null)return l;{const h=pi(t.visibleWrites,e);if(Ah(h))return n;if(n==null&&!_h(h,ke()))return null;{const x=n||me.EMPTY_NODE;return eo(h,x)}}}else{const l=pi(t.visibleWrites,e);if(!a&&Ah(l))return n;if(!a&&n==null&&!_h(l,ke()))return null;{const h=function(g){return(g.visible||a)&&(!i||!~i.indexOf(g.writeId))&&(tr(g.path,e)||tr(e,g.path))},x=Ux(t.allWrites,h,e),m=n||me.EMPTY_NODE;return eo(x,m)}}}function av(t,e,n){let i=me.EMPTY_NODE;const a=as(t.visibleWrites,e);if(a)return a.isLeafNode()||a.forEachChild(ft,(l,h)=>{i=i.updateImmediateChild(l,h)}),i;if(n){const l=pi(t.visibleWrites,e);return n.forEachChild(ft,(h,x)=>{const m=eo(pi(l,new Xe(h)),x);i=i.updateImmediateChild(h,m)}),Pg(l).forEach(h=>{i=i.updateImmediateChild(h.name,h.node)}),i}else{const l=pi(t.visibleWrites,e);return Pg(l).forEach(h=>{i=i.updateImmediateChild(h.name,h.node)}),i}}function lv(t,e,n,i,a){$(i||a,"Either existingEventSnap or existingServerSnap must exist");const l=bt(e,n);if(_h(t.visibleWrites,l))return null;{const h=pi(t.visibleWrites,l);return Ah(h)?a.getChild(n):eo(h,a.getChild(n))}}function cv(t,e,n,i){const a=bt(e,n),l=as(t.visibleWrites,a);if(l!=null)return l;if(i.isCompleteForChild(n)){const h=pi(t.visibleWrites,a);return eo(h,i.getNode().getImmediateChild(n))}else return null}function uv(t,e){return as(t.visibleWrites,e)}function fv(t,e,n,i,a,l,h){let x;const m=pi(t.visibleWrites,e),g=as(m,ke());if(g!=null)x=g;else if(n!=null)x=eo(m,n);else return[];if(x=x.withIndex(h),!x.isEmpty()&&!x.isLeafNode()){const y=[],C=h.getCompare(),I=l?x.getReverseIteratorFrom(i,h):x.getIteratorFrom(i,h);let R=I.getNext();for(;R&&y.length<a;)C(R,i)!==0&&y.push(R),R=I.getNext();return y}else return[]}function hv(){return{visibleWrites:sr.empty(),allWrites:[],lastWriteId:-1}}function pc(t,e,n,i){return zx(t.writeTree,t.treePath,e,n,i)}function Xd(t,e){return av(t.writeTree,t.treePath,e)}function Bg(t,e,n,i){return lv(t.writeTree,t.treePath,e,n,i)}function mc(t,e){return uv(t.writeTree,bt(t.treePath,e))}function dv(t,e,n,i,a,l){return fv(t.writeTree,t.treePath,e,n,i,a,l)}function Qd(t,e,n){return cv(t.writeTree,t.treePath,e,n)}function jx(t,e){return Hx(bt(t.treePath,e),t.writeTree)}function Hx(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gv{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,i=e.childName;$(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),$(i!==".priority","Only non-priority child changes can be tracked.");const a=this.changeMap.get(i);if(a){const l=a.type;if(n==="child_added"&&l==="child_removed")this.changeMap.set(i,Ca(i,e.snapshotNode,a.snapshotNode));else if(n==="child_removed"&&l==="child_added")this.changeMap.delete(i);else if(n==="child_removed"&&l==="child_changed")this.changeMap.set(i,ya(i,a.oldSnap));else if(n==="child_changed"&&l==="child_added")this.changeMap.set(i,$s(i,e.snapshotNode));else if(n==="child_changed"&&l==="child_changed")this.changeMap.set(i,Ca(i,e.snapshotNode,a.oldSnap));else throw so("Illegal combination of changes: "+e+" occurred after "+a)}else this.changeMap.set(i,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{getCompleteChild(e){return null}getChildAfterChild(e,n,i){return null}}const Vx=new pv;class Kd{constructor(e,n,i=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=i}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const i=this.optCompleteServerCache_!=null?new Ei(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Qd(this.writes_,e,i)}}getChildAfterChild(e,n,i){const a=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:es(this.viewCache_),l=dv(this.writes_,a,n,1,i,e);return l.length===0?null:l[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mv(t){return{filter:t}}function xv(t,e){$(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),$(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function wv(t,e,n,i,a){const l=new gv;let h,x;if(n.type===nr.OVERWRITE){const g=n;g.source.fromUser?h=Ih(t,e,g.path,g.snap,i,a,l):($(g.source.fromServer,"Unknown source."),x=g.source.tagged||e.serverCache.isFiltered()&&!Te(g.path),h=xc(t,e,g.path,g.snap,i,a,x,l))}else if(n.type===nr.MERGE){const g=n;g.source.fromUser?h=Cv(t,e,g.path,g.children,i,a,l):($(g.source.fromServer,"Unknown source."),x=g.source.tagged||e.serverCache.isFiltered(),h=vh(t,e,g.path,g.children,i,a,x,l))}else if(n.type===nr.ACK_USER_WRITE){const g=n;g.revert?h=Av(t,e,g.path,i,a,l):h=Ev(t,e,g.path,g.affectedTree,i,a,l)}else if(n.type===nr.LISTEN_COMPLETE)h=_v(t,e,n.path,i,l);else throw so("Unknown operation type: "+n.type);const m=l.getChanges();return yv(e,h,m),{viewCache:h,changes:m}}function yv(t,e,n){const i=e.eventCache;if(i.isFullyInitialized()){const a=i.getNode().isLeafNode()||i.getNode().isEmpty(),l=gc(t);(n.length>0||!t.eventCache.isFullyInitialized()||a&&!i.getNode().equals(l)||!i.getNode().getPriority().equals(l.getPriority()))&&n.push(Lx(gc(e)))}}function Wx(t,e,n,i,a,l){const h=e.eventCache;if(mc(i,n)!=null)return e;{let x,m;if(Te(n))if($(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=es(e),y=g instanceof me?g:me.EMPTY_NODE,C=Xd(i,y);x=t.filter.updateFullNode(e.eventCache.getNode(),C,l)}else{const g=pc(i,es(e));x=t.filter.updateFullNode(e.eventCache.getNode(),g,l)}else{const g=Ae(n);if(g===".priority"){$(Ci(n)===1,"Can't have a priority with additional path components");const y=h.getNode();m=e.serverCache.getNode();const C=Bg(i,n,y,m);C!=null?x=t.filter.updatePriority(y,C):x=h.getNode()}else{const y=Je(n);let C;if(h.isCompleteForChild(g)){m=e.serverCache.getNode();const I=Bg(i,n,h.getNode(),m);I!=null?C=h.getNode().getImmediateChild(g).updateChild(y,I):C=h.getNode().getImmediateChild(g)}else C=Qd(i,g,e.serverCache);C!=null?x=t.filter.updateChild(h.getNode(),g,C,y,a,l):x=h.getNode()}}return Ko(e,x,h.isFullyInitialized()||Te(n),t.filter.filtersNodes())}}function xc(t,e,n,i,a,l,h,x){const m=e.serverCache;let g;const y=h?t.filter:t.filter.getIndexedFilter();if(Te(n))g=y.updateFullNode(m.getNode(),i,null);else if(y.filtersNodes()&&!m.isFiltered()){const R=m.getNode().updateChild(n,i);g=y.updateFullNode(m.getNode(),R,null)}else{const R=Ae(n);if(!m.isCompleteForPath(n)&&Ci(n)>1)return e;const b=Je(n),F=m.getNode().getImmediateChild(R).updateChild(b,i);R===".priority"?g=y.updatePriority(m.getNode(),F):g=y.updateChild(m.getNode(),R,F,b,Vx,null)}const C=Bx(e,g,m.isFullyInitialized()||Te(n),y.filtersNodes()),I=new Kd(a,C,l);return Wx(t,C,n,a,I,x)}function Ih(t,e,n,i,a,l,h){const x=e.eventCache;let m,g;const y=new Kd(a,e,l);if(Te(n))g=t.filter.updateFullNode(e.eventCache.getNode(),i,h),m=Ko(e,g,!0,t.filter.filtersNodes());else{const C=Ae(n);if(C===".priority")g=t.filter.updatePriority(e.eventCache.getNode(),i),m=Ko(e,g,x.isFullyInitialized(),x.isFiltered());else{const I=Je(n),R=x.getNode().getImmediateChild(C);let b;if(Te(I))b=i;else{const L=y.getCompleteChild(C);L!=null?vx(I)===".priority"&&L.getChild(Tx(I)).isEmpty()?b=L:b=L.updateChild(I,i):b=me.EMPTY_NODE}if(R.equals(b))m=e;else{const L=t.filter.updateChild(x.getNode(),C,b,I,y,h);m=Ko(e,L,x.isFullyInitialized(),t.filter.filtersNodes())}}}return m}function Fg(t,e){return t.eventCache.isCompleteForChild(e)}function Cv(t,e,n,i,a,l,h){let x=e;return i.foreach((m,g)=>{const y=bt(n,m);Fg(e,Ae(y))&&(x=Ih(t,x,y,g,a,l,h))}),i.foreach((m,g)=>{const y=bt(n,m);Fg(e,Ae(y))||(x=Ih(t,x,y,g,a,l,h))}),x}function Ug(t,e,n){return n.foreach((i,a)=>{e=e.updateChild(i,a)}),e}function vh(t,e,n,i,a,l,h,x){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let m=e,g;Te(n)?g=i:g=new it(null).setTree(n,i);const y=e.serverCache.getNode();return g.children.inorderTraversal((C,I)=>{if(y.hasChild(C)){const R=e.serverCache.getNode().getImmediateChild(C),b=Ug(t,R,I);m=xc(t,m,new Xe(C),b,a,l,h,x)}}),g.children.inorderTraversal((C,I)=>{const R=!e.serverCache.isCompleteForChild(C)&&I.value===null;if(!y.hasChild(C)&&!R){const b=e.serverCache.getNode().getImmediateChild(C),L=Ug(t,b,I);m=xc(t,m,new Xe(C),L,a,l,h,x)}}),m}function Ev(t,e,n,i,a,l,h){if(mc(a,n)!=null)return e;const x=e.serverCache.isFiltered(),m=e.serverCache;if(i.value!=null){if(Te(n)&&m.isFullyInitialized()||m.isCompleteForPath(n))return xc(t,e,n,m.getNode().getChild(n),a,l,x,h);if(Te(n)){let g=new it(null);return m.getNode().forEachChild(Ws,(y,C)=>{g=g.set(new Xe(y),C)}),vh(t,e,n,g,a,l,x,h)}else return e}else{let g=new it(null);return i.foreach((y,C)=>{const I=bt(n,y);m.isCompleteForPath(I)&&(g=g.set(y,m.getNode().getChild(I)))}),vh(t,e,n,g,a,l,x,h)}}function _v(t,e,n,i,a){const l=e.serverCache,h=Bx(e,l.getNode(),l.isFullyInitialized()||Te(n),l.isFiltered());return Wx(t,h,n,i,Vx,a)}function Av(t,e,n,i,a,l){let h;if(mc(i,n)!=null)return e;{const x=new Kd(i,e,a),m=e.eventCache.getNode();let g;if(Te(n)||Ae(n)===".priority"){let y;if(e.serverCache.isFullyInitialized())y=pc(i,es(e));else{const C=e.serverCache.getNode();$(C instanceof me,"serverChildren would be complete if leaf node"),y=Xd(i,C)}y=y,g=t.filter.updateFullNode(m,y,l)}else{const y=Ae(n);let C=Qd(i,y,e.serverCache);C==null&&e.serverCache.isCompleteForChild(y)&&(C=m.getImmediateChild(y)),C!=null?g=t.filter.updateChild(m,y,C,Je(n),x,l):e.eventCache.getNode().hasChild(y)?g=t.filter.updateChild(m,y,me.EMPTY_NODE,Je(n),x,l):g=m,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(h=pc(i,es(e)),h.isLeafNode()&&(g=t.filter.updateFullNode(g,h,l)))}return h=e.serverCache.isFullyInitialized()||mc(i,ke())!=null,Ko(e,g,h,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const i=this.query_._queryParams,a=new Vd(i.getIndex()),l=VI(i);this.processor_=mv(l);const h=n.serverCache,x=n.eventCache,m=a.updateFullNode(me.EMPTY_NODE,h.getNode(),null),g=l.updateFullNode(me.EMPTY_NODE,x.getNode(),null),y=new Ei(m,h.isFullyInitialized(),a.filtersNodes()),C=new Ei(g,x.isFullyInitialized(),l.filtersNodes());this.viewCache_=Kc(C,y),this.eventGenerator_=new ZI(this.query_)}get query(){return this.query_}}function vv(t){return t.viewCache_.serverCache.getNode()}function Sv(t){return gc(t.viewCache_)}function Tv(t,e){const n=es(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!Te(e)&&!n.getImmediateChild(Ae(e)).isEmpty())?n.getChild(e):null}function zg(t){return t.eventRegistrations_.length===0}function Nv(t,e){t.eventRegistrations_.push(e)}function jg(t,e,n){const i=[];if(n){$(e==null,"A cancel should cancel all event registrations.");const a=t.query._path;t.eventRegistrations_.forEach(l=>{const h=l.createCancelEvent(n,a);h&&i.push(h)})}if(e){let a=[];for(let l=0;l<t.eventRegistrations_.length;++l){const h=t.eventRegistrations_[l];if(!h.matches(e))a.push(h);else if(e.hasAnyCallback()){a=a.concat(t.eventRegistrations_.slice(l+1));break}}t.eventRegistrations_=a}else t.eventRegistrations_=[];return i}function Hg(t,e,n,i){e.type===nr.MERGE&&e.source.queryId!==null&&($(es(t.viewCache_),"We should always have a full cache before handling merges"),$(gc(t.viewCache_),"Missing event cache, even though we have a server cache"));const a=t.viewCache_,l=wv(t.processor_,a,e,n,i);return xv(t.processor_,l.viewCache),$(l.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=l.viewCache,Gx(t,l.changes,l.viewCache.eventCache.getNode(),null)}function Rv(t,e){const n=t.viewCache_.eventCache,i=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ft,(l,h)=>{i.push($s(l,h))}),n.isFullyInitialized()&&i.push(Lx(n.getNode())),Gx(t,i,n.getNode(),e)}function Gx(t,e,n,i){const a=i?[i]:t.eventRegistrations_;return qI(t.eventGenerator_,e,n,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let wc;class Yx{constructor(){this.views=new Map}}function Mv(t){$(!wc,"__referenceConstructor has already been defined"),wc=t}function bv(){return $(wc,"Reference.ts has not been loaded"),wc}function Ov(t){return t.views.size===0}function Zd(t,e,n,i){const a=e.source.queryId;if(a!==null){const l=t.views.get(a);return $(l!=null,"SyncTree gave us an op for an invalid query."),Hg(l,e,n,i)}else{let l=[];for(const h of t.views.values())l=l.concat(Hg(h,e,n,i));return l}}function Xx(t,e,n,i,a){const l=e._queryIdentifier,h=t.views.get(l);if(!h){let x=pc(n,a?i:null),m=!1;x?m=!0:i instanceof me?(x=Xd(n,i),m=!1):(x=me.EMPTY_NODE,m=!1);const g=Kc(new Ei(x,m,!1),new Ei(i,a,!1));return new Iv(e,g)}return h}function Dv(t,e,n,i,a,l){const h=Xx(t,e,i,a,l);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,h),Nv(h,n),Rv(h,n)}function Lv(t,e,n,i){const a=e._queryIdentifier,l=[];let h=[];const x=_i(t);if(a==="default")for(const[m,g]of t.views.entries())h=h.concat(jg(g,n,i)),zg(g)&&(t.views.delete(m),g.query._queryParams.loadsAllData()||l.push(g.query));else{const m=t.views.get(a);m&&(h=h.concat(jg(m,n,i)),zg(m)&&(t.views.delete(a),m.query._queryParams.loadsAllData()||l.push(m.query)))}return x&&!_i(t)&&l.push(new(bv())(e._repo,e._path)),{removed:l,events:h}}function Qx(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function mi(t,e){let n=null;for(const i of t.views.values())n=n||Tv(i,e);return n}function Kx(t,e){if(e._queryParams.loadsAllData())return qc(t);{const i=e._queryIdentifier;return t.views.get(i)}}function Zx(t,e){return Kx(t,e)!=null}function _i(t){return qc(t)!=null}function qc(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc;function kv(t){$(!yc,"__referenceConstructor has already been defined"),yc=t}function Pv(){return $(yc,"Reference.ts has not been loaded"),yc}let Bv=1;class Vg{constructor(e){this.listenProvider_=e,this.syncPointTree_=new it(null),this.pendingWriteTree_=hv(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function qd(t,e,n,i,a){return tv(t.pendingWriteTree_,e,n,i,a),a?Ba(t,new $i(Px(),e,n)):[]}function Hi(t,e,n=!1){const i=nv(t.pendingWriteTree_,e);if(rv(t.pendingWriteTree_,e)){let l=new it(null);return i.snap!=null?l=l.set(ke(),!0):In(i.children,h=>{l=l.set(new Xe(h),!0)}),Ba(t,new dc(i.path,l,n))}else return[]}function Pa(t,e,n){return Ba(t,new $i(Gd(),e,n))}function Fv(t,e,n){const i=it.fromObject(n);return Ba(t,new Aa(Gd(),e,i))}function Uv(t,e){return Ba(t,new _a(Gd(),e))}function zv(t,e,n){const i=Jd(t,n);if(i){const a=$d(i),l=a.path,h=a.queryId,x=rn(l,e),m=new _a(Yd(h),x);return e1(t,l,m)}else return[]}function Cc(t,e,n,i,a=!1){const l=e._path,h=t.syncPointTree_.get(l);let x=[];if(h&&(e._queryIdentifier==="default"||Zx(h,e))){const m=Lv(h,e,n,i);Ov(h)&&(t.syncPointTree_=t.syncPointTree_.remove(l));const g=m.removed;if(x=m.events,!a){const y=g.findIndex(I=>I._queryParams.loadsAllData())!==-1,C=t.syncPointTree_.findOnPath(l,(I,R)=>_i(R));if(y&&!C){const I=t.syncPointTree_.subtree(l);if(!I.isEmpty()){const R=Vv(I);for(let b=0;b<R.length;++b){const L=R[b],F=L.query,O=ew(t,L);t.listenProvider_.startListening(qo(F),Ia(t,F),O.hashFn,O.onComplete)}}}!C&&g.length>0&&!i&&(y?t.listenProvider_.stopListening(qo(e),null):g.forEach(I=>{const R=t.queryToTagMap.get($c(I));t.listenProvider_.stopListening(qo(I),R)}))}Wv(t,g)}return x}function qx(t,e,n,i){const a=Jd(t,i);if(a!=null){const l=$d(a),h=l.path,x=l.queryId,m=rn(h,e),g=new $i(Yd(x),m,n);return e1(t,h,g)}else return[]}function jv(t,e,n,i){const a=Jd(t,i);if(a){const l=$d(a),h=l.path,x=l.queryId,m=rn(h,e),g=it.fromObject(n),y=new Aa(Yd(x),m,g);return e1(t,h,y)}else return[]}function Sh(t,e,n,i=!1){const a=e._path;let l=null,h=!1;t.syncPointTree_.foreachOnPath(a,(I,R)=>{const b=rn(I,a);l=l||mi(R,b),h=h||_i(R)});let x=t.syncPointTree_.get(a);x?(h=h||_i(x),l=l||mi(x,ke())):(x=new Yx,t.syncPointTree_=t.syncPointTree_.set(a,x));let m;l!=null?m=!0:(m=!1,l=me.EMPTY_NODE,t.syncPointTree_.subtree(a).foreachChild((R,b)=>{const L=mi(b,ke());L&&(l=l.updateImmediateChild(R,L))}));const g=Zx(x,e);if(!g&&!e._queryParams.loadsAllData()){const I=$c(e);$(!t.queryToTagMap.has(I),"View does not exist, but we have a tag");const R=Gv();t.queryToTagMap.set(I,R),t.tagToQueryMap.set(R,I)}const y=Zc(t.pendingWriteTree_,a);let C=Dv(x,e,n,y,l,m);if(!g&&!h&&!i){const I=Kx(x,e);C=C.concat(Yv(t,e,I))}return C}function Jc(t,e,n){const a=t.pendingWriteTree_,l=t.syncPointTree_.findOnPath(e,(h,x)=>{const m=rn(h,e),g=mi(x,m);if(g)return g});return zx(a,e,l,n,!0)}function Hv(t,e){const n=e._path;let i=null;t.syncPointTree_.foreachOnPath(n,(g,y)=>{const C=rn(g,n);i=i||mi(y,C)});let a=t.syncPointTree_.get(n);a?i=i||mi(a,ke()):(a=new Yx,t.syncPointTree_=t.syncPointTree_.set(n,a));const l=i!=null,h=l?new Ei(i,!0,!1):null,x=Zc(t.pendingWriteTree_,e._path),m=Xx(a,e,x,l?h.getNode():me.EMPTY_NODE,l);return Sv(m)}function Ba(t,e){return Jx(e,t.syncPointTree_,null,Zc(t.pendingWriteTree_,ke()))}function Jx(t,e,n,i){if(Te(t.path))return $x(t,e,n,i);{const a=e.get(ke());n==null&&a!=null&&(n=mi(a,ke()));let l=[];const h=Ae(t.path),x=t.operationForChild(h),m=e.children.get(h);if(m&&x){const g=n?n.getImmediateChild(h):null,y=jx(i,h);l=l.concat(Jx(x,m,g,y))}return a&&(l=l.concat(Zd(a,t,i,n))),l}}function $x(t,e,n,i){const a=e.get(ke());n==null&&a!=null&&(n=mi(a,ke()));let l=[];return e.children.inorderTraversal((h,x)=>{const m=n?n.getImmediateChild(h):null,g=jx(i,h),y=t.operationForChild(h);y&&(l=l.concat($x(y,x,m,g)))}),a&&(l=l.concat(Zd(a,t,i,n))),l}function ew(t,e){const n=e.query,i=Ia(t,n);return{hashFn:()=>(vv(e)||me.EMPTY_NODE).hash(),onComplete:a=>{if(a==="ok")return i?zv(t,n._path,i):Uv(t,n._path);{const l=HA(a,n);return Cc(t,n,null,l)}}}}function Ia(t,e){const n=$c(e);return t.queryToTagMap.get(n)}function $c(t){return t._path.toString()+"$"+t._queryIdentifier}function Jd(t,e){return t.tagToQueryMap.get(e)}function $d(t){const e=t.indexOf("$");return $(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new Xe(t.substr(0,e))}}function e1(t,e,n){const i=t.syncPointTree_.get(e);$(i,"Missing sync point for query tag that we're tracking");const a=Zc(t.pendingWriteTree_,e);return Zd(i,n,a,null)}function Vv(t){return t.fold((e,n,i)=>{if(n&&_i(n))return[qc(n)];{let a=[];return n&&(a=Qx(n)),In(i,(l,h)=>{a=a.concat(h)}),a}})}function qo(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Pv())(t._repo,t._path):t}function Wv(t,e){for(let n=0;n<e.length;++n){const i=e[n];if(!i._queryParams.loadsAllData()){const a=$c(i),l=t.queryToTagMap.get(a);t.queryToTagMap.delete(a),t.tagToQueryMap.delete(l)}}}function Gv(){return Bv++}function Yv(t,e,n){const i=e._path,a=Ia(t,e),l=ew(t,n),h=t.listenProvider_.startListening(qo(e),a,l.hashFn,l.onComplete),x=t.syncPointTree_.subtree(i);if(a)$(!_i(x.value),"If we're adding a query, it shouldn't be shadowed");else{const m=x.fold((g,y,C)=>{if(!Te(g)&&y&&_i(y))return[qc(y).query];{let I=[];return y&&(I=I.concat(Qx(y).map(R=>R.query))),In(C,(R,b)=>{I=I.concat(b)}),I}});for(let g=0;g<m.length;++g){const y=m[g];t.listenProvider_.stopListening(qo(y),Ia(t,y))}}return h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new t1(n)}node(){return this.node_}}class n1{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=bt(this.path_,e);return new n1(this.syncTree_,n)}node(){return Jc(this.syncTree_,this.path_)}}const Xv=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},Wg=function(t,e,n){if(!t||typeof t!="object")return t;if($(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return Qv(t[".sv"],e,n);if(typeof t[".sv"]=="object")return Kv(t[".sv"],e);$(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},Qv=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:$(!1,"Unexpected server value: "+t)}},Kv=function(t,e,n){t.hasOwnProperty("increment")||$(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const i=t.increment;typeof i!="number"&&$(!1,"Unexpected increment value: "+i);const a=e.node();if($(a!==null&&typeof a<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!a.isLeafNode())return i;const h=a.getValue();return typeof h!="number"?i:h+i},Zv=function(t,e,n,i){return i1(e,new n1(n,t),i)},r1=function(t,e,n){return i1(t,new t1(e),n)};function i1(t,e,n){const i=t.getPriority().val(),a=Wg(i,e.getImmediateChild(".priority"),n);let l;if(t.isLeafNode()){const h=t,x=Wg(h.getValue(),e,n);return x!==h.getValue()||a!==h.getPriority().val()?new Pt(x,Rt(a)):t}else{const h=t;return l=h,a!==h.getPriority().val()&&(l=l.updatePriority(new Pt(a))),h.forEachChild(ft,(x,m)=>{const g=i1(m,e.getImmediateChild(x),n);g!==m&&(l=l.updateImmediateChild(x,g))}),l}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(e="",n=null,i={children:{},childCount:0}){this.name=e,this.parent=n,this.node=i}}function eu(t,e){let n=e instanceof Xe?e:new Xe(e),i=t,a=Ae(n);for(;a!==null;){const l=qi(i.node.children,a)||{children:{},childCount:0};i=new s1(a,i,l),n=Je(n),a=Ae(n)}return i}function ls(t){return t.node.value}function o1(t,e){t.node.value=e,Th(t)}function tw(t){return t.node.childCount>0}function qv(t){return ls(t)===void 0&&!tw(t)}function tu(t,e){In(t.node.children,(n,i)=>{e(new s1(n,t,i))})}function nw(t,e,n,i){n&&e(t),tu(t,a=>{nw(a,e,!0)})}function Jv(t,e,n){let i=t.parent;for(;i!==null;){if(e(i))return!0;i=i.parent}return!1}function Fa(t){return new Xe(t.parent===null?t.name:Fa(t.parent)+"/"+t.name)}function Th(t){t.parent!==null&&$v(t.parent,t.name,t)}function $v(t,e,n){const i=qv(n),a=lr(t.node.children,e);i&&a?(delete t.node.children[e],t.node.childCount--,Th(t)):!i&&!a&&(t.node.children[e]=n.node,t.node.childCount++,Th(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS=/[\[\].#$\/\u0000-\u001F\u007F]/,tS=/[\[\].#$\u0000-\u001F\u007F]/,hf=10*1024*1024,rw=function(t){return typeof t=="string"&&t.length!==0&&!eS.test(t)},iw=function(t){return typeof t=="string"&&t.length!==0&&!tS.test(t)},nS=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),iw(t)},rS=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!kd(t)||t&&typeof t=="object"&&lr(t,".sv")},iS=function(t,e,n,i){nu(Od(t,"value"),e,n)},nu=function(t,e,n){const i=n instanceof Xe?new EI(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Bi(i));if(typeof e=="function")throw new Error(t+"contains a function "+Bi(i)+" with contents = "+e.toString());if(kd(e))throw new Error(t+"contains "+e.toString()+" "+Bi(i));if(typeof e=="string"&&e.length>hf/3&&Xc(e)>hf)throw new Error(t+"contains a string greater than "+hf+" utf8 bytes "+Bi(i)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let a=!1,l=!1;if(In(e,(h,x)=>{if(h===".value")a=!0;else if(h!==".priority"&&h!==".sv"&&(l=!0,!rw(h)))throw new Error(t+" contains an invalid key ("+h+") "+Bi(i)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);_I(i,h),nu(t,x,i),AI(i)}),a&&l)throw new Error(t+' contains ".value" child '+Bi(i)+" in addition to actual children.")}},sw=function(t,e,n,i){if(!iw(n))throw new Error(Od(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},sS=function(t,e,n,i){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),sw(t,e,n)},ow=function(t,e){if(Ae(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},oS=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!rw(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!nS(n))throw new Error(Od(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aS{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function a1(t,e){let n=null;for(let i=0;i<e.length;i++){const a=e[i],l=a.getPath();n!==null&&!zd(l,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:l}),n.events.push(a)}n&&t.eventLists_.push(n)}function aw(t,e,n){a1(t,n),lw(t,i=>zd(i,e))}function ar(t,e,n){a1(t,n),lw(t,i=>tr(i,e)||tr(e,i))}function lw(t,e){t.recursionDepth_++;let n=!0;for(let i=0;i<t.eventLists_.length;i++){const a=t.eventLists_[i];if(a){const l=a.path;e(l)?(lS(t.eventLists_[i]),t.eventLists_[i]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function lS(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const i=n.getEventRunner();Xo&&Jt("event: "+n.toString()),ao(i)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cS="repo_interrupt",uS=25;class fS{constructor(e,n,i,a){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=i,this.appCheckProvider_=a,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new aS,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=hc(),this.transactionQueueTree_=new s1,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function hS(t,e,n){if(t.stats_=Fd(t.repoInfo_),t.forceRestClient_||YA())t.server_=new fc(t.repoInfo_,(i,a,l,h)=>{Gg(t,i,a,l,h)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>Yg(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Mt(n)}catch(i){throw new Error("Invalid authOverride provided: "+i)}}t.persistentConnection_=new Or(t.repoInfo_,e,(i,a,l,h)=>{Gg(t,i,a,l,h)},i=>{Yg(t,i)},i=>{gS(t,i)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(i=>{t.server_.refreshAuthToken(i)}),t.appCheckProvider_.addTokenChangeListener(i=>{t.server_.refreshAppCheckToken(i.token)}),t.statsReporter_=qA(t.repoInfo_,()=>new KI(t.stats_,t.server_)),t.infoData_=new WI,t.infoSyncTree_=new Vg({startListening:(i,a,l,h)=>{let x=[];const m=t.infoData_.getNode(i._path);return m.isEmpty()||(x=Pa(t.infoSyncTree_,i._path,m),setTimeout(()=>{h("ok")},0)),x},stopListening:()=>{}}),l1(t,"connected",!1),t.serverSyncTree_=new Vg({startListening:(i,a,l,h)=>(t.server_.listen(i,l,a,(x,m)=>{const g=h(x,m);ar(t.eventQueue_,i._path,g)}),[]),stopListening:(i,a)=>{t.server_.unlisten(i,a)}})}function dS(t){const n=t.infoData_.getNode(new Xe(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ru(t){return Xv({timestamp:dS(t)})}function Gg(t,e,n,i,a){t.dataUpdateCount++;const l=new Xe(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let h=[];if(a)if(i){const m=sc(n,g=>Rt(g));h=jv(t.serverSyncTree_,l,m,a)}else{const m=Rt(n);h=qx(t.serverSyncTree_,l,m,a)}else if(i){const m=sc(n,g=>Rt(g));h=Fv(t.serverSyncTree_,l,m)}else{const m=Rt(n);h=Pa(t.serverSyncTree_,l,m)}let x=l;h.length>0&&(x=su(t,l)),ar(t.eventQueue_,x,h)}function Yg(t,e){l1(t,"connected",e),e===!1&&xS(t)}function gS(t,e){In(e,(n,i)=>{l1(t,n,i)})}function l1(t,e,n){const i=new Xe("/.info/"+e),a=Rt(n);t.infoData_.updateSnapshot(i,a);const l=Pa(t.infoSyncTree_,i,a);ar(t.eventQueue_,i,l)}function c1(t){return t.nextWriteId_++}function pS(t,e,n){const i=Hv(t.serverSyncTree_,e);return i!=null?Promise.resolve(i):t.server_.get(e).then(a=>{const l=Rt(a).withIndex(e._queryParams.getIndex());Sh(t.serverSyncTree_,e,n,!0);let h;if(e._queryParams.loadsAllData())h=Pa(t.serverSyncTree_,e._path,l);else{const x=Ia(t.serverSyncTree_,e);h=qx(t.serverSyncTree_,e._path,l,x)}return ar(t.eventQueue_,e._path,h),Cc(t.serverSyncTree_,e,n,null,!0),l},a=>(Ua(t,"get for query "+Mt(e)+" failed: "+a),Promise.reject(new Error(a))))}function mS(t,e,n,i,a){Ua(t,"set",{path:e.toString(),value:n,priority:i});const l=ru(t),h=Rt(n,i),x=Jc(t.serverSyncTree_,e),m=r1(h,x,l),g=c1(t),y=qd(t.serverSyncTree_,e,m,g,!0);a1(t.eventQueue_,y),t.server_.put(e.toString(),h.val(!0),(I,R)=>{const b=I==="ok";b||En("set at "+e+" failed: "+I);const L=Hi(t.serverSyncTree_,g,!b);ar(t.eventQueue_,e,L),ES(t,a,I,R)});const C=hw(t,e);su(t,C),ar(t.eventQueue_,C,[])}function xS(t){Ua(t,"onDisconnectEvents");const e=ru(t),n=hc();Eh(t.onDisconnect_,ke(),(a,l)=>{const h=Zv(a,l,t.serverSyncTree_,e);kx(n,a,h)});let i=[];Eh(n,ke(),(a,l)=>{i=i.concat(Pa(t.serverSyncTree_,a,l));const h=hw(t,a);su(t,h)}),t.onDisconnect_=hc(),ar(t.eventQueue_,ke(),i)}function wS(t,e,n){let i;Ae(e._path)===".info"?i=Sh(t.infoSyncTree_,e,n):i=Sh(t.serverSyncTree_,e,n),aw(t.eventQueue_,e._path,i)}function yS(t,e,n){let i;Ae(e._path)===".info"?i=Cc(t.infoSyncTree_,e,n):i=Cc(t.serverSyncTree_,e,n),aw(t.eventQueue_,e._path,i)}function CS(t){t.persistentConnection_&&t.persistentConnection_.interrupt(cS)}function Ua(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),Jt(n,...e)}function ES(t,e,n,i){e&&ao(()=>{if(n==="ok")e(null);else{const a=(n||"error").toUpperCase();let l=a;i&&(l+=": "+i);const h=new Error(l);h.code=a,e(h)}})}function _S(t,e,n,i,a,l){Ua(t,"transaction on "+e);const h={path:e,update:n,onComplete:i,status:null,order:rx(),applyLocally:l,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},x=u1(t,e,void 0);h.currentInputSnapshot=x;const m=h.update(x.val());if(m===void 0)h.unwatcher(),h.currentOutputSnapshotRaw=null,h.currentOutputSnapshotResolved=null,h.onComplete&&h.onComplete(null,!1,h.currentInputSnapshot);else{nu("transaction failed: Data returned ",m,h.path),h.status=0;const g=eu(t.transactionQueueTree_,e),y=ls(g)||[];y.push(h),o1(g,y);let C;typeof m=="object"&&m!==null&&lr(m,".priority")?(C=qi(m,".priority"),$(rS(C),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):C=(Jc(t.serverSyncTree_,e)||me.EMPTY_NODE).getPriority().val();const I=ru(t),R=Rt(m,C),b=r1(R,x,I);h.currentOutputSnapshotRaw=R,h.currentOutputSnapshotResolved=b,h.currentWriteId=c1(t);const L=qd(t.serverSyncTree_,e,b,h.currentWriteId,h.applyLocally);ar(t.eventQueue_,e,L),iu(t,t.transactionQueueTree_)}}function u1(t,e,n){return Jc(t.serverSyncTree_,e,n)||me.EMPTY_NODE}function iu(t,e=t.transactionQueueTree_){if(e||ou(t,e),ls(e)){const n=uw(t,e);$(n.length>0,"Sending zero length transaction queue"),n.every(a=>a.status===0)&&AS(t,Fa(e),n)}else tw(e)&&tu(e,n=>{iu(t,n)})}function AS(t,e,n){const i=n.map(g=>g.currentWriteId),a=u1(t,e,i);let l=a;const h=a.hash();for(let g=0;g<n.length;g++){const y=n[g];$(y.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),y.status=1,y.retryCount++;const C=rn(e,y.path);l=l.updateChild(C,y.currentOutputSnapshotRaw)}const x=l.val(!0),m=e;t.server_.put(m.toString(),x,g=>{Ua(t,"transaction put response",{path:m.toString(),status:g});let y=[];if(g==="ok"){const C=[];for(let I=0;I<n.length;I++)n[I].status=2,y=y.concat(Hi(t.serverSyncTree_,n[I].currentWriteId)),n[I].onComplete&&C.push(()=>n[I].onComplete(null,!0,n[I].currentOutputSnapshotResolved)),n[I].unwatcher();ou(t,eu(t.transactionQueueTree_,e)),iu(t,t.transactionQueueTree_),ar(t.eventQueue_,e,y);for(let I=0;I<C.length;I++)ao(C[I])}else{if(g==="datastale")for(let C=0;C<n.length;C++)n[C].status===3?n[C].status=4:n[C].status=0;else{En("transaction at "+m.toString()+" failed: "+g);for(let C=0;C<n.length;C++)n[C].status=4,n[C].abortReason=g}su(t,e)}},h)}function su(t,e){const n=cw(t,e),i=Fa(n),a=uw(t,n);return IS(t,a,i),i}function IS(t,e,n){if(e.length===0)return;const i=[];let a=[];const h=e.filter(x=>x.status===0).map(x=>x.currentWriteId);for(let x=0;x<e.length;x++){const m=e[x],g=rn(n,m.path);let y=!1,C;if($(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),m.status===4)y=!0,C=m.abortReason,a=a.concat(Hi(t.serverSyncTree_,m.currentWriteId,!0));else if(m.status===0)if(m.retryCount>=uS)y=!0,C="maxretry",a=a.concat(Hi(t.serverSyncTree_,m.currentWriteId,!0));else{const I=u1(t,m.path,h);m.currentInputSnapshot=I;const R=e[x].update(I.val());if(R!==void 0){nu("transaction failed: Data returned ",R,m.path);let b=Rt(R);typeof R=="object"&&R!=null&&lr(R,".priority")||(b=b.updatePriority(I.getPriority()));const F=m.currentWriteId,O=ru(t),N=r1(b,I,O);m.currentOutputSnapshotRaw=b,m.currentOutputSnapshotResolved=N,m.currentWriteId=c1(t),h.splice(h.indexOf(F),1),a=a.concat(qd(t.serverSyncTree_,m.path,N,m.currentWriteId,m.applyLocally)),a=a.concat(Hi(t.serverSyncTree_,F,!0))}else y=!0,C="nodata",a=a.concat(Hi(t.serverSyncTree_,m.currentWriteId,!0))}ar(t.eventQueue_,n,a),a=[],y&&(e[x].status=2,function(I){setTimeout(I,Math.floor(0))}(e[x].unwatcher),e[x].onComplete&&(C==="nodata"?i.push(()=>e[x].onComplete(null,!1,e[x].currentInputSnapshot)):i.push(()=>e[x].onComplete(new Error(C),!1,null))))}ou(t,t.transactionQueueTree_);for(let x=0;x<i.length;x++)ao(i[x]);iu(t,t.transactionQueueTree_)}function cw(t,e){let n,i=t.transactionQueueTree_;for(n=Ae(e);n!==null&&ls(i)===void 0;)i=eu(i,n),e=Je(e),n=Ae(e);return i}function uw(t,e){const n=[];return fw(t,e,n),n.sort((i,a)=>i.order-a.order),n}function fw(t,e,n){const i=ls(e);if(i)for(let a=0;a<i.length;a++)n.push(i[a]);tu(e,a=>{fw(t,a,n)})}function ou(t,e){const n=ls(e);if(n){let i=0;for(let a=0;a<n.length;a++)n[a].status!==2&&(n[i]=n[a],i++);n.length=i,o1(e,n.length>0?n:void 0)}tu(e,i=>{ou(t,i)})}function hw(t,e){const n=Fa(cw(t,e)),i=eu(t.transactionQueueTree_,e);return Jv(i,a=>{df(t,a)}),df(t,i),nw(i,a=>{df(t,a)}),n}function df(t,e){const n=ls(e);if(n){const i=[];let a=[],l=-1;for(let h=0;h<n.length;h++)n[h].status===3||(n[h].status===1?($(l===h-1,"All SENT items should be at beginning of queue."),l=h,n[h].status=3,n[h].abortReason="set"):($(n[h].status===0,"Unexpected transaction status in abort"),n[h].unwatcher(),a=a.concat(Hi(t.serverSyncTree_,n[h].currentWriteId,!0)),n[h].onComplete&&i.push(n[h].onComplete.bind(null,new Error("set"),!1,null))));l===-1?o1(e,void 0):n.length=l+1,ar(t.eventQueue_,Fa(e),a);for(let h=0;h<i.length;h++)ao(i[h])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vS(t){let e="";const n=t.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let a=n[i];try{a=decodeURIComponent(a.replace(/\+/g," "))}catch{}e+="/"+a}return e}function SS(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const i=n.split("=");i.length===2?e[decodeURIComponent(i[0])]=decodeURIComponent(i[1]):En(`Invalid query segment '${n}' in query '${t}'`)}return e}const Xg=function(t,e){const n=TS(t),i=n.namespace;n.domain==="firebase.com"&&Ur(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!i||i==="undefined")&&n.domain!=="localhost"&&Ur("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||BA();const a=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new mx(n.host,n.secure,i,a,e,"",i!==n.subdomain),path:new Xe(n.pathString)}},TS=function(t){let e="",n="",i="",a="",l="",h=!0,x="https",m=443;if(typeof t=="string"){let g=t.indexOf("//");g>=0&&(x=t.substring(0,g-1),t=t.substring(g+2));let y=t.indexOf("/");y===-1&&(y=t.length);let C=t.indexOf("?");C===-1&&(C=t.length),e=t.substring(0,Math.min(y,C)),y<C&&(a=vS(t.substring(y,C)));const I=SS(t.substring(Math.min(t.length,C)));g=e.indexOf(":"),g>=0?(h=x==="https"||x==="wss",m=parseInt(e.substring(g+1),10)):g=e.length;const R=e.slice(0,g);if(R.toLowerCase()==="localhost")n="localhost";else if(R.split(".").length<=2)n=R;else{const b=e.indexOf(".");i=e.substring(0,b).toLowerCase(),n=e.substring(b+1),l=i}"ns"in I&&(l=I.ns)}return{host:e,port:m,domain:n,subdomain:i,secure:h,scheme:x,pathString:a,namespace:l}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e,n,i,a){this.eventType=e,this.eventRegistration=n,this.snapshot=i,this.prevName=a}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Mt(this.snapshot.exportVal())}}class RS{constructor(e,n,i){this.eventRegistration=e,this.error=n,this.path=i}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return $(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(e,n,i,a){this._repo=e,this._path=n,this._queryParams=i,this._orderByCalled=a}get key(){return Te(this._path)?null:vx(this._path)}get ref(){return new Ar(this._repo,this._path)}get _queryIdentifier(){const e=Og(this._queryParams),n=Pd(e);return n==="{}"?"default":n}get _queryObject(){return Og(this._queryParams)}isEqual(e){if(e=jr(e),!(e instanceof f1))return!1;const n=this._repo===e._repo,i=zd(this._path,e._path),a=this._queryIdentifier===e._queryIdentifier;return n&&i&&a}toJSON(){return this.toString()}toString(){return this._repo.toString()+CI(this._path)}}class Ar extends f1{constructor(e,n){super(e,n,new Wd,!1)}get parent(){const e=Tx(this._path);return e===null?null:new Ar(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class to{constructor(e,n,i){this._node=e,this.ref=n,this._index=i}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new Xe(e),i=Nh(this.ref,e);return new to(this._node.getChild(n),i,ft)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(i,a)=>e(new to(a,Nh(this.ref,i),ft)))}hasChild(e){const n=new Xe(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ec(t,e){return t=jr(t),t._checkNotDeleted("ref"),e!==void 0?Nh(t._root,e):t._root}function Nh(t,e){return t=jr(t),Ae(t._path)===null?sS("child","path",e):sw("child","path",e),new Ar(t._repo,bt(t._path,e))}function MS(t,e){t=jr(t),ow("set",t._path),iS("set",e,t._path);const n=new ba;return mS(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function bS(t){t=jr(t);const e=new dw(()=>{}),n=new au(e);return pS(t._repo,t,n).then(i=>new to(i,new Ar(t._repo,t._path),t._queryParams.getIndex()))}class au{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const i=n._queryParams.getIndex();return new NS("value",this,new to(e.snapshotNode,new Ar(n._repo,n._path),i))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new RS(this,e,n):null}matches(e){return e instanceof au?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function OS(t,e,n,i,a){const l=new dw(n,void 0),h=new au(l);return wS(t._repo,t,h),()=>yS(t._repo,t,h)}function gw(t,e,n,i){return OS(t,"value",e)}Mv(Ar);kv(Ar);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="FIREBASE_DATABASE_EMULATOR_HOST",Rh={};let LS=!1;function kS(t,e,n,i){t.repoInfo_=new mx(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),i&&(t.authTokenProvider_=i)}function PS(t,e,n,i,a){let l=i||t.options.databaseURL;l===void 0&&(t.options.projectId||Ur("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Jt("Using default host for project ",t.options.projectId),l=`${t.options.projectId}-default-rtdb.firebaseio.com`);let h=Xg(l,a),x=h.repoInfo,m;typeof process<"u"&&gg&&(m=gg[DS]),m?(l=`http://${m}?ns=${x.namespace}`,h=Xg(l,a),x=h.repoInfo):h.repoInfo.secure;const g=new QA(t.name,t.options,e);oS("Invalid Firebase Database URL",h),Te(h.path)||Ur("Database URL must point to the root of a Firebase Database (not including a child path).");const y=FS(x,t,g,new XA(t.name,n));return new US(y,t)}function BS(t,e){const n=Rh[e];(!n||n[t.key]!==t)&&Ur(`Database ${e}(${t.repoInfo_}) has already been deleted.`),CS(t),delete n[t.key]}function FS(t,e,n,i){let a=Rh[e.name];a||(a={},Rh[e.name]=a);let l=a[t.toURLString()];return l&&Ur("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),l=new fS(t,LS,n,i),a[t.toURLString()]=l,l}class US{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(hS(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ar(this._repo,ke())),this._rootInternal}_delete(){return this._rootInternal!==null&&(BS(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&Ur("Cannot call "+e+" on a deleted database.")}}function zS(t=J2(),e){const n=Oa(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const i=o3("database");i&&jS(n,...i)}return n}function jS(t,e,n,i={}){t=jr(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&Ur("Cannot call useEmulator() after instance has already been initialized.");const a=t._repoInternal;let l;if(a.repoInfo_.nodeAdmin)i.mockUserToken&&Ur('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),l=new bl(bl.OWNER);else if(i.mockUserToken){const h=typeof i.mockUserToken=="string"?i.mockUserToken:a3(i.mockUserToken,t.app.options.projectId);l=new bl(h)}kS(a,e,n,l)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HS(t){OA(_A),yi(new Br("database",(e,{instanceIdentifier:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("auth-internal"),l=e.getProvider("app-check-internal");return PS(i,a,l,n)},"PUBLIC").setMultipleInstances(!0)),_r(pg,mg,t),_r(pg,mg,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VS{constructor(e,n){this.committed=e,this.snapshot=n}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function WS(t,e,n){var i;if(t=jr(t),ow("Reference.transaction",t._path),t.key===".length"||t.key===".keys")throw"Reference.transaction failed: "+t.key+" is a read-only object.";const a=(i=void 0)!==null&&i!==void 0?i:!0,l=new ba,h=(m,g,y)=>{let C=null;m?l.reject(m):(C=new to(y,new Ar(t._repo,t._path),ft),l.resolve(new VS(g,C)))},x=gw(t,()=>{});return _S(t._repo,t._path,e,h,x,a),l.promise}Or.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Or.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};HS();var GS="firebase",YS="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r(GS,YS,"app");const pw="@firebase/installations",h1="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw=1e4,xw=`w:${h1}`,ww="FIS_v2",XS="https://firebaseinstallations.googleapis.com/v1",QS=60*60*1e3,KS="installations",ZS="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qS={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ts=new Yc(KS,ZS,qS);function yw(t){return t instanceof os&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw({projectId:t}){return`${XS}/projects/${t}/installations`}function Ew(t){return{token:t.token,requestStatus:2,expiresIn:$S(t.expiresIn),creationTime:Date.now()}}async function _w(t,e){const i=(await e.json()).error;return ts.create("request-failed",{requestName:t,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Aw({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function JS(t,{refreshToken:e}){const n=Aw(t);return n.append("Authorization",eT(e)),n}async function Iw(t){const e=await t();return e.status>=500&&e.status<600?t():e}function $S(t){return Number(t.replace("s","000"))}function eT(t){return`${ww} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const i=Cw(t),a=Aw(t),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const h={fid:n,authVersion:ww,appId:t.appId,sdkVersion:xw},x={method:"POST",headers:a,body:JSON.stringify(h)},m=await Iw(()=>fetch(i,x));if(m.ok){const g=await m.json();return{fid:g.fid||n,registrationStatus:2,refreshToken:g.refreshToken,authToken:Ew(g.authToken)}}else throw await _w("Create Installation",m)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nT(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rT=/^[cdef][\w-]{21}$/,Mh="";function iT(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=sT(t);return rT.test(n)?n:Mh}catch{return Mh}}function sT(t){return nT(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lu(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=new Map;function Tw(t,e){const n=lu(t);Nw(n,e),oT(n,e)}function Nw(t,e){const n=Sw.get(t);if(n)for(const i of n)i(e)}function oT(t,e){const n=aT();n&&n.postMessage({key:t,fid:e}),lT()}let Vi=null;function aT(){return!Vi&&"BroadcastChannel"in self&&(Vi=new BroadcastChannel("[Firebase] FID Change"),Vi.onmessage=t=>{Nw(t.data.key,t.data.fid)}),Vi}function lT(){Sw.size===0&&Vi&&(Vi.close(),Vi=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="firebase-installations-database",uT=1,ns="firebase-installations-store";let gf=null;function d1(){return gf||(gf=Z2(cT,uT,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ns)}}})),gf}async function _c(t,e){const n=lu(t),a=(await d1()).transaction(ns,"readwrite"),l=a.objectStore(ns),h=await l.get(n);return await l.put(e,n),await a.done,(!h||h.fid!==e.fid)&&Tw(t,e.fid),e}async function Rw(t){const e=lu(t),i=(await d1()).transaction(ns,"readwrite");await i.objectStore(ns).delete(e),await i.done}async function cu(t,e){const n=lu(t),a=(await d1()).transaction(ns,"readwrite"),l=a.objectStore(ns),h=await l.get(n),x=e(h);return x===void 0?await l.delete(n):await l.put(x,n),await a.done,x&&(!h||h.fid!==x.fid)&&Tw(t,x.fid),x}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function g1(t){let e;const n=await cu(t.appConfig,i=>{const a=fT(i),l=hT(t,a);return e=l.registrationPromise,l.installationEntry});return n.fid===Mh?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function fT(t){const e=t||{fid:iT(),registrationStatus:0};return Mw(e)}function hT(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(ts.create("app-offline"));return{installationEntry:e,registrationPromise:a}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=dT(t,n);return{installationEntry:n,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:gT(t)}:{installationEntry:e}}async function dT(t,e){try{const n=await tT(t,e);return _c(t.appConfig,n)}catch(n){throw yw(n)&&n.customData.serverCode===409?await Rw(t.appConfig):await _c(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function gT(t){let e=await Qg(t.appConfig);for(;e.registrationStatus===1;)await vw(100),e=await Qg(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await g1(t);return i||n}return e}function Qg(t){return cu(t,e=>{if(!e)throw ts.create("installation-not-found");return Mw(e)})}function Mw(t){return pT(t)?{fid:t.fid,registrationStatus:0}:t}function pT(t){return t.registrationStatus===1&&t.registrationTime+mw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mT({appConfig:t,heartbeatServiceProvider:e},n){const i=xT(t,n),a=JS(t,n),l=e.getImmediate({optional:!0});if(l){const g=await l.getHeartbeatsHeader();g&&a.append("x-firebase-client",g)}const h={installation:{sdkVersion:xw,appId:t.appId}},x={method:"POST",headers:a,body:JSON.stringify(h)},m=await Iw(()=>fetch(i,x));if(m.ok){const g=await m.json();return Ew(g)}else throw await _w("Generate Auth Token",m)}function xT(t,{fid:e}){return`${Cw(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(t,e=!1){let n;const i=await cu(t.appConfig,l=>{if(!bw(l))throw ts.create("not-registered");const h=l.authToken;if(!e&&CT(h))return l;if(h.requestStatus===1)return n=wT(t,e),l;{if(!navigator.onLine)throw ts.create("app-offline");const x=_T(l);return n=yT(t,x),x}});return n?await n:i.authToken}async function wT(t,e){let n=await Kg(t.appConfig);for(;n.authToken.requestStatus===1;)await vw(100),n=await Kg(t.appConfig);const i=n.authToken;return i.requestStatus===0?p1(t,e):i}function Kg(t){return cu(t,e=>{if(!bw(e))throw ts.create("not-registered");const n=e.authToken;return AT(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function yT(t,e){try{const n=await mT(t,e),i=Object.assign(Object.assign({},e),{authToken:n});return await _c(t.appConfig,i),n}catch(n){if(yw(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Rw(t.appConfig);else{const i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await _c(t.appConfig,i)}throw n}}function bw(t){return t!==void 0&&t.registrationStatus===2}function CT(t){return t.requestStatus===2&&!ET(t)}function ET(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+QS}function _T(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function AT(t){return t.requestStatus===1&&t.requestTime+mw<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IT(t){const e=t,{installationEntry:n,registrationPromise:i}=await g1(e);return i?i.catch(console.error):p1(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vT(t,e=!1){const n=t;return await ST(n),(await p1(n,e)).token}async function ST(t){const{registrationPromise:e}=await g1(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TT(t){if(!t||!t.options)throw pf("App Configuration");if(!t.name)throw pf("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw pf(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function pf(t){return ts.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ow="installations",NT="installations-internal",RT=t=>{const e=t.getProvider("app").getImmediate(),n=TT(e),i=Oa(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},MT=t=>{const e=t.getProvider("app").getImmediate(),n=Oa(e,Ow).getImmediate();return{getId:()=>IT(n),getToken:a=>vT(n,a)}};function bT(){yi(new Br(Ow,RT,"PUBLIC")),yi(new Br(NT,MT,"PRIVATE"))}bT();_r(pw,h1);_r(pw,h1,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ac="analytics",OT="firebase_id",DT="origin",LT=60*1e3,kT="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",m1="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _n=new Dd("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PT={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},On=new Yc("analytics","Analytics",PT);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t){if(!t.startsWith(m1)){const e=On.create("invalid-gtag-resource",{gtagURL:t});return _n.warn(e.message),""}return t}function Dw(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function FT(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function UT(t,e){const n=FT("firebase-js-sdk-policy",{createScriptURL:BT}),i=document.createElement("script"),a=`${m1}?l=${t}&id=${e}`;i.src=n?n==null?void 0:n.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function zT(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function jT(t,e,n,i,a,l){const h=i[a];try{if(h)await e[h];else{const m=(await Dw(n)).find(g=>g.measurementId===a);m&&await e[m.appId]}}catch(x){_n.error(x)}t("config",a,l)}async function HT(t,e,n,i,a){try{let l=[];if(a&&a.send_to){let h=a.send_to;Array.isArray(h)||(h=[h]);const x=await Dw(n);for(const m of h){const g=x.find(C=>C.measurementId===m),y=g&&e[g.appId];if(y)l.push(y);else{l=[];break}}}l.length===0&&(l=Object.values(e)),await Promise.all(l),t("event",i,a||{})}catch(l){_n.error(l)}}function VT(t,e,n,i){async function a(l,...h){try{if(l==="event"){const[x,m]=h;await HT(t,e,n,x,m)}else if(l==="config"){const[x,m]=h;await jT(t,e,n,i,x,m)}else if(l==="consent"){const[x,m]=h;t("consent",x,m)}else if(l==="get"){const[x,m,g]=h;t("get",x,m,g)}else if(l==="set"){const[x]=h;t("set",x)}else t(l,...h)}catch(x){_n.error(x)}}return a}function WT(t,e,n,i,a){let l=function(...h){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(l=window[a]),window[a]=VT(l,t,e,n),{gtagCore:l,wrappedGtag:window[a]}}function GT(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(m1)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=30,XT=1e3;class QT{constructor(e={},n=XT){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const Lw=new QT;function KT(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function ZT(t){var e;const{appId:n,apiKey:i}=t,a={method:"GET",headers:KT(i)},l=kT.replace("{app-id}",n),h=await fetch(l,a);if(h.status!==200&&h.status!==304){let x="";try{const m=await h.json();!((e=m.error)===null||e===void 0)&&e.message&&(x=m.error.message)}catch{}throw On.create("config-fetch-failed",{httpStatus:h.status,responseMessage:x})}return h.json()}async function qT(t,e=Lw,n){const{appId:i,apiKey:a,measurementId:l}=t.options;if(!i)throw On.create("no-app-id");if(!a){if(l)return{measurementId:l,appId:i};throw On.create("no-api-key")}const h=e.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},x=new e4;return setTimeout(async()=>{x.abort()},LT),kw({appId:i,apiKey:a,measurementId:l},h,x,e)}async function kw(t,{throttleEndTimeMillis:e,backoffCount:n},i,a=Lw){var l;const{appId:h,measurementId:x}=t;try{await JT(i,e)}catch(m){if(x)return _n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${x} provided in the "measurementId" field in the local Firebase config. [${m==null?void 0:m.message}]`),{appId:h,measurementId:x};throw m}try{const m=await ZT(t);return a.deleteThrottleMetadata(h),m}catch(m){const g=m;if(!$T(g)){if(a.deleteThrottleMetadata(h),x)return _n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${x} provided in the "measurementId" field in the local Firebase config. [${g==null?void 0:g.message}]`),{appId:h,measurementId:x};throw m}const y=Number((l=g==null?void 0:g.customData)===null||l===void 0?void 0:l.httpStatus)===503?sg(n,a.intervalMillis,YT):sg(n,a.intervalMillis),C={throttleEndTimeMillis:Date.now()+y,backoffCount:n+1};return a.setThrottleMetadata(h,C),_n.debug(`Calling attemptFetch again in ${y} millis`),kw(t,C,i,a)}}function JT(t,e){return new Promise((n,i)=>{const a=Math.max(e-Date.now(),0),l=setTimeout(n,a);t.addEventListener(()=>{clearTimeout(l),i(On.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function $T(t){if(!(t instanceof os)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class e4{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function t4(t,e,n,i,a){if(a&&a.global){t("event",n,i);return}else{const l=await e,h=Object.assign(Object.assign({},i),{send_to:l});t("event",n,h)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function n4(){if(G2())try{await Y2()}catch(t){return _n.warn(On.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return _n.warn(On.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function r4(t,e,n,i,a,l,h){var x;const m=qT(t);m.then(R=>{n[R.measurementId]=R.appId,t.options.measurementId&&R.measurementId!==t.options.measurementId&&_n.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${R.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(R=>_n.error(R)),e.push(m);const g=n4().then(R=>{if(R)return i.getId()}),[y,C]=await Promise.all([m,g]);GT(l)||UT(l,y.measurementId),a("js",new Date);const I=(x=h==null?void 0:h.config)!==null&&x!==void 0?x:{};return I[DT]="firebase",I.update=!0,C!=null&&(I[OT]=C),a("config",y.measurementId,I),y.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i4{constructor(e){this.app=e}_delete(){return delete Jo[this.app.options.appId],Promise.resolve()}}let Jo={},Zg=[];const qg={};let mf="dataLayer",s4="gtag",Jg,Pw,$g=!1;function o4(){const t=[];if(c3()&&t.push("This is a browser extension environment."),h3()||t.push("Cookies are not available."),t.length>0){const e=t.map((i,a)=>`(${a+1}) ${i}`).join(" "),n=On.create("invalid-analytics-context",{errorInfo:e});_n.warn(n.message)}}function a4(t,e,n){o4();const i=t.options.appId;if(!i)throw On.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)_n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw On.create("no-api-key");if(Jo[i]!=null)throw On.create("already-exists",{id:i});if(!$g){zT(mf);const{wrappedGtag:l,gtagCore:h}=WT(Jo,Zg,qg,mf,s4);Pw=l,Jg=h,$g=!0}return Jo[i]=r4(t,Zg,qg,e,Jg,mf,n),new i4(t)}function l4(t=J2()){t=jr(t);const e=Oa(t,Ac);return e.isInitialized()?e.getImmediate():c4(t)}function c4(t,e={}){const n=Oa(t,Ac);if(n.isInitialized()){const a=n.getImmediate();if(oc(e,n.getOptions()))return a;throw On.create("already-initialized")}return n.initialize({options:e})}function u4(t,e,n,i){t=jr(t),t4(Pw,Jo[t.app.options.appId],e,n,i).catch(a=>_n.error(a))}const ep="@firebase/analytics",tp="0.10.8";function f4(){yi(new Br(Ac,(e,{options:n})=>{const i=e.getProvider("app").getImmediate(),a=e.getProvider("installations-internal").getImmediate();return a4(i,a,n)},"PUBLIC")),yi(new Br("analytics-internal",t,"PRIVATE")),_r(ep,tp),_r(ep,tp,"esm2017");function t(e){try{const n=e.getProvider(Ac).getImmediate();return{logEvent:(i,a,l)=>u4(n,i,a,l)}}catch(n){throw On.create("interop-component-reg-failed",{reason:n})}}}f4();const h4={apiKey:"AIzaSyAsNuRvwC_5362cCOC4c8juth1f1pWeWSM",authDomain:"booth-a3a53.firebaseapp.com",projectId:"booth-a3a53",storageBucket:"booth-a3a53.firebasestorage.app",messagingSenderId:"172502386350",appId:"1:172502386350:web:1cf61f8bed16fd77000f3f",measurementId:"G-302G21S9V0"},Bw=q2(h4);l4(Bw);const Ic=zS(Bw);var d4=Object.defineProperty,vc=Object.getOwnPropertySymbols,Fw=Object.prototype.hasOwnProperty,Uw=Object.prototype.propertyIsEnumerable,np=(t,e,n)=>e in t?d4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,bh=(t,e)=>{for(var n in e||(e={}))Fw.call(e,n)&&np(t,n,e[n]);if(vc)for(var n of vc(e))Uw.call(e,n)&&np(t,n,e[n]);return t},Oh=(t,e)=>{var n={};for(var i in t)Fw.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&vc)for(var i of vc(t))e.indexOf(i)<0&&Uw.call(t,i)&&(n[i]=t[i]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var rs;(t=>{const e=class Se{constructor(m,g,y,C){if(this.version=m,this.errorCorrectionLevel=g,this.modules=[],this.isFunction=[],m<Se.MIN_VERSION||m>Se.MAX_VERSION)throw new RangeError("Version value out of range");if(C<-1||C>7)throw new RangeError("Mask value out of range");this.size=m*4+17;let I=[];for(let b=0;b<this.size;b++)I.push(!1);for(let b=0;b<this.size;b++)this.modules.push(I.slice()),this.isFunction.push(I.slice());this.drawFunctionPatterns();const R=this.addEccAndInterleave(y);if(this.drawCodewords(R),C==-1){let b=1e9;for(let L=0;L<8;L++){this.applyMask(L),this.drawFormatBits(L);const F=this.getPenaltyScore();F<b&&(C=L,b=F),this.applyMask(L)}}a(0<=C&&C<=7),this.mask=C,this.applyMask(C),this.drawFormatBits(C),this.isFunction=[]}static encodeText(m,g){const y=t.QrSegment.makeSegments(m);return Se.encodeSegments(y,g)}static encodeBinary(m,g){const y=t.QrSegment.makeBytes(m);return Se.encodeSegments([y],g)}static encodeSegments(m,g,y=1,C=40,I=-1,R=!0){if(!(Se.MIN_VERSION<=y&&y<=C&&C<=Se.MAX_VERSION)||I<-1||I>7)throw new RangeError("Invalid value");let b,L;for(b=y;;b++){const M=Se.getNumDataCodewords(b,g)*8,U=h.getTotalBits(m,b);if(U<=M){L=U;break}if(b>=C)throw new RangeError("Data too long")}for(const M of[Se.Ecc.MEDIUM,Se.Ecc.QUARTILE,Se.Ecc.HIGH])R&&L<=Se.getNumDataCodewords(b,M)*8&&(g=M);let F=[];for(const M of m){n(M.mode.modeBits,4,F),n(M.numChars,M.mode.numCharCountBits(b),F);for(const U of M.getData())F.push(U)}a(F.length==L);const O=Se.getNumDataCodewords(b,g)*8;a(F.length<=O),n(0,Math.min(4,O-F.length),F),n(0,(8-F.length%8)%8,F),a(F.length%8==0);for(let M=236;F.length<O;M^=253)n(M,8,F);let N=[];for(;N.length*8<F.length;)N.push(0);return F.forEach((M,U)=>N[U>>>3]|=M<<7-(U&7)),new Se(b,g,N,I)}getModule(m,g){return 0<=m&&m<this.size&&0<=g&&g<this.size&&this.modules[g][m]}getModules(){return this.modules}drawFunctionPatterns(){for(let y=0;y<this.size;y++)this.setFunctionModule(6,y,y%2==0),this.setFunctionModule(y,6,y%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const m=this.getAlignmentPatternPositions(),g=m.length;for(let y=0;y<g;y++)for(let C=0;C<g;C++)y==0&&C==0||y==0&&C==g-1||y==g-1&&C==0||this.drawAlignmentPattern(m[y],m[C]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(m){const g=this.errorCorrectionLevel.formatBits<<3|m;let y=g;for(let I=0;I<10;I++)y=y<<1^(y>>>9)*1335;const C=(g<<10|y)^21522;a(C>>>15==0);for(let I=0;I<=5;I++)this.setFunctionModule(8,I,i(C,I));this.setFunctionModule(8,7,i(C,6)),this.setFunctionModule(8,8,i(C,7)),this.setFunctionModule(7,8,i(C,8));for(let I=9;I<15;I++)this.setFunctionModule(14-I,8,i(C,I));for(let I=0;I<8;I++)this.setFunctionModule(this.size-1-I,8,i(C,I));for(let I=8;I<15;I++)this.setFunctionModule(8,this.size-15+I,i(C,I));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let m=this.version;for(let y=0;y<12;y++)m=m<<1^(m>>>11)*7973;const g=this.version<<12|m;a(g>>>18==0);for(let y=0;y<18;y++){const C=i(g,y),I=this.size-11+y%3,R=Math.floor(y/3);this.setFunctionModule(I,R,C),this.setFunctionModule(R,I,C)}}drawFinderPattern(m,g){for(let y=-4;y<=4;y++)for(let C=-4;C<=4;C++){const I=Math.max(Math.abs(C),Math.abs(y)),R=m+C,b=g+y;0<=R&&R<this.size&&0<=b&&b<this.size&&this.setFunctionModule(R,b,I!=2&&I!=4)}}drawAlignmentPattern(m,g){for(let y=-2;y<=2;y++)for(let C=-2;C<=2;C++)this.setFunctionModule(m+C,g+y,Math.max(Math.abs(C),Math.abs(y))!=1)}setFunctionModule(m,g,y){this.modules[g][m]=y,this.isFunction[g][m]=!0}addEccAndInterleave(m){const g=this.version,y=this.errorCorrectionLevel;if(m.length!=Se.getNumDataCodewords(g,y))throw new RangeError("Invalid argument");const C=Se.NUM_ERROR_CORRECTION_BLOCKS[y.ordinal][g],I=Se.ECC_CODEWORDS_PER_BLOCK[y.ordinal][g],R=Math.floor(Se.getNumRawDataModules(g)/8),b=C-R%C,L=Math.floor(R/C);let F=[];const O=Se.reedSolomonComputeDivisor(I);for(let M=0,U=0;M<C;M++){let q=m.slice(U,U+L-I+(M<b?0:1));U+=q.length;const K=Se.reedSolomonComputeRemainder(q,O);M<b&&q.push(0),F.push(q.concat(K))}let N=[];for(let M=0;M<F[0].length;M++)F.forEach((U,q)=>{(M!=L-I||q>=b)&&N.push(U[M])});return a(N.length==R),N}drawCodewords(m){if(m.length!=Math.floor(Se.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let g=0;for(let y=this.size-1;y>=1;y-=2){y==6&&(y=5);for(let C=0;C<this.size;C++)for(let I=0;I<2;I++){const R=y-I,L=(y+1&2)==0?this.size-1-C:C;!this.isFunction[L][R]&&g<m.length*8&&(this.modules[L][R]=i(m[g>>>3],7-(g&7)),g++)}}a(g==m.length*8)}applyMask(m){if(m<0||m>7)throw new RangeError("Mask value out of range");for(let g=0;g<this.size;g++)for(let y=0;y<this.size;y++){let C;switch(m){case 0:C=(y+g)%2==0;break;case 1:C=g%2==0;break;case 2:C=y%3==0;break;case 3:C=(y+g)%3==0;break;case 4:C=(Math.floor(y/3)+Math.floor(g/2))%2==0;break;case 5:C=y*g%2+y*g%3==0;break;case 6:C=(y*g%2+y*g%3)%2==0;break;case 7:C=((y+g)%2+y*g%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[g][y]&&C&&(this.modules[g][y]=!this.modules[g][y])}}getPenaltyScore(){let m=0;for(let I=0;I<this.size;I++){let R=!1,b=0,L=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[I][F]==R?(b++,b==5?m+=Se.PENALTY_N1:b>5&&m++):(this.finderPenaltyAddHistory(b,L),R||(m+=this.finderPenaltyCountPatterns(L)*Se.PENALTY_N3),R=this.modules[I][F],b=1);m+=this.finderPenaltyTerminateAndCount(R,b,L)*Se.PENALTY_N3}for(let I=0;I<this.size;I++){let R=!1,b=0,L=[0,0,0,0,0,0,0];for(let F=0;F<this.size;F++)this.modules[F][I]==R?(b++,b==5?m+=Se.PENALTY_N1:b>5&&m++):(this.finderPenaltyAddHistory(b,L),R||(m+=this.finderPenaltyCountPatterns(L)*Se.PENALTY_N3),R=this.modules[F][I],b=1);m+=this.finderPenaltyTerminateAndCount(R,b,L)*Se.PENALTY_N3}for(let I=0;I<this.size-1;I++)for(let R=0;R<this.size-1;R++){const b=this.modules[I][R];b==this.modules[I][R+1]&&b==this.modules[I+1][R]&&b==this.modules[I+1][R+1]&&(m+=Se.PENALTY_N2)}let g=0;for(const I of this.modules)g=I.reduce((R,b)=>R+(b?1:0),g);const y=this.size*this.size,C=Math.ceil(Math.abs(g*20-y*10)/y)-1;return a(0<=C&&C<=9),m+=C*Se.PENALTY_N4,a(0<=m&&m<=2568888),m}getAlignmentPatternPositions(){if(this.version==1)return[];{const m=Math.floor(this.version/7)+2,g=this.version==32?26:Math.ceil((this.version*4+4)/(m*2-2))*2;let y=[6];for(let C=this.size-7;y.length<m;C-=g)y.splice(1,0,C);return y}}static getNumRawDataModules(m){if(m<Se.MIN_VERSION||m>Se.MAX_VERSION)throw new RangeError("Version number out of range");let g=(16*m+128)*m+64;if(m>=2){const y=Math.floor(m/7)+2;g-=(25*y-10)*y-55,m>=7&&(g-=36)}return a(208<=g&&g<=29648),g}static getNumDataCodewords(m,g){return Math.floor(Se.getNumRawDataModules(m)/8)-Se.ECC_CODEWORDS_PER_BLOCK[g.ordinal][m]*Se.NUM_ERROR_CORRECTION_BLOCKS[g.ordinal][m]}static reedSolomonComputeDivisor(m){if(m<1||m>255)throw new RangeError("Degree out of range");let g=[];for(let C=0;C<m-1;C++)g.push(0);g.push(1);let y=1;for(let C=0;C<m;C++){for(let I=0;I<g.length;I++)g[I]=Se.reedSolomonMultiply(g[I],y),I+1<g.length&&(g[I]^=g[I+1]);y=Se.reedSolomonMultiply(y,2)}return g}static reedSolomonComputeRemainder(m,g){let y=g.map(C=>0);for(const C of m){const I=C^y.shift();y.push(0),g.forEach((R,b)=>y[b]^=Se.reedSolomonMultiply(R,I))}return y}static reedSolomonMultiply(m,g){if(m>>>8||g>>>8)throw new RangeError("Byte out of range");let y=0;for(let C=7;C>=0;C--)y=y<<1^(y>>>7)*285,y^=(g>>>C&1)*m;return a(y>>>8==0),y}finderPenaltyCountPatterns(m){const g=m[1];a(g<=this.size*3);const y=g>0&&m[2]==g&&m[3]==g*3&&m[4]==g&&m[5]==g;return(y&&m[0]>=g*4&&m[6]>=g?1:0)+(y&&m[6]>=g*4&&m[0]>=g?1:0)}finderPenaltyTerminateAndCount(m,g,y){return m&&(this.finderPenaltyAddHistory(g,y),g=0),g+=this.size,this.finderPenaltyAddHistory(g,y),this.finderPenaltyCountPatterns(y)}finderPenaltyAddHistory(m,g){g[0]==0&&(m+=this.size),g.pop(),g.unshift(m)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(x,m,g){if(m<0||m>31||x>>>m)throw new RangeError("Value out of range");for(let y=m-1;y>=0;y--)g.push(x>>>y&1)}function i(x,m){return(x>>>m&1)!=0}function a(x){if(!x)throw new Error("Assertion error")}const l=class xt{constructor(m,g,y){if(this.mode=m,this.numChars=g,this.bitData=y,g<0)throw new RangeError("Invalid argument");this.bitData=y.slice()}static makeBytes(m){let g=[];for(const y of m)n(y,8,g);return new xt(xt.Mode.BYTE,m.length,g)}static makeNumeric(m){if(!xt.isNumeric(m))throw new RangeError("String contains non-numeric characters");let g=[];for(let y=0;y<m.length;){const C=Math.min(m.length-y,3);n(parseInt(m.substring(y,y+C),10),C*3+1,g),y+=C}return new xt(xt.Mode.NUMERIC,m.length,g)}static makeAlphanumeric(m){if(!xt.isAlphanumeric(m))throw new RangeError("String contains unencodable characters in alphanumeric mode");let g=[],y;for(y=0;y+2<=m.length;y+=2){let C=xt.ALPHANUMERIC_CHARSET.indexOf(m.charAt(y))*45;C+=xt.ALPHANUMERIC_CHARSET.indexOf(m.charAt(y+1)),n(C,11,g)}return y<m.length&&n(xt.ALPHANUMERIC_CHARSET.indexOf(m.charAt(y)),6,g),new xt(xt.Mode.ALPHANUMERIC,m.length,g)}static makeSegments(m){return m==""?[]:xt.isNumeric(m)?[xt.makeNumeric(m)]:xt.isAlphanumeric(m)?[xt.makeAlphanumeric(m)]:[xt.makeBytes(xt.toUtf8ByteArray(m))]}static makeEci(m){let g=[];if(m<0)throw new RangeError("ECI assignment value out of range");if(m<128)n(m,8,g);else if(m<16384)n(2,2,g),n(m,14,g);else if(m<1e6)n(6,3,g),n(m,21,g);else throw new RangeError("ECI assignment value out of range");return new xt(xt.Mode.ECI,0,g)}static isNumeric(m){return xt.NUMERIC_REGEX.test(m)}static isAlphanumeric(m){return xt.ALPHANUMERIC_REGEX.test(m)}getData(){return this.bitData.slice()}static getTotalBits(m,g){let y=0;for(const C of m){const I=C.mode.numCharCountBits(g);if(C.numChars>=1<<I)return 1/0;y+=4+I+C.bitData.length}return y}static toUtf8ByteArray(m){m=encodeURI(m);let g=[];for(let y=0;y<m.length;y++)m.charAt(y)!="%"?g.push(m.charCodeAt(y)):(g.push(parseInt(m.substring(y+1,y+3),16)),y+=2);return g}};l.NUMERIC_REGEX=/^[0-9]*$/,l.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,l.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let h=l;t.QrSegment=l})(rs||(rs={}));(t=>{(e=>{const n=class{constructor(a,l){this.ordinal=a,this.formatBits=l}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(rs||(rs={}));(t=>{(e=>{const n=class{constructor(a,l){this.modeBits=a,this.numBitsCharCount=l}numCharCountBits(a){return this.numBitsCharCount[Math.floor((a+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(rs||(rs={}));var Ls=rs;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var g4={L:Ls.QrCode.Ecc.LOW,M:Ls.QrCode.Ecc.MEDIUM,Q:Ls.QrCode.Ecc.QUARTILE,H:Ls.QrCode.Ecc.HIGH},zw=128,jw="L",Hw="#FFFFFF",Vw="#000000",Ww=!1,Gw=1,p4=4,m4=0,x4=.1;function Yw(t,e=0){const n=[];return t.forEach(function(i,a){let l=null;i.forEach(function(h,x){if(!h&&l!==null){n.push(`M${l+e} ${a+e}h${x-l}v1H${l+e}z`),l=null;return}if(x===i.length-1){if(!h)return;l===null?n.push(`M${x+e},${a+e} h1v1H${x+e}z`):n.push(`M${l+e},${a+e} h${x+1-l}v1H${l+e}z`);return}h&&l===null&&(l=x)})}),n.join("")}function Xw(t,e){return t.slice().map((n,i)=>i<e.y||i>=e.y+e.h?n:n.map((a,l)=>l<e.x||l>=e.x+e.w?a:!1))}function w4(t,e,n,i){if(i==null)return null;const a=t.length+n*2,l=Math.floor(e*x4),h=a/e,x=(i.width||l)*h,m=(i.height||l)*h,g=i.x==null?t.length/2-x/2:i.x*h,y=i.y==null?t.length/2-m/2:i.y*h,C=i.opacity==null?1:i.opacity;let I=null;if(i.excavate){let b=Math.floor(g),L=Math.floor(y),F=Math.ceil(x+g-b),O=Math.ceil(m+y-L);I={x:b,y:L,w:F,h:O}}const R=i.crossOrigin;return{x:g,y,h:m,w:x,excavation:I,opacity:C,crossOrigin:R}}function y4(t,e){return e!=null?Math.max(Math.floor(e),0):t?p4:m4}function Qw({value:t,level:e,minVersion:n,includeMargin:i,marginSize:a,imageSettings:l,size:h,boostLevel:x}){let m=Et.useMemo(()=>{const b=(Array.isArray(t)?t:[t]).reduce((L,F)=>(L.push(...Ls.QrSegment.makeSegments(F)),L),[]);return Ls.QrCode.encodeSegments(b,g4[e],n,void 0,void 0,x)},[t,e,n,x]);const{cells:g,margin:y,numCells:C,calculatedImageSettings:I}=Et.useMemo(()=>{let R=m.getModules();const b=y4(i,a),L=R.length+b*2,F=w4(R,h,b,l);return{cells:R,margin:b,numCells:L,calculatedImageSettings:F}},[m,h,l,i,a]);return{qrcode:m,margin:y,cells:g,numCells:C,calculatedImageSettings:I}}var C4=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),Kw=Et.forwardRef(function(e,n){const i=e,{value:a,size:l=zw,level:h=jw,bgColor:x=Hw,fgColor:m=Vw,includeMargin:g=Ww,minVersion:y=Gw,boostLevel:C,marginSize:I,imageSettings:R}=i,L=Oh(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:F}=L,O=Oh(L,["style"]),N=R==null?void 0:R.src,M=Et.useRef(null),U=Et.useRef(null),q=Et.useCallback(ze=>{M.current=ze,typeof n=="function"?n(ze):n&&(n.current=ze)},[n]),[K,j]=Et.useState(!1),{margin:J,cells:W,numCells:we,calculatedImageSettings:_e}=Qw({value:a,level:h,minVersion:y,boostLevel:C,includeMargin:g,marginSize:I,imageSettings:R,size:l});Et.useEffect(()=>{if(M.current!=null){const ze=M.current,V=ze.getContext("2d");if(!V)return;let et=W;const ge=U.current,te=_e!=null&&ge!==null&&ge.complete&&ge.naturalHeight!==0&&ge.naturalWidth!==0;te&&_e.excavation!=null&&(et=Xw(W,_e.excavation));const fe=window.devicePixelRatio||1;ze.height=ze.width=l*fe;const pe=l/we*fe;V.scale(pe,pe),V.fillStyle=x,V.fillRect(0,0,we,we),V.fillStyle=m,C4?V.fill(new Path2D(Yw(et,J))):W.forEach(function(Qe,Re){Qe.forEach(function(ln,tt){ln&&V.fillRect(tt+J,Re+J,1,1)})}),_e&&(V.globalAlpha=_e.opacity),te&&V.drawImage(ge,_e.x+J,_e.y+J,_e.w,_e.h)}}),Et.useEffect(()=>{j(!1)},[N]);const ue=bh({height:l,width:l},F);let ve=null;return N!=null&&(ve=Et.createElement("img",{src:N,key:N,style:{display:"none"},onLoad:()=>{j(!0)},ref:U,crossOrigin:_e==null?void 0:_e.crossOrigin})),Et.createElement(Et.Fragment,null,Et.createElement("canvas",bh({style:ue,height:l,width:l,ref:q,role:"img"},O)),ve)});Kw.displayName="QRCodeCanvas";var E4=Et.forwardRef(function(e,n){const i=e,{value:a,size:l=zw,level:h=jw,bgColor:x=Hw,fgColor:m=Vw,includeMargin:g=Ww,minVersion:y=Gw,boostLevel:C,title:I,marginSize:R,imageSettings:b}=i,L=Oh(i,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:F,cells:O,numCells:N,calculatedImageSettings:M}=Qw({value:a,level:h,minVersion:y,boostLevel:C,includeMargin:g,marginSize:R,imageSettings:b,size:l});let U=O,q=null;b!=null&&M!=null&&(M.excavation!=null&&(U=Xw(O,M.excavation)),q=Et.createElement("image",{href:b.src,height:M.h,width:M.w,x:M.x+F,y:M.y+F,preserveAspectRatio:"none",opacity:M.opacity,crossOrigin:M.crossOrigin}));const K=Yw(U,F);return Et.createElement("svg",bh({height:l,width:l,viewBox:`0 0 ${N} ${N}`,ref:n,role:"img"},L),!!I&&Et.createElement("title",null,I),Et.createElement("path",{fill:x,d:`M0,0 h${N}v${N}H0z`,shapeRendering:"crispEdges"}),Et.createElement("path",{fill:m,d:K,shapeRendering:"crispEdges"}),q)});E4.displayName="QRCodeSVG";function _4(){const[t,e]=ce.useState(""),[n,i]=ce.useState("input"),[a,l]=ce.useState(""),[h,x]=ce.useState(!1);ce.useEffect(()=>{const y=localStorage.getItem("myEventId");y&&(l(y),i("confirmed"))},[]);const m=async()=>{if(t.trim()){x(!0);try{const y=Ec(Ic,`participants/${t.trim()}`);if((await bS(y)).exists()){const I=Math.floor(Math.random()*90+10);l(`${t.trim()}${I}`),i("suggest")}else await g(t.trim())}catch{alert("Connection error.")}finally{x(!1)}}},g=async y=>{x(!0);try{await MS(Ec(Ic,`participants/${y}`),{nickname:y,points:0,registeredAt:new Date().toISOString()}),l(y),i("confirmed"),localStorage.setItem("myEventId",y)}catch{alert("Registration failed.")}finally{x(!1)}};return se.jsx("div",{className:"container",children:se.jsxs("div",{className:"card",children:[n==="input"&&se.jsxs(se.Fragment,{children:[se.jsx("h1",{children:"Event Check-in"}),se.jsx("p",{children:"Enter your nickname to start!"}),se.jsx("input",{placeholder:"Your Nickname",value:t,onChange:y=>e(y.target.value),disabled:h}),se.jsx("button",{onClick:m,disabled:h,children:h?"Checking...":"Join Event"})]}),n==="suggest"&&se.jsxs(se.Fragment,{children:[se.jsx("h1",{style:{color:"var(--danger)"},children:"Name Taken!"}),se.jsxs("p",{children:["Use ",se.jsx("strong",{children:a})," instead?"]}),se.jsxs("div",{className:"flex-group",children:[se.jsx("button",{onClick:()=>g(a),disabled:h,children:"Yes"}),se.jsx("button",{onClick:()=>i("input"),className:"btn-secondary",disabled:h,children:"No"})]})]}),n==="confirmed"&&se.jsxs(se.Fragment,{children:[se.jsx("h1",{style:{color:"var(--success)"},children:"Registered!"}),se.jsx("div",{className:"qr-wrapper",children:se.jsx(Kw,{value:a,size:220,level:"H",includeMargin:!0})}),se.jsx("h2",{children:a}),se.jsx("p",{children:"Show this QR code at any booth."})]})]})})}var re;(function(t){t[t.QR_CODE=0]="QR_CODE",t[t.AZTEC=1]="AZTEC",t[t.CODABAR=2]="CODABAR",t[t.CODE_39=3]="CODE_39",t[t.CODE_93=4]="CODE_93",t[t.CODE_128=5]="CODE_128",t[t.DATA_MATRIX=6]="DATA_MATRIX",t[t.MAXICODE=7]="MAXICODE",t[t.ITF=8]="ITF",t[t.EAN_13=9]="EAN_13",t[t.EAN_8=10]="EAN_8",t[t.PDF_417=11]="PDF_417",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(re||(re={}));var rp=new Map([[re.QR_CODE,"QR_CODE"],[re.AZTEC,"AZTEC"],[re.CODABAR,"CODABAR"],[re.CODE_39,"CODE_39"],[re.CODE_93,"CODE_93"],[re.CODE_128,"CODE_128"],[re.DATA_MATRIX,"DATA_MATRIX"],[re.MAXICODE,"MAXICODE"],[re.ITF,"ITF"],[re.EAN_13,"EAN_13"],[re.EAN_8,"EAN_8"],[re.PDF_417,"PDF_417"],[re.RSS_14,"RSS_14"],[re.RSS_EXPANDED,"RSS_EXPANDED"],[re.UPC_A,"UPC_A"],[re.UPC_E,"UPC_E"],[re.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),ip;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.URL=1]="URL"})(ip||(ip={}));function A4(t){return Object.values(re).includes(t)}var Ai;(function(t){t[t.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",t[t.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Ai||(Ai={}));var Jn=function(){function t(){}return t.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",t.SCAN_DEFAULT_FPS=2,t.DEFAULT_DISABLE_FLIP=!1,t.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,t.DEFAULT_SUPPORTED_SCAN_TYPE=[Ai.SCAN_TYPE_CAMERA,Ai.SCAN_TYPE_FILE],t}(),Zw=function(){function t(e,n){this.format=e,this.formatName=n}return t.prototype.toString=function(){return this.formatName},t.create=function(e){if(!rp.has(e))throw"".concat(e," not in html5QrcodeSupportedFormatsTextMap");return new t(e,rp.get(e))},t}(),sp=function(){function t(){}return t.createFromText=function(e){var n={text:e};return{decodedText:e,result:n}},t.createFromQrcodeResult=function(e){return{decodedText:e.text,result:e}},t}(),Dh;(function(t){t[t.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",t[t.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",t[t.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Dh||(Dh={}));var qw=function(){function t(){}return t.createFrom=function(e){return{errorMessage:e,type:Dh.UNKWOWN_ERROR}},t}(),Jw=function(){function t(e){this.verbose=e}return t.prototype.log=function(e){this.verbose&&console.log(e)},t.prototype.warn=function(e){this.verbose&&console.warn(e)},t.prototype.logError=function(e,n){(this.verbose||n===!0)&&console.error(e)},t.prototype.logErrors=function(e){if(e.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(e)},t}();function wr(t){return typeof t>"u"||t===null}function I4(t,e,n){return t>n?n:t<e?e:t}var ks=function(){function t(){}return t.codeParseError=function(e){return"QR code parse error, error = ".concat(e)},t.errorGettingUserMedia=function(e){return"Error getting userMedia, error = ".concat(e)},t.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},t.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},t.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},t.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},t.scannerPaused=function(){return"Scanner paused"},t}(),je=function(){function t(){}return t.scanningStatus=function(){return"Scanning"},t.idleStatus=function(){return"Idle"},t.errorStatus=function(){return"Error"},t.permissionStatus=function(){return"Permission"},t.noCameraFoundErrorStatus=function(){return"No Cameras"},t.lastMatch=function(e){return"Last Match: ".concat(e)},t.codeScannerTitle=function(){return"Code Scanner"},t.cameraPermissionTitle=function(){return"Request Camera Permissions"},t.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},t.noCameraFound=function(){return"No camera found"},t.scanButtonStopScanningText=function(){return"Stop Scanning"},t.scanButtonStartScanningText=function(){return"Start Scanning"},t.torchOnButton=function(){return"Switch On Torch"},t.torchOffButton=function(){return"Switch Off Torch"},t.torchOnFailedMessage=function(){return"Failed to turn on torch"},t.torchOffFailedMessage=function(){return"Failed to turn off torch"},t.scanButtonScanningStarting=function(){return"Launching Camera..."},t.textIfCameraScanSelected=function(){return"Scan an Image File"},t.textIfFileScanSelected=function(){return"Scan using camera directly"},t.selectCamera=function(){return"Select Camera"},t.fileSelectionChooseImage=function(){return"Choose Image"},t.fileSelectionChooseAnother=function(){return"Choose Another"},t.fileSelectionNoImageSelected=function(){return"No image choosen"},t.anonymousCameraPrefix=function(){return"Anonymous Camera"},t.dragAndDropMessage=function(){return"Or drop an image to scan"},t.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},t.zoom=function(){return"zoom"},t.loadingImage=function(){return"Loading image..."},t.cameraScanAltText=function(){return"Camera based scan"},t.fileScanAltText=function(){return"Fule based scan"},t}(),op=function(){function t(){}return t.poweredBy=function(){return"Powered by "},t.reportIssues=function(){return"Report issues"},t}(),$w=function(){function t(){}return t.isMediaStreamConstraintsValid=function(e,n){if(typeof e!="object"){var i=typeof e;return n.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(i,"."),!0),!1}for(var a=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],l=new Set(a),h=Object.keys(e),x=0,m=h;x<m.length;x++){var g=m[x];if(l.has(g))return n.logError("".concat(g," is not supported videoConstaints."),!0),!1}return!0},t}(),Lh={exports:{}};(function(t,e){(function(n,i){i(e)})(Eo,function(n){function i(_){return _==null}var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,r){_.__proto__=r}||function(_,r){for(var s in r)r.hasOwnProperty(s)&&(_[s]=r[s])};function l(_,r){a(_,r);function s(){this.constructor=_}_.prototype=r===null?Object.create(r):(s.prototype=r.prototype,new s)}function h(_,r){var s=Object.setPrototypeOf;s?s(_,r):_.__proto__=r}function x(_,r){r===void 0&&(r=_.constructor);var s=Error.captureStackTrace;s&&s(_,r)}var m=function(_){l(r,_);function r(s){var o=this.constructor,c=_.call(this,s)||this;return Object.defineProperty(c,"name",{value:o.name,enumerable:!1}),h(c,o.prototype),x(c),c}return r}(Error);class g extends m{constructor(r=void 0){super(r),this.message=r}getKind(){return this.constructor.kind}}g.kind="Exception";class y extends g{}y.kind="ArgumentException";class C extends g{}C.kind="IllegalArgumentException";class I{constructor(r){if(this.binarizer=r,r===null)throw new C("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(r,s){return this.binarizer.getBlackRow(r,s)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(r,s,o,c){const u=this.binarizer.getLuminanceSource().crop(r,s,o,c);return new I(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new I(this.binarizer.createBinarizer(r))}rotateCounterClockwise45(){const r=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new I(this.binarizer.createBinarizer(r))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class R extends g{static getChecksumInstance(){return new R}}R.kind="ChecksumException";class b{constructor(r){this.source=r}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class L{static arraycopy(r,s,o,c,u){for(;u--;)o[c++]=r[s++]}static currentTimeMillis(){return Date.now()}}class F extends g{}F.kind="IndexOutOfBoundsException";class O extends F{constructor(r=void 0,s=void 0){super(s),this.index=r,this.message=s}}O.kind="ArrayIndexOutOfBoundsException";class N{static fill(r,s){for(let o=0,c=r.length;o<c;o++)r[o]=s}static fillWithin(r,s,o,c){N.rangeCheck(r.length,s,o);for(let u=s;u<o;u++)r[u]=c}static rangeCheck(r,s,o){if(s>o)throw new C("fromIndex("+s+") > toIndex("+o+")");if(s<0)throw new O(s);if(o>r)throw new O(o)}static asList(...r){return r}static create(r,s,o){return Array.from({length:r}).map(u=>Array.from({length:s}).fill(o))}static createInt32Array(r,s,o){return Array.from({length:r}).map(u=>Int32Array.from({length:s}).fill(o))}static equals(r,s){if(!r||!s||!r.length||!s.length||r.length!==s.length)return!1;for(let o=0,c=r.length;o<c;o++)if(r[o]!==s[o])return!1;return!0}static hashCode(r){if(r===null)return 0;let s=1;for(const o of r)s=31*s+o;return s}static fillUint8Array(r,s){for(let o=0;o!==r.length;o++)r[o]=s}static copyOf(r,s){return r.slice(0,s)}static copyOfUint8Array(r,s){if(r.length<=s){const o=new Uint8Array(s);return o.set(r),o}return r.slice(0,s)}static copyOfRange(r,s,o){const c=o-s,u=new Int32Array(c);return L.arraycopy(r,s,u,0,c),u}static binarySearch(r,s,o){o===void 0&&(o=N.numberComparator);let c=0,u=r.length-1;for(;c<=u;){const f=u+c>>1,d=o(s,r[f]);if(d>0)c=f+1;else if(d<0)u=f-1;else return f}return-c-1}static numberComparator(r,s){return r-s}}class M{static numberOfTrailingZeros(r){let s;if(r===0)return 32;let o=31;return s=r<<16,s!==0&&(o-=16,r=s),s=r<<8,s!==0&&(o-=8,r=s),s=r<<4,s!==0&&(o-=4,r=s),s=r<<2,s!==0&&(o-=2,r=s),o-(r<<1>>>31)}static numberOfLeadingZeros(r){if(r===0)return 32;let s=1;return r>>>16||(s+=16,r<<=16),r>>>24||(s+=8,r<<=8),r>>>28||(s+=4,r<<=4),r>>>30||(s+=2,r<<=2),s-=r>>>31,s}static toHexString(r){return r.toString(16)}static toBinaryString(r){return String(parseInt(String(r),2))}static bitCount(r){return r=r-(r>>>1&1431655765),r=(r&858993459)+(r>>>2&858993459),r=r+(r>>>4)&252645135,r=r+(r>>>8),r=r+(r>>>16),r&63}static truncDivision(r,s){return Math.trunc(r/s)}static parseInt(r,s=void 0){return parseInt(r,s)}}M.MIN_VALUE_32_BITS=-2147483648,M.MAX_VALUE=Number.MAX_SAFE_INTEGER;class U{constructor(r,s){r===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=r,s==null?this.bits=U.makeArray(r):this.bits=s)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(r){if(r>this.bits.length*32){const s=U.makeArray(r);L.arraycopy(this.bits,0,s,0,this.bits.length),this.bits=s}}get(r){return(this.bits[Math.floor(r/32)]&1<<(r&31))!==0}set(r){this.bits[Math.floor(r/32)]|=1<<(r&31)}flip(r){this.bits[Math.floor(r/32)]^=1<<(r&31)}getNextSet(r){const s=this.size;if(r>=s)return s;const o=this.bits;let c=Math.floor(r/32),u=o[c];u&=~((1<<(r&31))-1);const f=o.length;for(;u===0;){if(++c===f)return s;u=o[c]}const d=c*32+M.numberOfTrailingZeros(u);return d>s?s:d}getNextUnset(r){const s=this.size;if(r>=s)return s;const o=this.bits;let c=Math.floor(r/32),u=~o[c];u&=~((1<<(r&31))-1);const f=o.length;for(;u===0;){if(++c===f)return s;u=~o[c]}const d=c*32+M.numberOfTrailingZeros(u);return d>s?s:d}setBulk(r,s){this.bits[Math.floor(r/32)]=s}setRange(r,s){if(s<r||r<0||s>this.size)throw new C;if(s===r)return;s--;const o=Math.floor(r/32),c=Math.floor(s/32),u=this.bits;for(let f=o;f<=c;f++){const d=f>o?0:r&31,w=(2<<(f<c?31:s&31))-(1<<d);u[f]|=w}}clear(){const r=this.bits.length,s=this.bits;for(let o=0;o<r;o++)s[o]=0}isRange(r,s,o){if(s<r||r<0||s>this.size)throw new C;if(s===r)return!0;s--;const c=Math.floor(r/32),u=Math.floor(s/32),f=this.bits;for(let d=c;d<=u;d++){const p=d>c?0:r&31,E=(2<<(d<u?31:s&31))-(1<<p)&4294967295;if((f[d]&E)!==(o?E:0))return!1}return!0}appendBit(r){this.ensureCapacity(this.size+1),r&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(r,s){if(s<0||s>32)throw new C("Num bits must be between 0 and 32");this.ensureCapacity(this.size+s);for(let o=s;o>0;o--)this.appendBit((r>>o-1&1)===1)}appendBitArray(r){const s=r.size;this.ensureCapacity(this.size+s);for(let o=0;o<s;o++)this.appendBit(r.get(o))}xor(r){if(this.size!==r.size)throw new C("Sizes don't match");const s=this.bits;for(let o=0,c=s.length;o<c;o++)s[o]^=r.bits[o]}toBytes(r,s,o,c){for(let u=0;u<c;u++){let f=0;for(let d=0;d<8;d++)this.get(r)&&(f|=1<<7-d),r++;s[o+u]=f}}getBitArray(){return this.bits}reverse(){const r=new Int32Array(this.bits.length),s=Math.floor((this.size-1)/32),o=s+1,c=this.bits;for(let u=0;u<o;u++){let f=c[u];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,r[s-u]=f}if(this.size!==o*32){const u=o*32-this.size;let f=r[0]>>>u;for(let d=1;d<o;d++){const p=r[d];f|=p<<32-u,r[d-1]=f,f=p>>>u}r[o-1]=f}this.bits=r}static makeArray(r){return new Int32Array(Math.floor((r+31)/32))}equals(r){if(!(r instanceof U))return!1;const s=r;return this.size===s.size&&N.equals(this.bits,s.bits)}hashCode(){return 31*this.size+N.hashCode(this.bits)}toString(){let r="";for(let s=0,o=this.size;s<o;s++)s&7||(r+=" "),r+=this.get(s)?"X":".";return r}clone(){return new U(this.size,this.bits.slice())}}var q;(function(_){_[_.OTHER=0]="OTHER",_[_.PURE_BARCODE=1]="PURE_BARCODE",_[_.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",_[_.TRY_HARDER=3]="TRY_HARDER",_[_.CHARACTER_SET=4]="CHARACTER_SET",_[_.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",_[_.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",_[_.ASSUME_GS1=7]="ASSUME_GS1",_[_.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",_[_.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",_[_.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(q||(q={}));var K=q;class j extends g{static getFormatInstance(){return new j}}j.kind="FormatException";var J;(function(_){_[_.Cp437=0]="Cp437",_[_.ISO8859_1=1]="ISO8859_1",_[_.ISO8859_2=2]="ISO8859_2",_[_.ISO8859_3=3]="ISO8859_3",_[_.ISO8859_4=4]="ISO8859_4",_[_.ISO8859_5=5]="ISO8859_5",_[_.ISO8859_6=6]="ISO8859_6",_[_.ISO8859_7=7]="ISO8859_7",_[_.ISO8859_8=8]="ISO8859_8",_[_.ISO8859_9=9]="ISO8859_9",_[_.ISO8859_10=10]="ISO8859_10",_[_.ISO8859_11=11]="ISO8859_11",_[_.ISO8859_13=12]="ISO8859_13",_[_.ISO8859_14=13]="ISO8859_14",_[_.ISO8859_15=14]="ISO8859_15",_[_.ISO8859_16=15]="ISO8859_16",_[_.SJIS=16]="SJIS",_[_.Cp1250=17]="Cp1250",_[_.Cp1251=18]="Cp1251",_[_.Cp1252=19]="Cp1252",_[_.Cp1256=20]="Cp1256",_[_.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",_[_.UTF8=22]="UTF8",_[_.ASCII=23]="ASCII",_[_.Big5=24]="Big5",_[_.GB18030=25]="GB18030",_[_.EUC_KR=26]="EUC_KR"})(J||(J={}));class W{constructor(r,s,o,...c){this.valueIdentifier=r,this.name=o,typeof s=="number"?this.values=Int32Array.from([s]):this.values=s,this.otherEncodingNames=c,W.VALUE_IDENTIFIER_TO_ECI.set(r,this),W.NAME_TO_ECI.set(o,this);const u=this.values;for(let f=0,d=u.length;f!==d;f++){const p=u[f];W.VALUES_TO_ECI.set(p,this)}for(const f of c)W.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(r){if(r<0||r>=900)throw new j("incorect value");const s=W.VALUES_TO_ECI.get(r);if(s===void 0)throw new j("incorect value");return s}static getCharacterSetECIByName(r){const s=W.NAME_TO_ECI.get(r);if(s===void 0)throw new j("incorect value");return s}equals(r){if(!(r instanceof W))return!1;const s=r;return this.getName()===s.getName()}}W.VALUE_IDENTIFIER_TO_ECI=new Map,W.VALUES_TO_ECI=new Map,W.NAME_TO_ECI=new Map,W.Cp437=new W(J.Cp437,Int32Array.from([0,2]),"Cp437"),W.ISO8859_1=new W(J.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),W.ISO8859_2=new W(J.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),W.ISO8859_3=new W(J.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),W.ISO8859_4=new W(J.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),W.ISO8859_5=new W(J.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),W.ISO8859_6=new W(J.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),W.ISO8859_7=new W(J.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),W.ISO8859_8=new W(J.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),W.ISO8859_9=new W(J.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),W.ISO8859_10=new W(J.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),W.ISO8859_11=new W(J.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),W.ISO8859_13=new W(J.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),W.ISO8859_14=new W(J.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),W.ISO8859_15=new W(J.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),W.ISO8859_16=new W(J.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),W.SJIS=new W(J.SJIS,20,"SJIS","Shift_JIS"),W.Cp1250=new W(J.Cp1250,21,"Cp1250","windows-1250"),W.Cp1251=new W(J.Cp1251,22,"Cp1251","windows-1251"),W.Cp1252=new W(J.Cp1252,23,"Cp1252","windows-1252"),W.Cp1256=new W(J.Cp1256,24,"Cp1256","windows-1256"),W.UnicodeBigUnmarked=new W(J.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),W.UTF8=new W(J.UTF8,26,"UTF8","UTF-8"),W.ASCII=new W(J.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),W.Big5=new W(J.Big5,28,"Big5"),W.GB18030=new W(J.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),W.EUC_KR=new W(J.EUC_KR,30,"EUC_KR","EUC-KR");class we extends g{}we.kind="UnsupportedOperationException";class _e{static decode(r,s){const o=this.encodingName(s);return this.customDecoder?this.customDecoder(r,o):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(o)?this.decodeFallback(r,o):new TextDecoder(o).decode(r)}static shouldDecodeOnFallback(r){return!_e.isBrowser()&&r==="ISO-8859-1"}static encode(r,s){const o=this.encodingName(s);return this.customEncoder?this.customEncoder(r,o):typeof TextEncoder>"u"?this.encodeFallback(r):new TextEncoder().encode(r)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(r){return typeof r=="string"?r:r.getName()}static encodingCharacterSet(r){return r instanceof W?r:W.getCharacterSetECIByName(r)}static decodeFallback(r,s){const o=this.encodingCharacterSet(s);if(_e.isDecodeFallbackSupported(o)){let c="";for(let u=0,f=r.length;u<f;u++){let d=r[u].toString(16);d.length<2&&(d="0"+d),c+="%"+d}return decodeURIComponent(c)}if(o.equals(W.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(r.buffer));throw new we(`Encoding ${this.encodingName(s)} not supported by fallback.`)}static isDecodeFallbackSupported(r){return r.equals(W.UTF8)||r.equals(W.ISO8859_1)||r.equals(W.ASCII)}static encodeFallback(r){const o=btoa(unescape(encodeURIComponent(r))).split(""),c=[];for(let u=0;u<o.length;u++)c.push(o[u].charCodeAt(0));return new Uint8Array(c)}}class ue{static castAsNonUtf8Char(r,s=null){const o=s?s.getName():this.ISO88591;return _e.decode(new Uint8Array([r]),o)}static guessEncoding(r,s){if(s!=null&&s.get(K.CHARACTER_SET)!==void 0)return s.get(K.CHARACTER_SET).toString();const o=r.length;let c=!0,u=!0,f=!0,d=0,p=0,w=0,E=0,A=0,v=0,T=0,D=0,k=0,P=0,H=0;const Q=r.length>3&&r[0]===239&&r[1]===187&&r[2]===191;for(let Z=0;Z<o&&(c||u||f);Z++){const Y=r[Z]&255;f&&(d>0?Y&128?d--:f=!1:Y&128&&(Y&64?(d++,Y&32?(d++,Y&16?(d++,Y&8?f=!1:E++):w++):p++):f=!1)),c&&(Y>127&&Y<160?c=!1:Y>159&&(Y<192||Y===215||Y===247)&&H++),u&&(A>0?Y<64||Y===127||Y>252?u=!1:A--:Y===128||Y===160||Y>239?u=!1:Y>160&&Y<224?(v++,D=0,T++,T>k&&(k=T)):Y>127?(A++,T=0,D++,D>P&&(P=D)):(T=0,D=0))}return f&&d>0&&(f=!1),u&&A>0&&(u=!1),f&&(Q||p+w+E>0)?ue.UTF8:u&&(ue.ASSUME_SHIFT_JIS||k>=3||P>=3)?ue.SHIFT_JIS:c&&u?k===2&&v===2||H*10>=o?ue.SHIFT_JIS:ue.ISO88591:c?ue.ISO88591:u?ue.SHIFT_JIS:f?ue.UTF8:ue.PLATFORM_DEFAULT_ENCODING}static format(r,...s){let o=-1;function c(f,d,p,w,E,A){if(f==="%%")return"%";if(s[++o]===void 0)return;f=w?parseInt(w.substr(1)):void 0;let v=E?parseInt(E.substr(1)):void 0,T;switch(A){case"s":T=s[o];break;case"c":T=s[o][0];break;case"f":T=parseFloat(s[o]).toFixed(f);break;case"p":T=parseFloat(s[o]).toPrecision(f);break;case"e":T=parseFloat(s[o]).toExponential(f);break;case"x":T=parseInt(s[o]).toString(v||16);break;case"d":T=parseFloat(parseInt(s[o],v||10).toPrecision(f)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(v);let D=parseInt(p),k=p&&p[0]+""=="0"?"0":" ";for(;T.length<D;)T=d!==void 0?T+k:k+T;return T}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}static getBytes(r,s){return _e.encode(r,s)}static getCharCode(r,s=0){return r.charCodeAt(s)}static getCharAt(r){return String.fromCharCode(r)}}ue.SHIFT_JIS=W.SJIS.getName(),ue.GB2312="GB2312",ue.ISO88591=W.ISO8859_1.getName(),ue.EUC_JP="EUC_JP",ue.UTF8=W.UTF8.getName(),ue.PLATFORM_DEFAULT_ENCODING=ue.UTF8,ue.ASSUME_SHIFT_JIS=!1;class ve{constructor(r=""){this.value=r}enableDecoding(r){return this.encoding=r,this}append(r){return typeof r=="string"?this.value+=r.toString():this.encoding?this.value+=ue.castAsNonUtf8Char(r,this.encoding):this.value+=String.fromCharCode(r),this}appendChars(r,s,o){for(let c=s;s<s+o;c++)this.append(r[c]);return this}length(){return this.value.length}charAt(r){return this.value.charAt(r)}deleteCharAt(r){this.value=this.value.substr(0,r)+this.value.substring(r+1)}setCharAt(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+1)}substring(r,s){return this.value.substring(r,s)}setLengthToZero(){this.value=""}toString(){return this.value}insert(r,s){this.value=this.value.substr(0,r)+s+this.value.substr(r+s.length)}}class ze{constructor(r,s,o,c){if(this.width=r,this.height=s,this.rowSize=o,this.bits=c,s==null&&(s=r),this.height=s,r<1||s<1)throw new C("Both dimensions must be greater than 0");o==null&&(o=Math.floor((r+31)/32)),this.rowSize=o,c==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(r){const s=r.length,o=r[0].length,c=new ze(o,s);for(let u=0;u<s;u++){const f=r[u];for(let d=0;d<o;d++)f[d]&&c.set(d,u)}return c}static parseFromString(r,s,o){if(r===null)throw new C("stringRepresentation cannot be null");const c=new Array(r.length);let u=0,f=0,d=-1,p=0,w=0;for(;w<r.length;)if(r.charAt(w)===`
`||r.charAt(w)==="\r"){if(u>f){if(d===-1)d=u-f;else if(u-f!==d)throw new C("row lengths do not match");f=u,p++}w++}else if(r.substring(w,w+s.length)===s)w+=s.length,c[u]=!0,u++;else if(r.substring(w,w+o.length)===o)w+=o.length,c[u]=!1,u++;else throw new C("illegal character encountered: "+r.substring(w));if(u>f){if(d===-1)d=u-f;else if(u-f!==d)throw new C("row lengths do not match");p++}const E=new ze(d,p);for(let A=0;A<u;A++)c[A]&&E.set(Math.floor(A%d),Math.floor(A/d));return E}get(r,s){const o=s*this.rowSize+Math.floor(r/32);return(this.bits[o]>>>(r&31)&1)!==0}set(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]|=1<<(r&31)&4294967295}unset(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]&=~(1<<(r&31)&4294967295)}flip(r,s){const o=s*this.rowSize+Math.floor(r/32);this.bits[o]^=1<<(r&31)&4294967295}xor(r){if(this.width!==r.getWidth()||this.height!==r.getHeight()||this.rowSize!==r.getRowSize())throw new C("input matrix dimensions do not match");const s=new U(Math.floor(this.width/32)+1),o=this.rowSize,c=this.bits;for(let u=0,f=this.height;u<f;u++){const d=u*o,p=r.getRow(u,s).getBitArray();for(let w=0;w<o;w++)c[d+w]^=p[w]}}clear(){const r=this.bits,s=r.length;for(let o=0;o<s;o++)r[o]=0}setRegion(r,s,o,c){if(s<0||r<0)throw new C("Left and top must be nonnegative");if(c<1||o<1)throw new C("Height and width must be at least 1");const u=r+o,f=s+c;if(f>this.height||u>this.width)throw new C("The region must fit inside the matrix");const d=this.rowSize,p=this.bits;for(let w=s;w<f;w++){const E=w*d;for(let A=r;A<u;A++)p[E+Math.floor(A/32)]|=1<<(A&31)&4294967295}}getRow(r,s){s==null||s.getSize()<this.width?s=new U(this.width):s.clear();const o=this.rowSize,c=this.bits,u=r*o;for(let f=0;f<o;f++)s.setBulk(f*32,c[u+f]);return s}setRow(r,s){L.arraycopy(s.getBitArray(),0,this.bits,r*this.rowSize,this.rowSize)}rotate180(){const r=this.getWidth(),s=this.getHeight();let o=new U(r),c=new U(r);for(let u=0,f=Math.floor((s+1)/2);u<f;u++)o=this.getRow(u,o),c=this.getRow(s-1-u,c),o.reverse(),c.reverse(),this.setRow(u,c),this.setRow(s-1-u,o)}getEnclosingRectangle(){const r=this.width,s=this.height,o=this.rowSize,c=this.bits;let u=r,f=s,d=-1,p=-1;for(let w=0;w<s;w++)for(let E=0;E<o;E++){const A=c[w*o+E];if(A!==0){if(w<f&&(f=w),w>p&&(p=w),E*32<u){let v=0;for(;!(A<<31-v&4294967295);)v++;E*32+v<u&&(u=E*32+v)}if(E*32+31>d){let v=31;for(;!(A>>>v);)v--;E*32+v>d&&(d=E*32+v)}}}return d<u||p<f?null:Int32Array.from([u,f,d-u+1,p-f+1])}getTopLeftOnBit(){const r=this.rowSize,s=this.bits;let o=0;for(;o<s.length&&s[o]===0;)o++;if(o===s.length)return null;const c=o/r;let u=o%r*32;const f=s[o];let d=0;for(;!(f<<31-d&4294967295);)d++;return u+=d,Int32Array.from([u,c])}getBottomRightOnBit(){const r=this.rowSize,s=this.bits;let o=s.length-1;for(;o>=0&&s[o]===0;)o--;if(o<0)return null;const c=Math.floor(o/r);let u=Math.floor(o%r)*32;const f=s[o];let d=31;for(;!(f>>>d);)d--;return u+=d,Int32Array.from([u,c])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(r){if(!(r instanceof ze))return!1;const s=r;return this.width===s.width&&this.height===s.height&&this.rowSize===s.rowSize&&N.equals(this.bits,s.bits)}hashCode(){let r=this.width;return r=31*r+this.width,r=31*r+this.height,r=31*r+this.rowSize,r=31*r+N.hashCode(this.bits),r}toString(r="X ",s="  ",o=`
`){return this.buildToString(r,s,o)}buildToString(r,s,o){let c=new ve;for(let u=0,f=this.height;u<f;u++){for(let d=0,p=this.width;d<p;d++)c.append(this.get(d,u)?r:s);c.append(o)}return c.toString()}clone(){return new ze(this.width,this.height,this.rowSize,this.bits.slice())}}class V extends g{static getNotFoundInstance(){return new V}}V.kind="NotFoundException";class et extends b{constructor(r){super(r),this.luminances=et.EMPTY,this.buckets=new Int32Array(et.LUMINANCE_BUCKETS)}getBlackRow(r,s){const o=this.getLuminanceSource(),c=o.getWidth();s==null||s.getSize()<c?s=new U(c):s.clear(),this.initArrays(c);const u=o.getRow(r,this.luminances),f=this.buckets;for(let p=0;p<c;p++)f[(u[p]&255)>>et.LUMINANCE_SHIFT]++;const d=et.estimateBlackPoint(f);if(c<3)for(let p=0;p<c;p++)(u[p]&255)<d&&s.set(p);else{let p=u[0]&255,w=u[1]&255;for(let E=1;E<c-1;E++){const A=u[E+1]&255;(w*4-p-A)/2<d&&s.set(E),p=w,w=A}}return s}getBlackMatrix(){const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight(),c=new ze(s,o);this.initArrays(s);const u=this.buckets;for(let p=1;p<5;p++){const w=Math.floor(o*p/5),E=r.getRow(w,this.luminances),A=Math.floor(s*4/5);for(let v=Math.floor(s/5);v<A;v++){const T=E[v]&255;u[T>>et.LUMINANCE_SHIFT]++}}const f=et.estimateBlackPoint(u),d=r.getMatrix();for(let p=0;p<o;p++){const w=p*s;for(let E=0;E<s;E++)(d[w+E]&255)<f&&c.set(E,p)}return c}createBinarizer(r){return new et(r)}initArrays(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));const s=this.buckets;for(let o=0;o<et.LUMINANCE_BUCKETS;o++)s[o]=0}static estimateBlackPoint(r){const s=r.length;let o=0,c=0,u=0;for(let E=0;E<s;E++)r[E]>u&&(c=E,u=r[E]),r[E]>o&&(o=r[E]);let f=0,d=0;for(let E=0;E<s;E++){const A=E-c,v=r[E]*A*A;v>d&&(f=E,d=v)}if(c>f){const E=c;c=f,f=E}if(f-c<=s/16)throw new V;let p=f-1,w=-1;for(let E=f-1;E>c;E--){const A=E-c,v=A*A*(f-E)*(o-r[E]);v>w&&(p=E,w=v)}return p<<et.LUMINANCE_SHIFT}}et.LUMINANCE_BITS=5,et.LUMINANCE_SHIFT=8-et.LUMINANCE_BITS,et.LUMINANCE_BUCKETS=1<<et.LUMINANCE_BITS,et.EMPTY=Uint8ClampedArray.from([0]);class ge extends et{constructor(r){super(r),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const r=this.getLuminanceSource(),s=r.getWidth(),o=r.getHeight();if(s>=ge.MINIMUM_DIMENSION&&o>=ge.MINIMUM_DIMENSION){const c=r.getMatrix();let u=s>>ge.BLOCK_SIZE_POWER;s&ge.BLOCK_SIZE_MASK&&u++;let f=o>>ge.BLOCK_SIZE_POWER;o&ge.BLOCK_SIZE_MASK&&f++;const d=ge.calculateBlackPoints(c,u,f,s,o),p=new ze(s,o);ge.calculateThresholdForBlock(c,u,f,s,o,d,p),this.matrix=p}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(r){return new ge(r)}static calculateThresholdForBlock(r,s,o,c,u,f,d){const p=u-ge.BLOCK_SIZE,w=c-ge.BLOCK_SIZE;for(let E=0;E<o;E++){let A=E<<ge.BLOCK_SIZE_POWER;A>p&&(A=p);const v=ge.cap(E,2,o-3);for(let T=0;T<s;T++){let D=T<<ge.BLOCK_SIZE_POWER;D>w&&(D=w);const k=ge.cap(T,2,s-3);let P=0;for(let Q=-2;Q<=2;Q++){const Z=f[v+Q];P+=Z[k-2]+Z[k-1]+Z[k]+Z[k+1]+Z[k+2]}const H=P/25;ge.thresholdBlock(r,D,A,H,c,d)}}}static cap(r,s,o){return r<s?s:r>o?o:r}static thresholdBlock(r,s,o,c,u,f){for(let d=0,p=o*u+s;d<ge.BLOCK_SIZE;d++,p+=u)for(let w=0;w<ge.BLOCK_SIZE;w++)(r[p+w]&255)<=c&&f.set(s+w,o+d)}static calculateBlackPoints(r,s,o,c,u){const f=u-ge.BLOCK_SIZE,d=c-ge.BLOCK_SIZE,p=new Array(o);for(let w=0;w<o;w++){p[w]=new Int32Array(s);let E=w<<ge.BLOCK_SIZE_POWER;E>f&&(E=f);for(let A=0;A<s;A++){let v=A<<ge.BLOCK_SIZE_POWER;v>d&&(v=d);let T=0,D=255,k=0;for(let H=0,Q=E*c+v;H<ge.BLOCK_SIZE;H++,Q+=c){for(let Z=0;Z<ge.BLOCK_SIZE;Z++){const Y=r[Q+Z]&255;T+=Y,Y<D&&(D=Y),Y>k&&(k=Y)}if(k-D>ge.MIN_DYNAMIC_RANGE)for(H++,Q+=c;H<ge.BLOCK_SIZE;H++,Q+=c)for(let Z=0;Z<ge.BLOCK_SIZE;Z++)T+=r[Q+Z]&255}let P=T>>ge.BLOCK_SIZE_POWER*2;if(k-D<=ge.MIN_DYNAMIC_RANGE&&(P=D/2,w>0&&A>0)){const H=(p[w-1][A]+2*p[w][A-1]+p[w-1][A-1])/4;D<H&&(P=H)}p[w][A]=P}}return p}}ge.BLOCK_SIZE_POWER=3,ge.BLOCK_SIZE=1<<ge.BLOCK_SIZE_POWER,ge.BLOCK_SIZE_MASK=ge.BLOCK_SIZE-1,ge.MINIMUM_DIMENSION=ge.BLOCK_SIZE*5,ge.MIN_DYNAMIC_RANGE=24;class te{constructor(r,s){this.width=r,this.height=s}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(r,s,o,c){throw new we("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new we("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new we("This luminance source does not support rotation by 45 degrees.")}toString(){const r=new Uint8ClampedArray(this.width);let s=new ve;for(let o=0;o<this.height;o++){const c=this.getRow(o,r);for(let u=0;u<this.width;u++){const f=c[u]&255;let d;f<64?d="#":f<128?d="+":f<192?d=".":d=" ",s.append(d)}s.append(`
`)}return s.toString()}}class fe extends te{constructor(r){super(r.getWidth(),r.getHeight()),this.delegate=r}getRow(r,s){const o=this.delegate.getRow(r,s),c=this.getWidth();for(let u=0;u<c;u++)o[u]=255-(o[u]&255);return o}getMatrix(){const r=this.delegate.getMatrix(),s=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(s);for(let c=0;c<s;c++)o[c]=255-(r[c]&255);return o}isCropSupported(){return this.delegate.isCropSupported()}crop(r,s,o,c){return new fe(this.delegate.crop(r,s,o,c))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new fe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new fe(this.delegate.rotateCounterClockwise45())}}class pe extends te{constructor(r){super(r.width,r.height),this.canvas=r,this.tempCanvasElement=null,this.buffer=pe.makeBufferFromCanvasImageData(r)}static makeBufferFromCanvasImageData(r){const s=r.getContext("2d").getImageData(0,0,r.width,r.height);return pe.toGrayscaleBuffer(s.data,r.width,r.height)}static toGrayscaleBuffer(r,s,o){const c=new Uint8ClampedArray(s*o);for(let u=0,f=0,d=r.length;u<d;u+=4,f++){let p;if(r[u+3]===0)p=255;else{const E=r[u],A=r[u+1],v=r[u+2];p=306*E+601*A+117*v+512>>10}c[f]=p}return c}getRow(r,s){if(r<0||r>=this.getHeight())throw new C("Requested row is outside the image: "+r);const o=this.getWidth(),c=r*o;return s===null?s=this.buffer.slice(c,c+o):(s.length<o&&(s=new Uint8ClampedArray(o)),s.set(this.buffer.slice(c,c+o))),s}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(r,s,o,c){return super.crop(r,s,o,c),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement}rotate(r){const s=this.getTempCanvasElement(),o=s.getContext("2d"),c=r*pe.DEGREE_TO_RADIANS,u=this.canvas.width,f=this.canvas.height,d=Math.ceil(Math.abs(Math.cos(c))*u+Math.abs(Math.sin(c))*f),p=Math.ceil(Math.abs(Math.sin(c))*u+Math.abs(Math.cos(c))*f);return s.width=d,s.height=p,o.translate(d/2,p/2),o.rotate(c),o.drawImage(this.canvas,u/-2,f/-2),this.buffer=pe.makeBufferFromCanvasImageData(s),this}invert(){return new fe(this)}}pe.DEGREE_TO_RADIANS=Math.PI/180;class Qe{constructor(r,s,o){this.deviceId=r,this.label=s,this.kind="videoinput",this.groupId=o||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var Re=(globalThis||Eo||self||window||void 0)&&(globalThis||Eo||self||window||void 0).__awaiter||function(_,r,s,o){function c(u){return u instanceof s?u:new s(function(f){f(u)})}return new(s||(s=Promise))(function(u,f){function d(E){try{w(o.next(E))}catch(A){f(A)}}function p(E){try{w(o.throw(E))}catch(A){f(A)}}function w(E){E.done?u(E.value):c(E.value).then(d,p)}w((o=o.apply(_,r||[])).next())})};class ln{constructor(r,s=500,o){this.reader=r,this.timeBetweenScansMillis=s,this._hints=o,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(r){this._timeBetweenDecodingAttempts=r<0?0:r}set hints(r){this._hints=r||null}get hints(){return this._hints}listVideoInputDevices(){return Re(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const r=yield navigator.mediaDevices.enumerateDevices(),s=[];for(const o of r){const c=o.kind==="video"?"videoinput":o.kind;if(c!=="videoinput")continue;const u=o.deviceId||o.id,f=o.label||`Video device ${s.length+1}`,d=o.groupId,p={deviceId:u,label:f,kind:c,groupId:d};s.push(p)}return s})}getVideoInputDevices(){return Re(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(s=>new Qe(s.deviceId,s.label))})}findDeviceById(r){return Re(this,void 0,void 0,function*(){const s=yield this.listVideoInputDevices();return s?s.find(o=>o.deviceId===r):null})}decodeFromInputVideoDevice(r,s){return Re(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(r,s)})}decodeOnceFromVideoDevice(r,s){return Re(this,void 0,void 0,function*(){this.reset();let o;r?o={deviceId:{exact:r}}:o={facingMode:"environment"};const c={video:o};return yield this.decodeOnceFromConstraints(c,s)})}decodeOnceFromConstraints(r,s){return Re(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeOnceFromStream(o,s)})}decodeOnceFromStream(r,s){return Re(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(r,s);return yield this.decodeOnce(o)})}decodeFromInputVideoDeviceContinuously(r,s,o){return Re(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(r,s,o)})}decodeFromVideoDevice(r,s,o){return Re(this,void 0,void 0,function*(){let c;r?c={deviceId:{exact:r}}:c={facingMode:"environment"};const u={video:c};return yield this.decodeFromConstraints(u,s,o)})}decodeFromConstraints(r,s,o){return Re(this,void 0,void 0,function*(){const c=yield navigator.mediaDevices.getUserMedia(r);return yield this.decodeFromStream(c,s,o)})}decodeFromStream(r,s,o){return Re(this,void 0,void 0,function*(){this.reset();const c=yield this.attachStreamToVideo(r,s);return yield this.decodeContinuously(c,o)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(r,s){return Re(this,void 0,void 0,function*(){const o=this.prepareVideoElement(s);return this.addVideoSource(o,r),this.videoElement=o,this.stream=r,yield this.playVideoOnLoadAsync(o),o})}playVideoOnLoadAsync(r){return new Promise((s,o)=>this.playVideoOnLoad(r,()=>s()))}playVideoOnLoad(r,s){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(r),r.addEventListener("ended",this.videoEndedListener),r.addEventListener("canplay",this.videoCanPlayListener),r.addEventListener("playing",s),this.tryPlayVideo(r)}isVideoPlaying(r){return r.currentTime>0&&!r.paused&&!r.ended&&r.readyState>2}tryPlayVideo(r){return Re(this,void 0,void 0,function*(){if(this.isVideoPlaying(r)){console.warn("Trying to play video that is already playing.");return}try{yield r.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(r,s){const o=document.getElementById(r);if(!o)throw new y(`element with id '${r}' not found`);if(o.nodeName.toLowerCase()!==s.toLowerCase())throw new y(`element with id '${r}' must be an ${s} element`);return o}decodeFromImage(r,s){if(!r&&!s)throw new y("either imageElement with a src set or an url must be provided");return s&&!r?this.decodeFromImageUrl(s):this.decodeFromImageElement(r)}decodeFromVideo(r,s){if(!r&&!s)throw new y("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrl(s):this.decodeFromVideoElement(r)}decodeFromVideoContinuously(r,s,o){if(r===void 0&&s===void 0)throw new y("Either an element with a src set or an URL must be provided");return s&&!r?this.decodeFromVideoUrlContinuously(s,o):this.decodeFromVideoElementContinuously(r,o)}decodeFromImageElement(r){if(!r)throw new y("An image element must be provided.");this.reset();const s=this.prepareImageElement(r);this.imageElement=s;let o;return this.isImageLoaded(s)?o=this.decodeOnce(s,!1,!0):o=this._decodeOnLoadImage(s),o}decodeFromVideoElement(r){const s=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideo(s)}decodeFromVideoElementContinuously(r,s){const o=this._decodeFromVideoElementSetup(r);return this._decodeOnLoadVideoContinuously(o,s)}_decodeFromVideoElementSetup(r){if(!r)throw new y("A video element must be provided.");this.reset();const s=this.prepareVideoElement(r);return this.videoElement=s,s}decodeFromImageUrl(r){if(!r)throw new y("An URL must be provided.");this.reset();const s=this.prepareImageElement();this.imageElement=s;const o=this._decodeOnLoadImage(s);return s.src=r,o}decodeFromVideoUrl(r){if(!r)throw new y("An URL must be provided.");this.reset();const s=this.prepareVideoElement(),o=this.decodeFromVideoElement(s);return s.src=r,o}decodeFromVideoUrlContinuously(r,s){if(!r)throw new y("An URL must be provided.");this.reset();const o=this.prepareVideoElement(),c=this.decodeFromVideoElementContinuously(o,s);return o.src=r,c}_decodeOnLoadImage(r){return new Promise((s,o)=>{this.imageLoadedListener=()=>this.decodeOnce(r,!1,!0).then(s,o),r.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(r){return Re(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(r),yield this.decodeOnce(r)})}_decodeOnLoadVideoContinuously(r,s){return Re(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(r),this.decodeContinuously(r,s)})}isImageLoaded(r){return!(!r.complete||r.naturalWidth===0)}prepareImageElement(r){let s;return typeof r>"u"&&(s=document.createElement("img"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"img")),r instanceof HTMLImageElement&&(s=r),s}prepareVideoElement(r){let s;return!r&&typeof document<"u"&&(s=document.createElement("video"),s.width=200,s.height=200),typeof r=="string"&&(s=this.getMediaElement(r,"video")),r instanceof HTMLVideoElement&&(s=r),s.setAttribute("autoplay","true"),s.setAttribute("muted","true"),s.setAttribute("playsinline","true"),s}decodeOnce(r,s=!0,o=!0){this._stopAsyncDecode=!1;const c=(u,f)=>{if(this._stopAsyncDecode){f(new V("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const d=this.decode(r);u(d)}catch(d){const p=s&&d instanceof V,E=(d instanceof R||d instanceof j)&&o;if(p||E)return setTimeout(c,this._timeBetweenDecodingAttempts,u,f);f(d)}};return new Promise((u,f)=>c(u,f))}decodeContinuously(r,s){this._stopContinuousDecode=!1;const o=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const c=this.decode(r);s(c,null),setTimeout(o,this.timeBetweenScansMillis)}catch(c){s(null,c);const u=c instanceof R||c instanceof j,f=c instanceof V;(u||f)&&setTimeout(o,this._timeBetweenDecodingAttempts)}};o()}decode(r){const s=this.createBinaryBitmap(r);return this.decodeBitmap(s)}_isHTMLVideoElement(r){return r.videoWidth!==0}drawFrameOnCanvas(r,s,o){s||(s={sx:0,sy:0,sWidth:r.videoWidth,sHeight:r.videoHeight,dx:0,dy:0,dWidth:r.videoWidth,dHeight:r.videoHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}drawImageOnCanvas(r,s,o=this.captureCanvasContext){s||(s={sx:0,sy:0,sWidth:r.naturalWidth,sHeight:r.naturalHeight,dx:0,dy:0,dWidth:r.naturalWidth,dHeight:r.naturalHeight}),o||(o=this.captureCanvasContext),o.drawImage(r,s.sx,s.sy,s.sWidth,s.sHeight,s.dx,s.dy,s.dWidth,s.dHeight)}createBinaryBitmap(r){this.getCaptureCanvasContext(r),this._isHTMLVideoElement(r)?this.drawFrameOnCanvas(r):this.drawImageOnCanvas(r);const s=this.getCaptureCanvas(r),o=new pe(s),c=new ge(o);return new I(c)}getCaptureCanvasContext(r){if(!this.captureCanvasContext){const o=this.getCaptureCanvas(r).getContext("2d");this.captureCanvasContext=o}return this.captureCanvasContext}getCaptureCanvas(r){if(!this.captureCanvas){const s=this.createCaptureCanvas(r);this.captureCanvas=s}return this.captureCanvas}decodeBitmap(r){return this.reader.decode(r,this._hints)}createCaptureCanvas(r){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const s=document.createElement("canvas");let o,c;return typeof r<"u"&&(r instanceof HTMLVideoElement?(o=r.videoWidth,c=r.videoHeight):r instanceof HTMLImageElement&&(o=r.naturalWidth||r.width,c=r.naturalHeight||r.height)),s.style.width=o+"px",s.style.height=c+"px",s.width=o,s.height=c,s}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(r=>r.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(r,s){try{r.srcObject=s}catch{r.src=URL.createObjectURL(s)}}cleanVideoSource(r){try{r.srcObject=null}catch{r.src=""}this.videoElement.removeAttribute("src")}}class tt{constructor(r,s,o=s==null?0:8*s.length,c,u,f=L.currentTimeMillis()){this.text=r,this.rawBytes=s,this.numBits=o,this.resultPoints=c,this.format=u,this.timestamp=f,this.text=r,this.rawBytes=s,o==null?this.numBits=s==null?0:8*s.length:this.numBits=o,this.resultPoints=c,this.format=u,this.resultMetadata=null,f==null?this.timestamp=L.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(r,s){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(r,s)}putAllMetadata(r){r!==null&&(this.resultMetadata===null?this.resultMetadata=r:this.resultMetadata=new Map(r))}addResultPoints(r){const s=this.resultPoints;if(s===null)this.resultPoints=r;else if(r!==null&&r.length>0){const o=new Array(s.length+r.length);L.arraycopy(s,0,o,0,s.length),L.arraycopy(r,0,o,s.length,r.length),this.resultPoints=o}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Ti;(function(_){_[_.AZTEC=0]="AZTEC",_[_.CODABAR=1]="CODABAR",_[_.CODE_39=2]="CODE_39",_[_.CODE_93=3]="CODE_93",_[_.CODE_128=4]="CODE_128",_[_.DATA_MATRIX=5]="DATA_MATRIX",_[_.EAN_8=6]="EAN_8",_[_.EAN_13=7]="EAN_13",_[_.ITF=8]="ITF",_[_.MAXICODE=9]="MAXICODE",_[_.PDF_417=10]="PDF_417",_[_.QR_CODE=11]="QR_CODE",_[_.RSS_14=12]="RSS_14",_[_.RSS_EXPANDED=13]="RSS_EXPANDED",_[_.UPC_A=14]="UPC_A",_[_.UPC_E=15]="UPC_E",_[_.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ti||(Ti={}));var ae=Ti,Hr;(function(_){_[_.OTHER=0]="OTHER",_[_.ORIENTATION=1]="ORIENTATION",_[_.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",_[_.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",_[_.ISSUE_NUMBER=4]="ISSUE_NUMBER",_[_.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",_[_.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",_[_.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",_[_.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",_[_.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",_[_.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(Hr||(Hr={}));var Dt=Hr;class lo{constructor(r,s,o,c,u=-1,f=-1){this.rawBytes=r,this.text=s,this.byteSegments=o,this.ecLevel=c,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=f,this.numBits=r==null?0:8*r.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(r){this.numBits=r}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(r){this.errorsCorrected=r}getErasures(){return this.erasures}setErasures(r){this.erasures=r}getOther(){return this.other}setOther(r){this.other=r}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class co{exp(r){return this.expTable[r]}log(r){if(r===0)throw new C;return this.logTable[r]}static addOrSubtract(r,s){return r^s}}class cn{constructor(r,s){if(s.length===0)throw new C;this.field=r;const o=s.length;if(o>1&&s[0]===0){let c=1;for(;c<o&&s[c]===0;)c++;c===o?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(o-c),L.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);const s=this.coefficients;let o;if(r===1){o=0;for(let f=0,d=s.length;f!==d;f++){const p=s[f];o=co.addOrSubtract(o,p)}return o}o=s[0];const c=s.length,u=this.field;for(let f=1;f<c;f++)o=co.addOrSubtract(u.multiply(r,o),s[f]);return o}addOrSubtract(r){if(!this.field.equals(r.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){const f=s;s=o,o=f}let c=new Int32Array(o.length);const u=o.length-s.length;L.arraycopy(o,0,c,0,u);for(let f=u;f<o.length;f++)c[f]=co.addOrSubtract(s[f-u],o[f]);return new cn(this.field,c)}multiply(r){if(!this.field.equals(r.field))throw new C("GenericGFPolys do not have same GenericGF field");if(this.isZero()||r.isZero())return this.field.getZero();const s=this.coefficients,o=s.length,c=r.coefficients,u=c.length,f=new Int32Array(o+u-1),d=this.field;for(let p=0;p<o;p++){const w=s[p];for(let E=0;E<u;E++)f[p+E]=co.addOrSubtract(f[p+E],d.multiply(w,c[E]))}return new cn(d,f)}multiplyScalar(r){if(r===0)return this.field.getZero();if(r===1)return this;const s=this.coefficients.length,o=this.field,c=new Int32Array(s),u=this.coefficients;for(let f=0;f<s;f++)c[f]=o.multiply(u[f],r);return new cn(o,c)}multiplyByMonomial(r,s){if(r<0)throw new C;if(s===0)return this.field.getZero();const o=this.coefficients,c=o.length,u=new Int32Array(c+r),f=this.field;for(let d=0;d<c;d++)u[d]=f.multiply(o[d],s);return new cn(f,u)}divide(r){if(!this.field.equals(r.field))throw new C("GenericGFPolys do not have same GenericGF field");if(r.isZero())throw new C("Divide by 0");const s=this.field;let o=s.getZero(),c=this;const u=r.getCoefficient(r.getDegree()),f=s.inverse(u);for(;c.getDegree()>=r.getDegree()&&!c.isZero();){const d=c.getDegree()-r.getDegree(),p=s.multiply(c.getCoefficient(c.getDegree()),f),w=r.multiplyByMonomial(d,p),E=s.buildMonomial(d,p);o=o.addOrSubtract(E),c=c.addOrSubtract(w)}return[o,c]}toString(){let r="";for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);if(o!==0){if(o<0?(r+=" - ",o=-o):r.length>0&&(r+=" + "),s===0||o!==1){const c=this.field.log(o);c===0?r+="1":c===1?r+="a":(r+="a^",r+=c)}s!==0&&(s===1?r+="x":(r+="x^",r+=s))}}return r}}class za extends g{}za.kind="ArithmeticException";class Pe extends co{constructor(r,s,o){super(),this.primitive=r,this.size=s,this.generatorBase=o;const c=new Int32Array(s);let u=1;for(let d=0;d<s;d++)c[d]=u,u*=2,u>=s&&(u^=r,u&=s-1);this.expTable=c;const f=new Int32Array(s);for(let d=0;d<s-1;d++)f[c[d]]=d;this.logTable=f,this.zero=new cn(this,Int32Array.from([0])),this.one=new cn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new C;if(s===0)return this.zero;const o=new Int32Array(r+1);return o[0]=s,new cn(this,o)}inverse(r){if(r===0)throw new za;return this.expTable[this.size-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+M.toHexString(this.primitive)+","+this.size+")"}equals(r){return r===this}}Pe.AZTEC_DATA_12=new Pe(4201,4096,1),Pe.AZTEC_DATA_10=new Pe(1033,1024,1),Pe.AZTEC_DATA_6=new Pe(67,64,1),Pe.AZTEC_PARAM=new Pe(19,16,1),Pe.QR_CODE_FIELD_256=new Pe(285,256,0),Pe.DATA_MATRIX_FIELD_256=new Pe(301,256,1),Pe.AZTEC_DATA_8=Pe.DATA_MATRIX_FIELD_256,Pe.MAXICODE_FIELD_64=Pe.AZTEC_DATA_6;class cs extends g{}cs.kind="ReedSolomonException";class cr extends g{}cr.kind="IllegalStateException";class uo{constructor(r){this.field=r}decode(r,s){const o=this.field,c=new cn(o,r),u=new Int32Array(s);let f=!0;for(let T=0;T<s;T++){const D=c.evaluateAt(o.exp(T+o.getGeneratorBase()));u[u.length-1-T]=D,D!==0&&(f=!1)}if(f)return;const d=new cn(o,u),p=this.runEuclideanAlgorithm(o.buildMonomial(s,1),d,s),w=p[0],E=p[1],A=this.findErrorLocations(w),v=this.findErrorMagnitudes(E,A);for(let T=0;T<A.length;T++){const D=r.length-1-o.log(A[T]);if(D<0)throw new cs("Bad error location");r[D]=Pe.addOrSubtract(r[D],v[T])}}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){const T=r;r=s,s=T}const c=this.field;let u=r,f=s,d=c.getZero(),p=c.getOne();for(;f.getDegree()>=(o/2|0);){let T=u,D=d;if(u=f,d=p,u.isZero())throw new cs("r_{i-1} was zero");f=T;let k=c.getZero();const P=u.getCoefficient(u.getDegree()),H=c.inverse(P);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){const Q=f.getDegree()-u.getDegree(),Z=c.multiply(f.getCoefficient(f.getDegree()),H);k=k.addOrSubtract(c.buildMonomial(Q,Z)),f=f.addOrSubtract(u.multiplyByMonomial(Q,Z))}if(p=k.multiply(d).addOrSubtract(D),f.getDegree()>=u.getDegree())throw new cr("Division algorithm failed to reduce polynomial?")}const w=p.getCoefficient(0);if(w===0)throw new cs("sigmaTilde(0) was zero");const E=c.inverse(w),A=p.multiplyScalar(E),v=f.multiplyScalar(E);return[A,v]}findErrorLocations(r){const s=r.getDegree();if(s===1)return Int32Array.from([r.getCoefficient(1)]);const o=new Int32Array(s);let c=0;const u=this.field;for(let f=1;f<u.getSize()&&c<s;f++)r.evaluateAt(f)===0&&(o[c]=u.inverse(f),c++);if(c!==s)throw new cs("Error locator degree does not match number of roots");return o}findErrorMagnitudes(r,s){const o=s.length,c=new Int32Array(o),u=this.field;for(let f=0;f<o;f++){const d=u.inverse(s[f]);let p=1;for(let w=0;w<o;w++)if(f!==w){const E=u.multiply(s[w],d),A=E&1?E&-2:E|1;p=u.multiply(p,A)}c[f]=u.multiply(r.evaluateAt(d),u.inverse(p)),u.getGeneratorBase()!==0&&(c[f]=u.multiply(c[f],d))}return c}}var zt;(function(_){_[_.UPPER=0]="UPPER",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.DIGIT=3]="DIGIT",_[_.PUNCT=4]="PUNCT",_[_.BINARY=5]="BINARY"})(zt||(zt={}));class Ke{decode(r){this.ddata=r;let s=r.getBits(),o=this.extractBits(s),c=this.correctBits(o),u=Ke.convertBoolArrayToByteArray(c),f=Ke.getEncodedData(c),d=new lo(u,f,null,null);return d.setNumBits(c.length),d}static highLevelDecode(r){return this.getEncodedData(r)}static getEncodedData(r){let s=r.length,o=zt.UPPER,c=zt.UPPER,u="",f=0;for(;f<s;)if(c===zt.BINARY){if(s-f<5)break;let d=Ke.readCode(r,f,5);if(f+=5,d===0){if(s-f<11)break;d=Ke.readCode(r,f,11)+31,f+=11}for(let p=0;p<d;p++){if(s-f<8){f=s;break}const w=Ke.readCode(r,f,8);u+=ue.castAsNonUtf8Char(w),f+=8}c=o}else{let d=c===zt.DIGIT?4:5;if(s-f<d)break;let p=Ke.readCode(r,f,d);f+=d;let w=Ke.getCharacter(c,p);w.startsWith("CTRL_")?(o=c,c=Ke.getTable(w.charAt(5)),w.charAt(6)==="L"&&(o=c)):(u+=w,c=o)}return u}static getTable(r){switch(r){case"L":return zt.LOWER;case"P":return zt.PUNCT;case"M":return zt.MIXED;case"D":return zt.DIGIT;case"B":return zt.BINARY;case"U":default:return zt.UPPER}}static getCharacter(r,s){switch(r){case zt.UPPER:return Ke.UPPER_TABLE[s];case zt.LOWER:return Ke.LOWER_TABLE[s];case zt.MIXED:return Ke.MIXED_TABLE[s];case zt.PUNCT:return Ke.PUNCT_TABLE[s];case zt.DIGIT:return Ke.DIGIT_TABLE[s];default:throw new cr("Bad table")}}correctBits(r){let s,o;this.ddata.getNbLayers()<=2?(o=6,s=Pe.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(o=8,s=Pe.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(o=10,s=Pe.AZTEC_DATA_10):(o=12,s=Pe.AZTEC_DATA_12);let c=this.ddata.getNbDatablocks(),u=r.length/o;if(u<c)throw new j;let f=r.length%o,d=new Int32Array(u);for(let v=0;v<u;v++,f+=o)d[v]=Ke.readCode(r,f,o);try{new uo(s).decode(d,u-c)}catch(v){throw new j(v)}let p=(1<<o)-1,w=0;for(let v=0;v<c;v++){let T=d[v];if(T===0||T===p)throw new j;(T===1||T===p-1)&&w++}let E=new Array(c*o-w),A=0;for(let v=0;v<c;v++){let T=d[v];if(T===1||T===p-1)E.fill(T>1,A,A+o-1),A+=o-1;else for(let D=o-1;D>=0;--D)E[A++]=(T&1<<D)!==0}return E}extractBits(r){let s=this.ddata.isCompact(),o=this.ddata.getNbLayers(),c=(s?11:14)+o*4,u=new Int32Array(c),f=new Array(this.totalBitsInLayer(o,s));if(s)for(let d=0;d<u.length;d++)u[d]=d;else{let d=c+1+2*M.truncDivision(M.truncDivision(c,2)-1,15),p=c/2,w=M.truncDivision(d,2);for(let E=0;E<p;E++){let A=E+M.truncDivision(E,15);u[p-E-1]=w-A-1,u[p+E]=w+A+1}}for(let d=0,p=0;d<o;d++){let w=(o-d)*4+(s?9:12),E=d*2,A=c-1-E;for(let v=0;v<w;v++){let T=v*2;for(let D=0;D<2;D++)f[p+T+D]=r.get(u[E+D],u[E+v]),f[p+2*w+T+D]=r.get(u[E+v],u[A-D]),f[p+4*w+T+D]=r.get(u[A-D],u[A-v]),f[p+6*w+T+D]=r.get(u[A-v],u[E+D])}p+=w*8}return f}static readCode(r,s,o){let c=0;for(let u=s;u<s+o;u++)c<<=1,r[u]&&(c|=1);return c}static readByte(r,s){let o=r.length-s;return o>=8?Ke.readCode(r,s,8):Ke.readCode(r,s,o)<<8-o}static convertBoolArrayToByteArray(r){let s=new Uint8Array((r.length+7)/8);for(let o=0;o<s.length;o++)s[o]=Ke.readByte(r,8*o);return s}totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}Ke.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],Ke.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],Ke.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],Ke.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],Ke.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Oe{constructor(){}static round(r){return r===NaN?0:r<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:r>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:r+(r<0?-.5:.5)|0}static distance(r,s,o,c){const u=r-o,f=s-c;return Math.sqrt(u*u+f*f)}static sum(r){let s=0;for(let o=0,c=r.length;o!==c;o++){const u=r[o];s+=u}return s}}class ja{static floatToIntBits(r){return r}}ja.MAX_VALUE=Number.MAX_SAFE_INTEGER;class oe{constructor(r,s){this.x=r,this.y=s}getX(){return this.x}getY(){return this.y}equals(r){if(r instanceof oe){const s=r;return this.x===s.x&&this.y===s.y}return!1}hashCode(){return 31*ja.floatToIntBits(this.x)+ja.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(r){const s=this.distance(r[0],r[1]),o=this.distance(r[1],r[2]),c=this.distance(r[0],r[2]);let u,f,d;if(o>=s&&o>=c?(f=r[0],u=r[1],d=r[2]):c>=o&&c>=s?(f=r[1],u=r[0],d=r[2]):(f=r[2],u=r[0],d=r[1]),this.crossProductZ(u,f,d)<0){const p=u;u=d,d=p}r[0]=u,r[1]=f,r[2]=d}static distance(r,s){return Oe.distance(r.x,r.y,s.x,s.y)}static crossProductZ(r,s,o){const c=s.x,u=s.y;return(o.x-c)*(r.y-u)-(o.y-u)*(r.x-c)}}class Ha{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class y1 extends Ha{constructor(r,s,o,c,u){super(r,s),this.compact=o,this.nbDatablocks=c,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Ir{constructor(r,s,o,c){this.image=r,this.height=r.getHeight(),this.width=r.getWidth(),s==null&&(s=Ir.INIT_SIZE),o==null&&(o=r.getWidth()/2|0),c==null&&(c=r.getHeight()/2|0);const u=s/2|0;if(this.leftInit=o-u,this.rightInit=o+u,this.upInit=c-u,this.downInit=c+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new V}detect(){let r=this.leftInit,s=this.rightInit,o=this.upInit,c=this.downInit,u=!1,f=!0,d=!1,p=!1,w=!1,E=!1,A=!1;const v=this.width,T=this.height;for(;f;){f=!1;let D=!0;for(;(D||!p)&&s<v;)D=this.containsBlackPoint(o,c,s,!1),D?(s++,f=!0,p=!0):p||s++;if(s>=v){u=!0;break}let k=!0;for(;(k||!w)&&c<T;)k=this.containsBlackPoint(r,s,c,!0),k?(c++,f=!0,w=!0):w||c++;if(c>=T){u=!0;break}let P=!0;for(;(P||!E)&&r>=0;)P=this.containsBlackPoint(o,c,r,!1),P?(r--,f=!0,E=!0):E||r--;if(r<0){u=!0;break}let H=!0;for(;(H||!A)&&o>=0;)H=this.containsBlackPoint(r,s,o,!0),H?(o--,f=!0,A=!0):A||o--;if(o<0){u=!0;break}f&&(d=!0)}if(!u&&d){const D=s-r;let k=null;for(let Z=1;k===null&&Z<D;Z++)k=this.getBlackPointOnSegment(r,c-Z,r+Z,c);if(k==null)throw new V;let P=null;for(let Z=1;P===null&&Z<D;Z++)P=this.getBlackPointOnSegment(r,o+Z,r+Z,o);if(P==null)throw new V;let H=null;for(let Z=1;H===null&&Z<D;Z++)H=this.getBlackPointOnSegment(s,o+Z,s-Z,o);if(H==null)throw new V;let Q=null;for(let Z=1;Q===null&&Z<D;Z++)Q=this.getBlackPointOnSegment(s,c-Z,s-Z,c);if(Q==null)throw new V;return this.centerEdges(Q,k,H,P)}else throw new V}getBlackPointOnSegment(r,s,o,c){const u=Oe.round(Oe.distance(r,s,o,c)),f=(o-r)/u,d=(c-s)/u,p=this.image;for(let w=0;w<u;w++){const E=Oe.round(r+w*f),A=Oe.round(s+w*d);if(p.get(E,A))return new oe(E,A)}return null}centerEdges(r,s,o,c){const u=r.getX(),f=r.getY(),d=s.getX(),p=s.getY(),w=o.getX(),E=o.getY(),A=c.getX(),v=c.getY(),T=Ir.CORR;return u<this.width/2?[new oe(A-T,v+T),new oe(d+T,p+T),new oe(w-T,E-T),new oe(u+T,f-T)]:[new oe(A+T,v+T),new oe(d+T,p-T),new oe(w-T,E+T),new oe(u-T,f-T)]}containsBlackPoint(r,s,o,c){const u=this.image;if(c){for(let f=r;f<=s;f++)if(u.get(f,o))return!0}else for(let f=r;f<=s;f++)if(u.get(o,f))return!0;return!1}}Ir.INIT_SIZE=10,Ir.CORR=1;class uu{static checkAndNudgePoints(r,s){const o=r.getWidth(),c=r.getHeight();let u=!0;for(let f=0;f<s.length&&u;f+=2){const d=Math.floor(s[f]),p=Math.floor(s[f+1]);if(d<-1||d>o||p<-1||p>c)throw new V;u=!1,d===-1?(s[f]=0,u=!0):d===o&&(s[f]=o-1,u=!0),p===-1?(s[f+1]=0,u=!0):p===c&&(s[f+1]=c-1,u=!0)}u=!0;for(let f=s.length-2;f>=0&&u;f-=2){const d=Math.floor(s[f]),p=Math.floor(s[f+1]);if(d<-1||d>o||p<-1||p>c)throw new V;u=!1,d===-1?(s[f]=0,u=!0):d===o&&(s[f]=o-1,u=!0),p===-1?(s[f+1]=0,u=!0):p===c&&(s[f+1]=c-1,u=!0)}}}class Yn{constructor(r,s,o,c,u,f,d,p,w){this.a11=r,this.a21=s,this.a31=o,this.a12=c,this.a22=u,this.a32=f,this.a13=d,this.a23=p,this.a33=w}static quadrilateralToQuadrilateral(r,s,o,c,u,f,d,p,w,E,A,v,T,D,k,P){const H=Yn.quadrilateralToSquare(r,s,o,c,u,f,d,p);return Yn.squareToQuadrilateral(w,E,A,v,T,D,k,P).times(H)}transformPoints(r){const s=r.length,o=this.a11,c=this.a12,u=this.a13,f=this.a21,d=this.a22,p=this.a23,w=this.a31,E=this.a32,A=this.a33;for(let v=0;v<s;v+=2){const T=r[v],D=r[v+1],k=u*T+p*D+A;r[v]=(o*T+f*D+w)/k,r[v+1]=(c*T+d*D+E)/k}}transformPointsWithValues(r,s){const o=this.a11,c=this.a12,u=this.a13,f=this.a21,d=this.a22,p=this.a23,w=this.a31,E=this.a32,A=this.a33,v=r.length;for(let T=0;T<v;T++){const D=r[T],k=s[T],P=u*D+p*k+A;r[T]=(o*D+f*k+w)/P,s[T]=(c*D+d*k+E)/P}}static squareToQuadrilateral(r,s,o,c,u,f,d,p){const w=r-o+u-d,E=s-c+f-p;if(w===0&&E===0)return new Yn(o-r,u-o,r,c-s,f-c,s,0,0,1);{const A=o-u,v=d-u,T=c-f,D=p-f,k=A*D-v*T,P=(w*D-v*E)/k,H=(A*E-w*T)/k;return new Yn(o-r+P*o,d-r+H*d,r,c-s+P*c,p-s+H*p,s,P,H,1)}}static quadrilateralToSquare(r,s,o,c,u,f,d,p){return Yn.squareToQuadrilateral(r,s,o,c,u,f,d,p).buildAdjoint()}buildAdjoint(){return new Yn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(r){return new Yn(this.a11*r.a11+this.a21*r.a12+this.a31*r.a13,this.a11*r.a21+this.a21*r.a22+this.a31*r.a23,this.a11*r.a31+this.a21*r.a32+this.a31*r.a33,this.a12*r.a11+this.a22*r.a12+this.a32*r.a13,this.a12*r.a21+this.a22*r.a22+this.a32*r.a23,this.a12*r.a31+this.a22*r.a32+this.a32*r.a33,this.a13*r.a11+this.a23*r.a12+this.a33*r.a13,this.a13*r.a21+this.a23*r.a22+this.a33*r.a23,this.a13*r.a31+this.a23*r.a32+this.a33*r.a33)}}class C1 extends uu{sampleGrid(r,s,o,c,u,f,d,p,w,E,A,v,T,D,k,P,H,Q,Z){const Y=Yn.quadrilateralToQuadrilateral(c,u,f,d,p,w,E,A,v,T,D,k,P,H,Q,Z);return this.sampleGridWithTransform(r,s,o,Y)}sampleGridWithTransform(r,s,o,c){if(s<=0||o<=0)throw new V;const u=new ze(s,o),f=new Float32Array(2*s);for(let d=0;d<o;d++){const p=f.length,w=d+.5;for(let E=0;E<p;E+=2)f[E]=E/2+.5,f[E+1]=w;c.transformPoints(f),uu.checkAndNudgePoints(r,f);try{for(let E=0;E<p;E+=2)r.get(Math.floor(f[E]),Math.floor(f[E+1]))&&u.set(E/2,d)}catch{throw new V}}return u}}class Vr{static setGridSampler(r){Vr.gridSampler=r}static getInstance(){return Vr.gridSampler}}Vr.gridSampler=new C1;class en{constructor(r,s){this.x=r,this.y=s}toResultPoint(){return new oe(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class E1{constructor(r){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=r}detect(){return this.detectMirror(!1)}detectMirror(r){let s=this.getMatrixCenter(),o=this.getBullsEyeCorners(s);if(r){let f=o[0];o[0]=o[2],o[2]=f}this.extractParameters(o);let c=this.sampleGrid(this.image,o[this.shift%4],o[(this.shift+1)%4],o[(this.shift+2)%4],o[(this.shift+3)%4]),u=this.getMatrixCornerPoints(o);return new y1(c,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(r){if(!this.isValidPoint(r[0])||!this.isValidPoint(r[1])||!this.isValidPoint(r[2])||!this.isValidPoint(r[3]))throw new V;let s=2*this.nbCenterLayers,o=new Int32Array([this.sampleLine(r[0],r[1],s),this.sampleLine(r[1],r[2],s),this.sampleLine(r[2],r[3],s),this.sampleLine(r[3],r[0],s)]);this.shift=this.getRotation(o,s);let c=0;for(let f=0;f<4;f++){let d=o[(this.shift+f)%4];this.compact?(c<<=7,c+=d>>1&127):(c<<=10,c+=(d>>2&992)+(d>>1&31))}let u=this.getCorrectedParameterData(c,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(r,s){let o=0;r.forEach((c,u,f)=>{let d=(c>>s-2<<1)+(c&1);o=(o<<3)+d}),o=((o&1)<<11)+(o>>1);for(let c=0;c<4;c++)if(M.bitCount(o^this.EXPECTED_CORNER_BITS[c])<=2)return c;throw new V}getCorrectedParameterData(r,s){let o,c;s?(o=7,c=2):(o=10,c=4);let u=o-c,f=new Int32Array(o);for(let p=o-1;p>=0;--p)f[p]=r&15,r>>=4;try{new uo(Pe.AZTEC_PARAM).decode(f,u)}catch{throw new V}let d=0;for(let p=0;p<c;p++)d=(d<<4)+f[p];return d}getBullsEyeCorners(r){let s=r,o=r,c=r,u=r,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let A=this.getFirstDifferent(s,f,1,-1),v=this.getFirstDifferent(o,f,1,1),T=this.getFirstDifferent(c,f,-1,1),D=this.getFirstDifferent(u,f,-1,-1);if(this.nbCenterLayers>2){let k=this.distancePoint(D,A)*this.nbCenterLayers/(this.distancePoint(u,s)*(this.nbCenterLayers+2));if(k<.75||k>1.25||!this.isWhiteOrBlackRectangle(A,v,T,D))break}s=A,o=v,c=T,u=D,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new V;this.compact=this.nbCenterLayers===5;let d=new oe(s.getX()+.5,s.getY()-.5),p=new oe(o.getX()+.5,o.getY()+.5),w=new oe(c.getX()-.5,c.getY()+.5),E=new oe(u.getX()-.5,u.getY()-.5);return this.expandSquare([d,p,w,E],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let r,s,o,c;try{let d=new Ir(this.image).detect();r=d[0],s=d[1],o=d[2],c=d[3]}catch{let p=this.image.getWidth()/2,w=this.image.getHeight()/2;r=this.getFirstDifferent(new en(p+7,w-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new en(p+7,w+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new en(p-7,w+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new en(p-7,w-7),!1,-1,-1).toResultPoint()}let u=Oe.round((r.getX()+c.getX()+s.getX()+o.getX())/4),f=Oe.round((r.getY()+c.getY()+s.getY()+o.getY())/4);try{let d=new Ir(this.image,15,u,f).detect();r=d[0],s=d[1],o=d[2],c=d[3]}catch{r=this.getFirstDifferent(new en(u+7,f-7),!1,1,-1).toResultPoint(),s=this.getFirstDifferent(new en(u+7,f+7),!1,1,1).toResultPoint(),o=this.getFirstDifferent(new en(u-7,f+7),!1,-1,1).toResultPoint(),c=this.getFirstDifferent(new en(u-7,f-7),!1,-1,-1).toResultPoint()}return u=Oe.round((r.getX()+c.getX()+s.getX()+o.getX())/4),f=Oe.round((r.getY()+c.getY()+s.getY()+o.getY())/4),new en(u,f)}getMatrixCornerPoints(r){return this.expandSquare(r,2*this.nbCenterLayers,this.getDimension())}sampleGrid(r,s,o,c,u){let f=Vr.getInstance(),d=this.getDimension(),p=d/2-this.nbCenterLayers,w=d/2+this.nbCenterLayers;return f.sampleGrid(r,d,d,p,p,w,p,w,w,p,w,s.getX(),s.getY(),o.getX(),o.getY(),c.getX(),c.getY(),u.getX(),u.getY())}sampleLine(r,s,o){let c=0,u=this.distanceResultPoint(r,s),f=u/o,d=r.getX(),p=r.getY(),w=f*(s.getX()-r.getX())/u,E=f*(s.getY()-r.getY())/u;for(let A=0;A<o;A++)this.image.get(Oe.round(d+A*w),Oe.round(p+A*E))&&(c|=1<<o-A-1);return c}isWhiteOrBlackRectangle(r,s,o,c){let u=3;r=new en(r.getX()-u,r.getY()+u),s=new en(s.getX()-u,s.getY()-u),o=new en(o.getX()+u,o.getY()-u),c=new en(c.getX()+u,c.getY()+u);let f=this.getColor(c,r);if(f===0)return!1;let d=this.getColor(r,s);return d!==f||(d=this.getColor(s,o),d!==f)?!1:(d=this.getColor(o,c),d===f)}getColor(r,s){let o=this.distancePoint(r,s),c=(s.getX()-r.getX())/o,u=(s.getY()-r.getY())/o,f=0,d=r.getX(),p=r.getY(),w=this.image.get(r.getX(),r.getY()),E=Math.ceil(o);for(let v=0;v<E;v++)d+=c,p+=u,this.image.get(Oe.round(d),Oe.round(p))!==w&&f++;let A=f/o;return A>.1&&A<.9?0:A<=.1===w?1:-1}getFirstDifferent(r,s,o,c){let u=r.getX()+o,f=r.getY()+c;for(;this.isValid(u,f)&&this.image.get(u,f)===s;)u+=o,f+=c;for(u-=o,f-=c;this.isValid(u,f)&&this.image.get(u,f)===s;)u+=o;for(u-=o;this.isValid(u,f)&&this.image.get(u,f)===s;)f+=c;return f-=c,new en(u,f)}expandSquare(r,s,o){let c=o/(2*s),u=r[0].getX()-r[2].getX(),f=r[0].getY()-r[2].getY(),d=(r[0].getX()+r[2].getX())/2,p=(r[0].getY()+r[2].getY())/2,w=new oe(d+c*u,p+c*f),E=new oe(d-c*u,p-c*f);u=r[1].getX()-r[3].getX(),f=r[1].getY()-r[3].getY(),d=(r[1].getX()+r[3].getX())/2,p=(r[1].getY()+r[3].getY())/2;let A=new oe(d+c*u,p+c*f),v=new oe(d-c*u,p-c*f);return[w,A,E,v]}isValid(r,s){return r>=0&&r<this.image.getWidth()&&s>0&&s<this.image.getHeight()}isValidPoint(r){let s=Oe.round(r.getX()),o=Oe.round(r.getY());return this.isValid(s,o)}distancePoint(r,s){return Oe.distance(r.getX(),r.getY(),s.getX(),s.getY())}distanceResultPoint(r,s){return Oe.distance(r.getX(),r.getY(),s.getX(),s.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(M.truncDivision(this.nbLayers-4,8)+1)+15}}class Va{decode(r,s=null){let o=null,c=new E1(r.getBlackMatrix()),u=null,f=null;try{let E=c.detectMirror(!1);u=E.getPoints(),this.reportFoundResultPoints(s,u),f=new Ke().decode(E)}catch(E){o=E}if(f==null)try{let E=c.detectMirror(!0);u=E.getPoints(),this.reportFoundResultPoints(s,u),f=new Ke().decode(E)}catch(E){throw o??E}let d=new tt(f.getText(),f.getRawBytes(),f.getNumBits(),u,ae.AZTEC,L.currentTimeMillis()),p=f.getByteSegments();p!=null&&d.putMetadata(Dt.BYTE_SEGMENTS,p);let w=f.getECLevel();return w!=null&&d.putMetadata(Dt.ERROR_CORRECTION_LEVEL,w),d}reportFoundResultPoints(r,s){if(r!=null){let o=r.get(K.NEED_RESULT_POINT_CALLBACK);o!=null&&s.forEach((c,u,f)=>{o.foundPossibleResultPoint(c)})}}reset(){}}class ry extends ln{constructor(r=500){super(new Va,r)}}class At{decode(r,s){try{return this.doDecode(r,s)}catch{if(s&&s.get(K.TRY_HARDER)===!0&&r.isRotateSupported()){const u=r.rotateCounterClockwise(),f=this.doDecode(u,s),d=f.getResultMetadata();let p=270;d!==null&&d.get(Dt.ORIENTATION)===!0&&(p=p+d.get(Dt.ORIENTATION)%360),f.putMetadata(Dt.ORIENTATION,p);const w=f.getResultPoints();if(w!==null){const E=u.getHeight();for(let A=0;A<w.length;A++)w[A]=new oe(E-w[A].getY()-1,w[A].getX())}return f}else throw new V}}reset(){}doDecode(r,s){const o=r.getWidth(),c=r.getHeight();let u=new U(o);const f=s&&s.get(K.TRY_HARDER)===!0,d=Math.max(1,c>>(f?8:5));let p;f?p=c:p=15;const w=Math.trunc(c/2);for(let E=0;E<p;E++){const A=Math.trunc((E+1)/2),v=(E&1)===0,T=w+d*(v?A:-A);if(T<0||T>=c)break;try{u=r.getBlackRow(T,u)}catch{continue}for(let D=0;D<2;D++){if(D===1&&(u.reverse(),s&&s.get(K.NEED_RESULT_POINT_CALLBACK)===!0)){const k=new Map;s.forEach((P,H)=>k.set(H,P)),k.delete(K.NEED_RESULT_POINT_CALLBACK),s=k}try{const k=this.decodeRow(T,u,s);if(D===1){k.putMetadata(Dt.ORIENTATION,180);const P=k.getResultPoints();P!==null&&(P[0]=new oe(o-P[0].getX()-1,P[0].getY()),P[1]=new oe(o-P[1].getX()-1,P[1].getY()))}return k}catch{}}}throw new V}static recordPattern(r,s,o){const c=o.length;for(let w=0;w<c;w++)o[w]=0;const u=r.getSize();if(s>=u)throw new V;let f=!r.get(s),d=0,p=s;for(;p<u;){if(r.get(p)!==f)o[d]++;else{if(++d===c)break;o[d]=1,f=!f}p++}if(!(d===c||d===c-1&&p===u))throw new V}static recordPatternInReverse(r,s,o){let c=o.length,u=r.get(s);for(;s>0&&c>=0;)r.get(--s)!==u&&(c--,u=!u);if(c>=0)throw new V;At.recordPattern(r,s+1,o)}static patternMatchVariance(r,s,o){const c=r.length;let u=0,f=0;for(let w=0;w<c;w++)u+=r[w],f+=s[w];if(u<f)return Number.POSITIVE_INFINITY;const d=u/f;o*=d;let p=0;for(let w=0;w<c;w++){const E=r[w],A=s[w]*d,v=E>A?E-A:A-E;if(v>o)return Number.POSITIVE_INFINITY;p+=v}return p/u}}class ee extends At{static findStartPattern(r){const s=r.getSize(),o=r.getNextSet(0);let c=0,u=Int32Array.from([0,0,0,0,0,0]),f=o,d=!1;const p=6;for(let w=o;w<s;w++)if(r.get(w)!==d)u[c]++;else{if(c===p-1){let E=ee.MAX_AVG_VARIANCE,A=-1;for(let v=ee.CODE_START_A;v<=ee.CODE_START_C;v++){const T=At.patternMatchVariance(u,ee.CODE_PATTERNS[v],ee.MAX_INDIVIDUAL_VARIANCE);T<E&&(E=T,A=v)}if(A>=0&&r.isRange(Math.max(0,f-(w-f)/2),f,!1))return Int32Array.from([f,w,A]);f+=u[0]+u[1],u=u.slice(2,u.length-1),u[c-1]=0,u[c]=0,c--}else c++;u[c]=1,d=!d}throw new V}static decodeCode(r,s,o){At.recordPattern(r,o,s);let c=ee.MAX_AVG_VARIANCE,u=-1;for(let f=0;f<ee.CODE_PATTERNS.length;f++){const d=ee.CODE_PATTERNS[f],p=this.patternMatchVariance(s,d,ee.MAX_INDIVIDUAL_VARIANCE);p<c&&(c=p,u=f)}if(u>=0)return u;throw new V}decodeRow(r,s,o){const c=o&&o.get(K.ASSUME_GS1)===!0,u=ee.findStartPattern(s),f=u[2];let d=0;const p=new Uint8Array(20);p[d++]=f;let w;switch(f){case ee.CODE_START_A:w=ee.CODE_CODE_A;break;case ee.CODE_START_B:w=ee.CODE_CODE_B;break;case ee.CODE_START_C:w=ee.CODE_CODE_C;break;default:throw new j}let E=!1,A=!1,v="",T=u[0],D=u[1];const k=Int32Array.from([0,0,0,0,0,0]);let P=0,H=0,Q=f,Z=0,Y=!0,Me=!1,ye=!1;for(;!E;){const ws=A;switch(A=!1,P=H,H=ee.decodeCode(s,k,D),p[d++]=H,H!==ee.CODE_STOP&&(Y=!0),H!==ee.CODE_STOP&&(Z++,Q+=Z*H),T=D,D+=k.reduce((Oy,Dy)=>Oy+Dy,0),H){case ee.CODE_START_A:case ee.CODE_START_B:case ee.CODE_START_C:throw new j}switch(w){case ee.CODE_CODE_A:if(H<64)ye===Me?v+=String.fromCharCode(32+H):v+=String.fromCharCode(32+H+128),ye=!1;else if(H<96)ye===Me?v+=String.fromCharCode(H-64):v+=String.fromCharCode(H+64),ye=!1;else switch(H!==ee.CODE_STOP&&(Y=!1),H){case ee.CODE_FNC_1:c&&(v.length===0?v+="]C1":v+="");break;case ee.CODE_FNC_2:case ee.CODE_FNC_3:break;case ee.CODE_FNC_4_A:!Me&&ye?(Me=!0,ye=!1):Me&&ye?(Me=!1,ye=!1):ye=!0;break;case ee.CODE_SHIFT:A=!0,w=ee.CODE_CODE_B;break;case ee.CODE_CODE_B:w=ee.CODE_CODE_B;break;case ee.CODE_CODE_C:w=ee.CODE_CODE_C;break;case ee.CODE_STOP:E=!0;break}break;case ee.CODE_CODE_B:if(H<96)ye===Me?v+=String.fromCharCode(32+H):v+=String.fromCharCode(32+H+128),ye=!1;else switch(H!==ee.CODE_STOP&&(Y=!1),H){case ee.CODE_FNC_1:c&&(v.length===0?v+="]C1":v+="");break;case ee.CODE_FNC_2:case ee.CODE_FNC_3:break;case ee.CODE_FNC_4_B:!Me&&ye?(Me=!0,ye=!1):Me&&ye?(Me=!1,ye=!1):ye=!0;break;case ee.CODE_SHIFT:A=!0,w=ee.CODE_CODE_A;break;case ee.CODE_CODE_A:w=ee.CODE_CODE_A;break;case ee.CODE_CODE_C:w=ee.CODE_CODE_C;break;case ee.CODE_STOP:E=!0;break}break;case ee.CODE_CODE_C:if(H<100)H<10&&(v+="0"),v+=H;else switch(H!==ee.CODE_STOP&&(Y=!1),H){case ee.CODE_FNC_1:c&&(v.length===0?v+="]C1":v+="");break;case ee.CODE_CODE_A:w=ee.CODE_CODE_A;break;case ee.CODE_CODE_B:w=ee.CODE_CODE_B;break;case ee.CODE_STOP:E=!0;break}break}ws&&(w=w===ee.CODE_CODE_A?ee.CODE_CODE_B:ee.CODE_CODE_A)}const dn=D-T;if(D=s.getNextUnset(D),!s.isRange(D,Math.min(s.getSize(),D+(D-T)/2),!1))throw new V;if(Q-=Z*P,Q%103!==P)throw new R;const Qn=v.length;if(Qn===0)throw new V;Qn>0&&Y&&(w===ee.CODE_CODE_C?v=v.substring(0,Qn-2):v=v.substring(0,Qn-1));const gn=(u[1]+u[0])/2,Ye=T+dn/2,Vt=p.length,vn=new Uint8Array(Vt);for(let ws=0;ws<Vt;ws++)vn[ws]=p[ws];const xs=[new oe(gn,r),new oe(Ye,r)];return new tt(v,vn,0,xs,ae.CODE_128,new Date().getTime())}}ee.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ee.MAX_AVG_VARIANCE=.25,ee.MAX_INDIVIDUAL_VARIANCE=.7,ee.CODE_SHIFT=98,ee.CODE_CODE_C=99,ee.CODE_CODE_B=100,ee.CODE_CODE_A=101,ee.CODE_FNC_1=102,ee.CODE_FNC_2=97,ee.CODE_FNC_3=96,ee.CODE_FNC_4_A=101,ee.CODE_FNC_4_B=100,ee.CODE_START_A=103,ee.CODE_START_B=104,ee.CODE_START_C=105,ee.CODE_STOP=106;class vt extends At{constructor(r=!1,s=!1){super(),this.usingCheckDigit=r,this.extendedMode=s,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(r,s,o){let c=this.counters;c.fill(0),this.decodeRowResult="";let u=vt.findAsteriskPattern(s,c),f=s.getNextSet(u[1]),d=s.getSize(),p,w;do{vt.recordPattern(s,f,c);let k=vt.toNarrowWidePattern(c);if(k<0)throw new V;p=vt.patternToChar(k),this.decodeRowResult+=p,w=f;for(let P of c)f+=P;f=s.getNextSet(f)}while(p!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let E=0;for(let k of c)E+=k;let A=f-w-E;if(f!==d&&A*2<E)throw new V;if(this.usingCheckDigit){let k=this.decodeRowResult.length-1,P=0;for(let H=0;H<k;H++)P+=vt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(H));if(this.decodeRowResult.charAt(k)!==vt.ALPHABET_STRING.charAt(P%43))throw new R;this.decodeRowResult=this.decodeRowResult.substring(0,k)}if(this.decodeRowResult.length===0)throw new V;let v;this.extendedMode?v=vt.decodeExtended(this.decodeRowResult):v=this.decodeRowResult;let T=(u[1]+u[0])/2,D=w+E/2;return new tt(v,null,0,[new oe(T,r),new oe(D,r)],ae.CODE_39,new Date().getTime())}static findAsteriskPattern(r,s){let o=r.getSize(),c=r.getNextSet(0),u=0,f=c,d=!1,p=s.length;for(let w=c;w<o;w++)if(r.get(w)!==d)s[u]++;else{if(u===p-1){if(this.toNarrowWidePattern(s)===vt.ASTERISK_ENCODING&&r.isRange(Math.max(0,f-Math.floor((w-f)/2)),f,!1))return[f,w];f+=s[0]+s[1],s.copyWithin(0,2,2+u-1),s[u-1]=0,s[u]=0,u--}else u++;s[u]=1,d=!d}throw new V}static toNarrowWidePattern(r){let s=r.length,o=0,c;do{let u=2147483647;for(let p of r)p<u&&p>o&&(u=p);o=u,c=0;let f=0,d=0;for(let p=0;p<s;p++){let w=r[p];w>o&&(d|=1<<s-1-p,c++,f+=w)}if(c===3){for(let p=0;p<s&&c>0;p++){let w=r[p];if(w>o&&(c--,w*2>=f))return-1}return d}}while(c>3);return-1}static patternToChar(r){for(let s=0;s<vt.CHARACTER_ENCODINGS.length;s++)if(vt.CHARACTER_ENCODINGS[s]===r)return vt.ALPHABET_STRING.charAt(s);if(r===vt.ASTERISK_ENCODING)return"*";throw new V}static decodeExtended(r){let s=r.length,o="";for(let c=0;c<s;c++){let u=r.charAt(c);if(u==="+"||u==="$"||u==="%"||u==="/"){let f=r.charAt(c+1),d="\0";switch(u){case"+":if(f>="A"&&f<="Z")d=String.fromCharCode(f.charCodeAt(0)+32);else throw new j;break;case"$":if(f>="A"&&f<="Z")d=String.fromCharCode(f.charCodeAt(0)-64);else throw new j;break;case"%":if(f>="A"&&f<="E")d=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")d=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")d=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")d=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")d="\0";else if(f==="V")d="@";else if(f==="W")d="`";else if(f==="X"||f==="Y"||f==="Z")d="";else throw new j;break;case"/":if(f>="A"&&f<="O")d=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")d=":";else throw new j;break}o+=d,c++}else o+=u}return o}}vt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",vt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],vt.ASTERISK_ENCODING=148;class We extends At{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(r,s,o){let c=this.decodeStart(s),u=this.decodeEnd(s),f=new ve;We.decodeMiddle(s,c[1],u[0],f);let d=f.toString(),p=null;o!=null&&(p=o.get(K.ALLOWED_LENGTHS)),p==null&&(p=We.DEFAULT_ALLOWED_LENGTHS);let w=d.length,E=!1,A=0;for(let D of p){if(w===D){E=!0;break}D>A&&(A=D)}if(!E&&w>A&&(E=!0),!E)throw new j;const v=[new oe(c[1],r),new oe(u[0],r)];return new tt(d,null,0,v,ae.ITF,new Date().getTime())}static decodeMiddle(r,s,o,c){let u=new Int32Array(10),f=new Int32Array(5),d=new Int32Array(5);for(u.fill(0),f.fill(0),d.fill(0);s<o;){At.recordPattern(r,s,u);for(let w=0;w<5;w++){let E=2*w;f[w]=u[E],d[w]=u[E+1]}let p=We.decodeDigit(f);c.append(p.toString()),p=this.decodeDigit(d),c.append(p.toString()),u.forEach(function(w){s+=w})}}decodeStart(r){let s=We.skipWhiteSpace(r),o=We.findGuardPattern(r,s,We.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(r,o[0]),o}validateQuietZone(r,s){let o=this.narrowLineWidth*10;o=o<s?o:s;for(let c=s-1;o>0&&c>=0&&!r.get(c);c--)o--;if(o!==0)throw new V}static skipWhiteSpace(r){const s=r.getSize(),o=r.getNextSet(0);if(o===s)throw new V;return o}decodeEnd(r){r.reverse();try{let s=We.skipWhiteSpace(r),o;try{o=We.findGuardPattern(r,s,We.END_PATTERN_REVERSED[0])}catch(u){u instanceof V&&(o=We.findGuardPattern(r,s,We.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,o[0]);let c=o[0];return o[0]=r.getSize()-o[1],o[1]=r.getSize()-c,o}finally{r.reverse()}}static findGuardPattern(r,s,o){let c=o.length,u=new Int32Array(c),f=r.getSize(),d=!1,p=0,w=s;u.fill(0);for(let E=s;E<f;E++)if(r.get(E)!==d)u[p]++;else{if(p===c-1){if(At.patternMatchVariance(u,o,We.MAX_INDIVIDUAL_VARIANCE)<We.MAX_AVG_VARIANCE)return[w,E];w+=u[0]+u[1],L.arraycopy(u,2,u,0,p-1),u[p-1]=0,u[p]=0,p--}else p++;u[p]=1,d=!d}throw new V}static decodeDigit(r){let s=We.MAX_AVG_VARIANCE,o=-1,c=We.PATTERNS.length;for(let u=0;u<c;u++){let f=We.PATTERNS[u],d=At.patternMatchVariance(r,f,We.MAX_INDIVIDUAL_VARIANCE);d<s?(s=d,o=u):d===s&&(o=-1)}if(o>=0)return o%10;throw new V}}We.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],We.MAX_AVG_VARIANCE=.38,We.MAX_INDIVIDUAL_VARIANCE=.5,We.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],We.START_PATTERN=Int32Array.from([1,1,1,1]),We.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class gt extends At{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(r){let s=!1,o,c=0,u=Int32Array.from([0,0,0]);for(;!s;){u=Int32Array.from([0,0,0]),o=gt.findGuardPattern(r,c,!1,this.START_END_PATTERN,u);let f=o[0];c=o[1];let d=f-(c-f);d>=0&&(s=r.isRange(d,f,!1))}return o}static checkChecksum(r){return gt.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return gt.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new j;o+=u}o*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new j;o+=u}return(1e3-o)%10}static decodeEnd(r,s){return gt.findGuardPattern(r,s,!1,gt.START_END_PATTERN,new Int32Array(gt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(r,s,o,c){return this.findGuardPattern(r,s,o,c,new Int32Array(c.length))}static findGuardPattern(r,s,o,c,u){let f=r.getSize();s=o?r.getNextUnset(s):r.getNextSet(s);let d=0,p=s,w=c.length,E=o;for(let A=s;A<f;A++)if(r.get(A)!==E)u[d]++;else{if(d===w-1){if(At.patternMatchVariance(u,c,gt.MAX_INDIVIDUAL_VARIANCE)<gt.MAX_AVG_VARIANCE)return Int32Array.from([p,A]);p+=u[0]+u[1];let v=u.slice(2,u.length-1);for(let T=0;T<d-1;T++)u[T]=v[T];u[d-1]=0,u[d]=0,d--}else d++;u[d]=1,E=!E}throw new V}static decodeDigit(r,s,o,c){this.recordPattern(r,o,s);let u=this.MAX_AVG_VARIANCE,f=-1,d=c.length;for(let p=0;p<d;p++){let w=c[p],E=At.patternMatchVariance(s,w,gt.MAX_INDIVIDUAL_VARIANCE);E<u&&(u=E,f=p)}if(f>=0)return f;throw new V}}gt.MAX_AVG_VARIANCE=.48,gt.MAX_INDIVIDUAL_VARIANCE=.7,gt.START_END_PATTERN=Int32Array.from([1,1,1]),gt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),gt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),gt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class fo{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,o,c),f=c.toString(),d=fo.parseExtensionString(f),p=[new oe((o[0]+o[1])/2,r),new oe(u,r)],w=new tt(f,null,0,p,ae.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&w.putAllMetadata(d),w}decodeMiddle(r,s,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),f=s[1],d=0;for(let w=0;w<5&&f<u;w++){let E=gt.decodeDigit(r,c,f,gt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let A of c)f+=A;E>=10&&(d|=1<<4-w),w!==4&&(f=r.getNextSet(f),f=r.getNextUnset(f))}if(o.length!==5)throw new V;let p=this.determineCheckDigit(d);if(fo.extensionChecksum(o.toString())!==p)throw new V;return f}static extensionChecksum(r){let s=r.length,o=0;for(let c=s-2;c>=0;c-=2)o+=r.charAt(c).charCodeAt(0)-48;o*=3;for(let c=s-1;c>=0;c-=2)o+=r.charAt(c).charCodeAt(0)-48;return o*=3,o%10}determineCheckDigit(r){for(let s=0;s<10;s++)if(r===this.CHECK_DIGIT_ENCODINGS[s])return s;throw new V}static parseExtensionString(r){if(r.length!==5)return null;let s=fo.parseExtension5String(r);return s==null?null:new Map([[Dt.SUGGESTED_PRICE,s]])}static parseExtension5String(r){let s;switch(r.charAt(0)){case"0":s="";break;case"5":s="$";break;case"9":switch(r){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}s="";break;default:s="";break}let o=parseInt(r.substring(1)),c=(o/100).toString(),u=o%100,f=u<10?"0"+u:u.toString();return s+c+"."+f}}class fu{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(r,s,o){let c=this.decodeRowStringBuffer,u=this.decodeMiddle(s,o,c),f=c.toString(),d=fu.parseExtensionString(f),p=[new oe((o[0]+o[1])/2,r),new oe(u,r)],w=new tt(f,null,0,p,ae.UPC_EAN_EXTENSION,new Date().getTime());return d!=null&&w.putAllMetadata(d),w}decodeMiddle(r,s,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),f=s[1],d=0;for(let p=0;p<2&&f<u;p++){let w=gt.decodeDigit(r,c,f,gt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+w%10);for(let E of c)f+=E;w>=10&&(d|=1<<1-p),p!==1&&(f=r.getNextSet(f),f=r.getNextUnset(f))}if(o.length!==2)throw new V;if(parseInt(o.toString())%4!==d)throw new V;return f}static parseExtensionString(r){return r.length!==2?null:new Map([[Dt.ISSUE_NUMBER,parseInt(r)]])}}class _1{static decodeRow(r,s,o){let c=gt.findGuardPattern(s,o,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new fo().decodeRow(r,s,c)}catch{return new fu().decodeRow(r,s,c)}}}_1.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class Be extends gt{constructor(){super(),this.decodeRowStringBuffer="",Be.L_AND_G_PATTERNS=Be.L_PATTERNS.map(r=>Int32Array.from(r));for(let r=10;r<20;r++){let s=Be.L_PATTERNS[r-10],o=new Int32Array(s.length);for(let c=0;c<s.length;c++)o[c]=s[s.length-c-1];Be.L_AND_G_PATTERNS[r]=o}}decodeRow(r,s,o){let c=Be.findStartGuardPattern(s),u=o==null?null:o.get(K.NEED_RESULT_POINT_CALLBACK);if(u!=null){const Y=new oe((c[0]+c[1])/2,r);u.foundPossibleResultPoint(Y)}let f=this.decodeMiddle(s,c,this.decodeRowStringBuffer),d=f.rowOffset,p=f.resultString;if(u!=null){const Y=new oe(d,r);u.foundPossibleResultPoint(Y)}let w=this.decodeEnd(s,d);if(u!=null){const Y=new oe((w[0]+w[1])/2,r);u.foundPossibleResultPoint(Y)}let E=w[1],A=E+(E-w[0]);if(A>=s.getSize()||!s.isRange(E,A,!1))throw new V;let v=p.toString();if(v.length<8)throw new j;if(!Be.checkChecksum(v))throw new R;let T=(c[1]+c[0])/2,D=(w[1]+w[0])/2,k=this.getBarcodeFormat(),P=[new oe(T,r),new oe(D,r)],H=new tt(v,null,0,P,k,new Date().getTime()),Q=0;try{let Y=_1.decodeRow(r,s,w[1]);H.putMetadata(Dt.UPC_EAN_EXTENSION,Y.getText()),H.putAllMetadata(Y.getResultMetadata()),H.addResultPoints(Y.getResultPoints()),Q=Y.getText().length}catch{}let Z=o==null?null:o.get(K.ALLOWED_EAN_EXTENSIONS);if(Z!=null){let Y=!1;for(let Me in Z)if(Q.toString()===Me){Y=!0;break}if(!Y)throw new V}return H}decodeEnd(r,s){return Be.findGuardPattern(r,s,!1,Be.START_END_PATTERN,new Int32Array(Be.START_END_PATTERN.length).fill(0))}static checkChecksum(r){return Be.checkStandardUPCEANChecksum(r)}static checkStandardUPCEANChecksum(r){let s=r.length;if(s===0)return!1;let o=parseInt(r.charAt(s-1),10);return Be.getStandardUPCEANChecksum(r.substring(0,s-1))===o}static getStandardUPCEANChecksum(r){let s=r.length,o=0;for(let c=s-1;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new j;o+=u}o*=3;for(let c=s-2;c>=0;c-=2){let u=r.charAt(c).charCodeAt(0)-48;if(u<0||u>9)throw new j;o+=u}return(1e3-o)%10}}class Ni extends Be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){let c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),f=s[1],d=0;for(let w=0;w<6&&f<u;w++){let E=Be.decodeDigit(r,c,f,Be.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let A of c)f+=A;E>=10&&(d|=1<<5-w)}o=Ni.determineFirstDigit(o,d),f=Be.findGuardPattern(r,f,!0,Be.MIDDLE_PATTERN,new Int32Array(Be.MIDDLE_PATTERN.length).fill(0))[1];for(let w=0;w<6&&f<u;w++){let E=Be.decodeDigit(r,c,f,Be.L_PATTERNS);o+=String.fromCharCode(48+E);for(let A of c)f+=A}return{rowOffset:f,resultString:o}}getBarcodeFormat(){return ae.EAN_13}static determineFirstDigit(r,s){for(let o=0;o<10;o++)if(s===this.FIRST_DIGIT_ENCODINGS[o])return r=String.fromCharCode(48+o)+r,r;throw new V}}Ni.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class A1 extends Be{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(r,s,o){const c=this.decodeMiddleCounters;c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),f=s[1];for(let p=0;p<4&&f<u;p++){let w=Be.decodeDigit(r,c,f,Be.L_PATTERNS);o+=String.fromCharCode(48+w);for(let E of c)f+=E}f=Be.findGuardPattern(r,f,!0,Be.MIDDLE_PATTERN,new Int32Array(Be.MIDDLE_PATTERN.length).fill(0))[1];for(let p=0;p<4&&f<u;p++){let w=Be.decodeDigit(r,c,f,Be.L_PATTERNS);o+=String.fromCharCode(48+w);for(let E of c)f+=E}return{rowOffset:f,resultString:o}}getBarcodeFormat(){return ae.EAN_8}}class I1 extends Be{constructor(){super(...arguments),this.ean13Reader=new Ni}getBarcodeFormat(){return ae.UPC_A}decode(r,s){return this.maybeReturnResult(this.ean13Reader.decode(r))}decodeRow(r,s,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,s,o))}decodeMiddle(r,s,o){return this.ean13Reader.decodeMiddle(r,s,o)}maybeReturnResult(r){let s=r.getText();if(s.charAt(0)==="0"){let o=new tt(s.substring(1),null,null,r.getResultPoints(),ae.UPC_A);return r.getResultMetadata()!=null&&o.putAllMetadata(r.getResultMetadata()),o}else throw new V}reset(){this.ean13Reader.reset()}}class Xn extends Be{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(r,s,o){const c=this.decodeMiddleCounters.map(w=>w);c[0]=0,c[1]=0,c[2]=0,c[3]=0;const u=r.getSize();let f=s[1],d=0;for(let w=0;w<6&&f<u;w++){const E=Xn.decodeDigit(r,c,f,Xn.L_AND_G_PATTERNS);o+=String.fromCharCode(48+E%10);for(let A of c)f+=A;E>=10&&(d|=1<<5-w)}let p=Xn.determineNumSysAndCheckDigit(o,d);return{rowOffset:f,resultString:p}}decodeEnd(r,s){return Xn.findGuardPatternWithoutCounters(r,s,!0,Xn.MIDDLE_END_PATTERN)}checkChecksum(r){return Be.checkChecksum(Xn.convertUPCEtoUPCA(r))}static determineNumSysAndCheckDigit(r,s){for(let o=0;o<=1;o++)for(let c=0;c<10;c++)if(s===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][c]){let u=String.fromCharCode(48+o),f=String.fromCharCode(48+c);return u+r+f}throw V.getNotFoundInstance()}getBarcodeFormat(){return ae.UPC_E}static convertUPCEtoUPCA(r){const s=r.slice(1,7).split("").map(u=>u.charCodeAt(0)),o=new ve;o.append(r.charAt(0));let c=s[5];switch(c){case 0:case 1:case 2:o.appendChars(s,0,2),o.append(c),o.append("0000"),o.appendChars(s,2,3);break;case 3:o.appendChars(s,0,3),o.append("00000"),o.appendChars(s,3,2);break;case 4:o.appendChars(s,0,4),o.append("00000"),o.append(s[4]);break;default:o.appendChars(s,0,5),o.append("0000"),o.append(c);break}return r.length>=8&&o.append(r.charAt(7)),o.toString()}}Xn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Xn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class hu extends At{constructor(r){super();let s=r==null?null:r.get(K.POSSIBLE_FORMATS),o=[];i(s)?(o.push(new Ni),o.push(new I1),o.push(new A1),o.push(new Xn)):(s.indexOf(ae.EAN_13)>-1&&o.push(new Ni),s.indexOf(ae.UPC_A)>-1&&o.push(new I1),s.indexOf(ae.EAN_8)>-1&&o.push(new A1),s.indexOf(ae.UPC_E)>-1&&o.push(new Xn)),this.readers=o}decodeRow(r,s,o){for(let c of this.readers)try{const u=c.decodeRow(r,s,o),f=u.getBarcodeFormat()===ae.EAN_13&&u.getText().charAt(0)==="0",d=o==null?null:o.get(K.POSSIBLE_FORMATS),p=d==null||d.includes(ae.UPC_A);if(f&&p){const w=u.getRawBytes(),E=new tt(u.getText().substring(1),w,w?w.length:null,u.getResultPoints(),ae.UPC_A);return E.putAllMetadata(u.getResultMetadata()),E}return u}catch{}throw new V}reset(){for(let r of this.readers)r.reset()}}class Xt extends At{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(r,s){for(let o=0;o<s.length;o++)if(At.patternMatchVariance(r,s[o],Xt.MAX_INDIVIDUAL_VARIANCE)<Xt.MAX_AVG_VARIANCE)return o;throw new V}static count(r){return Oe.sum(new Int32Array(r))}static increment(r,s){let o=0,c=s[0];for(let u=1;u<r.length;u++)s[u]>c&&(c=s[u],o=u);r[o]++}static decrement(r,s){let o=0,c=s[0];for(let u=1;u<r.length;u++)s[u]<c&&(c=s[u],o=u);r[o]--}static isFinderPattern(r){let s=r[0]+r[1],o=s+r[2]+r[3],c=s/o;if(c>=Xt.MIN_FINDER_PATTERN_RATIO&&c<=Xt.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let d of r)d>f&&(f=d),d<u&&(u=d);return f<10*u}return!1}}Xt.MAX_AVG_VARIANCE=.2,Xt.MAX_INDIVIDUAL_VARIANCE=.45,Xt.MIN_FINDER_PATTERN_RATIO=9.5/12,Xt.MAX_FINDER_PATTERN_RATIO=12.5/14;class us{constructor(r,s){this.value=r,this.checksumPortion=s}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(r){if(!(r instanceof us))return!1;const s=r;return this.value===s.value&&this.checksumPortion===s.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Wa{constructor(r,s,o,c,u){this.value=r,this.startEnd=s,this.value=r,this.startEnd=s,this.resultPoints=new Array,this.resultPoints.push(new oe(o,u)),this.resultPoints.push(new oe(c,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(r){if(!(r instanceof Wa))return!1;const s=r;return this.value===s.value}hashCode(){return this.value}}class ur{constructor(){}static getRSSvalue(r,s,o){let c=0;for(let p of r)c+=p;let u=0,f=0,d=r.length;for(let p=0;p<d-1;p++){let w;for(w=1,f|=1<<p;w<r[p];w++,f&=~(1<<p)){let E=ur.combins(c-w-1,d-p-2);if(o&&f===0&&c-w-(d-p-1)>=d-p-1&&(E-=ur.combins(c-w-(d-p),d-p-2)),d-p-1>1){let A=0;for(let v=c-w-(d-p-2);v>s;v--)A+=ur.combins(c-w-v-1,d-p-3);E-=A*(d-1-p)}else c-w>s&&E--;u+=E}c-=w}return u}static combins(r,s){let o,c;r-s>s?(c=s,o=r-s):(c=r-s,o=s);let u=1,f=1;for(let d=r;d>o;d--)u*=d,f<=c&&(u/=f,f++);for(;f<=c;)u/=f,f++;return u}}class iy{static buildBitArray(r){let s=r.length*2-1;r[r.length-1].getRightChar()==null&&(s-=1);let o=12*s,c=new U(o),u=0,d=r[0].getRightChar().getValue();for(let p=11;p>=0;--p)d&1<<p&&c.set(u),u++;for(let p=1;p<r.length;++p){let w=r[p],E=w.getLeftChar().getValue();for(let A=11;A>=0;--A)E&1<<A&&c.set(u),u++;if(w.getRightChar()!=null){let A=w.getRightChar().getValue();for(let v=11;v>=0;--v)A&1<<v&&c.set(u),u++}}return c}}class Ri{constructor(r,s){s?this.decodedInformation=null:(this.finished=r,this.decodedInformation=s)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class du{constructor(r){this.newPosition=r}getNewPosition(){return this.newPosition}}class un extends du{constructor(r,s){super(r),this.value=s}getValue(){return this.value}isFNC1(){return this.value===un.FNC1}}un.FNC1="$";class Mi extends du{constructor(r,s,o){super(r),o?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=s}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class Pn extends du{constructor(r,s,o){if(super(r),s<0||s>10||o<0||o>10)throw new j;this.firstDigit=s,this.secondDigit=o}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===Pn.FNC1}isSecondDigitFNC1(){return this.secondDigit===Pn.FNC1}isAnyFNC1(){return this.firstDigit===Pn.FNC1||this.secondDigit===Pn.FNC1}}Pn.FNC1=10;class ne{constructor(){}static parseFieldsInGeneralPurpose(r){if(!r)return null;if(r.length<2)throw new V;let s=r.substring(0,2);for(let u of ne.TWO_DIGIT_DATA_LENGTH)if(u[0]===s)return u[1]===ne.VARIABLE_LENGTH?ne.processVariableAI(2,u[2],r):ne.processFixedAI(2,u[1],r);if(r.length<3)throw new V;let o=r.substring(0,3);for(let u of ne.THREE_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===ne.VARIABLE_LENGTH?ne.processVariableAI(3,u[2],r):ne.processFixedAI(3,u[1],r);for(let u of ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===ne.VARIABLE_LENGTH?ne.processVariableAI(4,u[2],r):ne.processFixedAI(4,u[1],r);if(r.length<4)throw new V;let c=r.substring(0,4);for(let u of ne.FOUR_DIGIT_DATA_LENGTH)if(u[0]===c)return u[1]===ne.VARIABLE_LENGTH?ne.processVariableAI(4,u[2],r):ne.processFixedAI(4,u[1],r);throw new V}static processFixedAI(r,s,o){if(o.length<r)throw new V;let c=o.substring(0,r);if(o.length<r+s)throw new V;let u=o.substring(r,r+s),f=o.substring(r+s),d="("+c+")"+u,p=ne.parseFieldsInGeneralPurpose(f);return p==null?d:d+p}static processVariableAI(r,s,o){let c=o.substring(0,r),u;o.length<r+s?u=o.length:u=r+s;let f=o.substring(r,u),d=o.substring(u),p="("+c+")"+f,w=ne.parseFieldsInGeneralPurpose(d);return w==null?p:p+w}}ne.VARIABLE_LENGTH=[],ne.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",ne.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",ne.VARIABLE_LENGTH,20],["22",ne.VARIABLE_LENGTH,29],["30",ne.VARIABLE_LENGTH,8],["37",ne.VARIABLE_LENGTH,8],["90",ne.VARIABLE_LENGTH,30],["91",ne.VARIABLE_LENGTH,30],["92",ne.VARIABLE_LENGTH,30],["93",ne.VARIABLE_LENGTH,30],["94",ne.VARIABLE_LENGTH,30],["95",ne.VARIABLE_LENGTH,30],["96",ne.VARIABLE_LENGTH,30],["97",ne.VARIABLE_LENGTH,3],["98",ne.VARIABLE_LENGTH,30],["99",ne.VARIABLE_LENGTH,30]],ne.THREE_DIGIT_DATA_LENGTH=[["240",ne.VARIABLE_LENGTH,30],["241",ne.VARIABLE_LENGTH,30],["242",ne.VARIABLE_LENGTH,6],["250",ne.VARIABLE_LENGTH,30],["251",ne.VARIABLE_LENGTH,30],["253",ne.VARIABLE_LENGTH,17],["254",ne.VARIABLE_LENGTH,20],["400",ne.VARIABLE_LENGTH,30],["401",ne.VARIABLE_LENGTH,30],["402",17],["403",ne.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",ne.VARIABLE_LENGTH,20],["421",ne.VARIABLE_LENGTH,15],["422",3],["423",ne.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],ne.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",ne.VARIABLE_LENGTH,15],["391",ne.VARIABLE_LENGTH,18],["392",ne.VARIABLE_LENGTH,15],["393",ne.VARIABLE_LENGTH,18],["703",ne.VARIABLE_LENGTH,30]],ne.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",ne.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",ne.VARIABLE_LENGTH,20],["8003",ne.VARIABLE_LENGTH,30],["8004",ne.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",ne.VARIABLE_LENGTH,30],["8008",ne.VARIABLE_LENGTH,12],["8018",18],["8020",ne.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",ne.VARIABLE_LENGTH,70],["8200",ne.VARIABLE_LENGTH,70]];class fs{constructor(r){this.buffer=new ve,this.information=r}decodeAllCodes(r,s){let o=s,c=null;do{let u=this.decodeGeneralPurposeField(o,c),f=ne.parseFieldsInGeneralPurpose(u.getNewString());if(f!=null&&r.append(f),u.isRemaining()?c=""+u.getRemainingValue():c=null,o===u.getNewPosition())break;o=u.getNewPosition()}while(!0);return r.toString()}isStillNumeric(r){if(r+7>this.information.getSize())return r+4<=this.information.getSize();for(let s=r;s<r+3;++s)if(this.information.get(s))return!0;return this.information.get(r+3)}decodeNumeric(r){if(r+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(r,4);return u===0?new Pn(this.information.getSize(),Pn.FNC1,Pn.FNC1):new Pn(this.information.getSize(),u-1,Pn.FNC1)}let s=this.extractNumericValueFromBitArray(r,7),o=(s-8)/11,c=(s-8)%11;return new Pn(r+7,o,c)}extractNumericValueFromBitArray(r,s){return fs.extractNumericValueFromBitArray(this.information,r,s)}static extractNumericValueFromBitArray(r,s,o){let c=0;for(let u=0;u<o;++u)r.get(s+u)&&(c|=1<<o-u-1);return c}decodeGeneralPurposeField(r,s){this.buffer.setLengthToZero(),s!=null&&this.buffer.append(s),this.current.setPosition(r);let o=this.parseBlocks();return o!=null&&o.isRemaining()?new Mi(this.current.getPosition(),this.buffer.toString(),o.getRemainingValue()):new Mi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let r,s;do{let o=this.current.getPosition();if(this.current.isAlpha()?(s=this.parseAlphaBlock(),r=s.isFinished()):this.current.isIsoIec646()?(s=this.parseIsoIec646Block(),r=s.isFinished()):(s=this.parseNumericBlock(),r=s.isFinished()),!(o!==this.current.getPosition())&&!r)break}while(!r);return s.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let r=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFirstDigitFNC1()){let s;return r.isSecondDigitFNC1()?s=new Mi(this.current.getPosition(),this.buffer.toString()):s=new Mi(this.current.getPosition(),this.buffer.toString(),r.getSecondDigit()),new Ri(!0,s)}if(this.buffer.append(r.getFirstDigit()),r.isSecondDigitFNC1()){let s=new Mi(this.current.getPosition(),this.buffer.toString());return new Ri(!0,s)}this.buffer.append(r.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ri(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let r=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Mi(this.current.getPosition(),this.buffer.toString());return new Ri(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ri(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let r=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(r.getNewPosition()),r.isFNC1()){let s=new Mi(this.current.getPosition(),this.buffer.toString());return new Ri(!0,s)}this.buffer.append(r.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ri(!1)}isStillIsoIec646(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+7>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<116)return!0;if(r+8>this.information.getSize())return!1;let c=this.extractNumericValueFromBitArray(r,8);return c>=232&&c<253}decodeIsoIec646(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new un(r+5,un.FNC1);if(s>=5&&s<15)return new un(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,7);if(o>=64&&o<90)return new un(r+7,""+(o+1));if(o>=90&&o<116)return new un(r+7,""+(o+7));let c=this.extractNumericValueFromBitArray(r,8),u;switch(c){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new j}return new un(r+8,u)}isStillAlpha(r){if(r+5>this.information.getSize())return!1;let s=this.extractNumericValueFromBitArray(r,5);if(s>=5&&s<16)return!0;if(r+6>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(r,6);return o>=16&&o<63}decodeAlphanumeric(r){let s=this.extractNumericValueFromBitArray(r,5);if(s===15)return new un(r+5,un.FNC1);if(s>=5&&s<15)return new un(r+5,"0"+(s-5));let o=this.extractNumericValueFromBitArray(r,6);if(o>=32&&o<58)return new un(r+6,""+(o+33));let c;switch(o){case 58:c="*";break;case 59:c=",";break;case 60:c="-";break;case 61:c=".";break;case 62:c="/";break;default:throw new cr("Decoding invalid alphanumeric value: "+o)}return new un(r+6,c)}isAlphaTo646ToAlphaLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<5&&s+r<this.information.getSize();++s)if(s===2){if(!this.information.get(r+2))return!1}else if(this.information.get(r+s))return!1;return!0}isAlphaOr646ToNumericLatch(r){if(r+3>this.information.getSize())return!1;for(let s=r;s<r+3;++s)if(this.information.get(s))return!1;return!0}isNumericToAlphaNumericLatch(r){if(r+1>this.information.getSize())return!1;for(let s=0;s<4&&s+r<this.information.getSize();++s)if(this.information.get(r+s))return!1;return!0}}class gu{constructor(r){this.information=r,this.generalDecoder=new fs(r)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class fn extends gu{constructor(r){super(r)}encodeCompressedGtin(r,s){r.append("(01)");let o=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,s,o)}encodeCompressedGtinWithoutAI(r,s,o){for(let c=0;c<4;++c){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(s+10*c,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}fn.appendCheckDigit(r,o)}static appendCheckDigit(r,s){let o=0;for(let c=0;c<13;c++){let u=r.charAt(c+s).charCodeAt(0)-48;o+=c&1?u:3*u}o=10-o%10,o===10&&(o=0),r.append(o)}}fn.GTIN_SIZE=40;class hs extends fn{constructor(r){super(r)}parseInformation(){let r=new ve;r.append("(01)");let s=r.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(hs.HEADER_SIZE,4);return r.append(o),this.encodeCompressedGtinWithoutAI(r,hs.HEADER_SIZE+4,s),this.getGeneralDecoder().decodeAllCodes(r,hs.HEADER_SIZE+44)}}hs.HEADER_SIZE=4;class Ga extends gu{constructor(r){super(r)}parseInformation(){let r=new ve;return this.getGeneralDecoder().decodeAllCodes(r,Ga.HEADER_SIZE)}}Ga.HEADER_SIZE=5;class Ya extends fn{constructor(r){super(r)}encodeCompressedWeight(r,s,o){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(s,o);this.addWeightCode(r,c);let u=this.checkWeight(c),f=1e5;for(let d=0;d<5;++d)u/f===0&&r.append("0"),f/=10;r.append(u)}}class fr extends Ya{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()!=fr.HEADER_SIZE+Ya.GTIN_SIZE+fr.WEIGHT_SIZE)throw new V;let r=new ve;return this.encodeCompressedGtin(r,fr.HEADER_SIZE),this.encodeCompressedWeight(r,fr.HEADER_SIZE+Ya.GTIN_SIZE,fr.WEIGHT_SIZE),r.toString()}}fr.HEADER_SIZE=5,fr.WEIGHT_SIZE=15;class sy extends fr{constructor(r){super(r)}addWeightCode(r,s){r.append("(3103)")}checkWeight(r){return r}}class oy extends fr{constructor(r){super(r)}addWeightCode(r,s){s<1e4?r.append("(3202)"):r.append("(3203)")}checkWeight(r){return r<1e4?r:r-1e4}}class hr extends fn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<hr.HEADER_SIZE+fn.GTIN_SIZE)throw new V;let r=new ve;this.encodeCompressedGtin(r,hr.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(hr.HEADER_SIZE+fn.GTIN_SIZE,hr.LAST_DIGIT_SIZE);r.append("(392"),r.append(s),r.append(")");let o=this.getGeneralDecoder().decodeGeneralPurposeField(hr.HEADER_SIZE+fn.GTIN_SIZE+hr.LAST_DIGIT_SIZE,null);return r.append(o.getNewString()),r.toString()}}hr.HEADER_SIZE=8,hr.LAST_DIGIT_SIZE=2;class tn extends fn{constructor(r){super(r)}parseInformation(){if(this.getInformation().getSize()<tn.HEADER_SIZE+fn.GTIN_SIZE)throw new V;let r=new ve;this.encodeCompressedGtin(r,tn.HEADER_SIZE);let s=this.getGeneralDecoder().extractNumericValueFromBitArray(tn.HEADER_SIZE+fn.GTIN_SIZE,tn.LAST_DIGIT_SIZE);r.append("(393"),r.append(s),r.append(")");let o=this.getGeneralDecoder().extractNumericValueFromBitArray(tn.HEADER_SIZE+fn.GTIN_SIZE+tn.LAST_DIGIT_SIZE,tn.FIRST_THREE_DIGITS_SIZE);o/100==0&&r.append("0"),o/10==0&&r.append("0"),r.append(o);let c=this.getGeneralDecoder().decodeGeneralPurposeField(tn.HEADER_SIZE+fn.GTIN_SIZE+tn.LAST_DIGIT_SIZE+tn.FIRST_THREE_DIGITS_SIZE,null);return r.append(c.getNewString()),r.toString()}}tn.HEADER_SIZE=8,tn.LAST_DIGIT_SIZE=2,tn.FIRST_THREE_DIGITS_SIZE=10;class ot extends Ya{constructor(r,s,o){super(r),this.dateCode=o,this.firstAIdigits=s}parseInformation(){if(this.getInformation().getSize()!=ot.HEADER_SIZE+ot.GTIN_SIZE+ot.WEIGHT_SIZE+ot.DATE_SIZE)throw new V;let r=new ve;return this.encodeCompressedGtin(r,ot.HEADER_SIZE),this.encodeCompressedWeight(r,ot.HEADER_SIZE+ot.GTIN_SIZE,ot.WEIGHT_SIZE),this.encodeCompressedDate(r,ot.HEADER_SIZE+ot.GTIN_SIZE+ot.WEIGHT_SIZE),r.toString()}encodeCompressedDate(r,s){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(s,ot.DATE_SIZE);if(o==38400)return;r.append("("),r.append(this.dateCode),r.append(")");let c=o%32;o/=32;let u=o%12+1;o/=12;let f=o;f/10==0&&r.append("0"),r.append(f),u/10==0&&r.append("0"),r.append(u),c/10==0&&r.append("0"),r.append(c)}addWeightCode(r,s){r.append("("),r.append(this.firstAIdigits),r.append(s/1e5),r.append(")")}checkWeight(r){return r%1e5}}ot.HEADER_SIZE=8,ot.WEIGHT_SIZE=20,ot.DATE_SIZE=16;function v1(_){try{if(_.get(1))return new hs(_);if(!_.get(2))return new Ga(_);switch(fs.extractNumericValueFromBitArray(_,1,4)){case 4:return new sy(_);case 5:return new oy(_)}switch(fs.extractNumericValueFromBitArray(_,1,5)){case 12:return new hr(_);case 13:return new tn(_)}switch(fs.extractNumericValueFromBitArray(_,1,7)){case 56:return new ot(_,"310","11");case 57:return new ot(_,"320","11");case 58:return new ot(_,"310","13");case 59:return new ot(_,"320","13");case 60:return new ot(_,"310","15");case 61:return new ot(_,"320","15");case 62:return new ot(_,"310","17");case 63:return new ot(_,"320","17")}}catch(r){throw console.log(r),new cr("unknown decoder: "+_)}}class Wr{constructor(r,s,o,c){this.leftchar=r,this.rightchar=s,this.finderpattern=o,this.maybeLast=c}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(r,s){return r instanceof Wr?Wr.equalsOrNull(r.leftchar,s.leftchar)&&Wr.equalsOrNull(r.rightchar,s.rightchar)&&Wr.equalsOrNull(r.finderpattern,s.finderpattern):!1}static equalsOrNull(r,s){return r===null?s===null:Wr.equals(r,s)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class pu{constructor(r,s,o){this.pairs=r,this.rowNumber=s,this.wasReversed=o}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(r){return this.checkEqualitity(this,r)}toString(){return"{ "+this.pairs+" }"}equals(r,s){return r instanceof pu?this.checkEqualitity(r,s)&&r.wasReversed===s.wasReversed:!1}checkEqualitity(r,s){if(!r||!s)return;let o;return r.forEach((c,u)=>{s.forEach(f=>{c.getLeftChar().getValue()===f.getLeftChar().getValue()&&c.getRightChar().getValue()===f.getRightChar().getValue()&&c.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(o=!0)})}),o}}class G extends Xt{constructor(r){super(...arguments),this.pairs=new Array(G.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=r===!0}decodeRow(r,s,o){this.pairs.length=0,this.startFromEven=!1;try{return G.constructResult(this.decodeRow2pairs(r,s))}catch(c){this.verbose&&console.log(c)}return this.pairs.length=0,this.startFromEven=!0,G.constructResult(this.decodeRow2pairs(r,s))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(r,s){let o=!1;for(;!o;)try{this.pairs.push(this.retrieveNextPair(s,this.pairs,r))}catch(u){if(u instanceof V){if(!this.pairs.length)throw new V;o=!0}}if(this.checkChecksum())return this.pairs;let c;if(this.rows.length?c=!0:c=!1,this.storeRow(r,!1),c){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new V}checkRowsBoolean(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());let s=null;try{s=this.checkRows(new Array,0)}catch(o){this.verbose&&console.log(o)}return r&&(this.rows=this.rows.reverse()),s}checkRows(r,s){for(let o=s;o<this.rows.length;o++){let c=this.rows[o];this.pairs.length=0;for(let f of r)this.pairs.push(f.getPairs());if(this.pairs.push(c.getPairs()),!G.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(r);u.push(c);try{return this.checkRows(u,o+1)}catch(f){this.verbose&&console.log(f)}}throw new V}static isValidSequence(r){for(let s of G.FINDER_PATTERN_SEQUENCES){if(r.length>s.length)continue;let o=!0;for(let c=0;c<r.length;c++)if(r[c].getFinderPattern().getValue()!=s[c]){o=!1;break}if(o)return!0}return!1}storeRow(r,s){let o=0,c=!1,u=!1;for(;o<this.rows.length;){let f=this.rows[o];if(f.getRowNumber()>r){u=f.isEquivalent(this.pairs);break}c=f.isEquivalent(this.pairs),o++}u||c||G.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new pu(this.pairs,r,s)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(r,s){for(let o of s)if(o.getPairs().length!==r.length){for(let c of o.getPairs())for(let u of r)if(Wr.equals(c,u))break}}static isPartialRow(r,s){for(let o of s){let c=!0;for(let u of r){let f=!1;for(let d of o.getPairs())if(u.equals(d)){f=!0;break}if(!f){c=!1;break}}if(c)return!0}return!1}getRows(){return this.rows}static constructResult(r){let s=iy.buildBitArray(r),c=v1(s).parseInformation(),u=r[0].getFinderPattern().getResultPoints(),f=r[r.length-1].getFinderPattern().getResultPoints(),d=[u[0],u[1],f[0],f[1]];return new tt(c,null,null,d,ae.RSS_EXPANDED,null)}checkChecksum(){let r=this.pairs.get(0),s=r.getLeftChar(),o=r.getRightChar();if(o==null)return!1;let c=o.getChecksumPortion(),u=2;for(let d=1;d<this.pairs.size();++d){let p=this.pairs.get(d);c+=p.getLeftChar().getChecksumPortion(),u++;let w=p.getRightChar();w!=null&&(c+=w.getChecksumPortion(),u++)}return c%=211,211*(u-4)+c==s.getValue()}static getNextSecondBar(r,s){let o;return r.get(s)?(o=r.getNextUnset(s),o=r.getNextSet(o)):(o=r.getNextSet(s),o=r.getNextUnset(o)),o}retrieveNextPair(r,s,o){let c=s.length%2==0;this.startFromEven&&(c=!c);let u,f=!0,d=-1;do this.findNextPair(r,s,d),u=this.parseFoundFinderPattern(r,o,c),u==null?d=G.getNextSecondBar(r,this.startEnd[0]):f=!1;while(f);let p=this.decodeDataCharacter(r,u,c,!0);if(!this.isEmptyPair(s)&&s[s.length-1].mustBeLast())throw new V;let w;try{w=this.decodeDataCharacter(r,u,c,!1)}catch(E){w=null,this.verbose&&console.log(E)}return new Wr(p,w,u,!0)}isEmptyPair(r){return r.length===0}findNextPair(r,s,o){let c=this.getDecodeFinderCounters();c[0]=0,c[1]=0,c[2]=0,c[3]=0;let u=r.getSize(),f;o>=0?f=o:this.isEmptyPair(s)?f=0:f=s[s.length-1].getFinderPattern().getStartEnd()[1];let d=s.length%2!=0;this.startFromEven&&(d=!d);let p=!1;for(;f<u&&(p=!r.get(f),!!p);)f++;let w=0,E=f;for(let A=f;A<u;A++)if(r.get(A)!=p)c[w]++;else{if(w==3){if(d&&G.reverseCounters(c),G.isFinderPattern(c)){this.startEnd[0]=E,this.startEnd[1]=A;return}d&&G.reverseCounters(c),E+=c[0]+c[1],c[0]=c[2],c[1]=c[3],c[2]=0,c[3]=0,w--}else w++;c[w]=1,p=!p}throw new V}static reverseCounters(r){let s=r.length;for(let o=0;o<s/2;++o){let c=r[o];r[o]=r[s-o-1],r[s-o-1]=c}}parseFoundFinderPattern(r,s,o){let c,u,f;if(o){let w=this.startEnd[0]-1;for(;w>=0&&!r.get(w);)w--;w++,c=this.startEnd[0]-w,u=w,f=this.startEnd[1]}else u=this.startEnd[0],f=r.getNextUnset(this.startEnd[1]+1),c=f-this.startEnd[1];let d=this.getDecodeFinderCounters();L.arraycopy(d,0,d,1,d.length-1),d[0]=c;let p;try{p=this.parseFinderValue(d,G.FINDER_PATTERNS)}catch{return null}return new Wa(p,[u,f],u,f,s)}decodeDataCharacter(r,s,o,c){let u=this.getDataCharacterCounters();for(let Ye=0;Ye<u.length;Ye++)u[Ye]=0;if(c)G.recordPatternInReverse(r,s.getStartEnd()[0],u);else{G.recordPattern(r,s.getStartEnd()[1],u);for(let Ye=0,Vt=u.length-1;Ye<Vt;Ye++,Vt--){let vn=u[Ye];u[Ye]=u[Vt],u[Vt]=vn}}let f=17,d=Oe.sum(new Int32Array(u))/f,p=(s.getStartEnd()[1]-s.getStartEnd()[0])/15;if(Math.abs(d-p)/p>.3)throw new V;let w=this.getOddCounts(),E=this.getEvenCounts(),A=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let Ye=0;Ye<u.length;Ye++){let Vt=1*u[Ye]/d,vn=Vt+.5;if(vn<1){if(Vt<.3)throw new V;vn=1}else if(vn>8){if(Vt>8.7)throw new V;vn=8}let xs=Ye/2;Ye&1?(E[xs]=vn,v[xs]=Vt-vn):(w[xs]=vn,A[xs]=Vt-vn)}this.adjustOddEvenCounts(f);let T=4*s.getValue()+(o?0:2)+(c?0:1)-1,D=0,k=0;for(let Ye=w.length-1;Ye>=0;Ye--){if(G.isNotA1left(s,o,c)){let Vt=G.WEIGHTS[T][2*Ye];k+=w[Ye]*Vt}D+=w[Ye]}let P=0;for(let Ye=E.length-1;Ye>=0;Ye--)if(G.isNotA1left(s,o,c)){let Vt=G.WEIGHTS[T][2*Ye+1];P+=E[Ye]*Vt}let H=k+P;if(D&1||D>13||D<4)throw new V;let Q=(13-D)/2,Z=G.SYMBOL_WIDEST[Q],Y=9-Z,Me=ur.getRSSvalue(w,Z,!0),ye=ur.getRSSvalue(E,Y,!1),dn=G.EVEN_TOTAL_SUBSET[Q],Qn=G.GSUM[Q],gn=Me*dn+ye+Qn;return new us(gn,H)}static isNotA1left(r,s,o){return!(r.getValue()==0&&s&&o)}adjustOddEvenCounts(r){let s=Oe.sum(new Int32Array(this.getOddCounts())),o=Oe.sum(new Int32Array(this.getEvenCounts())),c=!1,u=!1;s>13?u=!0:s<4&&(c=!0);let f=!1,d=!1;o>13?d=!0:o<4&&(f=!0);let p=s+o-r,w=(s&1)==1,E=(o&1)==0;if(p==1)if(w){if(E)throw new V;u=!0}else{if(!E)throw new V;d=!0}else if(p==-1)if(w){if(E)throw new V;c=!0}else{if(!E)throw new V;f=!0}else if(p==0){if(w){if(!E)throw new V;s<o?(c=!0,d=!0):(u=!0,f=!0)}else if(E)throw new V}else throw new V;if(c){if(u)throw new V;G.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&G.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(d)throw new V;G.increment(this.getEvenCounts(),this.getOddRoundingErrors())}d&&G.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}G.SYMBOL_WIDEST=[7,5,4,3,1],G.EVEN_TOTAL_SUBSET=[4,20,52,104,204],G.GSUM=[0,348,1388,2948,3988],G.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],G.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],G.FINDER_PAT_A=0,G.FINDER_PAT_B=1,G.FINDER_PAT_C=2,G.FINDER_PAT_D=3,G.FINDER_PAT_E=4,G.FINDER_PAT_F=5,G.FINDER_PATTERN_SEQUENCES=[[G.FINDER_PAT_A,G.FINDER_PAT_A],[G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B],[G.FINDER_PAT_A,G.FINDER_PAT_C,G.FINDER_PAT_B,G.FINDER_PAT_D],[G.FINDER_PAT_A,G.FINDER_PAT_E,G.FINDER_PAT_B,G.FINDER_PAT_D,G.FINDER_PAT_C],[G.FINDER_PAT_A,G.FINDER_PAT_E,G.FINDER_PAT_B,G.FINDER_PAT_D,G.FINDER_PAT_D,G.FINDER_PAT_F],[G.FINDER_PAT_A,G.FINDER_PAT_E,G.FINDER_PAT_B,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_F,G.FINDER_PAT_F],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_D],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_E],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_F,G.FINDER_PAT_F],[G.FINDER_PAT_A,G.FINDER_PAT_A,G.FINDER_PAT_B,G.FINDER_PAT_B,G.FINDER_PAT_C,G.FINDER_PAT_D,G.FINDER_PAT_D,G.FINDER_PAT_E,G.FINDER_PAT_E,G.FINDER_PAT_F,G.FINDER_PAT_F]],G.MAX_PAIRS=11;class ay extends us{constructor(r,s,o){super(r,s),this.count=0,this.finderPattern=o}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class pt extends Xt{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(r,s,o){const c=this.decodePair(s,!1,r,o);pt.addOrTally(this.possibleLeftPairs,c),s.reverse();let u=this.decodePair(s,!0,r,o);pt.addOrTally(this.possibleRightPairs,u),s.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let d of this.possibleRightPairs)if(d.getCount()>1&&pt.checkChecksum(f,d))return pt.constructResult(f,d)}throw new V}static addOrTally(r,s){if(s==null)return;let o=!1;for(let c of r)if(c.getValue()===s.getValue()){c.incrementCount(),o=!0;break}o||r.push(s)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(r,s){let o=4537077*r.getValue()+s.getValue(),c=new String(o).toString(),u=new ve;for(let w=13-c.length;w>0;w--)u.append("0");u.append(c);let f=0;for(let w=0;w<13;w++){let E=u.charAt(w).charCodeAt(0)-48;f+=w&1?E:3*E}f=10-f%10,f===10&&(f=0),u.append(f.toString());let d=r.getFinderPattern().getResultPoints(),p=s.getFinderPattern().getResultPoints();return new tt(u.toString(),null,0,[d[0],d[1],p[0],p[1]],ae.RSS_14,new Date().getTime())}static checkChecksum(r,s){let o=(r.getChecksumPortion()+16*s.getChecksumPortion())%79,c=9*r.getFinderPattern().getValue()+s.getFinderPattern().getValue();return c>72&&c--,c>8&&c--,o===c}decodePair(r,s,o,c){try{let u=this.findFinderPattern(r,s),f=this.parseFoundFinderPattern(r,o,s,u),d=c==null?null:c.get(K.NEED_RESULT_POINT_CALLBACK);if(d!=null){let E=(u[0]+u[1])/2;s&&(E=r.getSize()-1-E),d.foundPossibleResultPoint(new oe(E,o))}let p=this.decodeDataCharacter(r,f,!0),w=this.decodeDataCharacter(r,f,!1);return new ay(1597*p.getValue()+w.getValue(),p.getChecksumPortion()+4*w.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(r,s,o){let c=this.getDataCharacterCounters();for(let P=0;P<c.length;P++)c[P]=0;if(o)At.recordPatternInReverse(r,s.getStartEnd()[0],c);else{At.recordPattern(r,s.getStartEnd()[1]+1,c);for(let P=0,H=c.length-1;P<H;P++,H--){let Q=c[P];c[P]=c[H],c[H]=Q}}let u=o?16:15,f=Oe.sum(new Int32Array(c))/u,d=this.getOddCounts(),p=this.getEvenCounts(),w=this.getOddRoundingErrors(),E=this.getEvenRoundingErrors();for(let P=0;P<c.length;P++){let H=c[P]/f,Q=Math.floor(H+.5);Q<1?Q=1:Q>8&&(Q=8);let Z=Math.floor(P/2);P&1?(p[Z]=Q,E[Z]=H-Q):(d[Z]=Q,w[Z]=H-Q)}this.adjustOddEvenCounts(o,u);let A=0,v=0;for(let P=d.length-1;P>=0;P--)v*=9,v+=d[P],A+=d[P];let T=0,D=0;for(let P=p.length-1;P>=0;P--)T*=9,T+=p[P],D+=p[P];let k=v+3*T;if(o){if(A&1||A>12||A<4)throw new V;let P=(12-A)/2,H=pt.OUTSIDE_ODD_WIDEST[P],Q=9-H,Z=ur.getRSSvalue(d,H,!1),Y=ur.getRSSvalue(p,Q,!0),Me=pt.OUTSIDE_EVEN_TOTAL_SUBSET[P],ye=pt.OUTSIDE_GSUM[P];return new us(Z*Me+Y+ye,k)}else{if(D&1||D>10||D<4)throw new V;let P=(10-D)/2,H=pt.INSIDE_ODD_WIDEST[P],Q=9-H,Z=ur.getRSSvalue(d,H,!0),Y=ur.getRSSvalue(p,Q,!1),Me=pt.INSIDE_ODD_TOTAL_SUBSET[P],ye=pt.INSIDE_GSUM[P];return new us(Y*Me+Z+ye,k)}}findFinderPattern(r,s){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let c=r.getSize(),u=!1,f=0;for(;f<c&&(u=!r.get(f),s!==u);)f++;let d=0,p=f;for(let w=f;w<c;w++)if(r.get(w)!==u)o[d]++;else{if(d===3){if(Xt.isFinderPattern(o))return[p,w];p+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,d--}else d++;o[d]=1,u=!u}throw new V}parseFoundFinderPattern(r,s,o,c){let u=r.get(c[0]),f=c[0]-1;for(;f>=0&&u!==r.get(f);)f--;f++;const d=c[0]-f,p=this.getDecodeFinderCounters(),w=new Int32Array(p.length);L.arraycopy(p,0,w,1,p.length-1),w[0]=d;const E=this.parseFinderValue(w,pt.FINDER_PATTERNS);let A=f,v=c[1];return o&&(A=r.getSize()-1-A,v=r.getSize()-1-v),new Wa(E,[f,c[1]],A,v,s)}adjustOddEvenCounts(r,s){let o=Oe.sum(new Int32Array(this.getOddCounts())),c=Oe.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1,d=!1,p=!1;r?(o>12?f=!0:o<4&&(u=!0),c>12?p=!0:c<4&&(d=!0)):(o>11?f=!0:o<5&&(u=!0),c>10?p=!0:c<4&&(d=!0));let w=o+c-s,E=(o&1)===(r?1:0),A=(c&1)===1;if(w===1)if(E){if(A)throw new V;f=!0}else{if(!A)throw new V;p=!0}else if(w===-1)if(E){if(A)throw new V;u=!0}else{if(!A)throw new V;d=!0}else if(w===0){if(E){if(!A)throw new V;o<c?(u=!0,p=!0):(f=!0,d=!0)}else if(A)throw new V}else throw new V;if(u){if(f)throw new V;Xt.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&Xt.decrement(this.getOddCounts(),this.getOddRoundingErrors()),d){if(p)throw new V;Xt.increment(this.getEvenCounts(),this.getOddRoundingErrors())}p&&Xt.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}pt.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],pt.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],pt.OUTSIDE_GSUM=[0,161,961,2015,2715],pt.INSIDE_GSUM=[0,336,1036,1516],pt.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],pt.INSIDE_ODD_WIDEST=[2,4,6,8],pt.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ds extends At{constructor(r,s){super(),this.readers=[],this.verbose=s===!0;const o=r?r.get(K.POSSIBLE_FORMATS):null,c=r&&r.get(K.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;o?((o.includes(ae.EAN_13)||o.includes(ae.UPC_A)||o.includes(ae.EAN_8)||o.includes(ae.UPC_E))&&this.readers.push(new hu(r)),o.includes(ae.CODE_39)&&this.readers.push(new vt(c)),o.includes(ae.CODE_128)&&this.readers.push(new ee),o.includes(ae.ITF)&&this.readers.push(new We),o.includes(ae.RSS_14)&&this.readers.push(new pt),o.includes(ae.RSS_EXPANDED)&&this.readers.push(new G(this.verbose))):(this.readers.push(new hu(r)),this.readers.push(new vt),this.readers.push(new hu(r)),this.readers.push(new ee),this.readers.push(new We),this.readers.push(new pt),this.readers.push(new G(this.verbose)))}decodeRow(r,s,o){for(let c=0;c<this.readers.length;c++)try{return this.readers[c].decodeRow(r,s,o)}catch{}throw new V}reset(){this.readers.forEach(r=>r.reset())}}class ly extends ln{constructor(r=500,s){super(new ds(s),r,s)}}class Ue{constructor(r,s,o){this.ecCodewords=r,this.ecBlocks=[s],o&&this.ecBlocks.push(o)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class Fe{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class be{constructor(r,s,o,c,u,f){this.versionNumber=r,this.symbolSizeRows=s,this.symbolSizeColumns=o,this.dataRegionSizeRows=c,this.dataRegionSizeColumns=u,this.ecBlocks=f;let d=0;const p=f.getECCodewords(),w=f.getECBlocks();for(let E of w)d+=E.getCount()*(E.getDataCodewords()+p);this.totalCodewords=d}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(r,s){if(r&1||s&1)throw new j;for(let o of be.VERSIONS)if(o.symbolSizeRows===r&&o.symbolSizeColumns===s)return o;throw new j}toString(){return""+this.versionNumber}static buildVersions(){return[new be(1,10,10,8,8,new Ue(5,new Fe(1,3))),new be(2,12,12,10,10,new Ue(7,new Fe(1,5))),new be(3,14,14,12,12,new Ue(10,new Fe(1,8))),new be(4,16,16,14,14,new Ue(12,new Fe(1,12))),new be(5,18,18,16,16,new Ue(14,new Fe(1,18))),new be(6,20,20,18,18,new Ue(18,new Fe(1,22))),new be(7,22,22,20,20,new Ue(20,new Fe(1,30))),new be(8,24,24,22,22,new Ue(24,new Fe(1,36))),new be(9,26,26,24,24,new Ue(28,new Fe(1,44))),new be(10,32,32,14,14,new Ue(36,new Fe(1,62))),new be(11,36,36,16,16,new Ue(42,new Fe(1,86))),new be(12,40,40,18,18,new Ue(48,new Fe(1,114))),new be(13,44,44,20,20,new Ue(56,new Fe(1,144))),new be(14,48,48,22,22,new Ue(68,new Fe(1,174))),new be(15,52,52,24,24,new Ue(42,new Fe(2,102))),new be(16,64,64,14,14,new Ue(56,new Fe(2,140))),new be(17,72,72,16,16,new Ue(36,new Fe(4,92))),new be(18,80,80,18,18,new Ue(48,new Fe(4,114))),new be(19,88,88,20,20,new Ue(56,new Fe(4,144))),new be(20,96,96,22,22,new Ue(68,new Fe(4,174))),new be(21,104,104,24,24,new Ue(56,new Fe(6,136))),new be(22,120,120,18,18,new Ue(68,new Fe(6,175))),new be(23,132,132,20,20,new Ue(62,new Fe(8,163))),new be(24,144,144,22,22,new Ue(62,new Fe(8,156),new Fe(2,155))),new be(25,8,18,6,16,new Ue(7,new Fe(1,5))),new be(26,8,32,6,14,new Ue(11,new Fe(1,10))),new be(27,12,26,10,24,new Ue(14,new Fe(1,16))),new be(28,12,36,10,16,new Ue(18,new Fe(1,22))),new be(29,16,36,14,16,new Ue(24,new Fe(1,32))),new be(30,16,48,14,22,new Ue(28,new Fe(1,49)))]}}be.VERSIONS=be.buildVersions();class mu{constructor(r){const s=r.getHeight();if(s<8||s>144||s&1)throw new j;this.version=mu.readVersion(r),this.mappingBitMatrix=this.extractDataRegion(r),this.readMappingMatrix=new ze(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(r){const s=r.getHeight(),o=r.getWidth();return be.getVersionForDimensions(s,o)}readCodewords(){const r=new Int8Array(this.version.getTotalCodewords());let s=0,o=4,c=0;const u=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let d=!1,p=!1,w=!1,E=!1;do if(o===u&&c===0&&!d)r[s++]=this.readCorner1(u,f)&255,o-=2,c+=2,d=!0;else if(o===u-2&&c===0&&f&3&&!p)r[s++]=this.readCorner2(u,f)&255,o-=2,c+=2,p=!0;else if(o===u+4&&c===2&&!(f&7)&&!w)r[s++]=this.readCorner3(u,f)&255,o-=2,c+=2,w=!0;else if(o===u-2&&c===0&&(f&7)===4&&!E)r[s++]=this.readCorner4(u,f)&255,o-=2,c+=2,E=!0;else{do o<u&&c>=0&&!this.readMappingMatrix.get(c,o)&&(r[s++]=this.readUtah(o,c,u,f)&255),o-=2,c+=2;while(o>=0&&c<f);o+=1,c+=3;do o>=0&&c<f&&!this.readMappingMatrix.get(c,o)&&(r[s++]=this.readUtah(o,c,u,f)&255),o+=2,c-=2;while(o<u&&c>=0);o+=3,c+=1}while(o<u||c<f);if(s!==this.version.getTotalCodewords())throw new j;return r}readModule(r,s,o,c){return r<0&&(r+=o,s+=4-(o+4&7)),s<0&&(s+=c,r+=4-(c+4&7)),this.readMappingMatrix.set(s,r),this.mappingBitMatrix.get(s,r)}readUtah(r,s,o,c){let u=0;return this.readModule(r-2,s-2,o,c)&&(u|=1),u<<=1,this.readModule(r-2,s-1,o,c)&&(u|=1),u<<=1,this.readModule(r-1,s-2,o,c)&&(u|=1),u<<=1,this.readModule(r-1,s-1,o,c)&&(u|=1),u<<=1,this.readModule(r-1,s,o,c)&&(u|=1),u<<=1,this.readModule(r,s-2,o,c)&&(u|=1),u<<=1,this.readModule(r,s-1,o,c)&&(u|=1),u<<=1,this.readModule(r,s,o,c)&&(u|=1),u}readCorner1(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,1,r,s)&&(o|=1),o<<=1,this.readModule(r-1,2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}readCorner2(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-4,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner3(r,s){let o=0;return this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(0,s-3,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-3,r,s)&&(o|=1),o<<=1,this.readModule(1,s-2,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o}readCorner4(r,s){let o=0;return this.readModule(r-3,0,r,s)&&(o|=1),o<<=1,this.readModule(r-2,0,r,s)&&(o|=1),o<<=1,this.readModule(r-1,0,r,s)&&(o|=1),o<<=1,this.readModule(0,s-2,r,s)&&(o|=1),o<<=1,this.readModule(0,s-1,r,s)&&(o|=1),o<<=1,this.readModule(1,s-1,r,s)&&(o|=1),o<<=1,this.readModule(2,s-1,r,s)&&(o|=1),o<<=1,this.readModule(3,s-1,r,s)&&(o|=1),o}extractDataRegion(r){const s=this.version.getSymbolSizeRows(),o=this.version.getSymbolSizeColumns();if(r.getHeight()!==s)throw new C("Dimension of bitMatrix must match the version size");const c=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),f=s/c|0,d=o/u|0,p=f*c,w=d*u,E=new ze(w,p);for(let A=0;A<f;++A){const v=A*c;for(let T=0;T<d;++T){const D=T*u;for(let k=0;k<c;++k){const P=A*(c+2)+1+k,H=v+k;for(let Q=0;Q<u;++Q){const Z=T*(u+2)+1+Q;if(r.get(Z,P)){const Y=D+Q;E.set(Y,H)}}}}}return E}}class xu{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s){const o=s.getECBlocks();let c=0;const u=o.getECBlocks();for(let k of u)c+=k.getCount();const f=new Array(c);let d=0;for(let k of u)for(let P=0;P<k.getCount();P++){const H=k.getDataCodewords(),Q=o.getECCodewords()+H;f[d++]=new xu(H,new Uint8Array(Q))}const w=f[0].codewords.length-o.getECCodewords(),E=w-1;let A=0;for(let k=0;k<E;k++)for(let P=0;P<d;P++)f[P].codewords[k]=r[A++];const v=s.getVersionNumber()===24,T=v?8:d;for(let k=0;k<T;k++)f[k].codewords[w-1]=r[A++];const D=f[0].codewords.length;for(let k=w;k<D;k++)for(let P=0;P<d;P++){const H=v?(P+8)%d:P,Q=v&&H>7?k-1:k;f[H].codewords[Q]=r[A++]}if(A!==r.length)throw new C;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class wu{constructor(r){this.bytes=r,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(r){if(r<1||r>32||r>this.available())throw new C(""+r);let s=0,o=this.bitOffset,c=this.byteOffset;const u=this.bytes;if(o>0){const f=8-o,d=r<f?r:f,p=f-d,w=255>>8-d<<p;s=(u[c]&w)>>p,r-=d,o+=d,o===8&&(o=0,c++)}if(r>0){for(;r>=8;)s=s<<8|u[c]&255,c++,r-=8;if(r>0){const f=8-r,d=255>>f<<f;s=s<<r|(u[c]&d)>>f,o+=r}}return this.bitOffset=o,this.byteOffset=c,s}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var St;(function(_){_[_.PAD_ENCODE=0]="PAD_ENCODE",_[_.ASCII_ENCODE=1]="ASCII_ENCODE",_[_.C40_ENCODE=2]="C40_ENCODE",_[_.TEXT_ENCODE=3]="TEXT_ENCODE",_[_.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",_[_.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",_[_.BASE256_ENCODE=6]="BASE256_ENCODE"})(St||(St={}));class Gr{static decode(r){const s=new wu(r),o=new ve,c=new ve,u=new Array;let f=St.ASCII_ENCODE;do if(f===St.ASCII_ENCODE)f=this.decodeAsciiSegment(s,o,c);else{switch(f){case St.C40_ENCODE:this.decodeC40Segment(s,o);break;case St.TEXT_ENCODE:this.decodeTextSegment(s,o);break;case St.ANSIX12_ENCODE:this.decodeAnsiX12Segment(s,o);break;case St.EDIFACT_ENCODE:this.decodeEdifactSegment(s,o);break;case St.BASE256_ENCODE:this.decodeBase256Segment(s,o,u);break;default:throw new j}f=St.ASCII_ENCODE}while(f!==St.PAD_ENCODE&&s.available()>0);return c.length()>0&&o.append(c.toString()),new lo(r,o.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(r,s,o){let c=!1;do{let u=r.readBits(8);if(u===0)throw new j;if(u<=128)return c&&(u+=128),s.append(String.fromCharCode(u-1)),St.ASCII_ENCODE;if(u===129)return St.PAD_ENCODE;if(u<=229){const f=u-130;f<10&&s.append("0"),s.append(""+f)}else switch(u){case 230:return St.C40_ENCODE;case 231:return St.BASE256_ENCODE;case 232:s.append("");break;case 233:case 234:break;case 235:c=!0;break;case 236:s.append("[)>05"),o.insert(0,"");break;case 237:s.append("[)>06"),o.insert(0,"");break;case 238:return St.ANSIX12_ENCODE;case 239:return St.TEXT_ENCODE;case 240:return St.EDIFACT_ENCODE;case 241:break;default:if(u!==254||r.available()!==0)throw new j;break}}while(r.available()>0);return St.ASCII_ENCODE}static decodeC40Segment(r,s){let o=!1;const c=[];let u=0;do{if(r.available()===8)return;const f=r.readBits(8);if(f===254)return;this.parseTwoBytes(f,r.readBits(8),c);for(let d=0;d<3;d++){const p=c[d];switch(u){case 0:if(p<3)u=p+1;else if(p<this.C40_BASIC_SET_CHARS.length){const w=this.C40_BASIC_SET_CHARS[p];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w)}else throw new j;break;case 1:o?(s.append(String.fromCharCode(p+128)),o=!1):s.append(String.fromCharCode(p)),u=0;break;case 2:if(p<this.C40_SHIFT2_SET_CHARS.length){const w=this.C40_SHIFT2_SET_CHARS[p];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w)}else switch(p){case 27:s.append("");break;case 30:o=!0;break;default:throw new j}u=0;break;case 3:o?(s.append(String.fromCharCode(p+224)),o=!1):s.append(String.fromCharCode(p+96)),u=0;break;default:throw new j}}}while(r.available()>0)}static decodeTextSegment(r,s){let o=!1,c=[],u=0;do{if(r.available()===8)return;const f=r.readBits(8);if(f===254)return;this.parseTwoBytes(f,r.readBits(8),c);for(let d=0;d<3;d++){const p=c[d];switch(u){case 0:if(p<3)u=p+1;else if(p<this.TEXT_BASIC_SET_CHARS.length){const w=this.TEXT_BASIC_SET_CHARS[p];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w)}else throw new j;break;case 1:o?(s.append(String.fromCharCode(p+128)),o=!1):s.append(String.fromCharCode(p)),u=0;break;case 2:if(p<this.TEXT_SHIFT2_SET_CHARS.length){const w=this.TEXT_SHIFT2_SET_CHARS[p];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w)}else switch(p){case 27:s.append("");break;case 30:o=!0;break;default:throw new j}u=0;break;case 3:if(p<this.TEXT_SHIFT3_SET_CHARS.length){const w=this.TEXT_SHIFT3_SET_CHARS[p];o?(s.append(String.fromCharCode(w.charCodeAt(0)+128)),o=!1):s.append(w),u=0}else throw new j;break;default:throw new j}}}while(r.available()>0)}static decodeAnsiX12Segment(r,s){const o=[];do{if(r.available()===8)return;const c=r.readBits(8);if(c===254)return;this.parseTwoBytes(c,r.readBits(8),o);for(let u=0;u<3;u++){const f=o[u];switch(f){case 0:s.append("\r");break;case 1:s.append("*");break;case 2:s.append(">");break;case 3:s.append(" ");break;default:if(f<14)s.append(String.fromCharCode(f+44));else if(f<40)s.append(String.fromCharCode(f+51));else throw new j;break}}}while(r.available()>0)}static parseTwoBytes(r,s,o){let c=(r<<8)+s-1,u=Math.floor(c/1600);o[0]=u,c-=u*1600,u=Math.floor(c/40),o[1]=u,o[2]=c-u*40}static decodeEdifactSegment(r,s){do{if(r.available()<=16)return;for(let o=0;o<4;o++){let c=r.readBits(6);if(c===31){const u=8-r.getBitOffset();u!==8&&r.readBits(u);return}c&32||(c|=64),s.append(String.fromCharCode(c))}}while(r.available()>0)}static decodeBase256Segment(r,s,o){let c=1+r.getByteOffset();const u=this.unrandomize255State(r.readBits(8),c++);let f;if(u===0?f=r.available()/8|0:u<250?f=u:f=250*(u-249)+this.unrandomize255State(r.readBits(8),c++),f<0)throw new j;const d=new Uint8Array(f);for(let p=0;p<f;p++){if(r.available()<8)throw new j;d[p]=this.unrandomize255State(r.readBits(8),c++)}o.push(d);try{s.append(_e.decode(d,ue.ISO88591))}catch(p){throw new cr("Platform does not support required encoding: "+p.message)}}static unrandomize255State(r,s){const o=149*s%255+1,c=r-o;return c>=0?c:c+256}}Gr.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Gr.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Gr.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Gr.TEXT_SHIFT2_SET_CHARS=Gr.C40_SHIFT2_SET_CHARS,Gr.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class cy{constructor(){this.rsDecoder=new uo(Pe.DATA_MATRIX_FIELD_256)}decode(r){const s=new mu(r),o=s.getVersion(),c=s.readCodewords(),u=xu.getDataBlocks(c,o);let f=0;for(let w of u)f+=w.getNumDataCodewords();const d=new Uint8Array(f),p=u.length;for(let w=0;w<p;w++){const E=u[w],A=E.getCodewords(),v=E.getNumDataCodewords();this.correctErrors(A,v);for(let T=0;T<v;T++)d[T*p+w]=A[T]}return Gr.decode(d)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new R}for(let c=0;c<s;c++)r[c]=o[c]}}class Ct{constructor(r){this.image=r,this.rectangleDetector=new Ir(this.image)}detect(){const r=this.rectangleDetector.detect();let s=this.detectSolid1(r);if(s=this.detectSolid2(s),s[3]=this.correctTopRight(s),!s[3])throw new V;s=this.shiftToModuleCenter(s);const o=s[0],c=s[1],u=s[2],f=s[3];let d=this.transitionsBetween(o,f)+1,p=this.transitionsBetween(u,f)+1;(d&1)===1&&(d+=1),(p&1)===1&&(p+=1),4*d<7*p&&4*p<7*d&&(d=p=Math.max(d,p));let w=Ct.sampleGrid(this.image,o,c,u,f,d,p);return new Ha(w,[o,c,u,f])}static shiftPoint(r,s,o){let c=(s.getX()-r.getX())/(o+1),u=(s.getY()-r.getY())/(o+1);return new oe(r.getX()+c,r.getY()+u)}static moveAway(r,s,o){let c=r.getX(),u=r.getY();return c<s?c-=1:c+=1,u<o?u-=1:u+=1,new oe(c,u)}detectSolid1(r){let s=r[0],o=r[1],c=r[3],u=r[2],f=this.transitionsBetween(s,o),d=this.transitionsBetween(o,c),p=this.transitionsBetween(c,u),w=this.transitionsBetween(u,s),E=f,A=[u,s,o,c];return E>d&&(E=d,A[0]=s,A[1]=o,A[2]=c,A[3]=u),E>p&&(E=p,A[0]=o,A[1]=c,A[2]=u,A[3]=s),E>w&&(A[0]=c,A[1]=u,A[2]=s,A[3]=o),A}detectSolid2(r){let s=r[0],o=r[1],c=r[2],u=r[3],f=this.transitionsBetween(s,u),d=Ct.shiftPoint(o,c,(f+1)*4),p=Ct.shiftPoint(c,o,(f+1)*4),w=this.transitionsBetween(d,s),E=this.transitionsBetween(p,u);return w<E?(r[0]=s,r[1]=o,r[2]=c,r[3]=u):(r[0]=o,r[1]=c,r[2]=u,r[3]=s),r}correctTopRight(r){let s=r[0],o=r[1],c=r[2],u=r[3],f=this.transitionsBetween(s,u),d=this.transitionsBetween(o,u),p=Ct.shiftPoint(s,o,(d+1)*4),w=Ct.shiftPoint(c,o,(f+1)*4);f=this.transitionsBetween(p,u),d=this.transitionsBetween(w,u);let E=new oe(u.getX()+(c.getX()-o.getX())/(f+1),u.getY()+(c.getY()-o.getY())/(f+1)),A=new oe(u.getX()+(s.getX()-o.getX())/(d+1),u.getY()+(s.getY()-o.getY())/(d+1));if(!this.isValid(E))return this.isValid(A)?A:null;if(!this.isValid(A))return E;let v=this.transitionsBetween(p,E)+this.transitionsBetween(w,E),T=this.transitionsBetween(p,A)+this.transitionsBetween(w,A);return v>T?E:A}shiftToModuleCenter(r){let s=r[0],o=r[1],c=r[2],u=r[3],f=this.transitionsBetween(s,u)+1,d=this.transitionsBetween(c,u)+1,p=Ct.shiftPoint(s,o,d*4),w=Ct.shiftPoint(c,o,f*4);f=this.transitionsBetween(p,u)+1,d=this.transitionsBetween(w,u)+1,(f&1)===1&&(f+=1),(d&1)===1&&(d+=1);let E=(s.getX()+o.getX()+c.getX()+u.getX())/4,A=(s.getY()+o.getY()+c.getY()+u.getY())/4;s=Ct.moveAway(s,E,A),o=Ct.moveAway(o,E,A),c=Ct.moveAway(c,E,A),u=Ct.moveAway(u,E,A);let v,T;return p=Ct.shiftPoint(s,o,d*4),p=Ct.shiftPoint(p,u,f*4),v=Ct.shiftPoint(o,s,d*4),v=Ct.shiftPoint(v,c,f*4),w=Ct.shiftPoint(c,u,d*4),w=Ct.shiftPoint(w,o,f*4),T=Ct.shiftPoint(u,c,d*4),T=Ct.shiftPoint(T,s,f*4),[p,v,w,T]}isValid(r){return r.getX()>=0&&r.getX()<this.image.getWidth()&&r.getY()>0&&r.getY()<this.image.getHeight()}static sampleGrid(r,s,o,c,u,f,d){return Vr.getInstance().sampleGrid(r,f,d,.5,.5,f-.5,.5,f-.5,d-.5,.5,d-.5,s.getX(),s.getY(),u.getX(),u.getY(),c.getX(),c.getY(),o.getX(),o.getY())}transitionsBetween(r,s){let o=Math.trunc(r.getX()),c=Math.trunc(r.getY()),u=Math.trunc(s.getX()),f=Math.trunc(s.getY()),d=Math.abs(f-c)>Math.abs(u-o);if(d){let k=o;o=c,c=k,k=u,u=f,f=k}let p=Math.abs(u-o),w=Math.abs(f-c),E=-p/2,A=c<f?1:-1,v=o<u?1:-1,T=0,D=this.image.get(d?c:o,d?o:c);for(let k=o,P=c;k!==u;k+=v){let H=this.image.get(d?P:k,d?k:P);if(H!==D&&(T++,D=H),E+=w,E>0){if(P===f)break;P+=A,E-=p}}return T}}class Yr{constructor(){this.decoder=new cy}decode(r,s=null){let o,c;if(s!=null&&s.has(K.PURE_BARCODE)){const w=Yr.extractPureBits(r.getBlackMatrix());o=this.decoder.decode(w),c=Yr.NO_POINTS}else{const w=new Ct(r.getBlackMatrix()).detect();o=this.decoder.decode(w.getBits()),c=w.getPoints()}const u=o.getRawBytes(),f=new tt(o.getText(),u,8*u.length,c,ae.DATA_MATRIX,L.currentTimeMillis()),d=o.getByteSegments();d!=null&&f.putMetadata(Dt.BYTE_SEGMENTS,d);const p=o.getECLevel();return p!=null&&f.putMetadata(Dt.ERROR_CORRECTION_LEVEL,p),f}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s==null||o==null)throw new V;const c=this.moduleSize(s,r);let u=s[1];const f=o[1];let d=s[0];const w=(o[0]-d+1)/c,E=(f-u+1)/c;if(w<=0||E<=0)throw new V;const A=c/2;u+=A,d+=A;const v=new ze(w,E);for(let T=0;T<E;T++){const D=u+T*c;for(let k=0;k<w;k++)r.get(d+k*c,D)&&v.set(k,T)}return v}static moduleSize(r,s){const o=s.getWidth();let c=r[0];const u=r[1];for(;c<o&&s.get(c,u);)c++;if(c===o)throw new V;const f=c-r[0];if(f===0)throw new V;return f}}Yr.NO_POINTS=[];class uy extends ln{constructor(r=500){super(new Yr,r)}}var gs;(function(_){_[_.L=0]="L",_[_.M=1]="M",_[_.Q=2]="Q",_[_.H=3]="H"})(gs||(gs={}));class Ze{constructor(r,s,o){this.value=r,this.stringValue=s,this.bits=o,Ze.FOR_BITS.set(o,this),Ze.FOR_VALUE.set(r,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(r){switch(r){case"L":return Ze.L;case"M":return Ze.M;case"Q":return Ze.Q;case"H":return Ze.H;default:throw new y(r+"not available")}}toString(){return this.stringValue}equals(r){if(!(r instanceof Ze))return!1;const s=r;return this.value===s.value}static forBits(r){if(r<0||r>=Ze.FOR_BITS.size)throw new C;return Ze.FOR_BITS.get(r)}}Ze.FOR_BITS=new Map,Ze.FOR_VALUE=new Map,Ze.L=new Ze(gs.L,"L",1),Ze.M=new Ze(gs.M,"M",0),Ze.Q=new Ze(gs.Q,"Q",3),Ze.H=new Ze(gs.H,"H",2);class Qt{constructor(r){this.errorCorrectionLevel=Ze.forBits(r>>3&3),this.dataMask=r&7}static numBitsDiffering(r,s){return M.bitCount(r^s)}static decodeFormatInformation(r,s){const o=Qt.doDecodeFormatInformation(r,s);return o!==null?o:Qt.doDecodeFormatInformation(r^Qt.FORMAT_INFO_MASK_QR,s^Qt.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(r,s){let o=Number.MAX_SAFE_INTEGER,c=0;for(const u of Qt.FORMAT_INFO_DECODE_LOOKUP){const f=u[0];if(f===r||f===s)return new Qt(u[1]);let d=Qt.numBitsDiffering(r,f);d<o&&(c=u[1],o=d),r!==s&&(d=Qt.numBitsDiffering(s,f),d<o&&(c=u[1],o=d))}return o<=3?new Qt(c):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(r){if(!(r instanceof Qt))return!1;const s=r;return this.errorCorrectionLevel===s.errorCorrectionLevel&&this.dataMask===s.dataMask}}Qt.FORMAT_INFO_MASK_QR=21522,Qt.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class B{constructor(r,...s){this.ecCodewordsPerBlock=r,this.ecBlocks=s}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let r=0;const s=this.ecBlocks;for(const o of s)r+=o.getCount();return r}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class S{constructor(r,s){this.count=r,this.dataCodewords=s}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class le{constructor(r,s,...o){this.versionNumber=r,this.alignmentPatternCenters=s,this.ecBlocks=o;let c=0;const u=o[0].getECCodewordsPerBlock(),f=o[0].getECBlocks();for(const d of f)c+=d.getCount()*(d.getDataCodewords()+u);this.totalCodewords=c}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(r){return this.ecBlocks[r.getValue()]}static getProvisionalVersionForDimension(r){if(r%4!==1)throw new j;try{return this.getVersionForNumber((r-17)/4)}catch{throw new j}}static getVersionForNumber(r){if(r<1||r>40)throw new C;return le.VERSIONS[r-1]}static decodeVersionInformation(r){let s=Number.MAX_SAFE_INTEGER,o=0;for(let c=0;c<le.VERSION_DECODE_INFO.length;c++){const u=le.VERSION_DECODE_INFO[c];if(u===r)return le.getVersionForNumber(c+7);const f=Qt.numBitsDiffering(r,u);f<s&&(o=c+7,s=f)}return s<=3?le.getVersionForNumber(o):null}buildFunctionPattern(){const r=this.getDimensionForVersion(),s=new ze(r);s.setRegion(0,0,9,9),s.setRegion(r-8,0,8,9),s.setRegion(0,r-8,9,8);const o=this.alignmentPatternCenters.length;for(let c=0;c<o;c++){const u=this.alignmentPatternCenters[c]-2;for(let f=0;f<o;f++)c===0&&(f===0||f===o-1)||c===o-1&&f===0||s.setRegion(this.alignmentPatternCenters[f]-2,u,5,5)}return s.setRegion(6,9,1,r-17),s.setRegion(9,6,r-17,1),this.versionNumber>6&&(s.setRegion(r-11,0,3,6),s.setRegion(0,r-11,6,3)),s}toString(){return""+this.versionNumber}}le.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),le.VERSIONS=[new le(1,new Int32Array(0),new B(7,new S(1,19)),new B(10,new S(1,16)),new B(13,new S(1,13)),new B(17,new S(1,9))),new le(2,Int32Array.from([6,18]),new B(10,new S(1,34)),new B(16,new S(1,28)),new B(22,new S(1,22)),new B(28,new S(1,16))),new le(3,Int32Array.from([6,22]),new B(15,new S(1,55)),new B(26,new S(1,44)),new B(18,new S(2,17)),new B(22,new S(2,13))),new le(4,Int32Array.from([6,26]),new B(20,new S(1,80)),new B(18,new S(2,32)),new B(26,new S(2,24)),new B(16,new S(4,9))),new le(5,Int32Array.from([6,30]),new B(26,new S(1,108)),new B(24,new S(2,43)),new B(18,new S(2,15),new S(2,16)),new B(22,new S(2,11),new S(2,12))),new le(6,Int32Array.from([6,34]),new B(18,new S(2,68)),new B(16,new S(4,27)),new B(24,new S(4,19)),new B(28,new S(4,15))),new le(7,Int32Array.from([6,22,38]),new B(20,new S(2,78)),new B(18,new S(4,31)),new B(18,new S(2,14),new S(4,15)),new B(26,new S(4,13),new S(1,14))),new le(8,Int32Array.from([6,24,42]),new B(24,new S(2,97)),new B(22,new S(2,38),new S(2,39)),new B(22,new S(4,18),new S(2,19)),new B(26,new S(4,14),new S(2,15))),new le(9,Int32Array.from([6,26,46]),new B(30,new S(2,116)),new B(22,new S(3,36),new S(2,37)),new B(20,new S(4,16),new S(4,17)),new B(24,new S(4,12),new S(4,13))),new le(10,Int32Array.from([6,28,50]),new B(18,new S(2,68),new S(2,69)),new B(26,new S(4,43),new S(1,44)),new B(24,new S(6,19),new S(2,20)),new B(28,new S(6,15),new S(2,16))),new le(11,Int32Array.from([6,30,54]),new B(20,new S(4,81)),new B(30,new S(1,50),new S(4,51)),new B(28,new S(4,22),new S(4,23)),new B(24,new S(3,12),new S(8,13))),new le(12,Int32Array.from([6,32,58]),new B(24,new S(2,92),new S(2,93)),new B(22,new S(6,36),new S(2,37)),new B(26,new S(4,20),new S(6,21)),new B(28,new S(7,14),new S(4,15))),new le(13,Int32Array.from([6,34,62]),new B(26,new S(4,107)),new B(22,new S(8,37),new S(1,38)),new B(24,new S(8,20),new S(4,21)),new B(22,new S(12,11),new S(4,12))),new le(14,Int32Array.from([6,26,46,66]),new B(30,new S(3,115),new S(1,116)),new B(24,new S(4,40),new S(5,41)),new B(20,new S(11,16),new S(5,17)),new B(24,new S(11,12),new S(5,13))),new le(15,Int32Array.from([6,26,48,70]),new B(22,new S(5,87),new S(1,88)),new B(24,new S(5,41),new S(5,42)),new B(30,new S(5,24),new S(7,25)),new B(24,new S(11,12),new S(7,13))),new le(16,Int32Array.from([6,26,50,74]),new B(24,new S(5,98),new S(1,99)),new B(28,new S(7,45),new S(3,46)),new B(24,new S(15,19),new S(2,20)),new B(30,new S(3,15),new S(13,16))),new le(17,Int32Array.from([6,30,54,78]),new B(28,new S(1,107),new S(5,108)),new B(28,new S(10,46),new S(1,47)),new B(28,new S(1,22),new S(15,23)),new B(28,new S(2,14),new S(17,15))),new le(18,Int32Array.from([6,30,56,82]),new B(30,new S(5,120),new S(1,121)),new B(26,new S(9,43),new S(4,44)),new B(28,new S(17,22),new S(1,23)),new B(28,new S(2,14),new S(19,15))),new le(19,Int32Array.from([6,30,58,86]),new B(28,new S(3,113),new S(4,114)),new B(26,new S(3,44),new S(11,45)),new B(26,new S(17,21),new S(4,22)),new B(26,new S(9,13),new S(16,14))),new le(20,Int32Array.from([6,34,62,90]),new B(28,new S(3,107),new S(5,108)),new B(26,new S(3,41),new S(13,42)),new B(30,new S(15,24),new S(5,25)),new B(28,new S(15,15),new S(10,16))),new le(21,Int32Array.from([6,28,50,72,94]),new B(28,new S(4,116),new S(4,117)),new B(26,new S(17,42)),new B(28,new S(17,22),new S(6,23)),new B(30,new S(19,16),new S(6,17))),new le(22,Int32Array.from([6,26,50,74,98]),new B(28,new S(2,111),new S(7,112)),new B(28,new S(17,46)),new B(30,new S(7,24),new S(16,25)),new B(24,new S(34,13))),new le(23,Int32Array.from([6,30,54,78,102]),new B(30,new S(4,121),new S(5,122)),new B(28,new S(4,47),new S(14,48)),new B(30,new S(11,24),new S(14,25)),new B(30,new S(16,15),new S(14,16))),new le(24,Int32Array.from([6,28,54,80,106]),new B(30,new S(6,117),new S(4,118)),new B(28,new S(6,45),new S(14,46)),new B(30,new S(11,24),new S(16,25)),new B(30,new S(30,16),new S(2,17))),new le(25,Int32Array.from([6,32,58,84,110]),new B(26,new S(8,106),new S(4,107)),new B(28,new S(8,47),new S(13,48)),new B(30,new S(7,24),new S(22,25)),new B(30,new S(22,15),new S(13,16))),new le(26,Int32Array.from([6,30,58,86,114]),new B(28,new S(10,114),new S(2,115)),new B(28,new S(19,46),new S(4,47)),new B(28,new S(28,22),new S(6,23)),new B(30,new S(33,16),new S(4,17))),new le(27,Int32Array.from([6,34,62,90,118]),new B(30,new S(8,122),new S(4,123)),new B(28,new S(22,45),new S(3,46)),new B(30,new S(8,23),new S(26,24)),new B(30,new S(12,15),new S(28,16))),new le(28,Int32Array.from([6,26,50,74,98,122]),new B(30,new S(3,117),new S(10,118)),new B(28,new S(3,45),new S(23,46)),new B(30,new S(4,24),new S(31,25)),new B(30,new S(11,15),new S(31,16))),new le(29,Int32Array.from([6,30,54,78,102,126]),new B(30,new S(7,116),new S(7,117)),new B(28,new S(21,45),new S(7,46)),new B(30,new S(1,23),new S(37,24)),new B(30,new S(19,15),new S(26,16))),new le(30,Int32Array.from([6,26,52,78,104,130]),new B(30,new S(5,115),new S(10,116)),new B(28,new S(19,47),new S(10,48)),new B(30,new S(15,24),new S(25,25)),new B(30,new S(23,15),new S(25,16))),new le(31,Int32Array.from([6,30,56,82,108,134]),new B(30,new S(13,115),new S(3,116)),new B(28,new S(2,46),new S(29,47)),new B(30,new S(42,24),new S(1,25)),new B(30,new S(23,15),new S(28,16))),new le(32,Int32Array.from([6,34,60,86,112,138]),new B(30,new S(17,115)),new B(28,new S(10,46),new S(23,47)),new B(30,new S(10,24),new S(35,25)),new B(30,new S(19,15),new S(35,16))),new le(33,Int32Array.from([6,30,58,86,114,142]),new B(30,new S(17,115),new S(1,116)),new B(28,new S(14,46),new S(21,47)),new B(30,new S(29,24),new S(19,25)),new B(30,new S(11,15),new S(46,16))),new le(34,Int32Array.from([6,34,62,90,118,146]),new B(30,new S(13,115),new S(6,116)),new B(28,new S(14,46),new S(23,47)),new B(30,new S(44,24),new S(7,25)),new B(30,new S(59,16),new S(1,17))),new le(35,Int32Array.from([6,30,54,78,102,126,150]),new B(30,new S(12,121),new S(7,122)),new B(28,new S(12,47),new S(26,48)),new B(30,new S(39,24),new S(14,25)),new B(30,new S(22,15),new S(41,16))),new le(36,Int32Array.from([6,24,50,76,102,128,154]),new B(30,new S(6,121),new S(14,122)),new B(28,new S(6,47),new S(34,48)),new B(30,new S(46,24),new S(10,25)),new B(30,new S(2,15),new S(64,16))),new le(37,Int32Array.from([6,28,54,80,106,132,158]),new B(30,new S(17,122),new S(4,123)),new B(28,new S(29,46),new S(14,47)),new B(30,new S(49,24),new S(10,25)),new B(30,new S(24,15),new S(46,16))),new le(38,Int32Array.from([6,32,58,84,110,136,162]),new B(30,new S(4,122),new S(18,123)),new B(28,new S(13,46),new S(32,47)),new B(30,new S(48,24),new S(14,25)),new B(30,new S(42,15),new S(32,16))),new le(39,Int32Array.from([6,26,54,82,110,138,166]),new B(30,new S(20,117),new S(4,118)),new B(28,new S(40,47),new S(7,48)),new B(30,new S(43,24),new S(22,25)),new B(30,new S(10,15),new S(67,16))),new le(40,Int32Array.from([6,30,58,86,114,142,170]),new B(30,new S(19,118),new S(6,119)),new B(28,new S(18,47),new S(31,48)),new B(30,new S(34,24),new S(34,25)),new B(30,new S(20,15),new S(61,16)))];var Lt;(function(_){_[_.DATA_MASK_000=0]="DATA_MASK_000",_[_.DATA_MASK_001=1]="DATA_MASK_001",_[_.DATA_MASK_010=2]="DATA_MASK_010",_[_.DATA_MASK_011=3]="DATA_MASK_011",_[_.DATA_MASK_100=4]="DATA_MASK_100",_[_.DATA_MASK_101=5]="DATA_MASK_101",_[_.DATA_MASK_110=6]="DATA_MASK_110",_[_.DATA_MASK_111=7]="DATA_MASK_111"})(Lt||(Lt={}));class Bn{constructor(r,s){this.value=r,this.isMasked=s}unmaskBitMatrix(r,s){for(let o=0;o<s;o++)for(let c=0;c<s;c++)this.isMasked(o,c)&&r.flip(c,o)}}Bn.values=new Map([[Lt.DATA_MASK_000,new Bn(Lt.DATA_MASK_000,(_,r)=>(_+r&1)===0)],[Lt.DATA_MASK_001,new Bn(Lt.DATA_MASK_001,(_,r)=>(_&1)===0)],[Lt.DATA_MASK_010,new Bn(Lt.DATA_MASK_010,(_,r)=>r%3===0)],[Lt.DATA_MASK_011,new Bn(Lt.DATA_MASK_011,(_,r)=>(_+r)%3===0)],[Lt.DATA_MASK_100,new Bn(Lt.DATA_MASK_100,(_,r)=>(Math.floor(_/2)+Math.floor(r/3)&1)===0)],[Lt.DATA_MASK_101,new Bn(Lt.DATA_MASK_101,(_,r)=>_*r%6===0)],[Lt.DATA_MASK_110,new Bn(Lt.DATA_MASK_110,(_,r)=>_*r%6<3)],[Lt.DATA_MASK_111,new Bn(Lt.DATA_MASK_111,(_,r)=>(_+r+_*r%3&1)===0)]]);class fy{constructor(r){const s=r.getHeight();if(s<21||(s&3)!==1)throw new j;this.bitMatrix=r}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let r=0;for(let u=0;u<6;u++)r=this.copyBit(u,8,r);r=this.copyBit(7,8,r),r=this.copyBit(8,8,r),r=this.copyBit(8,7,r);for(let u=5;u>=0;u--)r=this.copyBit(8,u,r);const s=this.bitMatrix.getHeight();let o=0;const c=s-7;for(let u=s-1;u>=c;u--)o=this.copyBit(8,u,o);for(let u=s-8;u<s;u++)o=this.copyBit(u,8,o);if(this.parsedFormatInfo=Qt.decodeFormatInformation(r,o),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new j}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const r=this.bitMatrix.getHeight(),s=Math.floor((r-17)/4);if(s<=6)return le.getVersionForNumber(s);let o=0;const c=r-11;for(let f=5;f>=0;f--)for(let d=r-9;d>=c;d--)o=this.copyBit(d,f,o);let u=le.decodeVersionInformation(o);if(u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;o=0;for(let f=5;f>=0;f--)for(let d=r-9;d>=c;d--)o=this.copyBit(f,d,o);if(u=le.decodeVersionInformation(o),u!==null&&u.getDimensionForVersion()===r)return this.parsedVersion=u,u;throw new j}copyBit(r,s,o){return(this.isMirror?this.bitMatrix.get(s,r):this.bitMatrix.get(r,s))?o<<1|1:o<<1}readCodewords(){const r=this.readFormatInformation(),s=this.readVersion(),o=Bn.values.get(r.getDataMask()),c=this.bitMatrix.getHeight();o.unmaskBitMatrix(this.bitMatrix,c);const u=s.buildFunctionPattern();let f=!0;const d=new Uint8Array(s.getTotalCodewords());let p=0,w=0,E=0;for(let A=c-1;A>0;A-=2){A===6&&A--;for(let v=0;v<c;v++){const T=f?c-1-v:v;for(let D=0;D<2;D++)u.get(A-D,T)||(E++,w<<=1,this.bitMatrix.get(A-D,T)&&(w|=1),E===8&&(d[p++]=w,E=0,w=0))}f=!f}if(p!==s.getTotalCodewords())throw new j;return d}remask(){if(this.parsedFormatInfo===null)return;const r=Bn.values[this.parsedFormatInfo.getDataMask()],s=this.bitMatrix.getHeight();r.unmaskBitMatrix(this.bitMatrix,s)}setMirror(r){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=r}mirror(){const r=this.bitMatrix;for(let s=0,o=r.getWidth();s<o;s++)for(let c=s+1,u=r.getHeight();c<u;c++)r.get(s,c)!==r.get(c,s)&&(r.flip(c,s),r.flip(s,c))}}class yu{constructor(r,s){this.numDataCodewords=r,this.codewords=s}static getDataBlocks(r,s,o){if(r.length!==s.getTotalCodewords())throw new C;const c=s.getECBlocksForLevel(o);let u=0;const f=c.getECBlocks();for(const D of f)u+=D.getCount();const d=new Array(u);let p=0;for(const D of f)for(let k=0;k<D.getCount();k++){const P=D.getDataCodewords(),H=c.getECCodewordsPerBlock()+P;d[p++]=new yu(P,new Uint8Array(H))}const w=d[0].codewords.length;let E=d.length-1;for(;E>=0&&d[E].codewords.length!==w;)E--;E++;const A=w-c.getECCodewordsPerBlock();let v=0;for(let D=0;D<A;D++)for(let k=0;k<p;k++)d[k].codewords[D]=r[v++];for(let D=E;D<p;D++)d[D].codewords[A]=r[v++];const T=d[0].codewords.length;for(let D=A;D<T;D++)for(let k=0;k<p;k++){const P=k<E?D:D+1;d[k].codewords[P]=r[v++]}return d}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Fn;(function(_){_[_.TERMINATOR=0]="TERMINATOR",_[_.NUMERIC=1]="NUMERIC",_[_.ALPHANUMERIC=2]="ALPHANUMERIC",_[_.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",_[_.BYTE=4]="BYTE",_[_.ECI=5]="ECI",_[_.KANJI=6]="KANJI",_[_.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",_[_.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",_[_.HANZI=9]="HANZI"})(Fn||(Fn={}));class he{constructor(r,s,o,c){this.value=r,this.stringValue=s,this.characterCountBitsForVersions=o,this.bits=c,he.FOR_BITS.set(c,this),he.FOR_VALUE.set(r,this)}static forBits(r){const s=he.FOR_BITS.get(r);if(s===void 0)throw new C;return s}getCharacterCountBits(r){const s=r.getVersionNumber();let o;return s<=9?o=0:s<=26?o=1:o=2,this.characterCountBitsForVersions[o]}getValue(){return this.value}getBits(){return this.bits}equals(r){if(!(r instanceof he))return!1;const s=r;return this.value===s.value}toString(){return this.stringValue}}he.FOR_BITS=new Map,he.FOR_VALUE=new Map,he.TERMINATOR=new he(Fn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),he.NUMERIC=new he(Fn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),he.ALPHANUMERIC=new he(Fn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),he.STRUCTURED_APPEND=new he(Fn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),he.BYTE=new he(Fn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),he.ECI=new he(Fn.ECI,"ECI",Int32Array.from([0,0,0]),7),he.KANJI=new he(Fn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),he.FNC1_FIRST_POSITION=new he(Fn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),he.FNC1_SECOND_POSITION=new he(Fn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),he.HANZI=new he(Fn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class lt{static decode(r,s,o,c){const u=new wu(r);let f=new ve;const d=new Array;let p=-1,w=-1;try{let E=null,A=!1,v;do{if(u.available()<4)v=he.TERMINATOR;else{const T=u.readBits(4);v=he.forBits(T)}switch(v){case he.TERMINATOR:break;case he.FNC1_FIRST_POSITION:case he.FNC1_SECOND_POSITION:A=!0;break;case he.STRUCTURED_APPEND:if(u.available()<16)throw new j;p=u.readBits(8),w=u.readBits(8);break;case he.ECI:const T=lt.parseECIValue(u);if(E=W.getCharacterSetECIByValue(T),E===null)throw new j;break;case he.HANZI:const D=u.readBits(4),k=u.readBits(v.getCharacterCountBits(s));D===lt.GB2312_SUBSET&&lt.decodeHanziSegment(u,f,k);break;default:const P=u.readBits(v.getCharacterCountBits(s));switch(v){case he.NUMERIC:lt.decodeNumericSegment(u,f,P);break;case he.ALPHANUMERIC:lt.decodeAlphanumericSegment(u,f,P,A);break;case he.BYTE:lt.decodeByteSegment(u,f,P,E,d,c);break;case he.KANJI:lt.decodeKanjiSegment(u,f,P);break;default:throw new j}break}}while(v!==he.TERMINATOR)}catch{throw new j}return new lo(r,f.toString(),d.length===0?null:d,o===null?null:o.toString(),p,w)}static decodeHanziSegment(r,s,o){if(o*13>r.available())throw new j;const c=new Uint8Array(2*o);let u=0;for(;o>0;){const f=r.readBits(13);let d=f/96<<8&4294967295|f%96;d<959?d+=41377:d+=42657,c[u]=d>>8&255,c[u+1]=d&255,u+=2,o--}try{s.append(_e.decode(c,ue.GB2312))}catch(f){throw new j(f)}}static decodeKanjiSegment(r,s,o){if(o*13>r.available())throw new j;const c=new Uint8Array(2*o);let u=0;for(;o>0;){const f=r.readBits(13);let d=f/192<<8&4294967295|f%192;d<7936?d+=33088:d+=49472,c[u]=d>>8,c[u+1]=d,u+=2,o--}try{s.append(_e.decode(c,ue.SHIFT_JIS))}catch(f){throw new j(f)}}static decodeByteSegment(r,s,o,c,u,f){if(8*o>r.available())throw new j;const d=new Uint8Array(o);for(let w=0;w<o;w++)d[w]=r.readBits(8);let p;c===null?p=ue.guessEncoding(d,f):p=c.getName();try{s.append(_e.decode(d,p))}catch(w){throw new j(w)}u.push(d)}static toAlphaNumericChar(r){if(r>=lt.ALPHANUMERIC_CHARS.length)throw new j;return lt.ALPHANUMERIC_CHARS[r]}static decodeAlphanumericSegment(r,s,o,c){const u=s.length();for(;o>1;){if(r.available()<11)throw new j;const f=r.readBits(11);s.append(lt.toAlphaNumericChar(Math.floor(f/45))),s.append(lt.toAlphaNumericChar(f%45)),o-=2}if(o===1){if(r.available()<6)throw new j;s.append(lt.toAlphaNumericChar(r.readBits(6)))}if(c)for(let f=u;f<s.length();f++)s.charAt(f)==="%"&&(f<s.length()-1&&s.charAt(f+1)==="%"?s.deleteCharAt(f+1):s.setCharAt(f,""))}static decodeNumericSegment(r,s,o){for(;o>=3;){if(r.available()<10)throw new j;const c=r.readBits(10);if(c>=1e3)throw new j;s.append(lt.toAlphaNumericChar(Math.floor(c/100))),s.append(lt.toAlphaNumericChar(Math.floor(c/10)%10)),s.append(lt.toAlphaNumericChar(c%10)),o-=3}if(o===2){if(r.available()<7)throw new j;const c=r.readBits(7);if(c>=100)throw new j;s.append(lt.toAlphaNumericChar(Math.floor(c/10))),s.append(lt.toAlphaNumericChar(c%10))}else if(o===1){if(r.available()<4)throw new j;const c=r.readBits(4);if(c>=10)throw new j;s.append(lt.toAlphaNumericChar(c))}}static parseECIValue(r){const s=r.readBits(8);if(!(s&128))return s&127;if((s&192)===128){const o=r.readBits(8);return(s&63)<<8&4294967295|o}if((s&224)===192){const o=r.readBits(16);return(s&31)<<16&4294967295|o}throw new j}}lt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",lt.GB2312_SUBSET=1;class S1{constructor(r){this.mirrored=r}isMirrored(){return this.mirrored}applyMirroredCorrection(r){if(!this.mirrored||r===null||r.length<3)return;const s=r[0];r[0]=r[2],r[2]=s}}class hy{constructor(){this.rsDecoder=new uo(Pe.QR_CODE_FIELD_256)}decodeBooleanArray(r,s){return this.decodeBitMatrix(ze.parseFromBooleanArray(r),s)}decodeBitMatrix(r,s){const o=new fy(r);let c=null;try{return this.decodeBitMatrixParser(o,s)}catch(u){c=u}try{o.remask(),o.setMirror(!0),o.readVersion(),o.readFormatInformation(),o.mirror();const u=this.decodeBitMatrixParser(o,s);return u.setOther(new S1(!0)),u}catch(u){throw c!==null?c:u}}decodeBitMatrixParser(r,s){const o=r.readVersion(),c=r.readFormatInformation().getErrorCorrectionLevel(),u=r.readCodewords(),f=yu.getDataBlocks(u,o,c);let d=0;for(const E of f)d+=E.getNumDataCodewords();const p=new Uint8Array(d);let w=0;for(const E of f){const A=E.getCodewords(),v=E.getNumDataCodewords();this.correctErrors(A,v);for(let T=0;T<v;T++)p[w++]=A[T]}return lt.decode(p,o,c,s)}correctErrors(r,s){const o=new Int32Array(r);try{this.rsDecoder.decode(o,r.length-s)}catch{throw new R}for(let c=0;c<s;c++)r[c]=o[c]}}class Cu extends oe{constructor(r,s,o){super(r,s),this.estimatedModuleSize=o}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const c=(this.getX()+s)/2,u=(this.getY()+r)/2,f=(this.estimatedModuleSize+o)/2;return new Cu(c,u,f)}}class Xa{constructor(r,s,o,c,u,f,d){this.image=r,this.startX=s,this.startY=o,this.width=c,this.height=u,this.moduleSize=f,this.resultPointCallback=d,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const r=this.startX,s=this.height,o=this.width,c=r+o,u=this.startY+s/2,f=new Int32Array(3),d=this.image;for(let p=0;p<s;p++){const w=u+(p&1?-Math.floor((p+1)/2):Math.floor((p+1)/2));f[0]=0,f[1]=0,f[2]=0;let E=r;for(;E<c&&!d.get(E,w);)E++;let A=0;for(;E<c;){if(d.get(E,w))if(A===1)f[1]++;else if(A===2){if(this.foundPatternCross(f)){const v=this.handlePossibleCenter(f,w,E);if(v!==null)return v}f[0]=f[2],f[1]=1,f[2]=0,A=1}else f[++A]++;else A===1&&A++,f[A]++;E++}if(this.foundPatternCross(f)){const v=this.handlePossibleCenter(f,w,c);if(v!==null)return v}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new V}static centerFromEnd(r,s){return s-r[2]-r[1]/2}foundPatternCross(r){const s=this.moduleSize,o=s/2;for(let c=0;c<3;c++)if(Math.abs(s-r[c])>=o)return!1;return!0}crossCheckVertical(r,s,o,c){const u=this.image,f=u.getHeight(),d=this.crossCheckStateCount;d[0]=0,d[1]=0,d[2]=0;let p=r;for(;p>=0&&u.get(s,p)&&d[1]<=o;)d[1]++,p--;if(p<0||d[1]>o)return NaN;for(;p>=0&&!u.get(s,p)&&d[0]<=o;)d[0]++,p--;if(d[0]>o)return NaN;for(p=r+1;p<f&&u.get(s,p)&&d[1]<=o;)d[1]++,p++;if(p===f||d[1]>o)return NaN;for(;p<f&&!u.get(s,p)&&d[2]<=o;)d[2]++,p++;if(d[2]>o)return NaN;const w=d[0]+d[1]+d[2];return 5*Math.abs(w-c)>=2*c?NaN:this.foundPatternCross(d)?Xa.centerFromEnd(d,p):NaN}handlePossibleCenter(r,s,o){const c=r[0]+r[1]+r[2],u=Xa.centerFromEnd(r,o),f=this.crossCheckVertical(s,u,2*r[1],c);if(!isNaN(f)){const d=(r[0]+r[1]+r[2])/3;for(const w of this.possibleCenters)if(w.aboutEquals(d,f,u))return w.combineEstimate(f,u,d);const p=new Cu(u,f,d);this.possibleCenters.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return null}}class Eu extends oe{constructor(r,s,o,c){super(r,s),this.estimatedModuleSize=o,this.count=c,c===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(r,s,o){if(Math.abs(s-this.getY())<=r&&Math.abs(o-this.getX())<=r){const c=Math.abs(r-this.estimatedModuleSize);return c<=1||c<=this.estimatedModuleSize}return!1}combineEstimate(r,s,o){const c=this.count+1,u=(this.count*this.getX()+s)/c,f=(this.count*this.getY()+r)/c,d=(this.count*this.estimatedModuleSize+o)/c;return new Eu(u,f,d,c)}}class dy{constructor(r){this.bottomLeft=r[0],this.topLeft=r[1],this.topRight=r[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class kt{constructor(r,s){this.image=r,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=s}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(r){const s=r!=null&&r.get(K.TRY_HARDER)!==void 0,o=r!=null&&r.get(K.PURE_BARCODE)!==void 0,c=this.image,u=c.getHeight(),f=c.getWidth();let d=Math.floor(3*u/(4*kt.MAX_MODULES));(d<kt.MIN_SKIP||s)&&(d=kt.MIN_SKIP);let p=!1;const w=new Int32Array(5);for(let A=d-1;A<u&&!p;A+=d){w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0;let v=0;for(let T=0;T<f;T++)if(c.get(T,A))(v&1)===1&&v++,w[v]++;else if(v&1)w[v]++;else if(v===4)if(kt.foundPatternCross(w)){if(this.handlePossibleCenter(w,A,T,o)===!0)if(d=2,this.hasSkipped===!0)p=this.haveMultiplyConfirmedCenters();else{const k=this.findRowSkip();k>w[2]&&(A+=k-w[2]-d,T=f-1)}else{w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,v=3;continue}v=0,w[0]=0,w[1]=0,w[2]=0,w[3]=0,w[4]=0}else w[0]=w[2],w[1]=w[3],w[2]=w[4],w[3]=1,w[4]=0,v=3;else w[++v]++;kt.foundPatternCross(w)&&this.handlePossibleCenter(w,A,f,o)===!0&&(d=w[0],this.hasSkipped&&(p=this.haveMultiplyConfirmedCenters()))}const E=this.selectBestPatterns();return oe.orderBestPatterns(E),new dy(E)}static centerFromEnd(r,s){return s-r[4]-r[3]-r[2]/2}static foundPatternCross(r){let s=0;for(let u=0;u<5;u++){const f=r[u];if(f===0)return!1;s+=f}if(s<7)return!1;const o=s/7,c=o/2;return Math.abs(o-r[0])<c&&Math.abs(o-r[1])<c&&Math.abs(3*o-r[2])<3*c&&Math.abs(o-r[3])<c&&Math.abs(o-r[4])<c}getCrossCheckStateCount(){const r=this.crossCheckStateCount;return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r[4]=0,r}crossCheckDiagonal(r,s,o,c){const u=this.getCrossCheckStateCount();let f=0;const d=this.image;for(;r>=f&&s>=f&&d.get(s-f,r-f);)u[2]++,f++;if(r<f||s<f)return!1;for(;r>=f&&s>=f&&!d.get(s-f,r-f)&&u[1]<=o;)u[1]++,f++;if(r<f||s<f||u[1]>o)return!1;for(;r>=f&&s>=f&&d.get(s-f,r-f)&&u[0]<=o;)u[0]++,f++;if(u[0]>o)return!1;const p=d.getHeight(),w=d.getWidth();for(f=1;r+f<p&&s+f<w&&d.get(s+f,r+f);)u[2]++,f++;if(r+f>=p||s+f>=w)return!1;for(;r+f<p&&s+f<w&&!d.get(s+f,r+f)&&u[3]<o;)u[3]++,f++;if(r+f>=p||s+f>=w||u[3]>=o)return!1;for(;r+f<p&&s+f<w&&d.get(s+f,r+f)&&u[4]<o;)u[4]++,f++;if(u[4]>=o)return!1;const E=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(E-c)<2*c&&kt.foundPatternCross(u)}crossCheckVertical(r,s,o,c){const u=this.image,f=u.getHeight(),d=this.getCrossCheckStateCount();let p=r;for(;p>=0&&u.get(s,p);)d[2]++,p--;if(p<0)return NaN;for(;p>=0&&!u.get(s,p)&&d[1]<=o;)d[1]++,p--;if(p<0||d[1]>o)return NaN;for(;p>=0&&u.get(s,p)&&d[0]<=o;)d[0]++,p--;if(d[0]>o)return NaN;for(p=r+1;p<f&&u.get(s,p);)d[2]++,p++;if(p===f)return NaN;for(;p<f&&!u.get(s,p)&&d[3]<o;)d[3]++,p++;if(p===f||d[3]>=o)return NaN;for(;p<f&&u.get(s,p)&&d[4]<o;)d[4]++,p++;if(d[4]>=o)return NaN;const w=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(w-c)>=2*c?NaN:kt.foundPatternCross(d)?kt.centerFromEnd(d,p):NaN}crossCheckHorizontal(r,s,o,c){const u=this.image,f=u.getWidth(),d=this.getCrossCheckStateCount();let p=r;for(;p>=0&&u.get(p,s);)d[2]++,p--;if(p<0)return NaN;for(;p>=0&&!u.get(p,s)&&d[1]<=o;)d[1]++,p--;if(p<0||d[1]>o)return NaN;for(;p>=0&&u.get(p,s)&&d[0]<=o;)d[0]++,p--;if(d[0]>o)return NaN;for(p=r+1;p<f&&u.get(p,s);)d[2]++,p++;if(p===f)return NaN;for(;p<f&&!u.get(p,s)&&d[3]<o;)d[3]++,p++;if(p===f||d[3]>=o)return NaN;for(;p<f&&u.get(p,s)&&d[4]<o;)d[4]++,p++;if(d[4]>=o)return NaN;const w=d[0]+d[1]+d[2]+d[3]+d[4];return 5*Math.abs(w-c)>=c?NaN:kt.foundPatternCross(d)?kt.centerFromEnd(d,p):NaN}handlePossibleCenter(r,s,o,c){const u=r[0]+r[1]+r[2]+r[3]+r[4];let f=kt.centerFromEnd(r,o),d=this.crossCheckVertical(s,Math.floor(f),r[2],u);if(!isNaN(d)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(d),r[2],u),!isNaN(f)&&(!c||this.crossCheckDiagonal(Math.floor(d),Math.floor(f),r[2],u)))){const p=u/7;let w=!1;const E=this.possibleCenters;for(let A=0,v=E.length;A<v;A++){const T=E[A];if(T.aboutEquals(p,d,f)){E[A]=T.combineEstimate(d,f,p),w=!0;break}}if(!w){const A=new Eu(f,d,p);E.push(A),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(A)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let s=null;for(const o of this.possibleCenters)if(o.getCount()>=kt.CENTER_QUORUM)if(s==null)s=o;else return this.hasSkipped=!0,Math.floor((Math.abs(s.getX()-o.getX())-Math.abs(s.getY()-o.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let r=0,s=0;const o=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=kt.CENTER_QUORUM&&(r++,s+=f.getEstimatedModuleSize());if(r<3)return!1;const c=s/o;let u=0;for(const f of this.possibleCenters)u+=Math.abs(f.getEstimatedModuleSize()-c);return u<=.05*s}selectBestPatterns(){const r=this.possibleCenters.length;if(r<3)throw new V;const s=this.possibleCenters;let o;if(r>3){let c=0,u=0;for(const p of this.possibleCenters){const w=p.getEstimatedModuleSize();c+=w,u+=w*w}o=c/r;let f=Math.sqrt(u/r-o*o);s.sort((p,w)=>{const E=Math.abs(w.getEstimatedModuleSize()-o),A=Math.abs(p.getEstimatedModuleSize()-o);return E<A?-1:E>A?1:0});const d=Math.max(.2*o,f);for(let p=0;p<s.length&&s.length>3;p++){const w=s[p];Math.abs(w.getEstimatedModuleSize()-o)>d&&(s.splice(p,1),p--)}}if(s.length>3){let c=0;for(const u of s)c+=u.getEstimatedModuleSize();o=c/s.length,s.sort((u,f)=>{if(f.getCount()===u.getCount()){const d=Math.abs(f.getEstimatedModuleSize()-o),p=Math.abs(u.getEstimatedModuleSize()-o);return d<p?1:d>p?-1:0}else return f.getCount()-u.getCount()}),s.splice(3)}return[s[0],s[1],s[2]]}}kt.CENTER_QUORUM=2,kt.MIN_SKIP=3,kt.MAX_MODULES=57;class ho{constructor(r){this.image=r}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(r){this.resultPointCallback=r==null?null:r.get(K.NEED_RESULT_POINT_CALLBACK);const o=new kt(this.image,this.resultPointCallback).find(r);return this.processFinderPatternInfo(o)}processFinderPatternInfo(r){const s=r.getTopLeft(),o=r.getTopRight(),c=r.getBottomLeft(),u=this.calculateModuleSize(s,o,c);if(u<1)throw new V("No pattern found in proccess finder.");const f=ho.computeDimension(s,o,c,u),d=le.getProvisionalVersionForDimension(f),p=d.getDimensionForVersion()-7;let w=null;if(d.getAlignmentPatternCenters().length>0){const T=o.getX()-s.getX()+c.getX(),D=o.getY()-s.getY()+c.getY(),k=1-3/p,P=Math.floor(s.getX()+k*(T-s.getX())),H=Math.floor(s.getY()+k*(D-s.getY()));for(let Q=4;Q<=16;Q<<=1)try{w=this.findAlignmentInRegion(u,P,H,Q);break}catch(Z){if(!(Z instanceof V))throw Z}}const E=ho.createTransform(s,o,c,w,f),A=ho.sampleGrid(this.image,E,f);let v;return w===null?v=[c,s,o]:v=[c,s,o,w],new Ha(A,v)}static createTransform(r,s,o,c,u){const f=u-3.5;let d,p,w,E;return c!==null?(d=c.getX(),p=c.getY(),w=f-3,E=w):(d=s.getX()-r.getX()+o.getX(),p=s.getY()-r.getY()+o.getY(),w=f,E=f),Yn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,w,E,3.5,f,r.getX(),r.getY(),s.getX(),s.getY(),d,p,o.getX(),o.getY())}static sampleGrid(r,s,o){return Vr.getInstance().sampleGridWithTransform(r,o,o,s)}static computeDimension(r,s,o,c){const u=Oe.round(oe.distance(r,s)/c),f=Oe.round(oe.distance(r,o)/c);let d=Math.floor((u+f)/2)+7;switch(d&3){case 0:d++;break;case 2:d--;break;case 3:throw new V("Dimensions could be not found.")}return d}calculateModuleSize(r,s,o){return(this.calculateModuleSizeOneWay(r,s)+this.calculateModuleSizeOneWay(r,o))/2}calculateModuleSizeOneWay(r,s){const o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(s.getX()),Math.floor(s.getY())),c=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(s.getX()),Math.floor(s.getY()),Math.floor(r.getX()),Math.floor(r.getY()));return isNaN(o)?c/7:isNaN(c)?o/7:(o+c)/14}sizeOfBlackWhiteBlackRunBothWays(r,s,o,c){let u=this.sizeOfBlackWhiteBlackRun(r,s,o,c),f=1,d=r-(o-r);d<0?(f=r/(r-d),d=0):d>=this.image.getWidth()&&(f=(this.image.getWidth()-1-r)/(d-r),d=this.image.getWidth()-1);let p=Math.floor(s-(c-s)*f);return f=1,p<0?(f=s/(s-p),p=0):p>=this.image.getHeight()&&(f=(this.image.getHeight()-1-s)/(p-s),p=this.image.getHeight()-1),d=Math.floor(r+(d-r)*f),u+=this.sizeOfBlackWhiteBlackRun(r,s,d,p),u-1}sizeOfBlackWhiteBlackRun(r,s,o,c){const u=Math.abs(c-s)>Math.abs(o-r);if(u){let T=r;r=s,s=T,T=o,o=c,c=T}const f=Math.abs(o-r),d=Math.abs(c-s);let p=-f/2;const w=r<o?1:-1,E=s<c?1:-1;let A=0;const v=o+w;for(let T=r,D=s;T!==v;T+=w){const k=u?D:T,P=u?T:D;if(A===1===this.image.get(k,P)){if(A===2)return Oe.distance(T,D,r,s);A++}if(p+=d,p>0){if(D===c)break;D+=E,p-=f}}return A===2?Oe.distance(o+w,c,r,s):NaN}findAlignmentInRegion(r,s,o,c){const u=Math.floor(c*r),f=Math.max(0,s-u),d=Math.min(this.image.getWidth()-1,s+u);if(d-f<r*3)throw new V("Alignment top exceeds estimated module size.");const p=Math.max(0,o-u),w=Math.min(this.image.getHeight()-1,o+u);if(w-p<r*3)throw new V("Alignment bottom exceeds estimated module size.");return new Xa(this.image,f,p,d-f,w-p,r,this.resultPointCallback).find()}}class Xr{constructor(){this.decoder=new hy}getDecoder(){return this.decoder}decode(r,s){let o,c;if(s!=null&&s.get(K.PURE_BARCODE)!==void 0){const p=Xr.extractPureBits(r.getBlackMatrix());o=this.decoder.decodeBitMatrix(p,s),c=Xr.NO_POINTS}else{const p=new ho(r.getBlackMatrix()).detect(s);o=this.decoder.decodeBitMatrix(p.getBits(),s),c=p.getPoints()}o.getOther()instanceof S1&&o.getOther().applyMirroredCorrection(c);const u=new tt(o.getText(),o.getRawBytes(),void 0,c,ae.QR_CODE,void 0),f=o.getByteSegments();f!==null&&u.putMetadata(Dt.BYTE_SEGMENTS,f);const d=o.getECLevel();return d!==null&&u.putMetadata(Dt.ERROR_CORRECTION_LEVEL,d),o.hasStructuredAppend()&&(u.putMetadata(Dt.STRUCTURED_APPEND_SEQUENCE,o.getStructuredAppendSequenceNumber()),u.putMetadata(Dt.STRUCTURED_APPEND_PARITY,o.getStructuredAppendParity())),u}reset(){}static extractPureBits(r){const s=r.getTopLeftOnBit(),o=r.getBottomRightOnBit();if(s===null||o===null)throw new V;const c=this.moduleSize(s,r);let u=s[1],f=o[1],d=s[0],p=o[0];if(d>=p||u>=f)throw new V;if(f-u!==p-d&&(p=d+(f-u),p>=r.getWidth()))throw new V;const w=Math.round((p-d+1)/c),E=Math.round((f-u+1)/c);if(w<=0||E<=0)throw new V;if(E!==w)throw new V;const A=Math.floor(c/2);u+=A,d+=A;const v=d+Math.floor((w-1)*c)-p;if(v>0){if(v>A)throw new V;d-=v}const T=u+Math.floor((E-1)*c)-f;if(T>0){if(T>A)throw new V;u-=T}const D=new ze(w,E);for(let k=0;k<E;k++){const P=u+Math.floor(k*c);for(let H=0;H<w;H++)r.get(d+Math.floor(H*c),P)&&D.set(H,k)}return D}static moduleSize(r,s){const o=s.getHeight(),c=s.getWidth();let u=r[0],f=r[1],d=!0,p=0;for(;u<c&&f<o;){if(d!==s.get(u,f)){if(++p===5)break;d=!d}u++,f++}if(u===c||f===o)throw new V;return(u-r[0])/7}}Xr.NO_POINTS=new Array;class xe{PDF417Common(){}static getBitCountSum(r){return Oe.sum(r)}static toIntArray(r){if(r==null||!r.length)return xe.EMPTY_INT_ARRAY;const s=new Int32Array(r.length);let o=0;for(const c of r)s[o++]=c;return s}static getCodeword(r){const s=N.binarySearch(xe.SYMBOL_TABLE,r&262143);return s<0?-1:(xe.CODEWORD_TABLE[s]-1)%xe.NUMBER_OF_CODEWORDS}}xe.NUMBER_OF_CODEWORDS=929,xe.MAX_CODEWORDS_IN_BARCODE=xe.NUMBER_OF_CODEWORDS-1,xe.MIN_ROWS_IN_BARCODE=3,xe.MAX_ROWS_IN_BARCODE=90,xe.MODULES_IN_CODEWORD=17,xe.MODULES_IN_STOP_PATTERN=18,xe.BARS_IN_MODULE=8,xe.EMPTY_INT_ARRAY=new Int32Array([]),xe.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),xe.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class gy{constructor(r,s){this.bits=r,this.points=s}getBits(){return this.bits}getPoints(){return this.points}}class Ce{static detectMultiple(r,s,o){let c=r.getBlackMatrix(),u=Ce.detect(o,c);return u.length||(c=c.clone(),c.rotate180(),u=Ce.detect(o,c)),new gy(c,u)}static detect(r,s){const o=new Array;let c=0,u=0,f=!1;for(;c<s.getHeight();){const d=Ce.findVertices(s,c,u);if(d[0]==null&&d[3]==null){if(!f)break;f=!1,u=0;for(const p of o)p[1]!=null&&(c=Math.trunc(Math.max(c,p[1].getY()))),p[3]!=null&&(c=Math.max(c,Math.trunc(p[3].getY())));c+=Ce.ROW_STEP;continue}if(f=!0,o.push(d),!r)break;d[2]!=null?(u=Math.trunc(d[2].getX()),c=Math.trunc(d[2].getY())):(u=Math.trunc(d[4].getX()),c=Math.trunc(d[4].getY()))}return o}static findVertices(r,s,o){const c=r.getHeight(),u=r.getWidth(),f=new Array(8);return Ce.copyToResult(f,Ce.findRowsWithPattern(r,c,u,s,o,Ce.START_PATTERN),Ce.INDEXES_START_PATTERN),f[4]!=null&&(o=Math.trunc(f[4].getX()),s=Math.trunc(f[4].getY())),Ce.copyToResult(f,Ce.findRowsWithPattern(r,c,u,s,o,Ce.STOP_PATTERN),Ce.INDEXES_STOP_PATTERN),f}static copyToResult(r,s,o){for(let c=0;c<o.length;c++)r[o[c]]=s[c]}static findRowsWithPattern(r,s,o,c,u,f){const d=new Array(4);let p=!1;const w=new Int32Array(f.length);for(;c<s;c+=Ce.ROW_STEP){let A=Ce.findGuardPattern(r,u,c,o,!1,f,w);if(A!=null){for(;c>0;){const v=Ce.findGuardPattern(r,u,--c,o,!1,f,w);if(v!=null)A=v;else{c++;break}}d[0]=new oe(A[0],c),d[1]=new oe(A[1],c),p=!0;break}}let E=c+1;if(p){let A=0,v=Int32Array.from([Math.trunc(d[0].getX()),Math.trunc(d[1].getX())]);for(;E<s;E++){const T=Ce.findGuardPattern(r,v[0],E,o,!1,f,w);if(T!=null&&Math.abs(v[0]-T[0])<Ce.MAX_PATTERN_DRIFT&&Math.abs(v[1]-T[1])<Ce.MAX_PATTERN_DRIFT)v=T,A=0;else{if(A>Ce.SKIPPED_ROW_COUNT_MAX)break;A++}}E-=A+1,d[2]=new oe(v[0],E),d[3]=new oe(v[1],E)}return E-c<Ce.BARCODE_MIN_HEIGHT&&N.fill(d,null),d}static findGuardPattern(r,s,o,c,u,f,d){N.fillWithin(d,0,d.length,0);let p=s,w=0;for(;r.get(p,o)&&p>0&&w++<Ce.MAX_PIXEL_DRIFT;)p--;let E=p,A=0,v=f.length;for(let T=u;E<c;E++)if(r.get(E,o)!==T)d[A]++;else{if(A===v-1){if(Ce.patternMatchVariance(d,f,Ce.MAX_INDIVIDUAL_VARIANCE)<Ce.MAX_AVG_VARIANCE)return new Int32Array([p,E]);p+=d[0]+d[1],L.arraycopy(d,2,d,0,A-1),d[A-1]=0,d[A]=0,A--}else A++;d[A]=1,T=!T}return A===v-1&&Ce.patternMatchVariance(d,f,Ce.MAX_INDIVIDUAL_VARIANCE)<Ce.MAX_AVG_VARIANCE?new Int32Array([p,E-1]):null}static patternMatchVariance(r,s,o){let c=r.length,u=0,f=0;for(let w=0;w<c;w++)u+=r[w],f+=s[w];if(u<f)return 1/0;let d=u/f;o*=d;let p=0;for(let w=0;w<c;w++){let E=r[w],A=s[w]*d,v=E>A?E-A:A-E;if(v>o)return 1/0;p+=v}return p/u}}Ce.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Ce.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Ce.MAX_AVG_VARIANCE=.42,Ce.MAX_INDIVIDUAL_VARIANCE=.8,Ce.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Ce.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Ce.MAX_PIXEL_DRIFT=3,Ce.MAX_PATTERN_DRIFT=5,Ce.SKIPPED_ROW_COUNT_MAX=25,Ce.ROW_STEP=5,Ce.BARCODE_MIN_HEIGHT=10;class jt{constructor(r,s){if(s.length===0)throw new C;this.field=r;let o=s.length;if(o>1&&s[0]===0){let c=1;for(;c<o&&s[c]===0;)c++;c===o?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(o-c),L.arraycopy(s,c,this.coefficients,0,this.coefficients.length))}else this.coefficients=s}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(r){return this.coefficients[this.coefficients.length-1-r]}evaluateAt(r){if(r===0)return this.getCoefficient(0);if(r===1){let c=0;for(let u of this.coefficients)c=this.field.add(c,u);return c}let s=this.coefficients[0],o=this.coefficients.length;for(let c=1;c<o;c++)s=this.field.add(this.field.multiply(r,s),this.coefficients[c]);return s}add(r){if(!this.field.equals(r.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero())return r;if(r.isZero())return this;let s=this.coefficients,o=r.coefficients;if(s.length>o.length){let f=s;s=o,o=f}let c=new Int32Array(o.length),u=o.length-s.length;L.arraycopy(o,0,c,0,u);for(let f=u;f<o.length;f++)c[f]=this.field.add(s[f-u],o[f]);return new jt(this.field,c)}subtract(r){if(!this.field.equals(r.field))throw new C("ModulusPolys do not have same ModulusGF field");return r.isZero()?this:this.add(r.negative())}multiply(r){return r instanceof jt?this.multiplyOther(r):this.multiplyScalar(r)}multiplyOther(r){if(!this.field.equals(r.field))throw new C("ModulusPolys do not have same ModulusGF field");if(this.isZero()||r.isZero())return new jt(this.field,new Int32Array([0]));let s=this.coefficients,o=s.length,c=r.coefficients,u=c.length,f=new Int32Array(o+u-1);for(let d=0;d<o;d++){let p=s[d];for(let w=0;w<u;w++)f[d+w]=this.field.add(f[d+w],this.field.multiply(p,c[w]))}return new jt(this.field,f)}negative(){let r=this.coefficients.length,s=new Int32Array(r);for(let o=0;o<r;o++)s[o]=this.field.subtract(0,this.coefficients[o]);return new jt(this.field,s)}multiplyScalar(r){if(r===0)return new jt(this.field,new Int32Array([0]));if(r===1)return this;let s=this.coefficients.length,o=new Int32Array(s);for(let c=0;c<s;c++)o[c]=this.field.multiply(this.coefficients[c],r);return new jt(this.field,o)}multiplyByMonomial(r,s){if(r<0)throw new C;if(s===0)return new jt(this.field,new Int32Array([0]));let o=this.coefficients.length,c=new Int32Array(o+r);for(let u=0;u<o;u++)c[u]=this.field.multiply(this.coefficients[u],s);return new jt(this.field,c)}toString(){let r=new ve;for(let s=this.getDegree();s>=0;s--){let o=this.getCoefficient(s);o!==0&&(o<0?(r.append(" - "),o=-o):r.length()>0&&r.append(" + "),(s===0||o!==1)&&r.append(o),s!==0&&(s===1?r.append("x"):(r.append("x^"),r.append(s))))}return r.toString()}}class py{add(r,s){return(r+s)%this.modulus}subtract(r,s){return(this.modulus+r-s)%this.modulus}exp(r){return this.expTable[r]}log(r){if(r===0)throw new C;return this.logTable[r]}inverse(r){if(r===0)throw new za;return this.expTable[this.modulus-this.logTable[r]-1]}multiply(r,s){return r===0||s===0?0:this.expTable[(this.logTable[r]+this.logTable[s])%(this.modulus-1)]}getSize(){return this.modulus}equals(r){return r===this}}class _u extends py{constructor(r,s){super(),this.modulus=r,this.expTable=new Int32Array(r),this.logTable=new Int32Array(r);let o=1;for(let c=0;c<r;c++)this.expTable[c]=o,o=o*s%r;for(let c=0;c<r-1;c++)this.logTable[this.expTable[c]]=c;this.zero=new jt(this,new Int32Array([0])),this.one=new jt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(r,s){if(r<0)throw new C;if(s===0)return this.zero;let o=new Int32Array(r+1);return o[0]=s,new jt(this,o)}}_u.PDF417_GF=new _u(xe.NUMBER_OF_CODEWORDS,3);class T1{constructor(){this.field=_u.PDF417_GF}decode(r,s,o){let c=new jt(this.field,r),u=new Int32Array(s),f=!1;for(let D=s;D>0;D--){let k=c.evaluateAt(this.field.exp(D));u[s-D]=k,k!==0&&(f=!0)}if(!f)return 0;let d=this.field.getOne();if(o!=null)for(const D of o){let k=this.field.exp(r.length-1-D),P=new jt(this.field,new Int32Array([this.field.subtract(0,k),1]));d=d.multiply(P)}let p=new jt(this.field,u),w=this.runEuclideanAlgorithm(this.field.buildMonomial(s,1),p,s),E=w[0],A=w[1],v=this.findErrorLocations(E),T=this.findErrorMagnitudes(A,E,v);for(let D=0;D<v.length;D++){let k=r.length-1-this.field.log(v[D]);if(k<0)throw R.getChecksumInstance();r[k]=this.field.subtract(r[k],T[D])}return v.length}runEuclideanAlgorithm(r,s,o){if(r.getDegree()<s.getDegree()){let v=r;r=s,s=v}let c=r,u=s,f=this.field.getZero(),d=this.field.getOne();for(;u.getDegree()>=Math.round(o/2);){let v=c,T=f;if(c=u,f=d,c.isZero())throw R.getChecksumInstance();u=v;let D=this.field.getZero(),k=c.getCoefficient(c.getDegree()),P=this.field.inverse(k);for(;u.getDegree()>=c.getDegree()&&!u.isZero();){let H=u.getDegree()-c.getDegree(),Q=this.field.multiply(u.getCoefficient(u.getDegree()),P);D=D.add(this.field.buildMonomial(H,Q)),u=u.subtract(c.multiplyByMonomial(H,Q))}d=D.multiply(f).subtract(T).negative()}let p=d.getCoefficient(0);if(p===0)throw R.getChecksumInstance();let w=this.field.inverse(p),E=d.multiply(w),A=u.multiply(w);return[E,A]}findErrorLocations(r){let s=r.getDegree(),o=new Int32Array(s),c=0;for(let u=1;u<this.field.getSize()&&c<s;u++)r.evaluateAt(u)===0&&(o[c]=this.field.inverse(u),c++);if(c!==s)throw R.getChecksumInstance();return o}findErrorMagnitudes(r,s,o){let c=s.getDegree(),u=new Int32Array(c);for(let w=1;w<=c;w++)u[c-w]=this.field.multiply(w,s.getCoefficient(w));let f=new jt(this.field,u),d=o.length,p=new Int32Array(d);for(let w=0;w<d;w++){let E=this.field.inverse(o[w]),A=this.field.subtract(0,r.evaluateAt(E)),v=this.field.inverse(f.evaluateAt(E));p[w]=this.field.multiply(A,v)}return p}}class bi{constructor(r,s,o,c,u){r instanceof bi?this.constructor_2(r):this.constructor_1(r,s,o,c,u)}constructor_1(r,s,o,c,u){const f=s==null||o==null,d=c==null||u==null;if(f&&d)throw new V;f?(s=new oe(0,c.getY()),o=new oe(0,u.getY())):d&&(c=new oe(r.getWidth()-1,s.getY()),u=new oe(r.getWidth()-1,o.getY())),this.image=r,this.topLeft=s,this.bottomLeft=o,this.topRight=c,this.bottomRight=u,this.minX=Math.trunc(Math.min(s.getX(),o.getX())),this.maxX=Math.trunc(Math.max(c.getX(),u.getX())),this.minY=Math.trunc(Math.min(s.getY(),c.getY())),this.maxY=Math.trunc(Math.max(o.getY(),u.getY()))}constructor_2(r){this.image=r.image,this.topLeft=r.getTopLeft(),this.bottomLeft=r.getBottomLeft(),this.topRight=r.getTopRight(),this.bottomRight=r.getBottomRight(),this.minX=r.getMinX(),this.maxX=r.getMaxX(),this.minY=r.getMinY(),this.maxY=r.getMaxY()}static merge(r,s){return r==null?s:s==null?r:new bi(r.image,r.topLeft,r.bottomLeft,s.topRight,s.bottomRight)}addMissingRows(r,s,o){let c=this.topLeft,u=this.bottomLeft,f=this.topRight,d=this.bottomRight;if(r>0){let p=o?this.topLeft:this.topRight,w=Math.trunc(p.getY()-r);w<0&&(w=0);let E=new oe(p.getX(),w);o?c=E:f=E}if(s>0){let p=o?this.bottomLeft:this.bottomRight,w=Math.trunc(p.getY()+s);w>=this.image.getHeight()&&(w=this.image.getHeight()-1);let E=new oe(p.getX(),w);o?u=E:d=E}return new bi(this.image,c,u,f,d)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class my{constructor(r,s,o,c){this.columnCount=r,this.errorCorrectionLevel=c,this.rowCountUpperPart=s,this.rowCountLowerPart=o,this.rowCount=s+o}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class go{constructor(){this.buffer=""}static form(r,s){let o=-1;function c(f,d,p,w,E,A){if(f==="%%")return"%";if(s[++o]===void 0)return;f=w?parseInt(w.substr(1)):void 0;let v=E?parseInt(E.substr(1)):void 0,T;switch(A){case"s":T=s[o];break;case"c":T=s[o][0];break;case"f":T=parseFloat(s[o]).toFixed(f);break;case"p":T=parseFloat(s[o]).toPrecision(f);break;case"e":T=parseFloat(s[o]).toExponential(f);break;case"x":T=parseInt(s[o]).toString(v||16);break;case"d":T=parseFloat(parseInt(s[o],v||10).toPrecision(f)).toFixed(0);break}T=typeof T=="object"?JSON.stringify(T):(+T).toString(v);let D=parseInt(p),k=p&&p[0]+""=="0"?"0":" ";for(;T.length<D;)T=d!==void 0?T+k:k+T;return T}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return r.replace(u,c)}format(r,...s){this.buffer+=go.form(r,s)}toString(){return this.buffer}}class po{constructor(r){this.boundingBox=new bi(r),this.codewords=new Array(r.getMaxY()-r.getMinY()+1)}getCodewordNearby(r){let s=this.getCodeword(r);if(s!=null)return s;for(let o=1;o<po.MAX_NEARBY_DISTANCE;o++){let c=this.imageRowToCodewordIndex(r)-o;if(c>=0&&(s=this.codewords[c],s!=null)||(c=this.imageRowToCodewordIndex(r)+o,c<this.codewords.length&&(s=this.codewords[c],s!=null)))return s}return null}imageRowToCodewordIndex(r){return r-this.boundingBox.getMinY()}setCodeword(r,s){this.codewords[this.imageRowToCodewordIndex(r)]=s}getCodeword(r){return this.codewords[this.imageRowToCodewordIndex(r)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const r=new go;let s=0;for(const o of this.codewords){if(o==null){r.format("%3d:    |   %n",s++);continue}r.format("%3d: %3d|%3d%n",s++,o.getRowNumber(),o.getValue())}return r.toString()}}po.MAX_NEARBY_DISTANCE=5;class mo{constructor(){this.values=new Map}setValue(r){r=Math.trunc(r);let s=this.values.get(r);s==null&&(s=0),s++,this.values.set(r,s)}getValue(){let r=-1,s=new Array;for(const[o,c]of this.values.entries()){const u={getKey:()=>o,getValue:()=>c};u.getValue()>r?(r=u.getValue(),s=[],s.push(u.getKey())):u.getValue()===r&&s.push(u.getKey())}return xe.toIntArray(s)}getConfidence(r){return this.values.get(r)}}class N1 extends po{constructor(r,s){super(r),this._isLeft=s}setRowNumbers(){for(let r of this.getCodewords())r!=null&&r.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(r){let s=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(s,r);let o=this.getBoundingBox(),c=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),d=this.imageRowToCodewordIndex(Math.trunc(u.getY())),p=-1,w=1,E=0;for(let A=f;A<d;A++){if(s[A]==null)continue;let v=s[A],T=v.getRowNumber()-p;if(T===0)E++;else if(T===1)w=Math.max(w,E),E=1,p=v.getRowNumber();else if(T<0||v.getRowNumber()>=r.getRowCount()||T>A)s[A]=null;else{let D;w>2?D=(w-2)*T:D=T;let k=D>=A;for(let P=1;P<=D&&!k;P++)k=s[A-P]!=null;k?s[A]=null:(p=v.getRowNumber(),E=1)}}}getRowHeights(){let r=this.getBarcodeMetadata();if(r==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(r);let s=new Int32Array(r.getRowCount());for(let o of this.getCodewords())if(o!=null){let c=o.getRowNumber();if(c>=s.length)continue;s[c]++}return s}adjustIncompleteIndicatorColumnRowNumbers(r){let s=this.getBoundingBox(),o=this._isLeft?s.getTopLeft():s.getTopRight(),c=this._isLeft?s.getBottomLeft():s.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),f=this.imageRowToCodewordIndex(Math.trunc(c.getY())),d=this.getCodewords(),p=-1;for(let w=u;w<f;w++){if(d[w]==null)continue;let E=d[w];E.setRowNumberAsRowIndicatorColumn();let A=E.getRowNumber()-p;A===0||(A===1?p=E.getRowNumber():E.getRowNumber()>=r.getRowCount()?d[w]=null:p=E.getRowNumber())}}getBarcodeMetadata(){let r=this.getCodewords(),s=new mo,o=new mo,c=new mo,u=new mo;for(let d of r){if(d==null)continue;d.setRowNumberAsRowIndicatorColumn();let p=d.getValue()%30,w=d.getRowNumber();switch(this._isLeft||(w+=2),w%3){case 0:o.setValue(p*3+1);break;case 1:u.setValue(p/3),c.setValue(p%3);break;case 2:s.setValue(p+1);break}}if(s.getValue().length===0||o.getValue().length===0||c.getValue().length===0||u.getValue().length===0||s.getValue()[0]<1||o.getValue()[0]+c.getValue()[0]<xe.MIN_ROWS_IN_BARCODE||o.getValue()[0]+c.getValue()[0]>xe.MAX_ROWS_IN_BARCODE)return null;let f=new my(s.getValue()[0],o.getValue()[0],c.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(r,f),f}removeIncorrectCodewords(r,s){for(let o=0;o<r.length;o++){let c=r[o];if(r[o]==null)continue;let u=c.getValue()%30,f=c.getRowNumber();if(f>s.getRowCount()){r[o]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:u*3+1!==s.getRowCountUpperPart()&&(r[o]=null);break;case 1:(Math.trunc(u/3)!==s.getErrorCorrectionLevel()||u%3!==s.getRowCountLowerPart())&&(r[o]=null);break;case 2:u+1!==s.getColumnCount()&&(r[o]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class xo{constructor(r,s){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=r,this.barcodeColumnCount=r.getColumnCount(),this.boundingBox=s,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let r=xe.MAX_CODEWORDS_IN_BARCODE,s;do s=r,r=this.adjustRowNumbersAndGetCount();while(r>0&&r<s);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(r){r!=null&&r.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let r=this.adjustRowNumbersByRow();if(r===0)return 0;for(let s=1;s<this.barcodeColumnCount+1;s++){let o=this.detectionResultColumns[s].getCodewords();for(let c=0;c<o.length;c++)o[c]!=null&&(o[c].hasValidRowNumber()||this.adjustRowNumbers(s,c,o))}return r}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let r=this.detectionResultColumns[0].getCodewords(),s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<r.length;o++)if(r[o]!=null&&s[o]!=null&&r[o].getRowNumber()===s[o].getRowNumber())for(let c=1;c<=this.barcodeColumnCount;c++){let u=this.detectionResultColumns[c].getCodewords()[o];u!=null&&(u.setRowNumber(r[o].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[c].getCodewords()[o]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let r=0,s=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let c=s[o].getRowNumber(),u=0;for(let f=this.barcodeColumnCount+1;f>0&&u<this.ADJUST_ROW_NUMBER_SKIP;f--){let d=this.detectionResultColumns[f].getCodewords()[o];d!=null&&(u=xo.adjustRowNumberIfValid(c,u,d),d.hasValidRowNumber()||r++)}}return r}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let r=0,s=this.detectionResultColumns[0].getCodewords();for(let o=0;o<s.length;o++){if(s[o]==null)continue;let c=s[o].getRowNumber(),u=0;for(let f=1;f<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;f++){let d=this.detectionResultColumns[f].getCodewords()[o];d!=null&&(u=xo.adjustRowNumberIfValid(c,u,d),d.hasValidRowNumber()||r++)}}return r}static adjustRowNumberIfValid(r,s,o){return o==null||o.hasValidRowNumber()||(o.isValidRowNumber(r)?(o.setRowNumber(r),s=0):++s),s}adjustRowNumbers(r,s,o){if(!this.detectionResultColumns[r-1])return;let c=o[s],u=this.detectionResultColumns[r-1].getCodewords(),f=u;this.detectionResultColumns[r+1]!=null&&(f=this.detectionResultColumns[r+1].getCodewords());let d=new Array(14);d[2]=u[s],d[3]=f[s],s>0&&(d[0]=o[s-1],d[4]=u[s-1],d[5]=f[s-1]),s>1&&(d[8]=o[s-2],d[10]=u[s-2],d[11]=f[s-2]),s<o.length-1&&(d[1]=o[s+1],d[6]=u[s+1],d[7]=f[s+1]),s<o.length-2&&(d[9]=o[s+2],d[12]=u[s+2],d[13]=f[s+2]);for(let p of d)if(xo.adjustRowNumber(c,p))return}static adjustRowNumber(r,s){return s==null?!1:s.hasValidRowNumber()&&s.getBucket()===r.getBucket()?(r.setRowNumber(s.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(r){this.boundingBox=r}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(r,s){this.detectionResultColumns[r]=s}getDetectionResultColumn(r){return this.detectionResultColumns[r]}toString(){let r=this.detectionResultColumns[0];r==null&&(r=this.detectionResultColumns[this.barcodeColumnCount+1]);let s=new go;for(let o=0;o<r.getCodewords().length;o++){s.format("CW %3d:",o);for(let c=0;c<this.barcodeColumnCount+2;c++){if(this.detectionResultColumns[c]==null){s.format("    |   ");continue}let u=this.detectionResultColumns[c].getCodewords()[o];if(u==null){s.format("    |   ");continue}s.format(" %3d|%3d",u.getRowNumber(),u.getValue())}s.format("%n")}return s.toString()}}class wo{constructor(r,s,o,c){this.rowNumber=wo.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(r),this.endX=Math.trunc(s),this.bucket=Math.trunc(o),this.value=Math.trunc(c)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(r){return r!==wo.BARCODE_ROW_UNKNOWN&&this.bucket===r%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(r){this.rowNumber=r}toString(){return this.rowNumber+"|"+this.value}}wo.BARCODE_ROW_UNKNOWN=-1;class hn{static initialize(){for(let r=0;r<xe.SYMBOL_TABLE.length;r++){let s=xe.SYMBOL_TABLE[r],o=s&1;for(let c=0;c<xe.BARS_IN_MODULE;c++){let u=0;for(;(s&1)===o;)u+=1,s>>=1;o=s&1,hn.RATIOS_TABLE[r]||(hn.RATIOS_TABLE[r]=new Array(xe.BARS_IN_MODULE)),hn.RATIOS_TABLE[r][xe.BARS_IN_MODULE-c-1]=Math.fround(u/xe.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(r){let s=hn.getDecodedCodewordValue(hn.sampleBitCounts(r));return s!==-1?s:hn.getClosestDecodedValue(r)}static sampleBitCounts(r){let s=Oe.sum(r),o=new Int32Array(xe.BARS_IN_MODULE),c=0,u=0;for(let f=0;f<xe.MODULES_IN_CODEWORD;f++){let d=s/(2*xe.MODULES_IN_CODEWORD)+f*s/xe.MODULES_IN_CODEWORD;u+r[c]<=d&&(u+=r[c],c++),o[c]++}return o}static getDecodedCodewordValue(r){let s=hn.getBitValue(r);return xe.getCodeword(s)===-1?-1:s}static getBitValue(r){let s=0;for(let o=0;o<r.length;o++)for(let c=0;c<r[o];c++)s=s<<1|(o%2===0?1:0);return Math.trunc(s)}static getClosestDecodedValue(r){let s=Oe.sum(r),o=new Array(xe.BARS_IN_MODULE);if(s>1)for(let f=0;f<o.length;f++)o[f]=Math.fround(r[f]/s);let c=ja.MAX_VALUE,u=-1;this.bSymbolTableReady||hn.initialize();for(let f=0;f<hn.RATIOS_TABLE.length;f++){let d=0,p=hn.RATIOS_TABLE[f];for(let w=0;w<xe.BARS_IN_MODULE;w++){let E=Math.fround(p[w]-o[w]);if(d+=Math.fround(E*E),d>=c)break}d<c&&(c=d,u=xe.SYMBOL_TABLE[f])}return u}}hn.bSymbolTableReady=!1,hn.RATIOS_TABLE=new Array(xe.SYMBOL_TABLE.length).map(_=>new Array(xe.BARS_IN_MODULE));class R1{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(r){this.segmentIndex=r}getFileId(){return this.fileId}setFileId(r){this.fileId=r}getOptionalData(){return this.optionalData}setOptionalData(r){this.optionalData=r}isLastSegment(){return this.lastSegment}setLastSegment(r){this.lastSegment=r}getSegmentCount(){return this.segmentCount}setSegmentCount(r){this.segmentCount=r}getSender(){return this.sender||null}setSender(r){this.sender=r}getAddressee(){return this.addressee||null}setAddressee(r){this.addressee=r}getFileName(){return this.fileName}setFileName(r){this.fileName=r}getFileSize(){return this.fileSize}setFileSize(r){this.fileSize=r}getChecksum(){return this.checksum}setChecksum(r){this.checksum=r}getTimestamp(){return this.timestamp}setTimestamp(r){this.timestamp=r}}class M1{static parseLong(r,s=void 0){return parseInt(r,s)}}class b1 extends g{}b1.kind="NullPointerException";class xy{writeBytes(r){this.writeBytesOffset(r,0,r.length)}writeBytesOffset(r,s,o){if(r==null)throw new b1;if(s<0||s>r.length||o<0||s+o>r.length||s+o<0)throw new F;if(o===0)return;for(let c=0;c<o;c++)this.write(r[s+c])}flush(){}close(){}}class wy extends g{}class yy extends xy{constructor(r=32){if(super(),this.count=0,r<0)throw new C("Negative initial size: "+r);this.buf=new Uint8Array(r)}ensureCapacity(r){r-this.buf.length>0&&this.grow(r)}grow(r){let o=this.buf.length<<1;if(o-r<0&&(o=r),o<0){if(r<0)throw new wy;o=M.MAX_VALUE}this.buf=N.copyOfUint8Array(this.buf,o)}write(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1}writeBytesOffset(r,s,o){if(s<0||s>r.length||o<0||s+o-r.length>0)throw new F;this.ensureCapacity(this.count+o),L.arraycopy(r,s,this.buf,this.count,o),this.count+=o}writeTo(r){r.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return N.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(r){return new String(this.buf).toString()}toString_number(r){return new String(this.buf).toString()}close(){}}var Ve;(function(_){_[_.ALPHA=0]="ALPHA",_[_.LOWER=1]="LOWER",_[_.MIXED=2]="MIXED",_[_.PUNCT=3]="PUNCT",_[_.ALPHA_SHIFT=4]="ALPHA_SHIFT",_[_.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(Ve||(Ve={}));function O1(){if(typeof window<"u")return window.BigInt||null;if(typeof Eo<"u")return Eo.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let Qa;function Qr(_){if(typeof Qa>"u"&&(Qa=O1()),Qa===null)throw new Error("BigInt is not supported!");return Qa(_)}function Cy(){let _=[];_[0]=Qr(1);let r=Qr(900);_[1]=r;for(let s=2;s<16;s++)_[s]=_[s-1]*r;return _}class z{static decode(r,s){let o=new ve(""),c=W.ISO8859_1;o.enableDecoding(c);let u=1,f=r[u++],d=new R1;for(;u<r[0];){switch(f){case z.TEXT_COMPACTION_MODE_LATCH:u=z.textCompaction(r,u,o);break;case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:u=z.byteCompaction(f,r,c,u,o);break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[u++]);break;case z.NUMERIC_COMPACTION_MODE_LATCH:u=z.numericCompaction(r,u,o);break;case z.ECI_CHARSET:W.getCharacterSetECIByValue(r[u++]);break;case z.ECI_GENERAL_PURPOSE:u+=2;break;case z.ECI_USER_DEFINED:u++;break;case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=z.decodeMacroBlock(r,u,d);break;case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:throw new j;default:u--,u=z.textCompaction(r,u,o);break}if(u<r.length)f=r[u++];else throw j.getFormatInstance()}if(o.length()===0)throw j.getFormatInstance();let p=new lo(null,o.toString(),null,s);return p.setOther(d),p}static decodeMacroBlock(r,s,o){if(s+z.NUMBER_OF_SEQUENCE_CODEWORDS>r[0])throw j.getFormatInstance();let c=new Int32Array(z.NUMBER_OF_SEQUENCE_CODEWORDS);for(let d=0;d<z.NUMBER_OF_SEQUENCE_CODEWORDS;d++,s++)c[d]=r[s];o.setSegmentIndex(M.parseInt(z.decodeBase900toBase10(c,z.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new ve;s=z.textCompaction(r,s,u),o.setFileId(u.toString());let f=-1;for(r[s]===z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=s+1);s<r[0];)switch(r[s]){case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(s++,r[s]){case z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let d=new ve;s=z.textCompaction(r,s+1,d),o.setFileName(d.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let p=new ve;s=z.textCompaction(r,s+1,p),o.setSender(p.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let w=new ve;s=z.textCompaction(r,s+1,w),o.setAddressee(w.toString());break;case z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let E=new ve;s=z.numericCompaction(r,s+1,E),o.setSegmentCount(M.parseInt(E.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let A=new ve;s=z.numericCompaction(r,s+1,A),o.setTimestamp(M1.parseLong(A.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let v=new ve;s=z.numericCompaction(r,s+1,v),o.setChecksum(M.parseInt(v.toString()));break;case z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let T=new ve;s=z.numericCompaction(r,s+1,T),o.setFileSize(M1.parseLong(T.toString()));break;default:throw j.getFormatInstance()}break;case z.MACRO_PDF417_TERMINATOR:s++,o.setLastSegment(!0);break;default:throw j.getFormatInstance()}if(f!==-1){let d=s-f;o.isLastSegment()&&d--,o.setOptionalData(N.copyOfRange(r,f,f+d))}return s}static textCompaction(r,s,o){let c=new Int32Array((r[0]-s)*2),u=new Int32Array((r[0]-s)*2),f=0,d=!1;for(;s<r[0]&&!d;){let p=r[s++];if(p<z.TEXT_COMPACTION_MODE_LATCH)c[f]=p/30,c[f+1]=p%30,f+=2;else switch(p){case z.TEXT_COMPACTION_MODE_LATCH:c[f++]=z.TEXT_COMPACTION_MODE_LATCH;break;case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:s--,d=!0;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c[f]=z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,p=r[s++],u[f]=p,f++;break}}return z.decodeTextCompaction(c,u,f,o),s}static decodeTextCompaction(r,s,o,c){let u=Ve.ALPHA,f=Ve.ALPHA,d=0;for(;d<o;){let p=r[d],w="";switch(u){case Ve.ALPHA:if(p<26)w=String.fromCharCode(65+p);else switch(p){case 26:w=" ";break;case z.LL:u=Ve.LOWER;break;case z.ML:u=Ve.MIXED;break;case z.PS:f=u,u=Ve.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=Ve.ALPHA;break}break;case Ve.LOWER:if(p<26)w=String.fromCharCode(97+p);else switch(p){case 26:w=" ";break;case z.AS:f=u,u=Ve.ALPHA_SHIFT;break;case z.ML:u=Ve.MIXED;break;case z.PS:f=u,u=Ve.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=Ve.ALPHA;break}break;case Ve.MIXED:if(p<z.PL)w=z.MIXED_CHARS[p];else switch(p){case z.PL:u=Ve.PUNCT;break;case 26:w=" ";break;case z.LL:u=Ve.LOWER;break;case z.AL:u=Ve.ALPHA;break;case z.PS:f=u,u=Ve.PUNCT_SHIFT;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=Ve.ALPHA;break}break;case Ve.PUNCT:if(p<z.PAL)w=z.PUNCT_CHARS[p];else switch(p){case z.PAL:u=Ve.ALPHA;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=Ve.ALPHA;break}break;case Ve.ALPHA_SHIFT:if(u=f,p<26)w=String.fromCharCode(65+p);else switch(p){case 26:w=" ";break;case z.TEXT_COMPACTION_MODE_LATCH:u=Ve.ALPHA;break}break;case Ve.PUNCT_SHIFT:if(u=f,p<z.PAL)w=z.PUNCT_CHARS[p];else switch(p){case z.PAL:u=Ve.ALPHA;break;case z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:c.append(s[d]);break;case z.TEXT_COMPACTION_MODE_LATCH:u=Ve.ALPHA;break}break}w!==""&&c.append(w),d++}}static byteCompaction(r,s,o,c,u){let f=new yy,d=0,p=0,w=!1;switch(r){case z.BYTE_COMPACTION_MODE_LATCH:let E=new Int32Array(6),A=s[c++];for(;c<s[0]&&!w;)switch(E[d++]=A,p=900*p+A,A=s[c++],A){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:c--,w=!0;break;default:if(d%5===0&&d>0){for(let v=0;v<6;++v)f.write(Number(Qr(p)>>Qr(8*(5-v))));p=0,d=0}break}c===s[0]&&A<z.TEXT_COMPACTION_MODE_LATCH&&(E[d++]=A);for(let v=0;v<d;v++)f.write(E[v]);break;case z.BYTE_COMPACTION_MODE_LATCH_6:for(;c<s[0]&&!w;){let v=s[c++];if(v<z.TEXT_COMPACTION_MODE_LATCH)d++,p=900*p+v;else switch(v){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.NUMERIC_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:c--,w=!0;break}if(d%5===0&&d>0){for(let T=0;T<6;++T)f.write(Number(Qr(p)>>Qr(8*(5-T))));p=0,d=0}}break}return u.append(_e.decode(f.toByteArray(),o)),c}static numericCompaction(r,s,o){let c=0,u=!1,f=new Int32Array(z.MAX_NUMERIC_CODEWORDS);for(;s<r[0]&&!u;){let d=r[s++];if(s===r[0]&&(u=!0),d<z.TEXT_COMPACTION_MODE_LATCH)f[c]=d,c++;else switch(d){case z.TEXT_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH:case z.BYTE_COMPACTION_MODE_LATCH_6:case z.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case z.MACRO_PDF417_TERMINATOR:s--,u=!0;break}(c%z.MAX_NUMERIC_CODEWORDS===0||d===z.NUMERIC_COMPACTION_MODE_LATCH||u)&&c>0&&(o.append(z.decodeBase900toBase10(f,c)),c=0)}return s}static decodeBase900toBase10(r,s){let o=Qr(0);for(let u=0;u<s;u++)o+=z.EXP900[s-u-1]*Qr(r[u]);let c=o.toString();if(c.charAt(0)!=="1")throw new j;return c.substring(1)}}z.TEXT_COMPACTION_MODE_LATCH=900,z.BYTE_COMPACTION_MODE_LATCH=901,z.NUMERIC_COMPACTION_MODE_LATCH=902,z.BYTE_COMPACTION_MODE_LATCH_6=924,z.ECI_USER_DEFINED=925,z.ECI_GENERAL_PURPOSE=926,z.ECI_CHARSET=927,z.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,z.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,z.MACRO_PDF417_TERMINATOR=922,z.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,z.MAX_NUMERIC_CODEWORDS=15,z.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,z.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,z.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,z.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,z.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,z.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,z.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,z.PL=25,z.LL=27,z.AS=27,z.ML=28,z.AL=28,z.PS=29,z.PAL=29,z.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,z.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",z.EXP900=O1()?Cy():[],z.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ee{constructor(){}static decode(r,s,o,c,u,f,d){let p=new bi(r,s,o,c,u),w=null,E=null,A;for(let D=!0;;D=!1){if(s!=null&&(w=Ee.getRowIndicatorColumn(r,p,s,!0,f,d)),c!=null&&(E=Ee.getRowIndicatorColumn(r,p,c,!1,f,d)),A=Ee.merge(w,E),A==null)throw V.getNotFoundInstance();let k=A.getBoundingBox();if(D&&k!=null&&(k.getMinY()<p.getMinY()||k.getMaxY()>p.getMaxY()))p=k;else break}A.setBoundingBox(p);let v=A.getBarcodeColumnCount()+1;A.setDetectionResultColumn(0,w),A.setDetectionResultColumn(v,E);let T=w!=null;for(let D=1;D<=v;D++){let k=T?D:v-D;if(A.getDetectionResultColumn(k)!==void 0)continue;let P;k===0||k===v?P=new N1(p,k===0):P=new po(p),A.setDetectionResultColumn(k,P);let H=-1,Q=H;for(let Z=p.getMinY();Z<=p.getMaxY();Z++){if(H=Ee.getStartColumn(A,k,Z,T),H<0||H>p.getMaxX()){if(Q===-1)continue;H=Q}let Y=Ee.detectCodeword(r,p.getMinX(),p.getMaxX(),T,H,Z,f,d);Y!=null&&(P.setCodeword(Z,Y),Q=H,f=Math.min(f,Y.getWidth()),d=Math.max(d,Y.getWidth()))}}return Ee.createDecoderResult(A)}static merge(r,s){if(r==null&&s==null)return null;let o=Ee.getBarcodeMetadata(r,s);if(o==null)return null;let c=bi.merge(Ee.adjustBoundingBox(r),Ee.adjustBoundingBox(s));return new xo(o,c)}static adjustBoundingBox(r){if(r==null)return null;let s=r.getRowHeights();if(s==null)return null;let o=Ee.getMax(s),c=0;for(let d of s)if(c+=o-d,d>0)break;let u=r.getCodewords();for(let d=0;c>0&&u[d]==null;d++)c--;let f=0;for(let d=s.length-1;d>=0&&(f+=o-s[d],!(s[d]>0));d--);for(let d=u.length-1;f>0&&u[d]==null;d--)f--;return r.getBoundingBox().addMissingRows(c,f,r.isLeft())}static getMax(r){let s=-1;for(let o of r)s=Math.max(s,o);return s}static getBarcodeMetadata(r,s){let o;if(r==null||(o=r.getBarcodeMetadata())==null)return s==null?null:s.getBarcodeMetadata();let c;return s==null||(c=s.getBarcodeMetadata())==null?o:o.getColumnCount()!==c.getColumnCount()&&o.getErrorCorrectionLevel()!==c.getErrorCorrectionLevel()&&o.getRowCount()!==c.getRowCount()?null:o}static getRowIndicatorColumn(r,s,o,c,u,f){let d=new N1(s,c);for(let p=0;p<2;p++){let w=p===0?1:-1,E=Math.trunc(Math.trunc(o.getX()));for(let A=Math.trunc(Math.trunc(o.getY()));A<=s.getMaxY()&&A>=s.getMinY();A+=w){let v=Ee.detectCodeword(r,0,r.getWidth(),c,E,A,u,f);v!=null&&(d.setCodeword(A,v),c?E=v.getStartX():E=v.getEndX())}}return d}static adjustCodewordCount(r,s){let o=s[0][1],c=o.getValue(),u=r.getBarcodeColumnCount()*r.getBarcodeRowCount()-Ee.getNumberOfECCodeWords(r.getBarcodeECLevel());if(c.length===0){if(u<1||u>xe.MAX_CODEWORDS_IN_BARCODE)throw V.getNotFoundInstance();o.setValue(u)}else c[0]!==u&&o.setValue(u)}static createDecoderResult(r){let s=Ee.createBarcodeMatrix(r);Ee.adjustCodewordCount(r,s);let o=new Array,c=new Int32Array(r.getBarcodeRowCount()*r.getBarcodeColumnCount()),u=[],f=new Array;for(let p=0;p<r.getBarcodeRowCount();p++)for(let w=0;w<r.getBarcodeColumnCount();w++){let E=s[p][w+1].getValue(),A=p*r.getBarcodeColumnCount()+w;E.length===0?o.push(A):E.length===1?c[A]=E[0]:(f.push(A),u.push(E))}let d=new Array(u.length);for(let p=0;p<d.length;p++)d[p]=u[p];return Ee.createDecoderResultFromAmbiguousValues(r.getBarcodeECLevel(),c,xe.toIntArray(o),xe.toIntArray(f),d)}static createDecoderResultFromAmbiguousValues(r,s,o,c,u){let f=new Int32Array(c.length),d=100;for(;d-- >0;){for(let p=0;p<f.length;p++)s[c[p]]=u[p][f[p]];try{return Ee.decodeCodewords(s,r,o)}catch(p){if(!(p instanceof R))throw p}if(f.length===0)throw R.getChecksumInstance();for(let p=0;p<f.length;p++)if(f[p]<u[p].length-1){f[p]++;break}else if(f[p]=0,p===f.length-1)throw R.getChecksumInstance()}throw R.getChecksumInstance()}static createBarcodeMatrix(r){let s=Array.from({length:r.getBarcodeRowCount()},()=>new Array(r.getBarcodeColumnCount()+2));for(let c=0;c<s.length;c++)for(let u=0;u<s[c].length;u++)s[c][u]=new mo;let o=0;for(let c of r.getDetectionResultColumns()){if(c!=null){for(let u of c.getCodewords())if(u!=null){let f=u.getRowNumber();if(f>=0){if(f>=s.length)continue;s[f][o].setValue(u.getValue())}}}o++}return s}static isValidBarcodeColumn(r,s){return s>=0&&s<=r.getBarcodeColumnCount()+1}static getStartColumn(r,s,o,c){let u=c?1:-1,f=null;if(Ee.isValidBarcodeColumn(r,s-u)&&(f=r.getDetectionResultColumn(s-u).getCodeword(o)),f!=null)return c?f.getEndX():f.getStartX();if(f=r.getDetectionResultColumn(s).getCodewordNearby(o),f!=null)return c?f.getStartX():f.getEndX();if(Ee.isValidBarcodeColumn(r,s-u)&&(f=r.getDetectionResultColumn(s-u).getCodewordNearby(o)),f!=null)return c?f.getEndX():f.getStartX();let d=0;for(;Ee.isValidBarcodeColumn(r,s-u);){s-=u;for(let p of r.getDetectionResultColumn(s).getCodewords())if(p!=null)return(c?p.getEndX():p.getStartX())+u*d*(p.getEndX()-p.getStartX());d++}return c?r.getBoundingBox().getMinX():r.getBoundingBox().getMaxX()}static detectCodeword(r,s,o,c,u,f,d,p){u=Ee.adjustCodewordStartColumn(r,s,o,c,u,f);let w=Ee.getModuleBitCount(r,s,o,c,u,f);if(w==null)return null;let E,A=Oe.sum(w);if(c)E=u+A;else{for(let D=0;D<w.length/2;D++){let k=w[D];w[D]=w[w.length-1-D],w[w.length-1-D]=k}E=u,u=E-A}if(!Ee.checkCodewordSkew(A,d,p))return null;let v=hn.getDecodedValue(w),T=xe.getCodeword(v);return T===-1?null:new wo(u,E,Ee.getCodewordBucketNumber(v),T)}static getModuleBitCount(r,s,o,c,u,f){let d=u,p=new Int32Array(8),w=0,E=c?1:-1,A=c;for(;(c?d<o:d>=s)&&w<p.length;)r.get(d,f)===A?(p[w]++,d+=E):(w++,A=!A);return w===p.length||d===(c?o:s)&&w===p.length-1?p:null}static getNumberOfECCodeWords(r){return 2<<r}static adjustCodewordStartColumn(r,s,o,c,u,f){let d=u,p=c?-1:1;for(let w=0;w<2;w++){for(;(c?d>=s:d<o)&&c===r.get(d,f);){if(Math.abs(u-d)>Ee.CODEWORD_SKEW_SIZE)return u;d+=p}p=-p,c=!c}return d}static checkCodewordSkew(r,s,o){return s-Ee.CODEWORD_SKEW_SIZE<=r&&r<=o+Ee.CODEWORD_SKEW_SIZE}static decodeCodewords(r,s,o){if(r.length===0)throw j.getFormatInstance();let c=1<<s+1,u=Ee.correctErrors(r,o,c);Ee.verifyCodewordCount(r,c);let f=z.decode(r,""+s);return f.setErrorsCorrected(u),f.setErasures(o.length),f}static correctErrors(r,s,o){if(s!=null&&s.length>o/2+Ee.MAX_ERRORS||o<0||o>Ee.MAX_EC_CODEWORDS)throw R.getChecksumInstance();return Ee.errorCorrection.decode(r,o,s)}static verifyCodewordCount(r,s){if(r.length<4)throw j.getFormatInstance();let o=r[0];if(o>r.length)throw j.getFormatInstance();if(o===0)if(s<r.length)r[0]=r.length-s;else throw j.getFormatInstance()}static getBitCountForCodeword(r){let s=new Int32Array(8),o=0,c=s.length-1;for(;!((r&1)!==o&&(o=r&1,c--,c<0));)s[c]++,r>>=1;return s}static getCodewordBucketNumber(r){return r instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(r):this.getCodewordBucketNumber_number(r)}static getCodewordBucketNumber_number(r){return Ee.getCodewordBucketNumber(Ee.getBitCountForCodeword(r))}static getCodewordBucketNumber_Int32Array(r){return(r[0]-r[2]+r[4]-r[6]+9)%9}static toString(r){let s=new go;for(let o=0;o<r.length;o++){s.format("Row %2d: ",o);for(let c=0;c<r[o].length;c++){let u=r[o][c];u.getValue().length===0?s.format("        ",null):s.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}s.format("%n")}return s.toString()}}Ee.CODEWORD_SKEW_SIZE=2,Ee.MAX_ERRORS=3,Ee.MAX_EC_CODEWORDS=512,Ee.errorCorrection=new T1;class Ht{decode(r,s=null){let o=Ht.decode(r,s,!1);if(o==null||o.length===0||o[0]==null)throw V.getNotFoundInstance();return o[0]}decodeMultiple(r,s=null){try{return Ht.decode(r,s,!0)}catch(o){throw o instanceof j||o instanceof R?V.getNotFoundInstance():o}}static decode(r,s,o){const c=new Array,u=Ce.detectMultiple(r,s,o);for(const f of u.getPoints()){const d=Ee.decode(u.getBits(),f[4],f[5],f[6],f[7],Ht.getMinCodewordWidth(f),Ht.getMaxCodewordWidth(f)),p=new tt(d.getText(),d.getRawBytes(),void 0,f,ae.PDF_417);p.putMetadata(Dt.ERROR_CORRECTION_LEVEL,d.getECLevel());const w=d.getOther();w!=null&&p.putMetadata(Dt.PDF417_EXTRA_METADATA,w),c.push(p)}return c.map(f=>f)}static getMaxWidth(r,s){return r==null||s==null?0:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMinWidth(r,s){return r==null||s==null?M.MAX_VALUE:Math.trunc(Math.abs(r.getX()-s.getX()))}static getMaxCodewordWidth(r){return Math.floor(Math.max(Math.max(Ht.getMaxWidth(r[0],r[4]),Ht.getMaxWidth(r[6],r[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.max(Ht.getMaxWidth(r[1],r[5]),Ht.getMaxWidth(r[7],r[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(r){return Math.floor(Math.min(Math.min(Ht.getMinWidth(r[0],r[4]),Ht.getMinWidth(r[6],r[2])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN),Math.min(Ht.getMinWidth(r[1],r[5]),Ht.getMinWidth(r[7],r[3])*xe.MODULES_IN_CODEWORD/xe.MODULES_IN_STOP_PATTERN)))}reset(){}}class Ka extends g{}Ka.kind="ReaderException";class D1{constructor(r,s){this.verbose=r===!0,s&&this.setHints(s)}decode(r,s){return s&&this.setHints(s),this.decodeInternal(r)}decodeWithState(r){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(r)}setHints(r){this.hints=r;const s=!i(r)&&r.get(K.TRY_HARDER)===!0,o=i(r)?null:r.get(K.POSSIBLE_FORMATS),c=new Array;if(!i(o)){const u=o.some(f=>f===ae.UPC_A||f===ae.UPC_E||f===ae.EAN_13||f===ae.EAN_8||f===ae.CODABAR||f===ae.CODE_39||f===ae.CODE_93||f===ae.CODE_128||f===ae.ITF||f===ae.RSS_14||f===ae.RSS_EXPANDED);u&&!s&&c.push(new ds(r,this.verbose)),o.includes(ae.QR_CODE)&&c.push(new Xr),o.includes(ae.DATA_MATRIX)&&c.push(new Yr),o.includes(ae.AZTEC)&&c.push(new Va),o.includes(ae.PDF_417)&&c.push(new Ht),u&&s&&c.push(new ds(r,this.verbose))}c.length===0&&(s||c.push(new ds(r,this.verbose)),c.push(new Xr),c.push(new Yr),c.push(new Va),c.push(new Ht),s&&c.push(new ds(r,this.verbose))),this.readers=c}reset(){if(this.readers!==null)for(const r of this.readers)r.reset()}decodeInternal(r){if(this.readers===null)throw new Ka("No readers where selected, nothing can be read.");for(const s of this.readers)try{return s.decode(r,this.hints)}catch(o){if(o instanceof Ka)continue}throw new V("No MultiFormat Readers were able to detect the code.")}}class Ey extends ln{constructor(r=null,s=500){const o=new D1;o.setHints(r),super(o,s)}decodeBitmap(r){return this.reader.decodeWithState(r)}}class _y extends ln{constructor(r=500){super(new Ht,r)}}class Ay extends ln{constructor(r=500){super(new Xr,r)}}var Au;(function(_){_[_.ERROR_CORRECTION=0]="ERROR_CORRECTION",_[_.CHARACTER_SET=1]="CHARACTER_SET",_[_.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",_[_.MIN_SIZE=3]="MIN_SIZE",_[_.MAX_SIZE=4]="MAX_SIZE",_[_.MARGIN=5]="MARGIN",_[_.PDF417_COMPACT=6]="PDF417_COMPACT",_[_.PDF417_COMPACTION=7]="PDF417_COMPACTION",_[_.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",_[_.AZTEC_LAYERS=9]="AZTEC_LAYERS",_[_.QR_VERSION=10]="QR_VERSION"})(Au||(Au={}));var Tt=Au;class Iu{constructor(r){this.field=r,this.cachedGenerators=[],this.cachedGenerators.push(new cn(r,Int32Array.from([1])))}buildGenerator(r){const s=this.cachedGenerators;if(r>=s.length){let o=s[s.length-1];const c=this.field;for(let u=s.length;u<=r;u++){const f=o.multiply(new cn(c,Int32Array.from([1,c.exp(u-1+c.getGeneratorBase())])));s.push(f),o=f}}return s[r]}encode(r,s){if(s===0)throw new C("No error correction bytes");const o=r.length-s;if(o<=0)throw new C("No data bytes provided");const c=this.buildGenerator(s),u=new Int32Array(o);L.arraycopy(r,0,u,0,o);let f=new cn(this.field,u);f=f.multiplyByMonomial(s,1);const p=f.divide(c)[1].getCoefficients(),w=s-p.length;for(let E=0;E<w;E++)r[o+E]=0;L.arraycopy(p,0,r,o+w,p.length)}}class mt{constructor(){}static applyMaskPenaltyRule1(r){return mt.applyMaskPenaltyRule1Internal(r,!0)+mt.applyMaskPenaltyRule1Internal(r,!1)}static applyMaskPenaltyRule2(r){let s=0;const o=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let f=0;f<u-1;f++){const d=o[f];for(let p=0;p<c-1;p++){const w=d[p];w===d[p+1]&&w===o[f+1][p]&&w===o[f+1][p+1]&&s++}}return mt.N2*s}static applyMaskPenaltyRule3(r){let s=0;const o=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let f=0;f<u;f++)for(let d=0;d<c;d++){const p=o[f];d+6<c&&p[d]===1&&p[d+1]===0&&p[d+2]===1&&p[d+3]===1&&p[d+4]===1&&p[d+5]===0&&p[d+6]===1&&(mt.isWhiteHorizontal(p,d-4,d)||mt.isWhiteHorizontal(p,d+7,d+11))&&s++,f+6<u&&o[f][d]===1&&o[f+1][d]===0&&o[f+2][d]===1&&o[f+3][d]===1&&o[f+4][d]===1&&o[f+5][d]===0&&o[f+6][d]===1&&(mt.isWhiteVertical(o,d,f-4,f)||mt.isWhiteVertical(o,d,f+7,f+11))&&s++}return s*mt.N3}static isWhiteHorizontal(r,s,o){s=Math.max(s,0),o=Math.min(o,r.length);for(let c=s;c<o;c++)if(r[c]===1)return!1;return!0}static isWhiteVertical(r,s,o,c){o=Math.max(o,0),c=Math.min(c,r.length);for(let u=o;u<c;u++)if(r[u][s]===1)return!1;return!0}static applyMaskPenaltyRule4(r){let s=0;const o=r.getArray(),c=r.getWidth(),u=r.getHeight();for(let p=0;p<u;p++){const w=o[p];for(let E=0;E<c;E++)w[E]===1&&s++}const f=r.getHeight()*r.getWidth();return Math.floor(Math.abs(s*2-f)*10/f)*mt.N4}static getDataMaskBit(r,s,o){let c,u;switch(r){case 0:c=o+s&1;break;case 1:c=o&1;break;case 2:c=s%3;break;case 3:c=(o+s)%3;break;case 4:c=Math.floor(o/2)+Math.floor(s/3)&1;break;case 5:u=o*s,c=(u&1)+u%3;break;case 6:u=o*s,c=(u&1)+u%3&1;break;case 7:u=o*s,c=u%3+(o+s&1)&1;break;default:throw new C("Invalid mask pattern: "+r)}return c===0}static applyMaskPenaltyRule1Internal(r,s){let o=0;const c=s?r.getHeight():r.getWidth(),u=s?r.getWidth():r.getHeight(),f=r.getArray();for(let d=0;d<c;d++){let p=0,w=-1;for(let E=0;E<u;E++){const A=s?f[d][E]:f[E][d];A===w?p++:(p>=5&&(o+=mt.N1+(p-5)),p=1,w=A)}p>=5&&(o+=mt.N1+(p-5))}return o}}mt.N1=3,mt.N2=3,mt.N3=40,mt.N4=10;class Za{constructor(r,s){this.width=r,this.height=s;const o=new Array(s);for(let c=0;c!==s;c++)o[c]=new Uint8Array(r);this.bytes=o}getHeight(){return this.height}getWidth(){return this.width}get(r,s){return this.bytes[s][r]}getArray(){return this.bytes}setNumber(r,s,o){this.bytes[s][r]=o}setBoolean(r,s,o){this.bytes[s][r]=o?1:0}clear(r){for(const s of this.bytes)N.fill(s,r)}equals(r){if(!(r instanceof Za))return!1;const s=r;if(this.width!==s.width||this.height!==s.height)return!1;for(let o=0,c=this.height;o<c;++o){const u=this.bytes[o],f=s.bytes[o];for(let d=0,p=this.width;d<p;++d)if(u[d]!==f[d])return!1}return!0}toString(){const r=new ve;for(let s=0,o=this.height;s<o;++s){const c=this.bytes[s];for(let u=0,f=this.width;u<f;++u)switch(c[u]){case 0:r.append(" 0");break;case 1:r.append(" 1");break;default:r.append("  ");break}r.append(`
`)}return r.toString()}}class Oi{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const r=new ve;return r.append(`<<
`),r.append(" mode: "),r.append(this.mode?this.mode.toString():"null"),r.append(`
 ecLevel: `),r.append(this.ecLevel?this.ecLevel.toString():"null"),r.append(`
 version: `),r.append(this.version?this.version.toString():"null"),r.append(`
 maskPattern: `),r.append(this.maskPattern.toString()),this.matrix?(r.append(`
 matrix:
`),r.append(this.matrix.toString())):r.append(`
 matrix: null
`),r.append(`>>
`),r.toString()}setMode(r){this.mode=r}setECLevel(r){this.ecLevel=r}setVersion(r){this.version=r}setMaskPattern(r){this.maskPattern=r}setMatrix(r){this.matrix=r}static isValidMaskPattern(r){return r>=0&&r<Oi.NUM_MASK_PATTERNS}}Oi.NUM_MASK_PATTERNS=8;class Ge extends g{}Ge.kind="WriterException";class de{constructor(){}static clearMatrix(r){r.clear(255)}static buildMatrix(r,s,o,c,u){de.clearMatrix(u),de.embedBasicPatterns(o,u),de.embedTypeInfo(s,c,u),de.maybeEmbedVersionInfo(o,u),de.embedDataBits(r,c,u)}static embedBasicPatterns(r,s){de.embedPositionDetectionPatternsAndSeparators(s),de.embedDarkDotAtLeftBottomCorner(s),de.maybeEmbedPositionAdjustmentPatterns(r,s),de.embedTimingPatterns(s)}static embedTypeInfo(r,s,o){const c=new U;de.makeTypeInfoBits(r,s,c);for(let u=0,f=c.getSize();u<f;++u){const d=c.get(c.getSize()-1-u),p=de.TYPE_INFO_COORDINATES[u],w=p[0],E=p[1];if(o.setBoolean(w,E,d),u<8){const A=o.getWidth()-u-1;o.setBoolean(A,8,d)}else{const v=o.getHeight()-7+(u-8);o.setBoolean(8,v,d)}}}static maybeEmbedVersionInfo(r,s){if(r.getVersionNumber()<7)return;const o=new U;de.makeVersionInfoBits(r,o);let c=6*3-1;for(let u=0;u<6;++u)for(let f=0;f<3;++f){const d=o.get(c);c--,s.setBoolean(u,s.getHeight()-11+f,d),s.setBoolean(s.getHeight()-11+f,u,d)}}static embedDataBits(r,s,o){let c=0,u=-1,f=o.getWidth()-1,d=o.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);d>=0&&d<o.getHeight();){for(let p=0;p<2;++p){const w=f-p;if(!de.isEmpty(o.get(w,d)))continue;let E;c<r.getSize()?(E=r.get(c),++c):E=!1,s!==255&&mt.getDataMaskBit(s,w,d)&&(E=!E),o.setBoolean(w,d,E)}d+=u}u=-u,d+=u,f-=2}if(c!==r.getSize())throw new Ge("Not all bits consumed: "+c+"/"+r.getSize())}static findMSBSet(r){return 32-M.numberOfLeadingZeros(r)}static calculateBCHCode(r,s){if(s===0)throw new C("0 polynomial");const o=de.findMSBSet(s);for(r<<=o-1;de.findMSBSet(r)>=o;)r^=s<<de.findMSBSet(r)-o;return r}static makeTypeInfoBits(r,s,o){if(!Oi.isValidMaskPattern(s))throw new Ge("Invalid mask pattern");const c=r.getBits()<<3|s;o.appendBits(c,5);const u=de.calculateBCHCode(c,de.TYPE_INFO_POLY);o.appendBits(u,10);const f=new U;if(f.appendBits(de.TYPE_INFO_MASK_PATTERN,15),o.xor(f),o.getSize()!==15)throw new Ge("should not happen but we got: "+o.getSize())}static makeVersionInfoBits(r,s){s.appendBits(r.getVersionNumber(),6);const o=de.calculateBCHCode(r.getVersionNumber(),de.VERSION_INFO_POLY);if(s.appendBits(o,12),s.getSize()!==18)throw new Ge("should not happen but we got: "+s.getSize())}static isEmpty(r){return r===255}static embedTimingPatterns(r){for(let s=8;s<r.getWidth()-8;++s){const o=(s+1)%2;de.isEmpty(r.get(s,6))&&r.setNumber(s,6,o),de.isEmpty(r.get(6,s))&&r.setNumber(6,s,o)}}static embedDarkDotAtLeftBottomCorner(r){if(r.get(8,r.getHeight()-8)===0)throw new Ge;r.setNumber(8,r.getHeight()-8,1)}static embedHorizontalSeparationPattern(r,s,o){for(let c=0;c<8;++c){if(!de.isEmpty(o.get(r+c,s)))throw new Ge;o.setNumber(r+c,s,0)}}static embedVerticalSeparationPattern(r,s,o){for(let c=0;c<7;++c){if(!de.isEmpty(o.get(r,s+c)))throw new Ge;o.setNumber(r,s+c,0)}}static embedPositionAdjustmentPattern(r,s,o){for(let c=0;c<5;++c){const u=de.POSITION_ADJUSTMENT_PATTERN[c];for(let f=0;f<5;++f)o.setNumber(r+f,s+c,u[f])}}static embedPositionDetectionPattern(r,s,o){for(let c=0;c<7;++c){const u=de.POSITION_DETECTION_PATTERN[c];for(let f=0;f<7;++f)o.setNumber(r+f,s+c,u[f])}}static embedPositionDetectionPatternsAndSeparators(r){const s=de.POSITION_DETECTION_PATTERN[0].length;de.embedPositionDetectionPattern(0,0,r),de.embedPositionDetectionPattern(r.getWidth()-s,0,r),de.embedPositionDetectionPattern(0,r.getWidth()-s,r);const o=8;de.embedHorizontalSeparationPattern(0,o-1,r),de.embedHorizontalSeparationPattern(r.getWidth()-o,o-1,r),de.embedHorizontalSeparationPattern(0,r.getWidth()-o,r);const c=7;de.embedVerticalSeparationPattern(c,0,r),de.embedVerticalSeparationPattern(r.getHeight()-c-1,0,r),de.embedVerticalSeparationPattern(c,r.getHeight()-c,r)}static maybeEmbedPositionAdjustmentPatterns(r,s){if(r.getVersionNumber()<2)return;const o=r.getVersionNumber()-1,c=de.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[o];for(let u=0,f=c.length;u!==f;u++){const d=c[u];if(d>=0)for(let p=0;p!==f;p++){const w=c[p];w>=0&&de.isEmpty(s.get(w,d))&&de.embedPositionAdjustmentPattern(w-2,d-2,s)}}}}de.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),de.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),de.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),de.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),de.VERSION_INFO_POLY=7973,de.TYPE_INFO_POLY=1335,de.TYPE_INFO_MASK_PATTERN=21522;class Iy{constructor(r,s){this.dataBytes=r,this.errorCorrectionBytes=s}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class nt{constructor(){}static calculateMaskPenalty(r){return mt.applyMaskPenaltyRule1(r)+mt.applyMaskPenaltyRule2(r)+mt.applyMaskPenaltyRule3(r)+mt.applyMaskPenaltyRule4(r)}static encode(r,s,o=null){let c=nt.DEFAULT_BYTE_MODE_ENCODING;const u=o!==null&&o.get(Tt.CHARACTER_SET)!==void 0;u&&(c=o.get(Tt.CHARACTER_SET).toString());const f=this.chooseMode(r,c),d=new U;if(f===he.BYTE&&(u||nt.DEFAULT_BYTE_MODE_ENCODING!==c)){const Z=W.getCharacterSetECIByName(c);Z!==void 0&&this.appendECI(Z,d)}this.appendModeInfo(f,d);const p=new U;this.appendBytes(r,f,p,c);let w;if(o!==null&&o.get(Tt.QR_VERSION)!==void 0){const Z=Number.parseInt(o.get(Tt.QR_VERSION).toString(),10);w=le.getVersionForNumber(Z);const Y=this.calculateBitsNeeded(f,d,p,w);if(!this.willFit(Y,w,s))throw new Ge("Data too big for requested version")}else w=this.recommendVersion(s,f,d,p);const E=new U;E.appendBitArray(d);const A=f===he.BYTE?p.getSizeInBytes():r.length;this.appendLengthInfo(A,w,f,E),E.appendBitArray(p);const v=w.getECBlocksForLevel(s),T=w.getTotalCodewords()-v.getTotalECCodewords();this.terminateBits(T,E);const D=this.interleaveWithECBytes(E,w.getTotalCodewords(),T,v.getNumBlocks()),k=new Oi;k.setECLevel(s),k.setMode(f),k.setVersion(w);const P=w.getDimensionForVersion(),H=new Za(P,P),Q=this.chooseMaskPattern(D,s,w,H);return k.setMaskPattern(Q),de.buildMatrix(D,s,w,Q,H),k.setMatrix(H),k}static recommendVersion(r,s,o,c){const u=this.calculateBitsNeeded(s,o,c,le.getVersionForNumber(1)),f=this.chooseVersion(u,r),d=this.calculateBitsNeeded(s,o,c,f);return this.chooseVersion(d,r)}static calculateBitsNeeded(r,s,o,c){return s.getSize()+r.getCharacterCountBits(c)+o.getSize()}static getAlphanumericCode(r){return r<nt.ALPHANUMERIC_TABLE.length?nt.ALPHANUMERIC_TABLE[r]:-1}static chooseMode(r,s=null){if(W.SJIS.getName()===s&&this.isOnlyDoubleByteKanji(r))return he.KANJI;let o=!1,c=!1;for(let u=0,f=r.length;u<f;++u){const d=r.charAt(u);if(nt.isDigit(d))o=!0;else if(this.getAlphanumericCode(d.charCodeAt(0))!==-1)c=!0;else return he.BYTE}return c?he.ALPHANUMERIC:o?he.NUMERIC:he.BYTE}static isOnlyDoubleByteKanji(r){let s;try{s=_e.encode(r,W.SJIS)}catch{return!1}const o=s.length;if(o%2!==0)return!1;for(let c=0;c<o;c+=2){const u=s[c]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(r,s,o,c){let u=Number.MAX_SAFE_INTEGER,f=-1;for(let d=0;d<Oi.NUM_MASK_PATTERNS;d++){de.buildMatrix(r,s,o,d,c);let p=this.calculateMaskPenalty(c);p<u&&(u=p,f=d)}return f}static chooseVersion(r,s){for(let o=1;o<=40;o++){const c=le.getVersionForNumber(o);if(nt.willFit(r,c,s))return c}throw new Ge("Data too big")}static willFit(r,s,o){const c=s.getTotalCodewords(),f=s.getECBlocksForLevel(o).getTotalECCodewords(),d=c-f,p=(r+7)/8;return d>=p}static terminateBits(r,s){const o=r*8;if(s.getSize()>o)throw new Ge("data bits cannot fit in the QR Code"+s.getSize()+" > "+o);for(let f=0;f<4&&s.getSize()<o;++f)s.appendBit(!1);const c=s.getSize()&7;if(c>0)for(let f=c;f<8;f++)s.appendBit(!1);const u=r-s.getSizeInBytes();for(let f=0;f<u;++f)s.appendBits(f&1?17:236,8);if(s.getSize()!==o)throw new Ge("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(r,s,o,c,u,f){if(c>=o)throw new Ge("Block ID too large");const d=r%o,p=o-d,w=Math.floor(r/o),E=w+1,A=Math.floor(s/o),v=A+1,T=w-A,D=E-v;if(T!==D)throw new Ge("EC bytes mismatch");if(o!==p+d)throw new Ge("RS blocks mismatch");if(r!==(A+T)*p+(v+D)*d)throw new Ge("Total bytes mismatch");c<p?(u[0]=A,f[0]=T):(u[0]=v,f[0]=D)}static interleaveWithECBytes(r,s,o,c){if(r.getSizeInBytes()!==o)throw new Ge("Number of bits and data bytes does not match");let u=0,f=0,d=0;const p=new Array;for(let E=0;E<c;++E){const A=new Int32Array(1),v=new Int32Array(1);nt.getNumDataBytesAndNumECBytesForBlockID(s,o,c,E,A,v);const T=A[0],D=new Uint8Array(T);r.toBytes(8*u,D,0,T);const k=nt.generateECBytes(D,v[0]);p.push(new Iy(D,k)),f=Math.max(f,T),d=Math.max(d,k.length),u+=A[0]}if(o!==u)throw new Ge("Data bytes does not match offset");const w=new U;for(let E=0;E<f;++E)for(const A of p){const v=A.getDataBytes();E<v.length&&w.appendBits(v[E],8)}for(let E=0;E<d;++E)for(const A of p){const v=A.getErrorCorrectionBytes();E<v.length&&w.appendBits(v[E],8)}if(s!==w.getSizeInBytes())throw new Ge("Interleaving error: "+s+" and "+w.getSizeInBytes()+" differ.");return w}static generateECBytes(r,s){const o=r.length,c=new Int32Array(o+s);for(let f=0;f<o;f++)c[f]=r[f]&255;new Iu(Pe.QR_CODE_FIELD_256).encode(c,s);const u=new Uint8Array(s);for(let f=0;f<s;f++)u[f]=c[o+f];return u}static appendModeInfo(r,s){s.appendBits(r.getBits(),4)}static appendLengthInfo(r,s,o,c){const u=o.getCharacterCountBits(s);if(r>=1<<u)throw new Ge(r+" is bigger than "+((1<<u)-1));c.appendBits(r,u)}static appendBytes(r,s,o,c){switch(s){case he.NUMERIC:nt.appendNumericBytes(r,o);break;case he.ALPHANUMERIC:nt.appendAlphanumericBytes(r,o);break;case he.BYTE:nt.append8BitBytes(r,o,c);break;case he.KANJI:nt.appendKanjiBytes(r,o);break;default:throw new Ge("Invalid mode: "+s)}}static getDigit(r){return r.charCodeAt(0)-48}static isDigit(r){const s=nt.getDigit(r);return s>=0&&s<=9}static appendNumericBytes(r,s){const o=r.length;let c=0;for(;c<o;){const u=nt.getDigit(r.charAt(c));if(c+2<o){const f=nt.getDigit(r.charAt(c+1)),d=nt.getDigit(r.charAt(c+2));s.appendBits(u*100+f*10+d,10),c+=3}else if(c+1<o){const f=nt.getDigit(r.charAt(c+1));s.appendBits(u*10+f,7),c+=2}else s.appendBits(u,4),c++}}static appendAlphanumericBytes(r,s){const o=r.length;let c=0;for(;c<o;){const u=nt.getAlphanumericCode(r.charCodeAt(c));if(u===-1)throw new Ge;if(c+1<o){const f=nt.getAlphanumericCode(r.charCodeAt(c+1));if(f===-1)throw new Ge;s.appendBits(u*45+f,11),c+=2}else s.appendBits(u,6),c++}}static append8BitBytes(r,s,o){let c;try{c=_e.encode(r,o)}catch(u){throw new Ge(u)}for(let u=0,f=c.length;u!==f;u++){const d=c[u];s.appendBits(d,8)}}static appendKanjiBytes(r,s){let o;try{o=_e.encode(r,W.SJIS)}catch(u){throw new Ge(u)}const c=o.length;for(let u=0;u<c;u+=2){const f=o[u]&255,d=o[u+1]&255,p=f<<8&4294967295|d;let w=-1;if(p>=33088&&p<=40956?w=p-33088:p>=57408&&p<=60351&&(w=p-49472),w===-1)throw new Ge("Invalid byte sequence");const E=(w>>8)*192+(w&255);s.appendBits(E,13)}}static appendECI(r,s){s.appendBits(he.ECI.getBits(),4),s.appendBits(r.getValue(),8)}}nt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),nt.DEFAULT_BYTE_MODE_ENCODING=W.UTF8.getName();class Di{write(r,s,o,c=null){if(r.length===0)throw new C("Found empty contents");if(s<0||o<0)throw new C("Requested dimensions are too small: "+s+"x"+o);let u=Ze.L,f=Di.QUIET_ZONE_SIZE;c!==null&&(c.get(Tt.ERROR_CORRECTION)!==void 0&&(u=Ze.fromString(c.get(Tt.ERROR_CORRECTION).toString())),c.get(Tt.MARGIN)!==void 0&&(f=Number.parseInt(c.get(Tt.MARGIN).toString(),10)));const d=nt.encode(r,u,c);return this.renderResult(d,s,o,f)}writeToDom(r,s,o,c,u=null){typeof r=="string"&&(r=document.querySelector(r));const f=this.write(s,o,c,u);r&&r.appendChild(f)}renderResult(r,s,o,c){const u=r.getMatrix();if(u===null)throw new cr;const f=u.getWidth(),d=u.getHeight(),p=f+c*2,w=d+c*2,E=Math.max(s,p),A=Math.max(o,w),v=Math.min(Math.floor(E/p),Math.floor(A/w)),T=Math.floor((E-f*v)/2),D=Math.floor((A-d*v)/2),k=this.createSVGElement(E,A);for(let P=0,H=D;P<d;P++,H+=v)for(let Q=0,Z=T;Q<f;Q++,Z+=v)if(u.get(Q,P)===1){const Y=this.createSvgRectElement(Z,H,v,v);k.appendChild(Y)}return k}createSVGElement(r,s){const o=document.createElementNS(Di.SVG_NS,"svg");return o.setAttributeNS(null,"height",r.toString()),o.setAttributeNS(null,"width",s.toString()),o}createSvgRectElement(r,s,o,c){const u=document.createElementNS(Di.SVG_NS,"rect");return u.setAttributeNS(null,"x",r.toString()),u.setAttributeNS(null,"y",s.toString()),u.setAttributeNS(null,"height",o.toString()),u.setAttributeNS(null,"width",c.toString()),u.setAttributeNS(null,"fill","#000000"),u}}Di.QUIET_ZONE_SIZE=4,Di.SVG_NS="http://www.w3.org/2000/svg";class ps{encode(r,s,o,c,u){if(r.length===0)throw new C("Found empty contents");if(s!==ae.QR_CODE)throw new C("Can only encode QR_CODE, but got "+s);if(o<0||c<0)throw new C(`Requested dimensions are too small: ${o}x${c}`);let f=Ze.L,d=ps.QUIET_ZONE_SIZE;u!==null&&(u.get(Tt.ERROR_CORRECTION)!==void 0&&(f=Ze.fromString(u.get(Tt.ERROR_CORRECTION).toString())),u.get(Tt.MARGIN)!==void 0&&(d=Number.parseInt(u.get(Tt.MARGIN).toString(),10)));const p=nt.encode(r,f,u);return ps.renderResult(p,o,c,d)}static renderResult(r,s,o,c){const u=r.getMatrix();if(u===null)throw new cr;const f=u.getWidth(),d=u.getHeight(),p=f+c*2,w=d+c*2,E=Math.max(s,p),A=Math.max(o,w),v=Math.min(Math.floor(E/p),Math.floor(A/w)),T=Math.floor((E-f*v)/2),D=Math.floor((A-d*v)/2),k=new ze(E,A);for(let P=0,H=D;P<d;P++,H+=v)for(let Q=0,Z=T;Q<f;Q++,Z+=v)u.get(Q,P)===1&&k.setRegion(Z,H,v,v);return k}}ps.QUIET_ZONE_SIZE=4;class vy{encode(r,s,o,c,u){let f;switch(s){case ae.QR_CODE:f=new ps;break;default:throw new C("No encoder available for format "+s)}return f.encode(r,s,o,c,u)}}class dr extends te{constructor(r,s,o,c,u,f,d,p){if(super(f,d),this.yuvData=r,this.dataWidth=s,this.dataHeight=o,this.left=c,this.top=u,c+f>s||u+d>o)throw new C("Crop rectangle does not fit within image data.");p&&this.reverseHorizontal(f,d)}getRow(r,s){if(r<0||r>=this.getHeight())throw new C("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const c=(r+this.top)*this.dataWidth+this.left;return L.arraycopy(this.yuvData,c,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.yuvData;const o=r*s,c=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return L.arraycopy(this.yuvData,u,c,0,o),c;for(let f=0;f<s;f++){const d=f*r;L.arraycopy(this.yuvData,u,c,d,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,o,c){return new dr(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+s,o,c,!1)}renderThumbnail(){const r=this.getWidth()/dr.THUMBNAIL_SCALE_FACTOR,s=this.getHeight()/dr.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(r*s),c=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let f=0;f<s;f++){const d=f*r;for(let p=0;p<r;p++){const w=c[u+p*dr.THUMBNAIL_SCALE_FACTOR]&255;o[d+p]=4278190080|w*65793}u+=this.dataWidth*dr.THUMBNAIL_SCALE_FACTOR}return o}getThumbnailWidth(){return this.getWidth()/dr.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/dr.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(r,s){const o=this.yuvData;for(let c=0,u=this.top*this.dataWidth+this.left;c<s;c++,u+=this.dataWidth){const f=u+r/2;for(let d=u,p=u+r-1;d<f;d++,p--){const w=o[d];o[d]=o[p],o[p]=w}}}invert(){return new fe(this)}}dr.THUMBNAIL_SCALE_FACTOR=2;class vu extends te{constructor(r,s,o,c,u,f,d){if(super(s,o),this.dataWidth=c,this.dataHeight=u,this.left=f,this.top=d,r.BYTES_PER_ELEMENT===4){const p=s*o,w=new Uint8ClampedArray(p);for(let E=0;E<p;E++){const A=r[E],v=A>>16&255,T=A>>7&510,D=A&255;w[E]=(v+T+D)/4&255}this.luminances=w}else this.luminances=r;if(c===void 0&&(this.dataWidth=s),u===void 0&&(this.dataHeight=o),f===void 0&&(this.left=0),d===void 0&&(this.top=0),this.left+s>this.dataWidth||this.top+o>this.dataHeight)throw new C("Crop rectangle does not fit within image data.")}getRow(r,s){if(r<0||r>=this.getHeight())throw new C("Requested row is outside the image: "+r);const o=this.getWidth();(s==null||s.length<o)&&(s=new Uint8ClampedArray(o));const c=(r+this.top)*this.dataWidth+this.left;return L.arraycopy(this.luminances,c,s,0,o),s}getMatrix(){const r=this.getWidth(),s=this.getHeight();if(r===this.dataWidth&&s===this.dataHeight)return this.luminances;const o=r*s,c=new Uint8ClampedArray(o);let u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return L.arraycopy(this.luminances,u,c,0,o),c;for(let f=0;f<s;f++){const d=f*r;L.arraycopy(this.luminances,u,c,d,r),u+=this.dataWidth}return c}isCropSupported(){return!0}crop(r,s,o,c){return new vu(this.luminances,o,c,this.dataWidth,this.dataHeight,this.left+r,this.top+s)}invert(){return new fe(this)}}class L1 extends W{static forName(r){return this.getCharacterSetECIByName(r)}}class Su{}Su.ISO_8859_1=W.ISO8859_1;class k1{isCompact(){return this.compact}setCompact(r){this.compact=r}getSize(){return this.size}setSize(r){this.size=r}getLayers(){return this.layers}setLayers(r){this.layers=r}getCodeWords(){return this.codeWords}setCodeWords(r){this.codeWords=r}getMatrix(){return this.matrix}setMatrix(r){this.matrix=r}}class P1{static singletonList(r){return[r]}static min(r,s){return r.sort(s)[0]}}class Sy{constructor(r){this.previous=r}getPrevious(){return this.previous}}class ms extends Sy{constructor(r,s,o){super(r),this.value=s,this.bitCount=o}appendTo(r,s){r.appendBits(this.value,this.bitCount)}add(r,s){return new ms(this,r,s)}addBinaryShift(r,s){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new ms(this,r,s)}toString(){let r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+M.toBinaryString(r|1<<this.bitCount).substring(1)+">"}}class Tu extends ms{constructor(r,s,o){super(r,0,0),this.binaryShiftStart=s,this.binaryShiftByteCount=o}appendTo(r,s){for(let o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):o===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(s[this.binaryShiftStart+o],8)}addBinaryShift(r,s){return new Tu(this,r,s)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function Ty(_,r,s){return new Tu(_,r,s)}function yo(_,r,s){return new ms(_,r,s)}const Ny=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],Kr=0,qa=1,Un=2,B1=3,gr=4,Ry=new ms(null,0,0),Nu=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function My(_){for(let r of _)N.fill(r,-1);return _[Kr][gr]=0,_[qa][gr]=0,_[qa][Kr]=28,_[B1][gr]=0,_[Un][gr]=0,_[Un][Kr]=15,_}const F1=My(N.createInt32Array(6,6));class pr{constructor(r,s,o,c){this.token=r,this.mode=s,this.binaryShiftByteCount=o,this.bitCount=c}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(r,s){let o=this.bitCount,c=this.token;if(r!==this.mode){let f=Nu[this.mode][r];c=yo(c,f&65535,f>>16),o+=f>>16}let u=r===Un?4:5;return c=yo(c,s,u),new pr(c,r,0,o+u)}shiftAndAppend(r,s){let o=this.token,c=this.mode===Un?4:5;return o=yo(o,F1[this.mode][r],c),o=yo(o,s,5),new pr(o,this.mode,0,this.bitCount+c+5)}addBinaryShiftChar(r){let s=this.token,o=this.mode,c=this.bitCount;if(this.mode===gr||this.mode===Un){let d=Nu[o][Kr];s=yo(s,d&65535,d>>16),c+=d>>16,o=Kr}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new pr(s,o,this.binaryShiftByteCount+1,c+u);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(r+1)),f}endBinaryShift(r){if(this.binaryShiftByteCount===0)return this;let s=this.token;return s=Ty(s,r-this.binaryShiftByteCount,this.binaryShiftByteCount),new pr(s,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(r){let s=this.bitCount+(Nu[this.mode][r.mode]>>16);return this.binaryShiftByteCount<r.binaryShiftByteCount?s+=pr.calculateBinaryShiftCost(r)-pr.calculateBinaryShiftCost(this):this.binaryShiftByteCount>r.binaryShiftByteCount&&r.binaryShiftByteCount>0&&(s+=10),s<=r.bitCount}toBitArray(r){let s=[];for(let c=this.endBinaryShift(r.length).token;c!==null;c=c.getPrevious())s.unshift(c);let o=new U;for(const c of s)c.appendTo(o,r);return o}toString(){return ue.format("%s bits=%d bytes=%d",Ny[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(r){return r.binaryShiftByteCount>62?21:r.binaryShiftByteCount>31?20:r.binaryShiftByteCount>0?10:0}}pr.INITIAL_STATE=new pr(Ry,Kr,0,0);function by(_){const r=ue.getCharCode(" "),s=ue.getCharCode("."),o=ue.getCharCode(",");_[Kr][r]=1;const c=ue.getCharCode("Z"),u=ue.getCharCode("A");for(let v=u;v<=c;v++)_[Kr][v]=v-u+2;_[qa][r]=1;const f=ue.getCharCode("z"),d=ue.getCharCode("a");for(let v=d;v<=f;v++)_[qa][v]=v-d+2;_[Un][r]=1;const p=ue.getCharCode("9"),w=ue.getCharCode("0");for(let v=w;v<=p;v++)_[Un][v]=v-w+2;_[Un][o]=12,_[Un][s]=13;const E=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let v=0;v<E.length;v++)_[B1][ue.getCharCode(E[v])]=v;const A=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let v=0;v<A.length;v++)ue.getCharCode(A[v])>0&&(_[gr][ue.getCharCode(A[v])]=v);return _}const Ru=by(N.createInt32Array(5,256));class Co{constructor(r){this.text=r}encode(){const r=ue.getCharCode(" "),s=ue.getCharCode(`
`);let o=P1.singletonList(pr.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let f,d=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case ue.getCharCode("\r"):f=d===s?2:0;break;case ue.getCharCode("."):f=d===r?3:0;break;case ue.getCharCode(","):f=d===r?4:0;break;case ue.getCharCode(":"):f=d===r?5:0;break;default:f=0}f>0?(o=Co.updateStateListForPair(o,u,f),u++):o=this.updateStateListForChar(o,u)}return P1.min(o,(u,f)=>u.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(r,s){const o=[];for(let c of r)this.updateStateForChar(c,s,o);return Co.simplifyStates(o)}updateStateForChar(r,s,o){let c=this.text[s]&255,u=Ru[r.getMode()][c]>0,f=null;for(let d=0;d<=gr;d++){let p=Ru[d][c];if(p>0){if(f==null&&(f=r.endBinaryShift(s)),!u||d===r.getMode()||d===Un){const w=f.latchAndAppend(d,p);o.push(w)}if(!u&&F1[r.getMode()][d]>=0){const w=f.shiftAndAppend(d,p);o.push(w)}}}if(r.getBinaryShiftByteCount()>0||Ru[r.getMode()][c]===0){let d=r.addBinaryShiftChar(s);o.push(d)}}static updateStateListForPair(r,s,o){const c=[];for(let u of r)this.updateStateForPair(u,s,o,c);return this.simplifyStates(c)}static updateStateForPair(r,s,o,c){let u=r.endBinaryShift(s);if(c.push(u.latchAndAppend(gr,o)),r.getMode()!==gr&&c.push(u.shiftAndAppend(gr,o)),o===3||o===4){let f=u.latchAndAppend(Un,16-o).latchAndAppend(Un,1);c.push(f)}if(r.getBinaryShiftByteCount()>0){let f=r.addBinaryShiftChar(s).addBinaryShiftChar(s+1);c.push(f)}}static simplifyStates(r){let s=[];for(const o of r){let c=!0;for(const u of s){if(u.isBetterThanOrEqualTo(o)){c=!1;break}o.isBetterThanOrEqualTo(u)&&(s=s.filter(f=>f!==u))}c&&s.push(o)}return s}}class De{constructor(){}static encodeBytes(r){return De.encode(r,De.DEFAULT_EC_PERCENT,De.DEFAULT_AZTEC_LAYERS)}static encode(r,s,o){let c=new Co(r).encode(),u=M.truncDivision(c.getSize()*s,100)+11,f=c.getSize()+u,d,p,w,E,A;if(o!==De.DEFAULT_AZTEC_LAYERS){if(d=o<0,p=Math.abs(o),p>(d?De.MAX_NB_BITS_COMPACT:De.MAX_NB_BITS))throw new C(ue.format("Illegal value %s for layers",o));w=De.totalBitsInLayer(p,d),E=De.WORD_SIZE[p];let Y=w-w%E;if(A=De.stuffBits(c,E),A.getSize()+u>Y)throw new C("Data to large for user specified layer");if(d&&A.getSize()>E*64)throw new C("Data to large for user specified layer")}else{E=0,A=null;for(let Y=0;;Y++){if(Y>De.MAX_NB_BITS)throw new C("Data too large for an Aztec code");if(d=Y<=3,p=d?Y+1:Y,w=De.totalBitsInLayer(p,d),f>w)continue;(A==null||E!==De.WORD_SIZE[p])&&(E=De.WORD_SIZE[p],A=De.stuffBits(c,E));let Me=w-w%E;if(!(d&&A.getSize()>E*64)&&A.getSize()+u<=Me)break}}let v=De.generateCheckWords(A,w,E),T=A.getSize()/E,D=De.generateModeMessage(d,p,T),k=(d?11:14)+p*4,P=new Int32Array(k),H;if(d){H=k;for(let Y=0;Y<P.length;Y++)P[Y]=Y}else{H=k+1+2*M.truncDivision(M.truncDivision(k,2)-1,15);let Y=M.truncDivision(k,2),Me=M.truncDivision(H,2);for(let ye=0;ye<Y;ye++){let dn=ye+M.truncDivision(ye,15);P[Y-ye-1]=Me-dn-1,P[Y+ye]=Me+dn+1}}let Q=new ze(H);for(let Y=0,Me=0;Y<p;Y++){let ye=(p-Y)*4+(d?9:12);for(let dn=0;dn<ye;dn++){let Qn=dn*2;for(let gn=0;gn<2;gn++)v.get(Me+Qn+gn)&&Q.set(P[Y*2+gn],P[Y*2+dn]),v.get(Me+ye*2+Qn+gn)&&Q.set(P[Y*2+dn],P[k-1-Y*2-gn]),v.get(Me+ye*4+Qn+gn)&&Q.set(P[k-1-Y*2-gn],P[k-1-Y*2-dn]),v.get(Me+ye*6+Qn+gn)&&Q.set(P[k-1-Y*2-dn],P[Y*2+gn])}Me+=ye*8}if(De.drawModeMessage(Q,d,H,D),d)De.drawBullsEye(Q,M.truncDivision(H,2),5);else{De.drawBullsEye(Q,M.truncDivision(H,2),7);for(let Y=0,Me=0;Y<M.truncDivision(k,2)-1;Y+=15,Me+=16)for(let ye=M.truncDivision(H,2)&1;ye<H;ye+=2)Q.set(M.truncDivision(H,2)-Me,ye),Q.set(M.truncDivision(H,2)+Me,ye),Q.set(ye,M.truncDivision(H,2)-Me),Q.set(ye,M.truncDivision(H,2)+Me)}let Z=new k1;return Z.setCompact(d),Z.setSize(H),Z.setLayers(p),Z.setCodeWords(T),Z.setMatrix(Q),Z}static drawBullsEye(r,s,o){for(let c=0;c<o;c+=2)for(let u=s-c;u<=s+c;u++)r.set(u,s-c),r.set(u,s+c),r.set(s-c,u),r.set(s+c,u);r.set(s-o,s-o),r.set(s-o+1,s-o),r.set(s-o,s-o+1),r.set(s+o,s-o),r.set(s+o,s-o+1),r.set(s+o,s+o-1)}static generateModeMessage(r,s,o){let c=new U;return r?(c.appendBits(s-1,2),c.appendBits(o-1,6),c=De.generateCheckWords(c,28,4)):(c.appendBits(s-1,5),c.appendBits(o-1,11),c=De.generateCheckWords(c,40,4)),c}static drawModeMessage(r,s,o,c){let u=M.truncDivision(o,2);if(s)for(let f=0;f<7;f++){let d=u-3+f;c.get(f)&&r.set(d,u-5),c.get(f+7)&&r.set(u+5,d),c.get(20-f)&&r.set(d,u+5),c.get(27-f)&&r.set(u-5,d)}else for(let f=0;f<10;f++){let d=u-5+f+M.truncDivision(f,5);c.get(f)&&r.set(d,u-7),c.get(f+10)&&r.set(u+7,d),c.get(29-f)&&r.set(d,u+7),c.get(39-f)&&r.set(u-7,d)}}static generateCheckWords(r,s,o){let c=r.getSize()/o,u=new Iu(De.getGF(o)),f=M.truncDivision(s,o),d=De.bitsToWords(r,o,f);u.encode(d,f-c);let p=s%o,w=new U;w.appendBits(0,p);for(const E of Array.from(d))w.appendBits(E,o);return w}static bitsToWords(r,s,o){let c=new Int32Array(o),u,f;for(u=0,f=r.getSize()/s;u<f;u++){let d=0;for(let p=0;p<s;p++)d|=r.get(u*s+p)?1<<s-p-1:0;c[u]=d}return c}static getGF(r){switch(r){case 4:return Pe.AZTEC_PARAM;case 6:return Pe.AZTEC_DATA_6;case 8:return Pe.AZTEC_DATA_8;case 10:return Pe.AZTEC_DATA_10;case 12:return Pe.AZTEC_DATA_12;default:throw new C("Unsupported word size "+r)}}static stuffBits(r,s){let o=new U,c=r.getSize(),u=(1<<s)-2;for(let f=0;f<c;f+=s){let d=0;for(let p=0;p<s;p++)(f+p>=c||r.get(f+p))&&(d|=1<<s-1-p);(d&u)===u?(o.appendBits(d&u,s),f--):d&u?o.appendBits(d,s):(o.appendBits(d|1,s),f--)}return o}static totalBitsInLayer(r,s){return((s?88:112)+16*r)*r}}De.DEFAULT_EC_PERCENT=33,De.DEFAULT_AZTEC_LAYERS=0,De.MAX_NB_BITS=32,De.MAX_NB_BITS_COMPACT=4,De.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ja{encode(r,s,o,c){return this.encodeWithHints(r,s,o,c,null)}encodeWithHints(r,s,o,c,u){let f=Su.ISO_8859_1,d=De.DEFAULT_EC_PERCENT,p=De.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(Tt.CHARACTER_SET)&&(f=L1.forName(u.get(Tt.CHARACTER_SET).toString())),u.has(Tt.ERROR_CORRECTION)&&(d=M.parseInt(u.get(Tt.ERROR_CORRECTION).toString())),u.has(Tt.AZTEC_LAYERS)&&(p=M.parseInt(u.get(Tt.AZTEC_LAYERS).toString()))),Ja.encodeLayers(r,s,o,c,f,d,p)}static encodeLayers(r,s,o,c,u,f,d){if(s!==ae.AZTEC)throw new C("Can only encode AZTEC, but got "+s);let p=De.encode(ue.getBytes(r,u),f,d);return Ja.renderResult(p,o,c)}static renderResult(r,s,o){let c=r.getMatrix();if(c==null)throw new cr;let u=c.getWidth(),f=c.getHeight(),d=Math.max(s,u),p=Math.max(o,f),w=Math.min(d/u,p/f),E=(d-u*w)/2,A=(p-f*w)/2,v=new ze(d,p);for(let T=0,D=A;T<f;T++,D+=w)for(let k=0,P=E;k<u;k++,P+=w)c.get(k,T)&&v.setRegion(P,D,w,w);return v}}n.AbstractExpandedDecoder=gu,n.ArgumentException=y,n.ArithmeticException=za,n.AztecCode=k1,n.AztecCodeReader=Va,n.AztecCodeWriter=Ja,n.AztecDecoder=Ke,n.AztecDetector=E1,n.AztecDetectorResult=y1,n.AztecEncoder=De,n.AztecHighLevelEncoder=Co,n.AztecPoint=en,n.BarcodeFormat=ae,n.Binarizer=b,n.BinaryBitmap=I,n.BitArray=U,n.BitMatrix=ze,n.BitSource=wu,n.BrowserAztecCodeReader=ry,n.BrowserBarcodeReader=ly,n.BrowserCodeReader=ln,n.BrowserDatamatrixCodeReader=uy,n.BrowserMultiFormatReader=Ey,n.BrowserPDF417Reader=_y,n.BrowserQRCodeReader=Ay,n.BrowserQRCodeSvgWriter=Di,n.CharacterSetECI=W,n.ChecksumException=R,n.Code128Reader=ee,n.Code39Reader=vt,n.DataMatrixDecodedBitStreamParser=Gr,n.DataMatrixReader=Yr,n.DecodeHintType=K,n.DecoderResult=lo,n.DefaultGridSampler=C1,n.DetectorResult=Ha,n.EAN13Reader=Ni,n.EncodeHintType=Tt,n.Exception=g,n.FormatException=j,n.GenericGF=Pe,n.GenericGFPoly=cn,n.GlobalHistogramBinarizer=et,n.GridSampler=uu,n.GridSamplerInstance=Vr,n.HTMLCanvasElementLuminanceSource=pe,n.HybridBinarizer=ge,n.ITFReader=We,n.IllegalArgumentException=C,n.IllegalStateException=cr,n.InvertedLuminanceSource=fe,n.LuminanceSource=te,n.MathUtils=Oe,n.MultiFormatOneDReader=ds,n.MultiFormatReader=D1,n.MultiFormatWriter=vy,n.NotFoundException=V,n.OneDReader=At,n.PDF417DecodedBitStreamParser=z,n.PDF417DecoderErrorCorrection=T1,n.PDF417Reader=Ht,n.PDF417ResultMetadata=R1,n.PerspectiveTransform=Yn,n.PlanarYUVLuminanceSource=dr,n.QRCodeByteMatrix=Za,n.QRCodeDataMask=Bn,n.QRCodeDecodedBitStreamParser=lt,n.QRCodeDecoderErrorCorrectionLevel=Ze,n.QRCodeDecoderFormatInformation=Qt,n.QRCodeEncoder=nt,n.QRCodeEncoderQRCode=Oi,n.QRCodeMaskUtil=mt,n.QRCodeMatrixUtil=de,n.QRCodeMode=he,n.QRCodeReader=Xr,n.QRCodeVersion=le,n.QRCodeWriter=ps,n.RGBLuminanceSource=vu,n.RSS14Reader=pt,n.RSSExpandedReader=G,n.ReaderException=Ka,n.ReedSolomonDecoder=uo,n.ReedSolomonEncoder=Iu,n.ReedSolomonException=cs,n.Result=tt,n.ResultMetadataType=Dt,n.ResultPoint=oe,n.StringUtils=ue,n.UnsupportedOperationException=we,n.VideoInputDevice=Qe,n.WhiteRectangleDetector=Ir,n.WriterException=Ge,n.ZXingArrays=N,n.ZXingCharset=L1,n.ZXingInteger=M,n.ZXingStandardCharsets=Su,n.ZXingStringBuilder=ve,n.ZXingStringEncoding=_e,n.ZXingSystem=L,n.createAbstractExpandedDecoder=v1,Object.defineProperty(n,"__esModule",{value:!0})})})(Lh,Lh.exports);var ct=Lh.exports;const v4=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var ap=function(){function t(e,n,i){if(this.formatMap=new Map([[re.QR_CODE,ct.BarcodeFormat.QR_CODE],[re.AZTEC,ct.BarcodeFormat.AZTEC],[re.CODABAR,ct.BarcodeFormat.CODABAR],[re.CODE_39,ct.BarcodeFormat.CODE_39],[re.CODE_93,ct.BarcodeFormat.CODE_93],[re.CODE_128,ct.BarcodeFormat.CODE_128],[re.DATA_MATRIX,ct.BarcodeFormat.DATA_MATRIX],[re.MAXICODE,ct.BarcodeFormat.MAXICODE],[re.ITF,ct.BarcodeFormat.ITF],[re.EAN_13,ct.BarcodeFormat.EAN_13],[re.EAN_8,ct.BarcodeFormat.EAN_8],[re.PDF_417,ct.BarcodeFormat.PDF_417],[re.RSS_14,ct.BarcodeFormat.RSS_14],[re.RSS_EXPANDED,ct.BarcodeFormat.RSS_EXPANDED],[re.UPC_A,ct.BarcodeFormat.UPC_A],[re.UPC_E,ct.BarcodeFormat.UPC_E],[re.UPC_EAN_EXTENSION,ct.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!v4)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=n,this.logger=i;var a=this.createZXingFormats(e),l=new Map;l.set(ct.DecodeHintType.POSSIBLE_FORMATS,a),l.set(ct.DecodeHintType.TRY_HARDER,!1),this.hints=l}return t.prototype.decodeAsync=function(e){var n=this;return new Promise(function(i,a){try{i(n.decode(e))}catch(l){a(l)}})},t.prototype.decode=function(e){var n=new ct.MultiFormatReader(this.verbose,this.hints),i=new ct.HTMLCanvasElementLuminanceSource(e),a=new ct.BinaryBitmap(new ct.HybridBinarizer(i)),l=n.decode(a);return{text:l.text,format:Zw.create(this.toHtml5QrcodeSupportedFormats(l.format)),debugData:this.createDebugData()}},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,a){e.set(n,i)}),e},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createZXingFormats=function(e){for(var n=[],i=0,a=e;i<a.length;i++){var l=a[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.logError("".concat(l," is not supported by")+"ZXingHtml5QrcodeShim")}return n},t.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},t}(),S4=function(t,e,n,i){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function x(y){try{g(i.next(y))}catch(C){h(C)}}function m(y){try{g(i.throw(y))}catch(C){h(C)}}function g(y){y.done?l(y.value):a(y.value).then(x,m)}g((i=i.apply(t,e||[])).next())})},T4=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(g){return function(y){return m([g,y])}}function m(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},lp=function(){function t(e,n,i){if(this.formatMap=new Map([[re.QR_CODE,"qr_code"],[re.AZTEC,"aztec"],[re.CODABAR,"codabar"],[re.CODE_39,"code_39"],[re.CODE_93,"code_93"],[re.CODE_128,"code_128"],[re.DATA_MATRIX,"data_matrix"],[re.ITF,"itf"],[re.EAN_13,"ean_13"],[re.EAN_8,"ean_8"],[re.PDF_417,"pdf417"],[re.UPC_A,"upc_a"],[re.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!t.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=n,this.logger=i;var a=this.createBarcodeDetectorFormats(e);if(this.detector=new BarcodeDetector(a),!this.detector)throw"BarcodeDetector detector not supported"}return t.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var e=new BarcodeDetector({formats:["qr_code"]});return typeof e<"u"},t.prototype.decodeAsync=function(e){return S4(this,void 0,void 0,function(){var n,i;return T4(this,function(a){switch(a.label){case 0:return[4,this.detector.detect(e)];case 1:if(n=a.sent(),!n||n.length===0)throw"No barcode or QR code detected.";return i=this.selectLargestBarcode(n),[2,{text:i.rawValue,format:Zw.create(this.toHtml5QrcodeSupportedFormats(i.format)),debugData:this.createDebugData()}]}})})},t.prototype.selectLargestBarcode=function(e){for(var n=null,i=0,a=0,l=e;a<l.length;a++){var h=l[a],x=h.boundingBox.width*h.boundingBox.height;x>i&&(i=x,n=h)}if(!n)throw"No largest barcode found";return n},t.prototype.createBarcodeDetectorFormats=function(e){for(var n=[],i=0,a=e;i<a.length;i++){var l=a[i];this.formatMap.has(l)?n.push(this.formatMap.get(l)):this.logger.warn("".concat(l," is not supported by")+"BarcodeDetectorDelegate")}return{formats:n}},t.prototype.toHtml5QrcodeSupportedFormats=function(e){if(!this.reverseFormatMap.has(e))throw"reverseFormatMap doesn't have ".concat(e);return this.reverseFormatMap.get(e)},t.prototype.createReverseFormatMap=function(){var e=new Map;return this.formatMap.forEach(function(n,i,a){e.set(n,i)}),e},t.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},t}(),cp=function(t,e,n,i){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function x(y){try{g(i.next(y))}catch(C){h(C)}}function m(y){try{g(i.throw(y))}catch(C){h(C)}}function g(y){y.done?l(y.value):a(y.value).then(x,m)}g((i=i.apply(t,e||[])).next())})},up=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(g){return function(y){return m([g,y])}}function m(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},N4=function(){function t(e,n,i,a){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=i,n&&lp.isSupported()?(this.primaryDecoder=new lp(e,i,a),this.secondaryDecoder=new ap(e,i,a)):this.primaryDecoder=new ap(e,i,a)}return t.prototype.decodeAsync=function(e){return cp(this,void 0,void 0,function(){var n;return up(this,function(i){switch(i.label){case 0:n=performance.now(),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(e)];case 2:return[2,i.sent()];case 3:return this.possiblyLogPerformance(n),[7];case 4:return[2]}})})},t.prototype.decodeRobustlyAsync=function(e){return cp(this,void 0,void 0,function(){var n,i;return up(this,function(a){switch(a.label){case 0:n=performance.now(),a.label=1;case 1:return a.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(e)];case 2:return[2,a.sent()];case 3:if(i=a.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(e)];throw i;case 4:return this.possiblyLogPerformance(n),[7];case 5:return[2]}})})},t.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},t.prototype.possiblyLogPerformance=function(e){if(this.verbose){var n=performance.now()-e;this.executionResults.push(n),this.executions++,this.possiblyFlushPerformanceReport()}},t.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var e=0,n=0,i=this.executionResults;n<i.length;n++){var a=i[n];e+=a}var l=e/this.executionResults.length;console.log("".concat(l," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},t}(),x1=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Sc=function(t,e,n,i){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function x(y){try{g(i.next(y))}catch(C){h(C)}}function m(y){try{g(i.throw(y))}catch(C){h(C)}}function g(y){y.done?l(y.value):a(y.value).then(x,m)}g((i=i.apply(t,e||[])).next())})},Tc=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(g){return function(y){return m([g,y])}}function m(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},ey=function(){function t(e,n){this.name=e,this.track=n}return t.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},t.prototype.apply=function(e){var n={};n[this.name]=e;var i={advanced:[n]};return this.track.applyConstraints(i)},t.prototype.value=function(){var e=this.track.getSettings();if(this.name in e){var n=e[this.name];return n}return null},t}(),R4=function(t){x1(e,t);function e(n,i){return t.call(this,n,i)||this}return e.prototype.min=function(){return this.getCapabilities().min},e.prototype.max=function(){return this.getCapabilities().max},e.prototype.step=function(){return this.getCapabilities().step},e.prototype.apply=function(n){var i={};i[this.name]=n;var a={advanced:[i]};return this.track.applyConstraints(a)},e.prototype.getCapabilities=function(){this.failIfNotSupported();var n=this.track.getCapabilities(),i=n[this.name];return{min:i.min,max:i.max,step:i.step}},e.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},e}(ey),M4=function(t){x1(e,t);function e(n){return t.call(this,"zoom",n)||this}return e}(R4),b4=function(t){x1(e,t);function e(n){return t.call(this,"torch",n)||this}return e}(ey),O4=function(){function t(e){this.track=e}return t.prototype.zoomFeature=function(){return new M4(this.track)},t.prototype.torchFeature=function(){return new b4(this.track)},t}(),D4=function(){function t(e,n,i){this.isClosed=!1,this.parentElement=e,this.mediaStream=n,this.callbacks=i,this.surface=this.createVideoElement(this.parentElement.clientWidth),e.append(this.surface)}return t.prototype.createVideoElement=function(e){var n=document.createElement("video");return n.style.width="".concat(e,"px"),n.style.display="block",n.muted=!0,n.setAttribute("muted","true"),n.playsInline=!0,n},t.prototype.setupSurface=function(){var e=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var n=function(){var i=e.surface.clientWidth,a=e.surface.clientHeight;e.callbacks.onRenderSurfaceReady(i,a),e.surface.removeEventListener("playing",n)};this.surface.addEventListener("playing",n),this.surface.srcObject=this.mediaStream,this.surface.play()},t.create=function(e,n,i,a){return Sc(this,void 0,void 0,function(){var l,h;return Tc(this,function(x){switch(x.label){case 0:return l=new t(e,n,a),i.aspectRatio?(h={aspectRatio:i.aspectRatio},[4,l.getFirstTrackOrFail().applyConstraints(h)]):[3,2];case 1:x.sent(),x.label=2;case 2:return l.setupSurface(),[2,l]}})})},t.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},t.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},t.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},t.prototype.resume=function(e){this.failIfClosed();var n=this,i=function(){setTimeout(e,200),n.surface.removeEventListener("playing",i)};this.surface.addEventListener("playing",i),this.surface.play()},t.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},t.prototype.getSurface=function(){return this.failIfClosed(),this.surface},t.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},t.prototype.applyVideoConstraints=function(e){return Sc(this,void 0,void 0,function(){return Tc(this,function(n){if("aspectRatio"in e)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(e)]})})},t.prototype.close=function(){if(this.isClosed)return Promise.resolve();var e=this;return new Promise(function(n,i){var a=e.mediaStream.getVideoTracks(),l=a.length,h=0;e.mediaStream.getVideoTracks().forEach(function(x){e.mediaStream.removeTrack(x),x.stop(),++h,h>=l&&(e.isClosed=!0,e.parentElement.removeChild(e.surface),n())})})},t.prototype.getCapabilities=function(){return new O4(this.getFirstTrackOrFail())},t}(),L4=function(){function t(e){this.mediaStream=e}return t.prototype.render=function(e,n,i){return Sc(this,void 0,void 0,function(){return Tc(this,function(a){return[2,D4.create(e,this.mediaStream,n,i)]})})},t.create=function(e){return Sc(this,void 0,void 0,function(){var n,i;return Tc(this,function(a){switch(a.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return n={audio:!1,video:e},[4,navigator.mediaDevices.getUserMedia(n)];case 1:return i=a.sent(),[2,new t(i)]}})})},t}(),fp=function(t,e,n,i){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function x(y){try{g(i.next(y))}catch(C){h(C)}}function m(y){try{g(i.throw(y))}catch(C){h(C)}}function g(y){y.done?l(y.value):a(y.value).then(x,m)}g((i=i.apply(t,e||[])).next())})},hp=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(g){return function(y){return m([g,y])}}function m(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},k4=function(){function t(){}return t.failIfNotSupported=function(){return fp(this,void 0,void 0,function(){return hp(this,function(e){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new t]})})},t.prototype.create=function(e){return fp(this,void 0,void 0,function(){return hp(this,function(n){return[2,L4.create(e)]})})},t}(),P4=function(t,e,n,i){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function x(y){try{g(i.next(y))}catch(C){h(C)}}function m(y){try{g(i.throw(y))}catch(C){h(C)}}function g(y){y.done?l(y.value):a(y.value).then(x,m)}g((i=i.apply(t,e||[])).next())})},B4=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(g){return function(y){return m([g,y])}}function m(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},F4=function(){function t(){}return t.retrieve=function(){if(navigator.mediaDevices)return t.getCamerasFromMediaDevices();var e=MediaStreamTrack;return MediaStreamTrack&&e.getSources?t.getCamerasFromMediaStreamTrack():t.rejectWithError()},t.rejectWithError=function(){var e=ks.unableToQuerySupportedDevices();return t.isHttpsOrLocalhost()||(e=ks.insecureContextCameraQueryError()),Promise.reject(e)},t.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var e=location.host.split(":")[0];return e==="127.0.0.1"||e==="localhost"},t.getCamerasFromMediaDevices=function(){return P4(this,void 0,void 0,function(){var e,n,i,a,l,h,x;return B4(this,function(m){switch(m.label){case 0:return e=function(g){for(var y=g.getVideoTracks(),C=0,I=y;C<I.length;C++){var R=I[C];R.enabled=!1,R.stop(),g.removeTrack(R)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return n=m.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(i=m.sent(),a=[],l=0,h=i;l<h.length;l++)x=h[l],x.kind==="videoinput"&&a.push({id:x.deviceId,label:x.label});return e(n),[2,a]}})})},t.getCamerasFromMediaStreamTrack=function(){return new Promise(function(e,n){var i=function(l){for(var h=[],x=0,m=l;x<m.length;x++){var g=m[x];g.kind==="video"&&h.push({id:g.id,label:g.label})}e(h)},a=MediaStreamTrack;a.getSources(i)})},t}(),wt;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.NOT_STARTED=1]="NOT_STARTED",t[t.SCANNING=2]="SCANNING",t[t.PAUSED=3]="PAUSED"})(wt||(wt={}));var U4=function(){function t(){this.state=wt.NOT_STARTED,this.onGoingTransactionNewState=wt.UNKNOWN}return t.prototype.directTransition=function(e){this.failIfTransitionOngoing(),this.validateTransition(e),this.state=e},t.prototype.startTransition=function(e){return this.failIfTransitionOngoing(),this.validateTransition(e),this.onGoingTransactionNewState=e,this},t.prototype.execute=function(){if(this.onGoingTransactionNewState===wt.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var e=this.onGoingTransactionNewState;this.onGoingTransactionNewState=wt.UNKNOWN,this.directTransition(e)},t.prototype.cancel=function(){if(this.onGoingTransactionNewState===wt.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=wt.UNKNOWN},t.prototype.getState=function(){return this.state},t.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==wt.UNKNOWN)throw"Cannot transition to a new state, already under transition"},t.prototype.validateTransition=function(e){switch(this.state){case wt.UNKNOWN:throw"Transition from unknown is not allowed";case wt.NOT_STARTED:this.failIfNewStateIs(e,[wt.PAUSED]);break;case wt.SCANNING:break;case wt.PAUSED:break}},t.prototype.failIfNewStateIs=function(e,n){for(var i=0,a=n;i<a.length;i++){var l=a[i];if(e===l)throw"Cannot transition from ".concat(this.state," to ").concat(e)}},t}(),z4=function(){function t(e){this.stateManager=e}return t.prototype.startTransition=function(e){return this.stateManager.startTransition(e)},t.prototype.directTransition=function(e){this.stateManager.directTransition(e)},t.prototype.getState=function(){return this.stateManager.getState()},t.prototype.canScanFile=function(){return this.stateManager.getState()===wt.NOT_STARTED},t.prototype.isScanning=function(){return this.stateManager.getState()!==wt.NOT_STARTED},t.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===wt.SCANNING},t.prototype.isPaused=function(){return this.stateManager.getState()===wt.PAUSED},t}(),j4=function(){function t(){}return t.create=function(){return new z4(new U4)},t}(),H4=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(i[l]=a[l])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function i(){this.constructor=e}e.prototype=n===null?Object.create(n):(i.prototype=n.prototype,new i)}}(),Sn=function(t){H4(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.DEFAULT_WIDTH=300,e.DEFAULT_WIDTH_OFFSET=2,e.FILE_SCAN_MIN_HEIGHT=300,e.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,e.MIN_QR_BOX_SIZE=50,e.SHADED_LEFT=1,e.SHADED_RIGHT=2,e.SHADED_TOP=3,e.SHADED_BOTTOM=4,e.SHADED_REGION_ELEMENT_ID="qr-shaded-region",e.VERBOSE=!1,e.BORDER_SHADER_DEFAULT_COLOR="#ffffff",e.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",e}(Jn),V4=function(){function t(e,n){this.logger=n,this.fps=Sn.SCAN_DEFAULT_FPS,e?(e.fps&&(this.fps=e.fps),this.disableFlip=e.disableFlip===!0,this.qrbox=e.qrbox,this.aspectRatio=e.aspectRatio,this.videoConstraints=e.videoConstraints):this.disableFlip=Sn.DEFAULT_DISABLE_FLIP}return t.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?$w.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},t.prototype.isShadedBoxEnabled=function(){return!wr(this.qrbox)},t.create=function(e,n){return new t(e,n)},t}(),dp=function(){function t(e,n){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.elementId=e,this.verbose=!1;var i;typeof n=="boolean"?this.verbose=n===!0:n&&(i=n,this.verbose=i.verbose===!0,i.experimentalFeatures),this.logger=new Jw(this.verbose),this.qrcode=new N4(this.getSupportedFormats(n),this.getUseBarCodeDetectorIfSupported(i),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=j4.create()}return t.prototype.start=function(e,n,i,a){var l=this;if(!e)throw"cameraIdOrConfig is required";if(!i||typeof i!="function")throw"qrCodeSuccessCallback is required and should be a function.";var h;a?h=a:h=this.verbose?this.logger.log:function(){};var x=V4.create(n,this.logger);this.clearElement();var m=!1;x.videoConstraints&&(x.isMediaStreamConstraintsValid()?m=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var g=m,y=document.getElementById(this.elementId);y.clientWidth?y.clientWidth:Sn.DEFAULT_WIDTH,y.style.position="relative",this.shouldScan=!0,this.element=y;var C=this,I=this.stateManagerProxy.startTransition(wt.SCANNING);return new Promise(function(R,b){var L=g?x.videoConstraints:C.createVideoConstraints(e);if(!L){I.cancel(),b("videoConstraints should be defined");return}var F={};(!g||x.aspectRatio)&&(F.aspectRatio=x.aspectRatio);var O={onRenderSurfaceReady:function(N,M){C.setupUi(N,M,x),C.isScanning=!0,C.foreverScan(x,i,h)}};k4.failIfNotSupported().then(function(N){N.create(L).then(function(M){return M.render(l.element,F,O).then(function(U){C.renderedCamera=U,I.execute(),R(null)}).catch(function(U){I.cancel(),b(U)})}).catch(function(M){I.cancel(),b(ks.errorGettingUserMedia(M))})}).catch(function(N){I.cancel(),b(ks.cameraStreamingNotSupported())})})},t.prototype.pause=function(e){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(wt.PAUSED),this.showPausedState(),(wr(e)||e!==!0)&&(e=!1),e&&this.renderedCamera&&this.renderedCamera.pause()},t.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var e=this,n=function(){e.stateManagerProxy.directTransition(wt.SCANNING),e.hidePausedState()};if(!this.renderedCamera.isPaused()){n();return}this.renderedCamera.resume(function(){n()})},t.prototype.getState=function(){return this.stateManagerProxy.getState()},t.prototype.stop=function(){var e=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var n=this.stateManagerProxy.startTransition(wt.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var i=function(){if(e.element){var l=document.getElementById(Sn.SHADED_REGION_ELEMENT_ID);l&&e.element.removeChild(l)}},a=this;return this.renderedCamera.close().then(function(){return a.renderedCamera=null,a.element&&(a.element.removeChild(a.canvasElement),a.canvasElement=null),i(),a.qrRegion&&(a.qrRegion=null),a.context&&(a.context=null),n.execute(),a.hidePausedState(),a.isScanning=!1,Promise.resolve()})},t.prototype.scanFile=function(e,n){return this.scanFileV2(e,n).then(function(i){return i.decodedText})},t.prototype.scanFileV2=function(e,n){var i=this;if(!e||!(e instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(wr(n)&&(n=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(a,l){i.possiblyCloseLastScanImageFile(),i.clearElement(),i.lastScanImageFile=URL.createObjectURL(e);var h=new Image;h.onload=function(){var x=h.width,m=h.height,g=document.getElementById(i.elementId),y=g.clientWidth?g.clientWidth:Sn.DEFAULT_WIDTH,C=Math.max(g.clientHeight?g.clientHeight:m,Sn.FILE_SCAN_MIN_HEIGHT),I=i.computeCanvasDrawConfig(x,m,y,C);if(n){var R=i.createCanvasElement(y,C,"qr-canvas-visible");R.style.display="inline-block",g.appendChild(R);var b=R.getContext("2d");if(!b)throw"Unable to get 2d context from canvas";b.canvas.width=y,b.canvas.height=C,b.drawImage(h,0,0,x,m,I.x,I.y,I.width,I.height)}var L=Sn.FILE_SCAN_HIDDEN_CANVAS_PADDING,F=Math.max(h.width,I.width),O=Math.max(h.height,I.height),N=F+2*L,M=O+2*L,U=i.createCanvasElement(N,M);g.appendChild(U);var q=U.getContext("2d");if(!q)throw"Unable to get 2d context from canvas";q.canvas.width=N,q.canvas.height=M,q.drawImage(h,0,0,x,m,L,L,F,O);try{i.qrcode.decodeRobustlyAsync(U).then(function(K){a(sp.createFromQrcodeResult(K))}).catch(l)}catch(K){l("QR code parse error, error = ".concat(K))}},h.onerror=l,h.onabort=l,h.onstalled=l,h.onsuspend=l,h.src=URL.createObjectURL(e)})},t.prototype.clear=function(){this.clearElement()},t.getCameras=function(){return F4.retrieve()},t.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},t.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},t.prototype.applyVideoConstraints=function(e){if(e){if(!$w.isMediaStreamConstraintsValid(e,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(e)},t.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},t.prototype.getSupportedFormats=function(e){var n=[re.QR_CODE,re.AZTEC,re.CODABAR,re.CODE_39,re.CODE_93,re.CODE_128,re.DATA_MATRIX,re.MAXICODE,re.ITF,re.EAN_13,re.EAN_8,re.PDF_417,re.RSS_14,re.RSS_EXPANDED,re.UPC_A,re.UPC_E,re.UPC_EAN_EXTENSION];if(!e||typeof e=="boolean"||!e.formatsToSupport)return n;if(!Array.isArray(e.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(e.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var i=[],a=0,l=e.formatsToSupport;a<l.length;a++){var h=l[a];A4(h)?i.push(h):this.logger.warn("Invalid format: ".concat(h," passed in config, ignoring."))}if(i.length===0)throw"None of formatsToSupport match supported values.";return i},t.prototype.getUseBarCodeDetectorIfSupported=function(e){if(wr(e))return!0;if(!wr(e.useBarCodeDetectorIfSupported))return e.useBarCodeDetectorIfSupported!==!1;if(wr(e.experimentalFeatures))return!0;var n=e.experimentalFeatures;return wr(n.useBarCodeDetectorIfSupported)?!0:n.useBarCodeDetectorIfSupported!==!1},t.prototype.validateQrboxSize=function(e,n,i){var a=this,l=i.qrbox;this.validateQrboxConfig(l);var h=this.toQrdimensions(e,n,l),x=function(g){if(g<Sn.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(Sn.MIN_QR_BOX_SIZE,"px.")},m=function(g){return g>e&&(a.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),g=e),g};x(h.width),x(h.height),h.width=m(h.width)},t.prototype.validateQrboxConfig=function(e){if(typeof e!="number"&&typeof e!="function"&&(e.width===void 0||e.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},t.prototype.toQrdimensions=function(e,n,i){if(typeof i=="number")return{width:i,height:i};if(typeof i=="function")try{return i(e,n)}catch(a){throw new Error("qrbox config was passed as a function but it failed with unknown error"+a)}return i},t.prototype.setupUi=function(e,n,i){i.isShadedBoxEnabled()&&this.validateQrboxSize(e,n,i);var a=wr(i.qrbox)?{width:e,height:n}:i.qrbox;this.validateQrboxConfig(a);var l=this.toQrdimensions(e,n,a);l.height>n&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var h=i.isShadedBoxEnabled()&&l.height<=n,x={x:0,y:0,width:e,height:n},m=h?this.getShadedRegionBounds(e,n,l):x,g=this.createCanvasElement(m.width,m.height),y={willReadFrequently:!0},C=g.getContext("2d",y);C.canvas.width=m.width,C.canvas.height=m.height,this.element.append(g),h&&this.possiblyInsertShadingElement(this.element,e,n,l),this.createScannerPausedUiElement(this.element),this.qrRegion=m,this.context=C,this.canvasElement=g},t.prototype.createScannerPausedUiElement=function(e){var n=document.createElement("div");n.innerText=ks.scannerPaused(),n.style.display="none",n.style.position="absolute",n.style.top="0px",n.style.zIndex="1",n.style.background="rgba(9, 9, 9, 0.46)",n.style.color="#FFECEC",n.style.textAlign="center",n.style.width="100%",e.appendChild(n),this.scannerPausedUiElement=n},t.prototype.scanContext=function(e,n){var i=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(a){return e(a.text,sp.createFromQrcodeResult(a)),i.possiblyUpdateShaders(!0),!0}).catch(function(a){i.possiblyUpdateShaders(!1);var l=ks.codeParseError(a);return n(l,qw.createFrom(l)),!1})},t.prototype.foreverScan=function(e,n,i){var a=this;if(this.shouldScan&&this.renderedCamera){var l=this.renderedCamera.getSurface(),h=l.videoWidth/l.clientWidth,x=l.videoHeight/l.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var m=this.qrRegion.width*h,g=this.qrRegion.height*x,y=this.qrRegion.x*h,C=this.qrRegion.y*x;this.context.drawImage(l,y,C,m,g,0,0,this.qrRegion.width,this.qrRegion.height);var I=function(){a.foreverScanTimeout=setTimeout(function(){a.foreverScan(e,n,i)},a.getTimeoutFps(e.fps))};this.scanContext(n,i).then(function(R){!R&&e.disableFlip!==!0?(a.context.translate(a.context.canvas.width,0),a.context.scale(-1,1),a.scanContext(n,i).finally(function(){I()})):I()}).catch(function(R){a.logger.logError("Error happend while scanning context",R),I()})}},t.prototype.createVideoConstraints=function(e){if(typeof e=="string")return{deviceId:{exact:e}};if(typeof e=="object"){var n="facingMode",i="deviceId",a={user:!0,environment:!0},l="exact",h=function(b){if(b in a)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(b,"'")},x=Object.keys(e);if(x.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(x.length," keys");var m=Object.keys(e)[0];if(m!==n&&m!==i)throw"Only '".concat(n,"' and '").concat(i,"' ")+" are supported for 'cameraIdOrConfig'";if(m===n){var g=e.facingMode;if(typeof g=="string"){if(h(g))return{facingMode:g}}else if(typeof g=="object")if(l in g){if(h(g["".concat(l)]))return{facingMode:{exact:g["".concat(l)]}}}else throw"'facingMode' should be string or object with"+" ".concat(l," as key.");else{var y=typeof g;throw"Invalid type of 'facingMode' = ".concat(y)}}else{var C=e.deviceId;if(typeof C=="string")return{deviceId:C};if(typeof C=="object"){if(l in C)return{deviceId:{exact:C["".concat(l)]}};throw"'deviceId' should be string or object with"+" ".concat(l," as key.")}else{var I=typeof C;throw"Invalid type of 'deviceId' = ".concat(I)}}}var R=typeof e;throw"Invalid type of 'cameraIdOrConfig' = ".concat(R)},t.prototype.computeCanvasDrawConfig=function(e,n,i,a){if(e<=i&&n<=a){var l=(i-e)/2,h=(a-n)/2;return{x:l,y:h,width:e,height:n}}else{var x=e,m=n;return e>i&&(n=i/e*n,e=i),n>a&&(e=a/n*e,n=a),this.logger.log("Image downsampled from "+"".concat(x,"X").concat(m)+" to ".concat(e,"X").concat(n,".")),this.computeCanvasDrawConfig(e,n,i,a)}},t.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var e=document.getElementById(this.elementId);e&&(e.innerHTML="")},t.prototype.possiblyUpdateShaders=function(e){this.qrMatch!==e&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(n){n.style.backgroundColor=e?Sn.BORDER_SHADER_MATCH_COLOR:Sn.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=e)},t.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},t.prototype.createCanvasElement=function(e,n,i){var a=e,l=n,h=document.createElement("canvas");return h.style.width="".concat(a,"px"),h.style.height="".concat(l,"px"),h.style.display="none",h.id=wr(i)?"qr-canvas":i,h},t.prototype.getShadedRegionBounds=function(e,n,i){if(i.width>e||i.height>n)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(e-i.width)/2,y:(n-i.height)/2,width:i.width,height:i.height}},t.prototype.possiblyInsertShadingElement=function(e,n,i,a){if(!(n-a.width<1||i-a.height<1)){var l=document.createElement("div");l.style.position="absolute";var h=(n-a.width)/2,x=(i-a.height)/2;if(l.style.borderLeft="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderRight="".concat(h,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderTop="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),l.style.borderBottom="".concat(x,"px solid rgba(0, 0, 0, 0.48)"),l.style.boxSizing="border-box",l.style.top="0px",l.style.bottom="0px",l.style.left="0px",l.style.right="0px",l.id="".concat(Sn.SHADED_REGION_ELEMENT_ID),n-a.width<11||i-a.height<11)this.hasBorderShaders=!1;else{var m=5,g=40;this.insertShaderBorders(l,g,m,-m,null,0,!0),this.insertShaderBorders(l,g,m,-m,null,0,!1),this.insertShaderBorders(l,g,m,null,-m,0,!0),this.insertShaderBorders(l,g,m,null,-m,0,!1),this.insertShaderBorders(l,m,g+m,-m,null,-m,!0),this.insertShaderBorders(l,m,g+m,null,-m,-m,!0),this.insertShaderBorders(l,m,g+m,-m,null,-m,!1),this.insertShaderBorders(l,m,g+m,null,-m,-m,!1),this.hasBorderShaders=!0}e.append(l)}},t.prototype.insertShaderBorders=function(e,n,i,a,l,h,x){var m=document.createElement("div");m.style.position="absolute",m.style.backgroundColor=Sn.BORDER_SHADER_DEFAULT_COLOR,m.style.width="".concat(n,"px"),m.style.height="".concat(i,"px"),a!==null&&(m.style.top="".concat(a,"px")),l!==null&&(m.style.bottom="".concat(l,"px")),x?m.style.left="".concat(h,"px"):m.style.right="".concat(h,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(m),e.appendChild(m)},t.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},t.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},t.prototype.getTimeoutFps=function(e){return 1e3/e},t}(),w1="data:image/svg+xml;base64,",W4=w1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",G4=w1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",gp=w1+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Y4="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",pp=function(){function t(){}return t.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},t}(),X4=function(){function t(){this.data=pp.createDefault();var e=localStorage.getItem(t.LOCAL_STORAGE_KEY);e?this.data=JSON.parse(e):this.reset()}return t.prototype.hasCameraPermissions=function(){return this.data.hasPermission},t.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},t.prototype.setHasPermission=function(e){this.data.hasPermission=e,this.flush()},t.prototype.setLastUsedCameraId=function(e){this.data.lastUsedCameraId=e,this.flush()},t.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},t.prototype.reset=function(){this.data=pp.createDefault(),this.flush()},t.prototype.flush=function(){localStorage.setItem(t.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},t.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",t}(),Q4=function(){function t(){this.infoDiv=document.createElement("div")}return t.prototype.renderInto=function(e){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=op.poweredBy();var n=document.createElement("a");n.innerText="ScanApp",n.href="https://scanapp.org",n.target="new",n.style.color="white",this.infoDiv.appendChild(n);var i=document.createElement("br"),a=document.createElement("br");this.infoDiv.appendChild(i),this.infoDiv.appendChild(a);var l=document.createElement("a");l.innerText=op.reportIssues(),l.href="https://github.com/mebjas/html5-qrcode/issues",l.target="new",l.style.color="white",this.infoDiv.appendChild(l),e.appendChild(this.infoDiv)},t.prototype.show=function(){this.infoDiv.style.display="block"},t.prototype.hide=function(){this.infoDiv.style.display="none"},t}(),K4=function(){function t(e,n){this.isShowingInfoIcon=!0,this.onTapIn=e,this.onTapOut=n,this.infoIcon=document.createElement("img")}return t.prototype.renderInto=function(e){var n=this;this.infoIcon.alt="Info icon",this.infoIcon.src=gp,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(i){return n.onHoverIn()},this.infoIcon.onmouseout=function(i){return n.onHoverOut()},this.infoIcon.onclick=function(i){return n.onClick()},e.appendChild(this.infoIcon)},t.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},t.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},t.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=Y4,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=gp,this.infoIcon.style.opacity="0.6")},t}(),Z4=function(){function t(){var e=this;this.infoDiv=new Q4,this.infoIcon=new K4(function(){e.infoDiv.show()},function(){e.infoDiv.hide()})}return t.prototype.renderInto=function(e){this.infoDiv.renderInto(e),this.infoIcon.renderInto(e)},t}(),q4=function(t,e,n,i){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function x(y){try{g(i.next(y))}catch(C){h(C)}}function m(y){try{g(i.throw(y))}catch(C){h(C)}}function g(y){y.done?l(y.value):a(y.value).then(x,m)}g((i=i.apply(t,e||[])).next())})},J4=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(g){return function(y){return m([g,y])}}function m(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},mp=function(){function t(){}return t.hasPermissions=function(){return q4(this,void 0,void 0,function(){var e,n,i,a;return J4(this,function(l){switch(l.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(e=l.sent(),n=0,i=e;n<i.length;n++)if(a=i[n],a.kind==="videoinput"&&a.label)return[2,!0];return[2,!1]}})})},t}(),qr=function(){function t(e){this.supportedScanTypes=this.validateAndReturnScanTypes(e)}return t.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},t.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},t.prototype.isCameraScanRequired=function(){for(var e=0,n=this.supportedScanTypes;e<n.length;e++){var i=n[e];if(t.isCameraScanType(i))return!0}return!1},t.isCameraScanType=function(e){return e===Ai.SCAN_TYPE_CAMERA},t.isFileScanType=function(e){return e===Ai.SCAN_TYPE_FILE},t.prototype.validateAndReturnScanTypes=function(e){if(!e||e.length===0)return Jn.DEFAULT_SUPPORTED_SCAN_TYPE;var n=Jn.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(e.length>n)throw"Max ".concat(n," values expected for ")+"supportedScanTypes";for(var i=0,a=e;i<a.length;i++){var l=a[i];if(!Jn.DEFAULT_SUPPORTED_SCAN_TYPE.includes(l))throw"Unsupported scan type ".concat(l)}return e},t}(),Rn=function(){function t(){}return t.ALL_ELEMENT_CLASS="html5-qrcode-element",t.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",t.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",t.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",t.TORCH_BUTTON_ID="html5-qrcode-button-torch",t.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",t.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",t.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",t.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",t.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",t.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",t}(),Mr=function(){function t(){}return t.createElement=function(e,n){var i=document.createElement(e);return i.id=n,i.classList.add(Rn.ALL_ELEMENT_CLASS),e==="button"&&i.setAttribute("type","button"),i},t}(),ty=function(t,e,n,i){function a(l){return l instanceof n?l:new n(function(h){h(l)})}return new(n||(n=Promise))(function(l,h){function x(y){try{g(i.next(y))}catch(C){h(C)}}function m(y){try{g(i.throw(y))}catch(C){h(C)}}function g(y){y.done?l(y.value):a(y.value).then(x,m)}g((i=i.apply(t,e||[])).next())})},ny=function(t,e){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,a,l,h;return h={next:x(0),throw:x(1),return:x(2)},typeof Symbol=="function"&&(h[Symbol.iterator]=function(){return this}),h;function x(g){return function(y){return m([g,y])}}function m(g){if(i)throw new TypeError("Generator is already executing.");for(;h&&(h=0,g[0]&&(n=0)),n;)try{if(i=1,a&&(l=g[0]&2?a.return:g[0]?a.throw||((l=a.return)&&l.call(a),0):a.next)&&!(l=l.call(a,g[1])).done)return l;switch(a=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,a=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=e.call(t,n)}catch(y){g=[6,y],a=0}finally{i=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},xp=function(){function t(e,n,i){this.isTorchOn=!1,this.torchCapability=e,this.buttonController=n,this.onTorchActionFailureCallback=i}return t.prototype.isTorchEnabled=function(){return this.isTorchOn},t.prototype.flipState=function(){return ty(this,void 0,void 0,function(){var e,n;return ny(this,function(i){switch(i.label){case 0:this.buttonController.disable(),e=!this.isTorchOn,i.label=1;case 1:return i.trys.push([1,3,,4]),[4,this.torchCapability.apply(e)];case 2:return i.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),e),[3,4];case 3:return n=i.sent(),this.propagateFailure(e,n),this.buttonController.enable(),[3,4];case 4:return[2]}})})},t.prototype.updateUiBasedOnLatestSettings=function(e,n){e===n?(this.buttonController.setText(n?je.torchOffButton():je.torchOnButton()),this.isTorchOn=n):this.propagateFailure(n),this.buttonController.enable()},t.prototype.propagateFailure=function(e,n){var i=e?je.torchOnFailedMessage():je.torchOffFailedMessage();n&&(i+="; Error = "+n),this.onTorchActionFailureCallback(i)},t.prototype.reset=function(){this.isTorchOn=!1},t}(),$4=function(){function t(e,n){this.onTorchActionFailureCallback=n,this.torchButton=Mr.createElement("button",Rn.TORCH_BUTTON_ID),this.torchController=new xp(e,this,n)}return t.prototype.render=function(e,n){var i=this;this.torchButton.innerText=je.torchOnButton(),this.torchButton.style.display=n.display,this.torchButton.style.marginLeft=n.marginLeft;var a=this;this.torchButton.addEventListener("click",function(l){return ty(i,void 0,void 0,function(){return ny(this,function(h){switch(h.label){case 0:return[4,a.torchController.flipState()];case 1:return h.sent(),a.torchController.isTorchEnabled()?(a.torchButton.classList.remove(Rn.TORCH_BUTTON_CLASS_TORCH_OFF),a.torchButton.classList.add(Rn.TORCH_BUTTON_CLASS_TORCH_ON)):(a.torchButton.classList.remove(Rn.TORCH_BUTTON_CLASS_TORCH_ON),a.torchButton.classList.add(Rn.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),e.appendChild(this.torchButton)},t.prototype.updateTorchCapability=function(e){this.torchController=new xp(e,this,this.onTorchActionFailureCallback)},t.prototype.getTorchButton=function(){return this.torchButton},t.prototype.hide=function(){this.torchButton.style.display="none"},t.prototype.show=function(){this.torchButton.style.display="inline-block"},t.prototype.disable=function(){this.torchButton.disabled=!0},t.prototype.enable=function(){this.torchButton.disabled=!1},t.prototype.setText=function(e){this.torchButton.innerText=e},t.prototype.reset=function(){this.torchButton.innerText=je.torchOnButton(),this.torchController.reset()},t.create=function(e,n,i,a){var l=new t(n,a);return l.render(e,i),l},t}(),e8=function(){function t(e,n,i){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=n?"block":"none",e.appendChild(this.fileBasedScanRegion);var a=document.createElement("label");a.setAttribute("for",this.getFileScanInputId()),a.style.display="inline-block",this.fileBasedScanRegion.appendChild(a),this.fileSelectionButton=Mr.createElement("button",Rn.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(x){a.click()}),a.append(this.fileSelectionButton),this.fileScanInput=Mr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",a.appendChild(this.fileScanInput);var l=this;this.fileScanInput.addEventListener("change",function(x){if(!(x==null||x.target==null)){var m=x.target;if(!(m.files&&m.files.length===0)){var g=m.files,y=g[0],C=y.name;l.setImageNameToButton(C),i(y)}}});var h=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(h),this.fileBasedScanRegion.addEventListener("dragenter",function(x){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),x.stopPropagation(),x.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(x){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder(),x.stopPropagation(),x.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(x){l.fileBasedScanRegion.style.border=l.fileBasedScanRegionActiveBorder(),x.stopPropagation(),x.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(x){x.stopPropagation(),x.preventDefault(),l.fileBasedScanRegion.style.border=l.fileBasedScanRegionDefaultBorder();var m=x.dataTransfer;if(m){var g=m.files;if(!g||g.length===0)return;for(var y=!1,C=0;C<g.length;++C){var I=g.item(C);if(I){var R=/image.*/;if(I.type.match(R)){y=!0;var b=I.name;l.setImageNameToButton(b),i(I),h.innerText=je.dragAndDropMessage();break}}}y||(h.innerText=je.dragAndDropMessageOnlyImages())}})}return t.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},t.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},t.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},t.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},t.prototype.createFileBasedScanRegion=function(){var e=document.createElement("div");return e.style.textAlign="center",e.style.margin="auto",e.style.width="80%",e.style.maxWidth="600px",e.style.border=this.fileBasedScanRegionDefaultBorder(),e.style.padding="10px",e.style.marginBottom="10px",e},t.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},t.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},t.prototype.createDragAndDropMessage=function(){var e=document.createElement("div");return e.innerText=je.dragAndDropMessage(),e.style.fontWeight="400",e},t.prototype.setImageNameToButton=function(e){var n=20;if(e.length>n){var i=e.substring(0,8),a=e.length,l=e.substring(a-8,a);e="".concat(i,"....").concat(l)}var h=je.fileSelectionChooseAnother()+" - "+e;this.fileSelectionButton.innerText=h},t.prototype.setInitialValueToButton=function(){var e=je.fileSelectionChooseImage()+" - "+je.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=e},t.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},t.create=function(e,n,i){var a=new t(e,n,i);return a},t}(),t8=function(){function t(e){this.selectElement=Mr.createElement("select",Rn.CAMERA_SELECTION_SELECT_ID),this.cameras=e,this.options=[]}return t.prototype.render=function(e){var n=document.createElement("span");n.style.marginRight="10px";var i=this.cameras.length;if(i===0)throw new Error("No cameras found");if(i===1)n.style.display="none";else{var a=je.selectCamera();n.innerText="".concat(a," (").concat(this.cameras.length,")  ")}for(var l=1,h=0,x=this.cameras;h<x.length;h++){var m=x[h],g=m.id,y=m.label==null?g:m.label;(!y||y==="")&&(y=[je.anonymousCameraPrefix(),l++].join(" "));var C=document.createElement("option");C.value=g,C.innerText=y,this.options.push(C),this.selectElement.appendChild(C)}n.appendChild(this.selectElement),e.appendChild(n)},t.prototype.disable=function(){this.selectElement.disabled=!0},t.prototype.isDisabled=function(){return this.selectElement.disabled===!0},t.prototype.enable=function(){this.selectElement.disabled=!1},t.prototype.getValue=function(){return this.selectElement.value},t.prototype.hasValue=function(e){for(var n=0,i=this.options;n<i.length;n++){var a=i[n];if(a.value===e)return!0}return!1},t.prototype.setValue=function(e){if(!this.hasValue(e))throw new Error("".concat(e," is not present in the camera list."));this.selectElement.value=e},t.prototype.hasSingleItem=function(){return this.cameras.length===1},t.prototype.numCameras=function(){return this.cameras.length},t.create=function(e,n){var i=new t(n);return i.render(e),i},t}(),n8=function(){function t(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Mr.createElement("input",Rn.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return t.prototype.render=function(e,n){this.zoomElementContainer.style.display=n?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",e.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var i=je.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(i),this.rangeText.style.marginRight="10px";var a=this;this.rangeInput.addEventListener("input",function(){return a.onValueChange()}),this.rangeInput.addEventListener("change",function(){return a.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},t.prototype.onValueChange=function(){var e=je.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(e),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},t.prototype.setValues=function(e,n,i,a){this.rangeInput.min=e.toString(),this.rangeInput.max=n.toString(),this.rangeInput.step=a.toString(),this.rangeInput.value=i.toString(),this.onValueChange()},t.prototype.show=function(){this.zoomElementContainer.style.display="block"},t.prototype.hide=function(){this.zoomElementContainer.style.display="none"},t.prototype.setOnCameraZoomValueChangeCallback=function(e){this.onChangeCallback=e},t.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},t.create=function(e,n){var i=new t;return i.render(e,n),i},t}(),Tn;(function(t){t[t.STATUS_DEFAULT=0]="STATUS_DEFAULT",t[t.STATUS_SUCCESS=1]="STATUS_SUCCESS",t[t.STATUS_WARNING=2]="STATUS_WARNING",t[t.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(Tn||(Tn={}));function r8(t){return{fps:t.fps,qrbox:t.qrbox,aspectRatio:t.aspectRatio,disableFlip:t.disableFlip,videoConstraints:t.videoConstraints}}function i8(t,e){return{formatsToSupport:t.formatsToSupport,useBarCodeDetectorIfSupported:t.useBarCodeDetectorIfSupported,experimentalFeatures:t.experimentalFeatures,verbose:e}}var s8=function(){function t(e,n,i){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=e,this.config=this.createConfig(n),this.verbose=i===!0,!document.getElementById(e))throw"HTML Element with id=".concat(e," not found");this.scanTypeSelector=new qr(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new Jw(this.verbose),this.persistedDataManager=new X4,n.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return t.prototype.render=function(e,n){var i=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(l,h){if(e)e(l,h);else{if(i.lastMatchFound===l)return;i.lastMatchFound=l,i.setHeaderMessage(je.lastMatch(l),Tn.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(l,h){n&&n(l,h)};var a=document.getElementById(this.elementId);if(!a)throw"HTML Element with id=".concat(this.elementId," not found");a.innerHTML="",this.createBasicLayout(a),this.html5Qrcode=new dp(this.getScanRegionId(),i8(this.config,this.verbose))},t.prototype.pause=function(e){(wr(e)||e!==!0)&&(e=!1),this.getHtml5QrcodeOrFail().pause(e)},t.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},t.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},t.prototype.clear=function(){var e=this,n=function(){var i=document.getElementById(e.elementId);i&&(i.innerHTML="",e.resetBasicLayout(i))};return this.html5Qrcode?new Promise(function(i,a){if(!e.html5Qrcode){i();return}e.html5Qrcode.isScanning?e.html5Qrcode.stop().then(function(l){if(!e.html5Qrcode){i();return}e.html5Qrcode.clear(),n(),i()}).catch(function(l){e.verbose&&e.logger.logError("Unable to stop qrcode scanner",l),a(l)}):(e.html5Qrcode.clear(),n(),i())}):Promise.resolve()},t.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},t.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},t.prototype.applyVideoConstraints=function(e){return this.getHtml5QrcodeOrFail().applyVideoConstraints(e)},t.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},t.prototype.createConfig=function(e){return e?(e.fps||(e.fps=Jn.SCAN_DEFAULT_FPS),e.rememberLastUsedCamera!==!Jn.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(e.rememberLastUsedCamera=Jn.DEFAULT_REMEMBER_LAST_CAMERA_USED),e.supportedScanTypes||(e.supportedScanTypes=Jn.DEFAULT_SUPPORTED_SCAN_TYPE),e):{fps:Jn.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Jn.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Jn.DEFAULT_SUPPORTED_SCAN_TYPE}},t.prototype.createBasicLayout=function(e){e.style.position="relative",e.style.padding="0px",e.style.border="1px solid silver",this.createHeader(e);var n=document.createElement("div"),i=this.getScanRegionId();n.id=i,n.style.width="100%",n.style.minHeight="100px",n.style.textAlign="center",e.appendChild(n),qr.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var a=document.createElement("div"),l=this.getDashboardId();a.id=l,a.style.width="100%",e.appendChild(a),this.setupInitialDashboard(a)},t.prototype.resetBasicLayout=function(e){e.style.border="none"},t.prototype.setupInitialDashboard=function(e){this.createSection(e),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},t.prototype.createHeader=function(e){var n=document.createElement("div");n.style.textAlign="left",n.style.margin="0px",e.appendChild(n);var i=new Z4;i.renderInto(n);var a=document.createElement("div");a.id=this.getHeaderMessageContainerId(),a.style.display="none",a.style.textAlign="center",a.style.fontSize="14px",a.style.padding="2px 10px",a.style.margin="4px",a.style.borderTop="1px solid #f6f6f6",n.appendChild(a)},t.prototype.createSection=function(e){var n=document.createElement("div");n.id=this.getDashboardSectionId(),n.style.width="100%",n.style.padding="10px 0px 10px 0px",n.style.textAlign="left",e.appendChild(n)},t.prototype.createCameraListUi=function(e,n,i){var a=this;a.showHideScanTypeSwapLink(!1),a.setHeaderMessage(je.cameraPermissionRequesting());var l=function(){i||a.createPermissionButton(e,n)};dp.getCameras().then(function(h){a.persistedDataManager.setHasPermission(!0),a.showHideScanTypeSwapLink(!0),a.resetHeaderMessage(),h&&h.length>0?(e.removeChild(n),a.renderCameraSelection(h)):(a.setHeaderMessage(je.noCameraFound(),Tn.STATUS_WARNING),l())}).catch(function(h){a.persistedDataManager.setHasPermission(!1),i?i.disabled=!1:l(),a.setHeaderMessage(h,Tn.STATUS_WARNING),a.showHideScanTypeSwapLink(!0)})},t.prototype.createPermissionButton=function(e,n){var i=this,a=Mr.createElement("button",this.getCameraPermissionButtonId());a.innerText=je.cameraPermissionTitle(),a.addEventListener("click",function(){a.disabled=!0,i.createCameraListUi(e,n,a)}),n.appendChild(a)},t.prototype.createPermissionsUi=function(e,n){var i=this;if(qr.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){mp.hasPermissions().then(function(a){a?i.createCameraListUi(e,n):(i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(e,n))}).catch(function(a){i.persistedDataManager.setHasPermission(!1),i.createPermissionButton(e,n)});return}this.createPermissionButton(e,n)},t.prototype.createSectionControlPanel=function(){var e=document.getElementById(this.getDashboardSectionId()),n=document.createElement("div");e.appendChild(n);var i=document.createElement("div");i.id=this.getDashboardSectionCameraScanRegionId(),i.style.display=qr.isCameraScanType(this.currentScanType)?"block":"none",n.appendChild(i);var a=document.createElement("div");a.style.textAlign="center",i.appendChild(a),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(i,a),this.renderFileScanUi(n)},t.prototype.renderFileScanUi=function(e){var n=qr.isFileScanType(this.currentScanType),i=this,a=function(l){if(!i.html5Qrcode)throw"html5Qrcode not defined";qr.isFileScanType(i.currentScanType)&&(i.setHeaderMessage(je.loadingImage()),i.html5Qrcode.scanFileV2(l,!0).then(function(h){i.resetHeaderMessage(),i.qrCodeSuccessCallback(h.decodedText,h)}).catch(function(h){i.setHeaderMessage(h,Tn.STATUS_WARNING),i.qrCodeErrorCallback(h,qw.createFrom(h))}))};this.fileSelectionUi=e8.create(e,n,a)},t.prototype.renderCameraSelection=function(e){var n=this,i=this,a=document.getElementById(this.getDashboardSectionCameraScanRegionId());a.style.textAlign="center";var l=n8.create(a,!1),h=function(L){var F=L.zoomFeature();if(F.isSupported()){l.setOnCameraZoomValueChangeCallback(function(N){F.apply(N)});var O=1;n.config.defaultZoomValueIfSupported&&(O=n.config.defaultZoomValueIfSupported),O=I4(O,F.min(),F.max()),l.setValues(F.min(),F.max(),O,F.step()),l.show()}},x=t8.create(a,e),m=document.createElement("span"),g=Mr.createElement("button",Rn.CAMERA_START_BUTTON_ID);g.innerText=je.scanButtonStartScanningText(),m.appendChild(g);var y=Mr.createElement("button",Rn.CAMERA_STOP_BUTTON_ID);y.innerText=je.scanButtonStopScanningText(),y.style.display="none",y.disabled=!0,m.appendChild(y);var C,I=function(L){if(!L.torchFeature().isSupported()){C&&C.hide();return}C?C.updateTorchCapability(L.torchFeature()):C=$4.create(m,L.torchFeature(),{display:"none",marginLeft:"5px"},function(F){i.setHeaderMessage(F,Tn.STATUS_WARNING)}),C.show()};a.appendChild(m);var R=function(L){L||(g.style.display="none"),g.innerText=je.scanButtonStartScanningText(),g.style.opacity="1",g.disabled=!1,L&&(g.style.display="inline-block")};if(g.addEventListener("click",function(L){g.innerText=je.scanButtonScanningStarting(),x.disable(),g.disabled=!0,g.style.opacity="0.5",n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!1),i.resetHeaderMessage();var F=x.getValue();i.persistedDataManager.setLastUsedCameraId(F),i.html5Qrcode.start(F,r8(i.config),i.qrCodeSuccessCallback,i.qrCodeErrorCallback).then(function(O){y.disabled=!1,y.style.display="inline-block",R(!1);var N=i.html5Qrcode.getRunningTrackCameraCapabilities();n.config.showTorchButtonIfSupported===!0&&I(N),n.config.showZoomSliderIfSupported===!0&&h(N)}).catch(function(O){i.showHideScanTypeSwapLink(!0),x.enable(),R(!0),i.setHeaderMessage(O,Tn.STATUS_WARNING)})}),x.hasSingleItem()&&g.click(),y.addEventListener("click",function(L){if(!i.html5Qrcode)throw"html5Qrcode not defined";y.disabled=!0,i.html5Qrcode.stop().then(function(F){n.scanTypeSelector.hasMoreThanOneScanType()&&i.showHideScanTypeSwapLink(!0),x.enable(),g.disabled=!1,y.style.display="none",g.style.display="inline-block",C&&(C.reset(),C.hide()),l.removeOnCameraZoomValueChangeCallback(),l.hide(),i.insertCameraScanImageToScanRegion()}).catch(function(F){y.disabled=!1,i.setHeaderMessage(F,Tn.STATUS_WARNING)})}),i.persistedDataManager.getLastUsedCameraId()){var b=i.persistedDataManager.getLastUsedCameraId();x.hasValue(b)?(x.setValue(b),g.click()):i.persistedDataManager.resetLastUsedCameraId()}},t.prototype.createSectionSwap=function(){var e=this,n=je.textIfCameraScanSelected(),i=je.textIfFileScanSelected(),a=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");l.style.textAlign="center";var h=Mr.createElement("span",this.getDashboardSectionSwapLinkId());h.style.textDecoration="underline",h.style.cursor="pointer",h.innerText=qr.isCameraScanType(this.currentScanType)?n:i,h.addEventListener("click",function(){if(!e.sectionSwapAllowed){e.verbose&&e.logger.logError("Section swap called when not allowed");return}e.resetHeaderMessage(),e.fileSelectionUi.resetValue(),e.sectionSwapAllowed=!1,qr.isCameraScanType(e.currentScanType)?(e.clearScanRegion(),e.getCameraScanRegion().style.display="none",e.fileSelectionUi.show(),h.innerText=i,e.currentScanType=Ai.SCAN_TYPE_FILE,e.insertFileScanImageToScanRegion()):(e.clearScanRegion(),e.getCameraScanRegion().style.display="block",e.fileSelectionUi.hide(),h.innerText=n,e.currentScanType=Ai.SCAN_TYPE_CAMERA,e.insertCameraScanImageToScanRegion(),e.startCameraScanIfPermissionExistsOnSwap()),e.sectionSwapAllowed=!0}),l.appendChild(h),a.appendChild(l)},t.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var e=this,n=this;if(this.persistedDataManager.hasCameraPermissions()){mp.hasPermissions().then(function(i){if(i){var a=document.getElementById(n.getCameraPermissionButtonId());if(!a)throw e.logger.logError("Permission button not found, fail;"),"Permission button not found";a.click()}else n.persistedDataManager.setHasPermission(!1)}).catch(function(i){n.persistedDataManager.setHasPermission(!1)});return}},t.prototype.resetHeaderMessage=function(){var e=document.getElementById(this.getHeaderMessageContainerId());e.style.display="none"},t.prototype.setHeaderMessage=function(e,n){n||(n=Tn.STATUS_DEFAULT);var i=this.getHeaderMessageDiv();switch(i.innerText=e,i.style.display="block",n){case Tn.STATUS_SUCCESS:i.style.background="rgba(106, 175, 80, 0.26)",i.style.color="#477735";break;case Tn.STATUS_WARNING:i.style.background="rgba(203, 36, 49, 0.14)",i.style.color="#cb2431";break;case Tn.STATUS_DEFAULT:default:i.style.background="rgba(0, 0, 0, 0)",i.style.color="rgb(17, 17, 17)";break}},t.prototype.showHideScanTypeSwapLink=function(e){this.scanTypeSelector.hasMoreThanOneScanType()&&(e!==!0&&(e=!1),this.sectionSwapAllowed=e,this.getDashboardSectionSwapLink().style.display=e?"inline-block":"none")},t.prototype.insertCameraScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){n.innerHTML="<br>",n.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(e.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=W4,this.cameraScanImage.alt=je.cameraScanAltText()},t.prototype.insertFileScanImageToScanRegion=function(){var e=this,n=document.getElementById(this.getScanRegionId());if(this.fileScanImage){n.innerHTML="<br>",n.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(i){n.innerHTML="<br>",n.appendChild(e.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=G4,this.fileScanImage.alt=je.fileScanAltText()},t.prototype.clearScanRegion=function(){var e=document.getElementById(this.getScanRegionId());e.innerHTML=""},t.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},t.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},t.prototype.getDashboardSectionSwapLinkId=function(){return Rn.SCAN_TYPE_CHANGE_ANCHOR_ID},t.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},t.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},t.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},t.prototype.getCameraPermissionButtonId=function(){return Rn.CAMERA_PERMISSION_BUTTON_ID},t.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},t.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},t.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},t}();function o8(){const[t,e]=ce.useState(""),[n,i]=ce.useState(!1);ce.useEffect(()=>{const l=new s8("reader",{fps:10,qrbox:{width:250,height:250}});l.render(h,x);function h(m){n||a(m)}function x(m){}return()=>l.clear()},[n]);const a=async l=>{i(!0);const h=Ec(Ic,`participants/${l}`);try{await WS(h,x=>(x&&(x.points=(x.points||0)+1),x)),e(l),navigator.vibrate&&navigator.vibrate(100)}catch(x){console.error("Transaction failed: ",x),alert("Error: Participant not found or connection issue.")}finally{setTimeout(()=>i(!1),2e3)}};return se.jsx("div",{className:"container",children:se.jsxs("div",{className:"card",children:[se.jsx("h1",{children:"Booth Scanner"}),se.jsx("p",{children:"Scan participant's QR code"}),se.jsx("div",{id:"reader",style:{width:"100%",marginTop:"1.5rem"}}),t&&se.jsxs("div",{style:{marginTop:"1.5rem",padding:"1rem",background:"#dcfce7",color:"#166534",borderRadius:"0.75rem",fontWeight:"bold"},children:[" Successfully added point to: ",t]}),n&&se.jsx("p",{style:{color:"var(--primary)",fontWeight:"bold"},children:"Processing..."}),se.jsxs("div",{style:{marginTop:"2rem",textAlign:"left",fontSize:"0.9rem",color:"#64748b"},children:[se.jsx("strong",{children:"Tips:"}),se.jsxs("ul",{style:{paddingLeft:"1.2rem"},children:[se.jsx("li",{children:"Make sure the user's screen is bright."}),se.jsx("li",{children:"Hold the phone steady for 1-2 seconds."})]})]})]})})}function a8(){const[t,e]=ce.useState([]);ce.useEffect(()=>{const i=Ec(Ic,"participants"),a=gw(i,l=>{const h=l.val();if(h){const x=Object.values(h).sort((m,g)=>g.points-m.points);e(x)}else e([])});return()=>a()},[]);const n=()=>{if(t.length===0){alert("No data to copy!");return}const i=t.map(a=>`${a.nickname}*${a.points}`).join(", ");navigator.clipboard.writeText(i),alert("Copied to clipboard!")};return se.jsx("div",{className:"container",style:{maxWidth:"600px"},children:se.jsxs("div",{className:"card",style:{textAlign:"left"},children:[se.jsx("h1",{style:{textAlign:"center"},children:"Admin Dashboard"}),se.jsxs("div",{style:{marginBottom:"2rem"},children:[se.jsxs("p",{children:["Total Participants: ",se.jsx("strong",{children:t.length})]}),se.jsx("button",{onClick:n,children:" Copy Raffle List (Text)"})]}),se.jsx("div",{style:{overflowX:"auto"},children:se.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[se.jsx("thead",{children:se.jsxs("tr",{style:{borderBottom:"2px solid #e2e8f0"},children:[se.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Nickname"}),se.jsx("th",{style:{padding:"12px",textAlign:"right"},children:"Points"})]})}),se.jsxs("tbody",{children:[t.map(i=>se.jsxs("tr",{style:{borderBottom:"1px solid #f1f5f9"},children:[se.jsx("td",{style:{padding:"12px"},children:i.nickname}),se.jsx("td",{style:{padding:"12px",textAlign:"right",fontWeight:"bold"},children:i.points})]},i.nickname)),t.length===0&&se.jsx("tr",{children:se.jsx("td",{colSpan:"2",style:{padding:"2rem",textAlign:"center",color:"#94a3b8"},children:"No participants yet."})})]})]})}),se.jsx("p",{style:{marginTop:"2rem",fontSize:"0.8rem",color:"#94a3b8",textAlign:"center"},children:"Data updates in real-time."})]})})}function l8(){return se.jsx(Z_,{children:se.jsxs(X_,{children:[se.jsx(Ml,{path:"/",element:se.jsx(_4,{})}),se.jsx(Ml,{path:"/scan",element:se.jsx(o8,{})}),se.jsx(Ml,{path:"/admin",element:se.jsx(a8,{})})]})})}xf.createRoot(document.getElementById("root")).render(se.jsx(Et.StrictMode,{children:se.jsx(l8,{})}));
